(function(){"use strict";var t=typeof self<"u"?self:{};function e(){throw Error("Invalid UTF8")}function n(oa,ba){return ba=String.fromCharCode.apply(null,ba),oa==null?ba:oa+ba}let r,i;const s=typeof TextDecoder<"u";let o;const a=typeof TextEncoder<"u";function c(oa){if(a)oa=(o||(o=new TextEncoder)).encode(oa);else{let wa=0;const xa=new Uint8Array(3*oa.length);for(let Sa=0;Sa<oa.length;Sa++){var ba=oa.charCodeAt(Sa);if(ba<128)xa[wa++]=ba;else{if(ba<2048)xa[wa++]=ba>>6|192;else{if(ba>=55296&&ba<=57343){if(ba<=56319&&Sa<oa.length){const va=oa.charCodeAt(++Sa);if(va>=56320&&va<=57343){ba=1024*(ba-55296)+va-56320+65536,xa[wa++]=ba>>18|240,xa[wa++]=ba>>12&63|128,xa[wa++]=ba>>6&63|128,xa[wa++]=63&ba|128;continue}Sa--}ba=65533}xa[wa++]=ba>>12|224,xa[wa++]=ba>>6&63|128}xa[wa++]=63&ba|128}}oa=wa===xa.length?xa:xa.subarray(0,wa)}return oa}var h,u;e:{for(var l=["CLOSURE_FLAGS"],d=t,f=0;f<l.length;f++)if((d=d[l[f]])==null){u=null;break e}u=d}var p,g=u&&u[610401301];h=g!=null&&g;const m=t.navigator;function y(oa){return!!h&&!!p&&p.brands.some((({brand:ba})=>ba&&ba.indexOf(oa)!=-1))}function _$1(oa){var ba;return(ba=t.navigator)&&(ba=ba.userAgent)||(ba=""),ba.indexOf(oa)!=-1}function v(){return!!h&&!!p&&p.brands.length>0}function E(){return v()?y("Chromium"):(_$1("Chrome")||_$1("CriOS"))&&!(!v()&&_$1("Edge"))||_$1("Silk")}function w(oa){return w[" "](oa),oa}p=m&&m.userAgentData||null,w[" "]=function(){};var T=!v()&&(_$1("Trident")||_$1("MSIE"));!_$1("Android")||E(),E(),_$1("Safari")&&(E()||!v()&&_$1("Coast")||!v()&&_$1("Opera")||!v()&&_$1("Edge")||(v()?y("Microsoft Edge"):_$1("Edg/"))||v()&&y("Opera"));var A={},b=null;function k(oa){const ba=oa.length;let wa=3*ba/4;wa%3?wa=Math.floor(wa):"=.".indexOf(oa[ba-1])!=-1&&(wa="=.".indexOf(oa[ba-2])!=-1?wa-2:wa-1);const xa=new Uint8Array(wa);let Sa=0;return(function(va,Ea){function La(Ta){for(;eu<va.length;){const Aa=va.charAt(eu++),ka=b[Aa];if(ka!=null)return ka;if(!/^[\s\xa0]*$/.test(Aa))throw Error("Unknown base64 encoding at char: "+Aa)}return Ta}S();let eu=0;for(;;){const Ta=La(-1),Aa=La(0),ka=La(64),ru=La(64);if(ru===64&&Ta===-1)break;Ea(Ta<<2|Aa>>4),ka!=64&&(Ea(Aa<<4&240|ka>>2),ru!=64&&Ea(ka<<6&192|ru))}})(oa,(function(va){xa[Sa++]=va})),Sa!==wa?xa.subarray(0,Sa):xa}function S(){if(!b){b={};var oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ba=["+/=","+/","-_=","-_.","-_"];for(let wa=0;wa<5;wa++){const xa=oa.concat(ba[wa].split(""));A[wa]=xa;for(let Sa=0;Sa<xa.length;Sa++){const va=xa[Sa];b[va]===void 0&&(b[va]=Sa)}}}}var x=typeof Uint8Array<"u",L$1=!T&&typeof btoa=="function";function R$1(oa){if(!L$1){var ba;ba===void 0&&(ba=0),S(),ba=A[ba];var wa=Array(Math.floor(oa.length/3)),xa=ba[64]||"";let eu=0,Ta=0;for(;eu<oa.length-2;eu+=3){var Sa=oa[eu],va=oa[eu+1],Ea=oa[eu+2],La=ba[Sa>>2];Sa=ba[(3&Sa)<<4|va>>4],va=ba[(15&va)<<2|Ea>>6],Ea=ba[63&Ea],wa[Ta++]=La+Sa+va+Ea}switch(La=0,Ea=xa,oa.length-eu){case 2:Ea=ba[(15&(La=oa[eu+1]))<<2]||xa;case 1:oa=oa[eu],wa[Ta]=ba[oa>>2]+ba[(3&oa)<<4|La>>4]+Ea+xa}return wa.join("")}for(ba="",wa=0,xa=oa.length-10240;wa<xa;)ba+=String.fromCharCode.apply(null,oa.subarray(wa,wa+=10240));return ba+=String.fromCharCode.apply(null,wa?oa.subarray(wa):oa),btoa(ba)}const F=/[-_.]/g,I={"-":"+",_:"/",".":"="};function M(oa){return I[oa]||""}function P(oa){if(!L$1)return k(oa);F.test(oa)&&(oa=oa.replace(F,M)),oa=atob(oa);const ba=new Uint8Array(oa.length);for(let wa=0;wa<oa.length;wa++)ba[wa]=oa.charCodeAt(wa);return ba}function O(oa){return x&&oa!=null&&oa instanceof Uint8Array}var C={};function U$1(){return B||(B=new N(null,C))}function D(oa){j(C);var ba=oa.g;return(ba=ba==null||O(ba)?ba:typeof ba=="string"?P(ba):null)==null?ba:oa.g=ba}var N=class{h(){return new Uint8Array(D(this)||0)}constructor(oa,ba){if(j(ba),this.g=oa,oa!=null&&oa.length===0)throw Error("ByteString should be constructed with non-empty values")}};let B,G;function j(oa){if(oa!==C)throw Error("illegal external caller")}function V(oa,ba){oa.__closure__error__context__984382||(oa.__closure__error__context__984382={}),oa.__closure__error__context__984382.severity=ba}function X(oa){return V(oa=Error(oa),"warning"),oa}var H=typeof Symbol=="function"&&typeof Symbol()=="symbol",W$1=new Set;function z(oa,ba,wa=!1,xa=!1){return oa=typeof Symbol=="function"&&typeof Symbol()=="symbol"?xa&&Symbol.for&&oa?Symbol.for(oa):oa!=null?Symbol(oa):Symbol():ba,wa&&W$1.add(oa),oa}var K=z("jas",void 0,!0,!0),Y=z(void 0,"0di"),$$1=z(void 0,"2ex"),q$1=z(void 0,"1oa",!0),J=z(void 0,Symbol(),!0);const Z$1=H?K:"Ga",Q={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},tt$1=Object.defineProperties;function et(oa,ba){H||Z$1 in oa||tt$1(oa,Q),oa[Z$1]|=ba}function nt$1(oa,ba){H||Z$1 in oa||tt$1(oa,Q),oa[Z$1]=ba}function rt(oa){return et(oa,34),oa}function it(oa,ba){nt$1(ba,-30975&(0|oa))}function st(oa,ba){nt$1(ba,-30941&(34|oa))}function ot(){return typeof BigInt=="function"}function at(oa){return Array.prototype.slice.call(oa)}var ct,ht$1={},ut$1={};function lt$1(oa){return!(!oa||typeof oa!="object"||oa.Ia!==ut$1)}function dt$1(oa){return oa!==null&&typeof oa=="object"&&!Array.isArray(oa)&&oa.constructor===Object}function ft$1(oa,ba){if(oa!=null){if(typeof oa=="string")oa=oa?new N(oa,C):U$1();else if(oa.constructor!==N)if(O(oa))oa=oa.length?new N(new Uint8Array(oa),C):U$1();else{if(!ba)throw Error();oa=void 0}}return oa}function pt$1(oa){return!(!Array.isArray(oa)||oa.length)&&!!(1&(0|oa[Z$1]))}const gt=[];function mt$1(oa){if(2&oa)throw Error()}nt$1(gt,55),ct=Object.freeze(gt);class yt{constructor(ba,wa,xa){this.l=0,this.g=ba,this.h=wa,this.m=xa}next(){if(this.l<this.g.length){const ba=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,ba):ba}}return{done:!0,value:void 0}}[Symbol.iterator](){return new yt(this.g,this.h,this.m)}}function _t$1(oa){return J?oa[J]:void 0}var vt$1=Object.freeze({});function Et(oa){return oa.Qa=!0,oa}var wt$1=Et((oa=>typeof oa=="number")),Tt=Et((oa=>typeof oa=="string")),At=Et((oa=>typeof oa=="boolean")),bt$1=typeof t.BigInt=="function"&&typeof t.BigInt(0)=="bigint",kt$1=Et((oa=>bt$1?oa>=xt&&oa<=Rt:oa[0]==="-"?Ft$1(oa,St$1):Ft$1(oa,Lt)));const St$1=Number.MIN_SAFE_INTEGER.toString(),xt=bt$1?BigInt(Number.MIN_SAFE_INTEGER):void 0,Lt=Number.MAX_SAFE_INTEGER.toString(),Rt=bt$1?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Ft$1(oa,ba){if(oa.length>ba.length)return!1;if(oa.length<ba.length||oa===ba)return!0;for(let wa=0;wa<oa.length;wa++){const xa=oa[wa],Sa=ba[wa];if(xa>Sa)return!1;if(xa<Sa)return!0}}const It=typeof Uint8Array.prototype.slice=="function";let Mt,Pt=0,Ot=0;function Ct$1(oa){const ba=oa>>>0;Pt=ba,Ot=(oa-ba)/4294967296>>>0}function Ut$1(oa){if(oa<0){Ct$1(-oa);const[ba,wa]=Xt$1(Pt,Ot);Pt=ba>>>0,Ot=wa>>>0}else Ct$1(oa)}function Dt(oa){const ba=Mt||(Mt=new DataView(new ArrayBuffer(8)));ba.setFloat32(0,+oa,!0),Ot=0,Pt=ba.getUint32(0,!0)}function Nt(oa,ba){const wa=4294967296*ba+(oa>>>0);return Number.isSafeInteger(wa)?wa:Gt(oa,ba)}function Bt(oa,ba){const wa=2147483648&ba;return wa&&(ba=~ba>>>0,(oa=1+~oa>>>0)==0&&(ba=ba+1>>>0)),typeof(oa=Nt(oa,ba))=="number"?wa?-oa:oa:wa?"-"+oa:oa}function Gt(oa,ba){if(oa>>>=0,(ba>>>=0)<=2097151)var wa=""+(4294967296*ba+oa);else ot()?wa=""+(BigInt(ba)<<BigInt(32)|BigInt(oa)):(oa=(16777215&oa)+6777216*(wa=16777215&(oa>>>24|ba<<8))+6710656*(ba=ba>>16&65535),wa+=8147497*ba,ba*=2,oa>=1e7&&(wa+=oa/1e7>>>0,oa%=1e7),wa>=1e7&&(ba+=wa/1e7>>>0,wa%=1e7),wa=ba+jt$1(wa)+jt$1(oa));return wa}function jt$1(oa){return oa=String(oa),"0000000".slice(oa.length)+oa}function Vt$1(oa){if(oa.length<16)Ut$1(Number(oa));else if(ot())oa=BigInt(oa),Pt=Number(oa&BigInt(4294967295))>>>0,Ot=Number(oa>>BigInt(32)&BigInt(4294967295));else{const ba=+(oa[0]==="-");Ot=Pt=0;const wa=oa.length;for(let xa=ba,Sa=(wa-ba)%6+ba;Sa<=wa;xa=Sa,Sa+=6){const va=Number(oa.slice(xa,Sa));Ot*=1e6,Pt=1e6*Pt+va,Pt>=4294967296&&(Ot+=Math.trunc(Pt/4294967296),Ot>>>=0,Pt>>>=0)}if(ba){const[xa,Sa]=Xt$1(Pt,Ot);Pt=xa,Ot=Sa}}}function Xt$1(oa,ba){return ba=~ba,oa?oa=1+~oa:ba+=1,[oa,ba]}const Ht=typeof BigInt=="function"?BigInt.asIntN:void 0,Wt=typeof BigInt=="function"?BigInt.asUintN:void 0,zt$1=Number.isSafeInteger,Kt=Number.isFinite,Yt=Math.trunc;function $t$1(oa){return oa==null||typeof oa=="number"?oa:oa==="NaN"||oa==="Infinity"||oa==="-Infinity"?Number(oa):void 0}function qt(oa){return oa==null||typeof oa=="boolean"?oa:typeof oa=="number"?!!oa:void 0}const Jt$1=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Zt$1(oa){switch(typeof oa){case"bigint":return!0;case"number":return Kt(oa);case"string":return Jt$1.test(oa);default:return!1}}function Qt(oa){if(oa==null)return oa;if(typeof oa=="string"&&oa)oa=+oa;else if(typeof oa!="number")return;return Kt(oa)?0|oa:void 0}function te$1(oa){if(oa==null)return oa;if(typeof oa=="string"&&oa)oa=+oa;else if(typeof oa!="number")return;return Kt(oa)?oa>>>0:void 0}function ee$1(oa){if(oa[0]==="-")return!1;const ba=oa.length;return ba<20||ba===20&&Number(oa.substring(0,6))<184467}function ne(oa){return oa=Yt(oa),zt$1(oa)||(Ut$1(oa),oa=Bt(Pt,Ot)),oa}function re(oa){var ba=Yt(Number(oa));if(zt$1(ba))return String(ba);if((ba=oa.indexOf("."))!==-1&&(oa=oa.substring(0,ba)),ba=oa.length,!(oa[0]==="-"?ba<20||ba===20&&Number(oa.substring(0,7))>-922337:ba<19||ba===19&&Number(oa.substring(0,6))<922337))if(Vt$1(oa),oa=Pt,2147483648&(ba=Ot))if(ot())oa=""+(BigInt(0|ba)<<BigInt(32)|BigInt(oa>>>0));else{const[wa,xa]=Xt$1(oa,ba);oa="-"+Gt(wa,xa)}else oa=Gt(oa,ba);return oa}function ie(oa){return oa==null?oa:typeof oa=="bigint"?(kt$1(oa)?oa=Number(oa):(oa=Ht(64,oa),oa=kt$1(oa)?Number(oa):String(oa)),oa):Zt$1(oa)?typeof oa=="number"?ne(oa):re(oa):void 0}function se(oa){if(oa==null)return oa;var ba=typeof oa;if(ba==="bigint")return String(Wt(64,oa));if(Zt$1(oa)){if(ba==="string")return ba=Yt(Number(oa)),zt$1(ba)&&ba>=0?oa=String(ba):((ba=oa.indexOf("."))!==-1&&(oa=oa.substring(0,ba)),ee$1(oa)||(Vt$1(oa),oa=Gt(Pt,Ot))),oa;if(ba==="number")return(oa=Yt(oa))>=0&&zt$1(oa)?oa:(function(wa){if(wa<0){Ut$1(wa);var xa=Gt(Pt,Ot);return wa=Number(xa),zt$1(wa)?wa:xa}return ee$1(xa=String(wa))?xa:(Ut$1(wa),Nt(Pt,Ot))})(oa)}}function oe$1(oa){if(typeof oa!="string")throw Error();return oa}function ae$1(oa){if(oa!=null&&typeof oa!="string")throw Error();return oa}function ce$1(oa){return oa==null||typeof oa=="string"?oa:void 0}function he(oa,ba,wa,xa){if(oa!=null&&typeof oa=="object"&&oa.W===ht$1)return oa;if(!Array.isArray(oa))return wa?2&xa?((oa=ba[Y])||(rt((oa=new ba).u),oa=ba[Y]=oa),ba=oa):ba=new ba:ba=void 0,ba;let Sa=wa=0|oa[Z$1];return Sa===0&&(Sa|=32&xa),Sa|=2&xa,Sa!==wa&&nt$1(oa,Sa),new ba(oa)}function ue(oa,ba,wa){if(ba)e:{if(!Zt$1(ba=oa))throw X("int64");switch(typeof ba){case"string":ba=re(ba);break e;case"bigint":if(oa=ba=Ht(64,ba),Tt(oa)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(oa))throw Error(String(oa))}else if(wt$1(oa)&&!Number.isSafeInteger(oa))throw Error(String(oa));ba=bt$1?BigInt(ba):At(ba)?ba?"1":"0":Tt(ba)?ba.trim()||"0":String(ba);break e;default:ba=ne(ba)}}else ba=ie(oa);return typeof(wa=(oa=ba)==null?wa?0:void 0:oa)=="string"&&zt$1(ba=+wa)?ba:wa}const le$1={};let de=(function(){try{return w(new class extends Map{constructor(){super()}}),!1}catch{return!0}})(),fe$1=class{constructor(){this.g=new Map}get(ba){return this.g.get(ba)}set(ba,wa){return this.g.set(ba,wa),this.size=this.g.size,this}delete(ba){return ba=this.g.delete(ba),this.size=this.g.size,ba}clear(){this.g.clear(),this.size=this.g.size}has(ba){return this.g.has(ba)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(ba,wa){return this.g.forEach(ba,wa)}[Symbol.iterator](){return this.entries()}};const pe=de?(Object.setPrototypeOf(fe$1.prototype,Map.prototype),Object.defineProperties(fe$1.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),fe$1):class extends Map{constructor(){super()}};function ge(oa){return oa}function me$1(oa){if(2&oa.L)throw Error("Cannot mutate an immutable Map")}var ye$1=class extends pe{constructor(ba,wa,xa=ge,Sa=ge){super();let va=0|ba[Z$1];va|=64,nt$1(ba,va),this.L=va,this.S=wa,this.R=xa,this.Y=this.S?_e:Sa;for(let Ea=0;Ea<ba.length;Ea++){const La=ba[Ea],eu=xa(La[0],!1,!0);let Ta=La[1];wa?Ta===void 0&&(Ta=null):Ta=Sa(La[1],!1,!0,void 0,void 0,va),super.set(eu,Ta)}}na(ba=ve){if(this.size!==0)return this.X(ba)}X(ba=ve){const wa=[],xa=super.entries();for(var Sa;!(Sa=xa.next()).done;)(Sa=Sa.value)[0]=ba(Sa[0]),Sa[1]=ba(Sa[1]),wa.push(Sa);return wa}clear(){me$1(this),super.clear()}delete(ba){return me$1(this),super.delete(this.R(ba,!0,!1))}entries(){var ba=this.ma();return new yt(ba,Ee$1,this)}keys(){return this.Ha()}values(){var ba=this.ma();return new yt(ba,ye$1.prototype.get,this)}forEach(ba,wa){super.forEach(((xa,Sa)=>{ba.call(wa,this.get(Sa),Sa,this)}))}set(ba,wa){return me$1(this),(ba=this.R(ba,!0,!1))==null?this:wa==null?(super.delete(ba),this):super.set(ba,this.Y(wa,!0,!0,this.S,!1,this.L))}Na(ba){const wa=this.R(ba[0],!1,!0);ba=ba[1],ba=this.S?ba===void 0?null:ba:this.Y(ba,!1,!0,void 0,!1,this.L),super.set(wa,ba)}has(ba){return super.has(this.R(ba,!1,!1))}get(ba){ba=this.R(ba,!1,!1);const wa=super.get(ba);if(wa!==void 0){var xa=this.S;return xa?((xa=this.Y(wa,!1,!0,xa,this.ra,this.L))!==wa&&super.set(ba,xa),xa):wa}}ma(){return Array.from(super.keys())}Ha(){return super.keys()}[Symbol.iterator](){return this.entries()}};function _e(oa,ba,wa,xa,Sa,va){return oa=he(oa,xa,wa,va),Sa&&(oa=Oe$1(oa)),oa}function ve(oa){return oa}function Ee$1(oa){return[oa,this.get(oa)]}let we,Te,Ae;function be$1(){return we||(we=new ye$1(rt([]),void 0,void 0,void 0,le$1))}function ke(oa,ba,wa,xa,Sa){if(oa!=null){if(Array.isArray(oa))oa=pt$1(oa)?void 0:Sa&&2&(0|oa[Z$1])?oa:Se(oa,ba,wa,xa!==void 0,Sa);else if(dt$1(oa)){const va={};for(let Ea in oa)va[Ea]=ke(oa[Ea],ba,wa,xa,Sa);oa=va}else oa=ba(oa,xa);return oa}}function Se(oa,ba,wa,xa,Sa){const va=xa||wa?0|oa[Z$1]:0,Ea=xa?!!(32&va):void 0;xa=at(oa);for(let La=0;La<xa.length;La++)xa[La]=ke(xa[La],ba,wa,Ea,Sa);return wa&&((oa=_t$1(oa))&&(xa[J]=at(oa)),wa(va,xa)),xa}function xe$1(oa){return ke(oa,Le,void 0,void 0,!1)}function Le(oa){return oa.W===ht$1?oa.toJSON():oa instanceof ye$1?oa.na(xe$1):(function(ba){switch(typeof ba){case"number":return isFinite(ba)?ba:String(ba);case"bigint":return kt$1(ba)?Number(ba):String(ba);case"boolean":return ba?1:0;case"object":if(ba)if(Array.isArray(ba)){if(pt$1(ba))return}else{if(O(ba))return R$1(ba);if(ba instanceof N){const wa=ba.g;return wa==null?"":typeof wa=="string"?wa:ba.g=R$1(wa)}if(ba instanceof ye$1)return ba.na()}}return ba})(oa)}function Re$1(oa){return Se(oa,Le,void 0,void 0,!1)}function Fe$1(oa,ba,wa){return oa=Ie(oa,ba[0],ba[1],wa?1:2),ba!==Te&&wa&&et(oa,16384),oa}function Ie(oa,ba,wa,xa){if(oa==null){var Sa=96;wa?(oa=[wa],Sa|=512):oa=[],ba&&(Sa=-33521665&Sa|(1023&ba)<<15)}else{if(!Array.isArray(oa))throw Error("narr");if(2048&(Sa=0|oa[Z$1]))throw Error("farr");if(64&Sa)return oa;if(xa===1||xa===2||(Sa|=64),wa&&(Sa|=512,wa!==oa[0]))throw Error("mid");e:{if(xa=(wa=oa).length){const va=xa-1;if(dt$1(wa[va])){if((ba=va-(512&(Sa|=256)?0:-1))>=1024)throw Error("pvtlmt");Sa=-33521665&Sa|(1023&ba)<<15;break e}}if(ba){if((ba=Math.max(ba,xa-(512&Sa?0:-1)))>1024)throw Error("spvt");Sa=-33521665&Sa|(1023&ba)<<15}}}return nt$1(oa,Sa),oa}function Me(oa,ba,wa=st){if(oa!=null){if(x&&oa instanceof Uint8Array)return ba?oa:new Uint8Array(oa);if(Array.isArray(oa)){var xa=0|oa[Z$1];return 2&xa?oa:(ba&&(ba=xa===0||!!(32&xa)&&!(64&xa||!(16&xa))),ba?(nt$1(oa,-12293&(34|xa)),oa):Se(oa,Me,4&xa?st:wa,!0,!0))}return oa.W===ht$1?oa=2&(xa=0|(wa=oa.u)[Z$1])?oa:new oa.constructor(Pe$1(wa,xa,!0)):oa instanceof ye$1&&!(2&oa.L)&&(wa=rt(oa.X(Me)),oa=new ye$1(wa,oa.S,oa.R,oa.Y)),oa}}function Pe$1(oa,ba,wa){const xa=wa||2&ba?st:it,Sa=!!(32&ba);return oa=(function(va,Ea,La){const eu=at(va);var Ta=eu.length;const Aa=256&Ea?eu[Ta-1]:void 0;for(Ta+=Aa?-1:0,Ea=512&Ea?1:0;Ea<Ta;Ea++)eu[Ea]=La(eu[Ea]);if(Aa){Ea=eu[Ea]={};for(const ka in Aa)Ea[ka]=La(Aa[ka])}return(va=_t$1(va))&&(eu[J]=at(va)),eu})(oa,ba,(va=>Me(va,Sa,xa))),et(oa,32|(wa?2:0)),oa}function Oe$1(oa){const ba=oa.u,wa=0|ba[Z$1];return 2&wa?new oa.constructor(Pe$1(ba,wa,!1)):oa}function Ce(oa,ba){return Ue(oa=oa.u,0|oa[Z$1],ba)}function Ue(oa,ba,wa,xa){if(wa===-1)return null;var Sa=wa+(512&ba?0:-1);const va=oa.length-1;return Sa>=va&&256&ba?oa[va][wa]:xa&&256&ba&&(ba=oa[va][wa])!=null?(oa[Sa]!=null&&$$1!=null&&((Sa=(oa=G??(G={}))[$$1]||0)>=4||(oa[$$1]=Sa+1,V(oa=Error(),"incident"),(function(Ea){t.setTimeout((()=>{throw Ea}),0)})(oa))),ba):Sa<=va?oa[Sa]:void 0}function De$1(oa,ba,wa){const xa=oa.u;let Sa=0|xa[Z$1];return mt$1(Sa),Ne(xa,Sa,ba,wa),oa}function Ne(oa,ba,wa,xa){const Sa=512&ba?0:-1,va=wa+Sa;var Ea=oa.length-1;return va>=Ea&&256&ba?(oa[Ea][wa]=xa,ba):va<=Ea?(oa[va]=xa,256&ba&&wa in(oa=oa[Ea])&&delete oa[wa],ba):(xa!==void 0&&(wa>=(Ea=ba>>15&1023||536870912)?xa!=null&&(oa[Ea+Sa]={[wa]:xa},nt$1(oa,ba|=256)):oa[va]=xa),ba)}function Be(oa,ba){let wa=0|(oa=oa.u)[Z$1];const xa=Ue(oa,wa,ba),Sa=$t$1(xa);return Sa!=null&&Sa!==xa&&Ne(oa,wa,ba,Sa),Sa}function Ge$1(oa){let ba=0|(oa=oa.u)[Z$1];const wa=Ue(oa,ba,1),xa=ft$1(wa,!0);return xa!=null&&xa!==wa&&Ne(oa,ba,1,xa),xa}function je(){return vt$1===void 0?2:4}function Ve$1(oa,ba,wa,xa,Sa){const va=oa.u,Ea=2&(oa=0|va[Z$1])?1:xa;Sa=!!Sa;let La=0|(xa=Xe$1(va,oa,ba))[Z$1];if(!(4&La)){4&La&&(xa=at(xa),La=an$1(La,oa),oa=Ne(va,oa,ba,xa));let eu=0,Ta=0;for(;eu<xa.length;eu++){const Aa=wa(xa[eu]);Aa!=null&&(xa[Ta++]=Aa)}Ta<eu&&(xa.length=Ta),La=He(La,oa),wa=-4097&(20|La),La=wa&=-8193,nt$1(xa,La),2&La&&Object.freeze(xa)}return Ea===1||Ea===4&&32&La?We$1(La)||(Sa=La,La|=2,La!==Sa&&nt$1(xa,La),Object.freeze(xa)):(Ea===2&&We$1(La)&&(xa=at(xa),La=an$1(La,oa),La=cn$1(La,oa,Sa),nt$1(xa,La),oa=Ne(va,oa,ba,xa)),We$1(La)||(ba=La,La=cn$1(La,oa,Sa),La!==ba&&nt$1(xa,La))),xa}function Xe$1(oa,ba,wa,xa){return oa=Ue(oa,ba,wa,xa),Array.isArray(oa)?oa:ct}function He(oa,ba){return oa===0&&(oa=an$1(oa,ba)),1|oa}function We$1(oa){return!!(2&oa)&&!!(4&oa)||!!(2048&oa)}function ze(oa){oa=at(oa);for(let ba=0;ba<oa.length;ba++){const wa=oa[ba]=at(oa[ba]);Array.isArray(wa[1])&&(wa[1]=rt(wa[1]))}return oa}function Ke$1(oa,ba,wa,xa){let Sa=0|(oa=oa.u)[Z$1];mt$1(Sa),Ne(oa,Sa,ba,(xa==="0"?Number(wa)===0:wa===xa)?void 0:wa)}function Ye$1(oa,ba,wa,xa,Sa){mt$1(ba);var va=!(!(64&ba)&&16384&ba);const Ea=(Sa=Xe$1(oa,ba,wa,Sa))!==ct;if(va||!Ea){let La=va=Ea?0|Sa[Z$1]:0;(!Ea||2&La||We$1(La)||4&La&&!(32&La))&&(Sa=at(Sa),La=an$1(La,ba),ba=Ne(oa,ba,wa,Sa)),La=-13&He(La,ba),La=cn$1(xa?-17&La:16|La,ba,!0),La!==va&&nt$1(Sa,La)}return Sa}function $e(oa,ba){var wa=vs$1;return Ze(qe(oa=oa.u),oa,0|oa[Z$1],wa)===ba?ba:-1}function qe(oa){if(H)return oa[q$1]??(oa[q$1]=new Map);if(q$1 in oa)return oa[q$1];const ba=new Map;return Object.defineProperty(oa,q$1,{value:ba}),ba}function Je(oa,ba,wa,xa){const Sa=qe(oa),va=Ze(Sa,oa,ba,wa);return va!==xa&&(va&&(ba=Ne(oa,ba,va)),Sa.set(wa,xa)),ba}function Ze(oa,ba,wa,xa){let Sa=oa.get(xa);if(Sa!=null)return Sa;Sa=0;for(let va=0;va<xa.length;va++){const Ea=xa[va];Ue(ba,wa,Ea)!=null&&(Sa!==0&&(wa=Ne(ba,wa,Sa)),Sa=Ea)}return oa.set(xa,Sa),Sa}function Qe(oa,ba,wa,xa){let Sa,va=0|oa[Z$1];if((xa=Ue(oa,va,wa,xa))!=null&&xa.W===ht$1)return(ba=Oe$1(xa))!==xa&&Ne(oa,va,wa,ba),ba.u;if(Array.isArray(xa)){const Ea=0|xa[Z$1];Sa=2&Ea?Fe$1(Pe$1(xa,Ea,!1),ba,!0):64&Ea?xa:Fe$1(Sa,ba,!0)}else Sa=Fe$1(void 0,ba,!0);return Sa!==xa&&Ne(oa,va,wa,Sa),Sa}function tn$1(oa,ba,wa,xa){let Sa=0|(oa=oa.u)[Z$1];return(ba=he(xa=Ue(oa,Sa,wa,xa),ba,!1,Sa))!==xa&&ba!=null&&Ne(oa,Sa,wa,ba),ba}function en$1(oa,ba,wa,xa=!1){if((ba=tn$1(oa,ba,wa,xa))==null)return ba;if(!(2&(xa=0|(oa=oa.u)[Z$1]))){const Sa=Oe$1(ba);Sa!==ba&&Ne(oa,xa,wa,ba=Sa)}return ba}function nn(oa,ba,wa,xa,Sa,va,Ea){oa=oa.u;var La=!!(2&ba);const eu=La?1:Sa;va=!!va,Ea&&(Ea=!La);var Ta=0|(Sa=Xe$1(oa,ba,xa))[Z$1];if(!(La=!!(4&Ta))){var Aa=Sa,ka=ba;const ru=!!(2&(Ta=He(Ta,ba)));ru&&(ka|=2);let nu=!ru,su=!0,uu=0,cu=0;for(;uu<Aa.length;uu++){const gu=he(Aa[uu],wa,!1,ka);if(gu instanceof wa){if(!ru){const hu=!!(2&(0|gu.u[Z$1]));nu&&(nu=!hu),su&&(su=hu)}Aa[cu++]=gu}}cu<uu&&(Aa.length=cu),Ta|=4,Ta=su?16|Ta:-17&Ta,nt$1(Aa,Ta=nu?8|Ta:-9&Ta),ru&&Object.freeze(Aa)}if(Ea&&!(8&Ta||!Sa.length&&(eu===1||eu===4&&32&Ta))){for(We$1(Ta)&&(Sa=at(Sa),Ta=an$1(Ta,ba),ba=Ne(oa,ba,xa,Sa)),wa=Sa,Ea=Ta,Aa=0;Aa<wa.length;Aa++)(Ta=wa[Aa])!==(ka=Oe$1(Ta))&&(wa[Aa]=ka);Ea|=8,nt$1(wa,Ea=wa.length?-17&Ea:16|Ea),Ta=Ea}return eu===1||eu===4&&32&Ta?We$1(Ta)||(ba=Ta,(Ta|=!Sa.length||16&Ta&&(!La||32&Ta)?2:2048)!==ba&&nt$1(Sa,Ta),Object.freeze(Sa)):(eu===2&&We$1(Ta)&&(nt$1(Sa=at(Sa),Ta=cn$1(Ta=an$1(Ta,ba),ba,va)),ba=Ne(oa,ba,xa,Sa)),We$1(Ta)||(xa=Ta,(Ta=cn$1(Ta,ba,va))!==xa&&nt$1(Sa,Ta))),Sa}function rn(oa,ba,wa){const xa=0|oa.u[Z$1];return nn(oa,xa,ba,wa,je(),!1,!(2&xa))}function sn$1(oa,ba,wa,xa){return xa==null&&(xa=void 0),De$1(oa,wa,xa)}function on(oa,ba,wa,xa){xa==null&&(xa=void 0);e:{let Sa=0|(oa=oa.u)[Z$1];if(mt$1(Sa),xa==null){const va=qe(oa);if(Ze(va,oa,Sa,wa)!==ba)break e;va.set(wa,0)}else Sa=Je(oa,Sa,wa,ba);Ne(oa,Sa,ba,xa)}}function an$1(oa,ba){return-2049&(oa=32|(2&ba?2|oa:-3&oa))}function cn$1(oa,ba,wa){return 32&ba&&wa||(oa&=-33),oa}function hn$1(oa,ba,wa,xa){const Sa=0|oa.u[Z$1];mt$1(Sa),oa=nn(oa,Sa,wa,ba,2,!0),xa=xa??new wa,oa.push(xa),oa[Z$1]=2&(0|xa.u[Z$1])?-9&oa[Z$1]:-17&oa[Z$1]}function un$1(oa,ba){return Qt(Ce(oa,ba))}function ln$1(oa,ba){return ce$1(Ce(oa,ba))}function dn$1(oa,ba){return Be(oa,ba)??0}function fn$1(oa,ba,wa){if(wa!=null&&typeof wa!="boolean")throw oa=typeof wa,Error(`Expected boolean but got ${oa!="object"?oa:wa?Array.isArray(wa)?"array":oa:"null"}: ${wa}`);De$1(oa,ba,wa)}function pn$1(oa,ba,wa){if(wa!=null){if(typeof wa!="number"||!Kt(wa))throw X("int32");wa|=0}De$1(oa,ba,wa)}function gn$1(oa,ba,wa){if(wa!=null&&typeof wa!="number")throw Error(`Value of float/double field must be a number, found ${typeof wa}: ${wa}`);De$1(oa,ba,wa)}function mn$1(oa,ba,wa){{const Ea=oa.u;let La=0|Ea[Z$1];if(mt$1(La),wa==null)Ne(Ea,La,ba);else{var xa=oa=0|wa[Z$1],Sa=We$1(oa),va=Sa||Object.isFrozen(wa);for(Sa||(oa=0),va||(wa=at(wa),xa=0,oa=cn$1(oa=an$1(oa,La),La,!0),va=!1),oa|=21,Sa=0;Sa<wa.length;Sa++){const eu=wa[Sa],Ta=oe$1(eu);Object.is(eu,Ta)||(va&&(wa=at(wa),xa=0,oa=cn$1(oa=an$1(oa,La),La,!0),va=!1),wa[Sa]=Ta)}oa!==xa&&(va&&(wa=at(wa),oa=cn$1(oa=an$1(oa,La),La,!0)),nt$1(wa,oa)),Ne(Ea,La,ba,wa)}}}function yn$1(oa,ba,wa){mt$1(0|oa.u[Z$1]),Ve$1(oa,ba,ce$1,2,!0).push(oe$1(wa))}function _n(oa,ba){return Error(`Invalid wire type: ${oa} (at position ${ba})`)}function vn(){return Error("Failed to read varint, encoding is invalid.")}function En$1(oa,ba){return Error(`Tried to read past the end of the data ${ba} > ${oa}`)}function wn(oa){if(typeof oa=="string")return{buffer:P(oa),N:!1};if(Array.isArray(oa))return{buffer:new Uint8Array(oa),N:!1};if(oa.constructor===Uint8Array)return{buffer:oa,N:!1};if(oa.constructor===ArrayBuffer)return{buffer:new Uint8Array(oa),N:!1};if(oa.constructor===N)return{buffer:D(oa)||new Uint8Array(0),N:!0};if(oa instanceof Uint8Array)return{buffer:new Uint8Array(oa.buffer,oa.byteOffset,oa.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Tn$1(oa,ba){let wa,xa=0,Sa=0,va=0;const Ea=oa.h;let La=oa.g;do wa=Ea[La++],xa|=(127&wa)<<va,va+=7;while(va<32&&128&wa);for(va>32&&(Sa|=(127&wa)>>4),va=3;va<32&&128&wa;va+=7)wa=Ea[La++],Sa|=(127&wa)<<va;if(Fn$1(oa,La),wa<128)return ba(xa>>>0,Sa>>>0);throw vn()}function An(oa){let ba=0,wa=oa.g;const xa=wa+10,Sa=oa.h;for(;wa<xa;){const va=Sa[wa++];if(ba|=va,(128&va)==0)return Fn$1(oa,wa),!!(127&ba)}throw vn()}function bn$1(oa){const ba=oa.h;let wa=oa.g,xa=ba[wa++],Sa=127&xa;if(128&xa&&(xa=ba[wa++],Sa|=(127&xa)<<7,128&xa&&(xa=ba[wa++],Sa|=(127&xa)<<14,128&xa&&(xa=ba[wa++],Sa|=(127&xa)<<21,128&xa&&(xa=ba[wa++],Sa|=xa<<28,128&xa&&128&ba[wa++]&&128&ba[wa++]&&128&ba[wa++]&&128&ba[wa++]&&128&ba[wa++])))))throw vn();return Fn$1(oa,wa),Sa}function kn$1(oa){return bn$1(oa)>>>0}function Sn(oa){var ba=oa.h;const wa=oa.g,xa=ba[wa],Sa=ba[wa+1],va=ba[wa+2];return ba=ba[wa+3],Fn$1(oa,oa.g+4),(xa<<0|Sa<<8|va<<16|ba<<24)>>>0}function xn(oa){var ba=Sn(oa);oa=2*(ba>>31)+1;const wa=ba>>>23&255;return ba&=8388607,wa==255?ba?NaN:oa*(1/0):wa==0?1401298464324817e-60*oa*ba:oa*Math.pow(2,wa-150)*(ba+8388608)}function Ln$1(oa){return bn$1(oa)}function Rn$1(oa,ba,{ba:wa=!1}={}){oa.ba=wa,ba&&(ba=wn(ba),oa.h=ba.buffer,oa.m=ba.N,oa.j=0,oa.l=oa.h.length,oa.g=oa.j)}function Fn$1(oa,ba){if(oa.g=ba,ba>oa.l)throw En$1(oa.l,ba)}function In(oa,ba){if(ba<0)throw Error(`Tried to read a negative byte length: ${ba}`);const wa=oa.g,xa=wa+ba;if(xa>oa.l)throw En$1(ba,oa.l-wa);return oa.g=xa,wa}function Mn$1(oa,ba){if(ba==0)return U$1();var wa=In(oa,ba);return oa.ba&&oa.m?wa=oa.h.subarray(wa,wa+ba):(oa=oa.h,wa=wa===(ba=wa+ba)?new Uint8Array(0):It?oa.slice(wa,ba):new Uint8Array(oa.subarray(wa,ba))),wa.length==0?U$1():new N(wa,C)}ye$1.prototype.toJSON=void 0,ye$1.prototype.Ia=ut$1;var Pn=[];function On(oa){var ba=oa.g;if(ba.g==ba.l)return!1;oa.l=oa.g.g;var wa=kn$1(oa.g);if(ba=wa>>>3,!((wa&=7)>=0&&wa<=5))throw _n(wa,oa.l);if(ba<1)throw Error(`Invalid field number: ${ba} (at position ${oa.l})`);return oa.m=ba,oa.h=wa,!0}function Cn$1(oa){switch(oa.h){case 0:oa.h!=0?Cn$1(oa):An(oa.g);break;case 1:Fn$1(oa=oa.g,oa.g+8);break;case 2:if(oa.h!=2)Cn$1(oa);else{var ba=kn$1(oa.g);Fn$1(oa=oa.g,oa.g+ba)}break;case 5:Fn$1(oa=oa.g,oa.g+4);break;case 3:for(ba=oa.m;;){if(!On(oa))throw Error("Unmatched start-group tag: stream EOF");if(oa.h==4){if(oa.m!=ba)throw Error("Unmatched end-group tag");break}Cn$1(oa)}break;default:throw _n(oa.h,oa.l)}}function Un$1(oa,ba,wa){const xa=oa.g.l,Sa=kn$1(oa.g),va=oa.g.g+Sa;let Ea=va-xa;if(Ea<=0&&(oa.g.l=va,wa(ba,oa,void 0,void 0,void 0),Ea=va-oa.g.g),Ea)throw Error(`Message parsing ended unexpectedly. Expected to read ${Sa} bytes, instead read ${Sa-Ea} bytes, either the data ended unexpectedly or the message misreported its own length`);return oa.g.g=va,oa.g.l=xa,ba}function Dn$1(oa){var ba=kn$1(oa.g),wa=In(oa=oa.g,ba);if(oa=oa.h,s){var xa,Sa=oa;(xa=i)||(xa=i=new TextDecoder("utf-8",{fatal:!0})),ba=wa+ba,Sa=wa===0&&ba===Sa.length?Sa:Sa.subarray(wa,ba);try{var va=xa.decode(Sa)}catch(La){if(r===void 0){try{xa.decode(new Uint8Array([128]))}catch{}try{xa.decode(new Uint8Array([97])),r=!0}catch{r=!1}}throw!r&&(i=void 0),La}}else{ba=(va=wa)+ba,wa=[];let La,eu=null;for(;va<ba;){var Ea=oa[va++];Ea<128?wa.push(Ea):Ea<224?va>=ba?e():(La=oa[va++],Ea<194||(192&La)!=128?(va--,e()):wa.push((31&Ea)<<6|63&La)):Ea<240?va>=ba-1?e():(La=oa[va++],(192&La)!=128||Ea===224&&La<160||Ea===237&&La>=160||(192&(xa=oa[va++]))!=128?(va--,e()):wa.push((15&Ea)<<12|(63&La)<<6|63&xa)):Ea<=244?va>=ba-2?e():(La=oa[va++],(192&La)!=128||La-144+(Ea<<28)>>30!=0||(192&(xa=oa[va++]))!=128||(192&(Sa=oa[va++]))!=128?(va--,e()):(Ea=(7&Ea)<<18|(63&La)<<12|(63&xa)<<6|63&Sa,Ea-=65536,wa.push(55296+(Ea>>10&1023),56320+(1023&Ea)))):e(),wa.length>=8192&&(eu=n(eu,wa),wa.length=0)}va=n(eu,wa)}return va}function Nn$1(oa){const ba=kn$1(oa.g);return Mn$1(oa.g,ba)}function Bn$1(oa,ba,wa){var xa=kn$1(oa.g);for(xa=oa.g.g+xa;oa.g.g<xa;)wa.push(ba(oa.g))}var Gn$1=[];function jn(oa){return oa}let Vn$1;function Xn$1(oa,ba,wa){ba.g?ba.m(oa,ba.g,ba.h,wa):ba.m(oa,ba.h,wa)}var Hn=class{constructor(oa,ba){this.u=Ie(oa,ba)}toJSON(){const oa=!Vn$1;try{return oa&&(Vn$1=Re$1),Wn$1(this)}finally{oa&&(Vn$1=void 0)}}l(){var oa=go$1;return oa.g?oa.l(this,oa.g,oa.h,!0):oa.l(this,oa.h,oa.defaultValue,!0)}clone(){const oa=this.u;return new this.constructor(Pe$1(oa,0|oa[Z$1],!1))}N(){return!!(2&(0|this.u[Z$1]))}};function Wn$1(oa){var ba=oa.u;{ba=(oa=Vn$1(ba))!==ba;let Ta=oa.length;if(Ta){var wa=oa[Ta-1],xa=dt$1(wa);xa?Ta--:wa=void 0;var Sa=oa;if(xa){e:{var va,Ea=wa,La=!1;if(Ea)for(let Aa in Ea)isNaN(+Aa)?(va??(va={}))[Aa]=Ea[Aa]:(xa=Ea[Aa],Array.isArray(xa)&&(pt$1(xa)||lt$1(xa)&&xa.size===0)&&(xa=null),xa==null&&(La=!0),xa!=null&&((va??(va={}))[Aa]=xa));if(La||(va=Ea),va)for(let Aa in va){La=va;break e}La=null}Ea=La==null?wa!=null:La!==wa}for(;Ta>0&&((va=Sa[Ta-1])==null||pt$1(va)||lt$1(va)&&va.size===0);Ta--)var eu=!0;(Sa!==oa||Ea||eu)&&(ba?(eu||Ea||La)&&(Sa.length=Ta):Sa=Array.prototype.slice.call(Sa,0,Ta),La&&Sa.push(La)),eu=Sa}else eu=oa}return eu}function zn$1(oa){return oa?/^\d+$/.test(oa)?(Vt$1(oa),new Kn$1(Pt,Ot)):null:Yn||(Yn=new Kn$1(0,0))}Hn.prototype.W=ht$1,Hn.prototype.toString=function(){try{return Vn$1=jn,Wn$1(this).toString()}finally{Vn$1=void 0}};var Kn$1=class{constructor(ba,wa){this.h=ba>>>0,this.g=wa>>>0}};let Yn;function $n$1(oa){return oa?/^-?\d+$/.test(oa)?(Vt$1(oa),new qn(Pt,Ot)):null:Jn$1||(Jn$1=new qn(0,0))}var qn=class{constructor(oa,ba){this.h=oa>>>0,this.g=ba>>>0}};let Jn$1;function Zn$1(oa,ba,wa){for(;wa>0||ba>127;)oa.g.push(127&ba|128),ba=(ba>>>7|wa<<25)>>>0,wa>>>=7;oa.g.push(ba)}function Qn$1(oa,ba){for(;ba>127;)oa.g.push(127&ba|128),ba>>>=7;oa.g.push(ba)}function tr(oa,ba){if(ba>=0)Qn$1(oa,ba);else{for(let wa=0;wa<9;wa++)oa.g.push(127&ba|128),ba>>=7;oa.g.push(1)}}function er(oa,ba){oa.g.push(ba>>>0&255),oa.g.push(ba>>>8&255),oa.g.push(ba>>>16&255),oa.g.push(ba>>>24&255)}function nr$1(oa,ba){ba.length!==0&&(oa.l.push(ba),oa.h+=ba.length)}function rr$1(oa,ba,wa){Qn$1(oa.g,8*ba+wa)}function ir$1(oa,ba){return rr$1(oa,ba,2),ba=oa.g.end(),nr$1(oa,ba),ba.push(oa.h),ba}function sr$1(oa,ba){var wa=ba.pop();for(wa=oa.h+oa.g.length()-wa;wa>127;)ba.push(127&wa|128),wa>>>=7,oa.h++;ba.push(wa),oa.h++}function or$1(oa,ba,wa){rr$1(oa,ba,2),Qn$1(oa.g,wa.length),nr$1(oa,oa.g.end()),nr$1(oa,wa)}function ar$1(oa,ba,wa,xa){wa!=null&&(ba=ir$1(oa,ba),xa(wa,oa),sr$1(oa,ba))}function cr$1(){const oa=class{constructor(){throw Error()}};return Object.setPrototypeOf(oa,oa.prototype),oa}var hr$1=cr$1(),ur$1=cr$1(),lr=cr$1(),dr$1=cr$1(),fr=cr$1(),pr$1=cr$1(),gr$1=cr$1(),mr$1=cr$1(),yr$1=cr$1(),_r=class{constructor(oa,ba,wa){this.g=oa,this.h=ba,oa=hr$1,this.l=!!oa&&wa===oa||!1}};function vr(oa,ba){return new _r(oa,ba,hr$1)}function Er$1(oa,ba,wa,xa,Sa){ar$1(oa,wa,Ir(ba,xa),Sa)}const wr=vr((function(oa,ba,wa,xa,Sa){return oa.h===2&&(Un$1(oa,Qe(ba,xa,wa),Sa),!0)}),Er$1),Tr$1=vr((function(oa,ba,wa,xa,Sa){return oa.h===2&&(Un$1(oa,Qe(ba,xa,wa,!0),Sa),!0)}),Er$1);var Ar=Symbol(),br$1=Symbol(),kr$1=Symbol(),Sr=Symbol();let xr$1,Lr$1;function Rr$1(oa,ba,wa,xa){var Sa=xa[oa];if(Sa)return Sa;(Sa={}).Pa=xa,Sa.V=(function(ka){switch(typeof ka){case"boolean":return Te||(Te=[0,void 0,!0]);case"number":return ka>0?void 0:ka===0?Ae||(Ae=[0,void 0]):[-ka,void 0];case"string":return[0,ka];case"object":return ka}})(xa[0]);var va=xa[1];let Ea=1;va&&va.constructor===Object&&(Sa.ga=va,typeof(va=xa[++Ea])=="function"&&(Sa.la=!0,xr$1??(xr$1=va),Lr$1??(Lr$1=xa[Ea+1]),va=xa[Ea+=2]));const La={};for(;va&&Array.isArray(va)&&va.length&&typeof va[0]=="number"&&va[0]>0;){for(var eu=0;eu<va.length;eu++)La[va[eu]]=va;va=xa[++Ea]}for(eu=1;va!==void 0;){let ka;typeof va=="number"&&(eu+=va,va=xa[++Ea]);var Ta=void 0;if(va instanceof _r?ka=va:(ka=wr,Ea--),ka==null?void 0:ka.l){va=xa[++Ea],Ta=xa;var Aa=Ea;typeof va=="function"&&(va=va(),Ta[Aa]=va),Ta=va}for(Aa=eu+1,typeof(va=xa[++Ea])=="number"&&va<0&&(Aa-=va,va=xa[++Ea]);eu<Aa;eu++){const ru=La[eu];Ta?wa(Sa,eu,ka,Ta,ru):ba(Sa,eu,ka,ru)}}return xa[oa]=Sa}function Fr(oa){return Array.isArray(oa)?oa[0]instanceof _r?oa:[Tr$1,oa]:[oa,void 0]}function Ir(oa,ba){return oa instanceof Hn?oa.u:Array.isArray(oa)?Fe$1(oa,ba,!1):void 0}function Mr$1(oa,ba,wa,xa){const Sa=wa.g;oa[ba]=xa?(va,Ea,La)=>Sa(va,Ea,La,xa):Sa}function Pr$1(oa,ba,wa,xa,Sa){const va=wa.g;let Ea,La;oa[ba]=(eu,Ta,Aa)=>va(eu,Ta,Aa,La||(La=Rr$1(br$1,Mr$1,Pr$1,xa).V),Ea||(Ea=Or(xa)),Sa)}function Or(oa){let ba=oa[kr$1];if(ba!=null)return ba;const wa=Rr$1(br$1,Mr$1,Pr$1,oa);return ba=wa.la?(xa,Sa)=>xr$1(xa,Sa,wa):(xa,Sa)=>{const va=0|xa[Z$1];for(;On(Sa)&&Sa.h!=4;){var Ea=Sa.m,La=wa[Ea];if(La==null){var eu=wa.ga;eu&&(eu=eu[Ea])&&(eu=Cr$1(eu))!=null&&(La=wa[Ea]=eu)}La!=null&&La(Sa,xa,Ea)||(Ea=(La=Sa).l,Cn$1(La),La.fa?La=void 0:(eu=La.g.g-Ea,La.g.g=Ea,La=Mn$1(La.g,eu)),Ea=xa,La&&((eu=Ea[J])?eu.push(La):Ea[J]=[La]))}return 16384&va&&rt(xa),!0},oa[kr$1]=ba}function Cr$1(oa){const ba=(oa=Fr(oa))[0].g;if(oa=oa[1]){const wa=Or(oa),xa=Rr$1(br$1,Mr$1,Pr$1,oa).V;return(Sa,va,Ea)=>ba(Sa,va,Ea,xa,wa)}return ba}function Ur$1(oa,ba,wa){oa[ba]=wa.h}function Dr$1(oa,ba,wa,xa){let Sa,va;const Ea=wa.h;oa[ba]=(La,eu,Ta)=>Ea(La,eu,Ta,va||(va=Rr$1(Ar,Ur$1,Dr$1,xa).V),Sa||(Sa=Nr$1(xa)))}function Nr$1(oa){let ba=oa[Sr];if(!ba){const wa=Rr$1(Ar,Ur$1,Dr$1,oa);ba=(xa,Sa)=>Br$1(xa,Sa,wa),oa[Sr]=ba}return ba}function Br$1(oa,ba,wa){for(var xa=0|oa[Z$1],Sa=512&xa?0:-1,va=oa.length,Ea=512&xa?1:0,La=va+(256&xa?-1:0);Ea<La;Ea++){const eu=oa[Ea];if(eu==null)continue;const Ta=Ea-Sa,Aa=Gr$1(wa,Ta);Aa&&Aa(ba,eu,Ta)}if(256&xa){xa=oa[va-1];for(const eu in xa)Sa=+eu,Number.isNaN(Sa)||(va=xa[Sa])!=null&&(La=Gr$1(wa,Sa))&&La(ba,va,Sa)}if(oa=_t$1(oa))for(nr$1(ba,ba.g.end()),wa=0;wa<oa.length;wa++)nr$1(ba,D(oa[wa])||new Uint8Array(0))}function Gr$1(oa,ba){var wa=oa[ba];if(wa)return wa;if((wa=oa.ga)&&(wa=wa[ba])){var xa=(wa=Fr(wa))[0].h;if(wa=wa[1]){const Sa=Nr$1(wa),va=Rr$1(Ar,Ur$1,Dr$1,wa).V;wa=oa.la?Lr$1(va,Sa):(Ea,La,eu)=>xa(Ea,La,eu,va,Sa)}else wa=xa;return oa[ba]=wa}}function jr(oa,ba){if(Array.isArray(ba)){var wa=0|ba[Z$1];if(4&wa)return ba;for(var xa=0,Sa=0;xa<ba.length;xa++){const va=oa(ba[xa]);va!=null&&(ba[Sa++]=va)}return Sa<xa&&(ba.length=Sa),nt$1(ba,-12289&(5|wa)),2&wa&&Object.freeze(ba),ba}}function Vr$1(oa,ba,wa){return new _r(oa,ba,wa)}function Xr(oa,ba,wa){return new _r(oa,ba,wa)}function Hr(oa,ba,wa){Ne(oa,0|oa[Z$1],ba,wa)}var Wr$1=vr((function(oa,ba,wa,xa,Sa){return oa.h===2&&(oa=Un$1(oa,Fe$1([void 0,void 0],xa,!0),Sa),mt$1(xa=0|ba[Z$1]),(Sa=Ue(ba,xa,wa))instanceof ye$1?(2&Sa.L)!=0?((Sa=Sa.X()).push(oa),Ne(ba,xa,wa,Sa)):Sa.Na(oa):Array.isArray(Sa)?(2&(0|Sa[Z$1])&&Ne(ba,xa,wa,Sa=ze(Sa)),Sa.push(oa)):Ne(ba,xa,wa,[oa]),!0)}),(function(oa,ba,wa,xa,Sa){if(ba instanceof ye$1)ba.forEach(((va,Ea)=>{ar$1(oa,wa,Fe$1([Ea,va],xa,!1),Sa)}));else if(Array.isArray(ba))for(let va=0;va<ba.length;va++){const Ea=ba[va];Array.isArray(Ea)&&ar$1(oa,wa,Fe$1(Ea,xa,!1),Sa)}}));function zr$1(oa,ba,wa){if(ba=(function(xa){if(xa==null)return xa;const Sa=typeof xa;if(Sa==="bigint")return String(Ht(64,xa));if(Zt$1(xa)){if(Sa==="string")return re(xa);if(Sa==="number")return ne(xa)}})(ba),ba!=null&&(typeof ba=="string"&&$n$1(ba),ba!=null))switch(rr$1(oa,wa,0),typeof ba){case"number":oa=oa.g,Ut$1(ba),Zn$1(oa,Pt,Ot);break;case"bigint":wa=BigInt.asUintN(64,ba),wa=new qn(Number(wa&BigInt(4294967295)),Number(wa>>BigInt(32))),Zn$1(oa.g,wa.h,wa.g);break;default:wa=$n$1(ba),Zn$1(oa.g,wa.h,wa.g)}}function Kr(oa,ba,wa){(ba=Qt(ba))!=null&&ba!=null&&(rr$1(oa,wa,0),tr(oa.g,ba))}function Yr(oa,ba,wa){(ba=qt(ba))!=null&&(rr$1(oa,wa,0),oa.g.g.push(ba?1:0))}function $r$1(oa,ba,wa){(ba=ce$1(ba))!=null&&or$1(oa,wa,c(ba))}function qr(oa,ba,wa,xa,Sa){ar$1(oa,wa,Ir(ba,xa),Sa)}function Jr(oa,ba,wa){(ba=ba==null||typeof ba=="string"||O(ba)||ba instanceof N?ba:void 0)!=null&&or$1(oa,wa,wn(ba).buffer)}function Zr(oa,ba,wa){return(oa.h===5||oa.h===2)&&(ba=Ye$1(ba,0|ba[Z$1],wa,!1,!1),oa.h==2?Bn$1(oa,xn,ba):ba.push(xn(oa.g)),!0)}var Qr$1=Vr$1((function(oa,ba,wa){if(oa.h!==1)return!1;var xa=oa.g;oa=Sn(xa);const Sa=Sn(xa);xa=2*(Sa>>31)+1;const va=Sa>>>20&2047;return oa=4294967296*(1048575&Sa)+oa,Hr(ba,wa,va==2047?oa?NaN:xa*(1/0):va==0?5e-324*xa*oa:xa*Math.pow(2,va-1075)*(oa+4503599627370496)),!0}),(function(oa,ba,wa){(ba=$t$1(ba))!=null&&(rr$1(oa,wa,1),oa=oa.g,(wa=Mt||(Mt=new DataView(new ArrayBuffer(8)))).setFloat64(0,+ba,!0),Pt=wa.getUint32(0,!0),Ot=wa.getUint32(4,!0),er(oa,Pt),er(oa,Ot))}),cr$1()),ti=Vr$1((function(oa,ba,wa){return oa.h===5&&(Hr(ba,wa,xn(oa.g)),!0)}),(function(oa,ba,wa){(ba=$t$1(ba))!=null&&(rr$1(oa,wa,5),oa=oa.g,Dt(ba),er(oa,Pt))}),gr$1),ei$1=Xr(Zr,(function(oa,ba,wa){if((ba=jr($t$1,ba))!=null)for(let Ea=0;Ea<ba.length;Ea++){var xa=oa,Sa=wa,va=ba[Ea];va!=null&&(rr$1(xa,Sa,5),xa=xa.g,Dt(va),er(xa,Pt))}}),gr$1),ni=Xr(Zr,(function(oa,ba,wa){if((ba=jr($t$1,ba))!=null&&ba.length){rr$1(oa,wa,2),Qn$1(oa.g,4*ba.length);for(let xa=0;xa<ba.length;xa++)wa=oa.g,Dt(ba[xa]),er(wa,Pt)}}),gr$1),ri=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,Tn$1(oa.g,Bt)),!0)}),zr$1,pr$1),ii=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,(oa=Tn$1(oa.g,Bt))===0?void 0:oa),!0)}),zr$1,pr$1),si=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,Tn$1(oa.g,Nt)),!0)}),(function(oa,ba,wa){if((ba=se(ba))!=null&&(typeof ba=="string"&&zn$1(ba),ba!=null))switch(rr$1(oa,wa,0),typeof ba){case"number":oa=oa.g,Ut$1(ba),Zn$1(oa,Pt,Ot);break;case"bigint":wa=BigInt.asUintN(64,ba),wa=new Kn$1(Number(wa&BigInt(4294967295)),Number(wa>>BigInt(32))),Zn$1(oa.g,wa.h,wa.g);break;default:wa=zn$1(ba),Zn$1(oa.g,wa.h,wa.g)}}),cr$1()),oi=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,bn$1(oa.g)),!0)}),Kr,dr$1),ai=Xr((function(oa,ba,wa){return(oa.h===0||oa.h===2)&&(ba=Ye$1(ba,0|ba[Z$1],wa,!1,!1),oa.h==2?Bn$1(oa,bn$1,ba):ba.push(bn$1(oa.g)),!0)}),(function(oa,ba,wa){if((ba=jr(Qt,ba))!=null&&ba.length){wa=ir$1(oa,wa);for(let xa=0;xa<ba.length;xa++)tr(oa.g,ba[xa]);sr$1(oa,wa)}}),dr$1),ci=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,(oa=bn$1(oa.g))===0?void 0:oa),!0)}),Kr,dr$1),hi$1=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,An(oa.g)),!0)}),Yr,ur$1),ui=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,(oa=An(oa.g))===!1?void 0:oa),!0)}),Yr,ur$1),li$1=Xr((function(oa,ba,wa){return oa.h===2&&(oa=Dn$1(oa),Ye$1(ba,0|ba[Z$1],wa,!1).push(oa),!0)}),(function(oa,ba,wa){if((ba=jr(ce$1,ba))!=null)for(let Ea=0;Ea<ba.length;Ea++){var xa=oa,Sa=wa,va=ba[Ea];va!=null&&or$1(xa,Sa,c(va))}}),lr),di=Vr$1((function(oa,ba,wa){return oa.h===2&&(Hr(ba,wa,(oa=Dn$1(oa))===""?void 0:oa),!0)}),$r$1,lr),fi=Vr$1((function(oa,ba,wa){return oa.h===2&&(Hr(ba,wa,Dn$1(oa)),!0)}),$r$1,lr),pi$1=(function(oa,ba,wa=hr$1){return new _r(oa,ba,wa)})((function(oa,ba,wa,xa,Sa){return oa.h===2&&(xa=Fe$1(void 0,xa,!0),Ye$1(ba,0|ba[Z$1],wa,!0).push(xa),Un$1(oa,xa,Sa),!0)}),(function(oa,ba,wa,xa,Sa){if(Array.isArray(ba))for(let va=0;va<ba.length;va++)qr(oa,ba[va],wa,xa,Sa)})),gi$1=vr((function(oa,ba,wa,xa,Sa,va){return oa.h===2&&(Je(ba,0|ba[Z$1],va,wa),Un$1(oa,ba=Qe(ba,xa,wa),Sa),!0)}),qr),mi$1=Vr$1((function(oa,ba,wa){return oa.h===2&&(Hr(ba,wa,Nn$1(oa)),!0)}),Jr,mr$1),yi$1=Xr((function(oa,ba,wa){return(oa.h===0||oa.h===2)&&(ba=Ye$1(ba,0|ba[Z$1],wa,!1,!1),oa.h==2?Bn$1(oa,kn$1,ba):ba.push(kn$1(oa.g)),!0)}),(function(oa,ba,wa){if((ba=jr(te$1,ba))!=null)for(let Ea=0;Ea<ba.length;Ea++){var xa=oa,Sa=wa,va=ba[Ea];va!=null&&(rr$1(xa,Sa,0),Qn$1(xa.g,va))}}),fr),_i$1=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,(oa=kn$1(oa.g))===0?void 0:oa),!0)}),(function(oa,ba,wa){(ba=te$1(ba))!=null&&ba!=null&&(rr$1(oa,wa,0),Qn$1(oa.g,ba))}),fr),vi$1=Vr$1((function(oa,ba,wa){return oa.h===0&&(Hr(ba,wa,bn$1(oa.g)),!0)}),(function(oa,ba,wa){(ba=Qt(ba))!=null&&(ba=parseInt(ba,10),rr$1(oa,wa,0),tr(oa.g,ba))}),yr$1);let Ei$1=class{constructor(ba,wa){this.h=ba,this.g=wa,this.l=en$1,this.m=sn$1,this.defaultValue=void 0}};function wi$1(oa,ba){return new Ei$1(oa,ba)}function Ti$1(oa,ba){return(wa,xa)=>{if(Gn$1.length){const va=Gn$1.pop();va.o(xa),Rn$1(va.g,wa,xa),wa=va}else wa=new class{constructor(va,Ea){if(Pn.length){const La=Pn.pop();Rn$1(La,va,Ea),va=La}else va=new class{constructor(La,eu){this.h=null,this.m=!1,this.g=this.l=this.j=0,Rn$1(this,La,eu)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ba=!1}}(va,Ea);this.g=va,this.l=this.g.g,this.h=this.m=-1,this.o(Ea)}o({fa:va=!1}={}){this.fa=va}}(wa,xa);try{const va=new oa,Ea=va.u;Or(ba)(Ea,wa);var Sa=va}finally{wa.g.clear(),wa.m=-1,wa.h=-1,Gn$1.length<100&&Gn$1.push(wa)}return Sa}}function Ai$1(oa){return function(){const ba=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const Ea=this.g;return this.g=[],Ea}}}};Br$1(this.u,ba,Rr$1(Ar,Ur$1,Dr$1,oa)),nr$1(ba,ba.g.end());const wa=new Uint8Array(ba.h),xa=ba.l,Sa=xa.length;let va=0;for(let Ea=0;Ea<Sa;Ea++){const La=xa[Ea];wa.set(La,va),va+=La.length}return ba.l=[wa],wa}}var bi$1=class extends Hn{constructor(ba){super(ba)}},ki$1=[0,di,Vr$1((function(oa,ba,wa){return oa.h===2&&(Hr(ba,wa,(oa=Nn$1(oa))===U$1()?void 0:oa),!0)}),(function(oa,ba,wa){if(ba!=null){if(ba instanceof Hn){const xa=ba.Ra;return void(xa&&(ba=xa(ba),ba!=null&&or$1(oa,wa,wn(ba).buffer)))}if(Array.isArray(ba))return}Jr(oa,ba,wa)}),mr$1)];let Si$1,xi$1=globalThis.trustedTypes;function Li$1(oa){Si$1===void 0&&(Si$1=(function(){let wa=null;if(!xi$1)return wa;try{const xa=Sa=>Sa;wa=xi$1.createPolicy("goog#html",{createHTML:xa,createScript:xa,createScriptURL:xa})}catch{}return wa})());var ba=Si$1;return new class{constructor(wa){this.g=wa}toString(){return this.g+""}}(ba?ba.createScriptURL(oa):oa)}function Ri$1(oa,...ba){if(ba.length===0)return Li$1(oa[0]);let wa=oa[0];for(let xa=0;xa<ba.length;xa++)wa+=encodeURIComponent(ba[xa])+oa[xa+1];return Li$1(wa)}var Fi$1=[0,oi,vi$1,hi$1,-1,ai,vi$1,-1],Ii$1=class extends Hn{constructor(ba){super(ba)}},Mi$1=[0,hi$1,fi,hi$1,vi$1,-1,Xr((function(oa,ba,wa){return(oa.h===0||oa.h===2)&&(ba=Ye$1(ba,0|ba[Z$1],wa,!1,!1),oa.h==2?Bn$1(oa,Ln$1,ba):ba.push(bn$1(oa.g)),!0)}),(function(oa,ba,wa){if((ba=jr(Qt,ba))!=null&&ba.length){wa=ir$1(oa,wa);for(let xa=0;xa<ba.length;xa++)tr(oa.g,ba[xa]);sr$1(oa,wa)}}),yr$1),fi,-1,[0,hi$1,-1],vi$1,hi$1,-1],Pi$1=[0,fi,-2],Oi$1=class extends Hn{constructor(ba){super(ba)}},Ci$1=[0],Ui$1=[0,oi,hi$1,1,hi$1,-3],Di$1=class extends Hn{constructor(ba){super(ba,2)}},Ni$1={};Ni$1[336783863]=[0,fi,hi$1,-1,oi,[0,[1,2,3,4,5,6,7,8],gi$1,Ci$1,gi$1,Mi$1,gi$1,Pi$1,gi$1,Ui$1,gi$1,Fi$1,gi$1,[0,fi,-2],gi$1,[0,fi,vi$1],gi$1,[0,vi$1,fi]],[0,fi],hi$1,[0,[1,3],[2,4],gi$1,[0,ai],-1,gi$1,[0,li$1],-1,pi$1,[0,fi,-1]],fi];var Bi$1=[0,ii,-1,ui,-3,ii,ai,di,ci,ii,-1,ui,ci,ui,-2,di];function Gi$1(oa,ba){Ke$1(oa,2,ae$1(ba),"")}function ji$1(oa,ba){yn$1(oa,3,ba)}function Vi$1(oa,ba){yn$1(oa,4,ba)}var Xi$1=class extends Hn{constructor(ba){super(ba,500)}o(ba){return sn$1(this,0,7,ba)}},Hi$1=[-1,{}],Wi$1=[0,fi,1,Hi$1],zi$1=[0,fi,li$1,Hi$1];function Ki$1(oa,ba){hn$1(oa,1,Xi$1,ba)}function Yi$1(oa,ba){yn$1(oa,10,ba)}function $i$1(oa,ba){yn$1(oa,15,ba)}var qi$1=class extends Hn{constructor(ba){super(ba,500)}o(ba){return sn$1(this,0,1001,ba)}},Ji$1=[-500,pi$1,[-500,di,-1,li$1,-3,[-2,Ni$1,hi$1],pi$1,ki$1,ci,-1,Wi$1,zi$1,pi$1,[0,di,ui],di,Bi$1,ci,li$1,987,li$1],4,pi$1,[-500,fi,-1,[-1,{}],998,fi],pi$1,[-500,fi,li$1,-1,[-2,{},hi$1],997,li$1,-1],ci,pi$1,[-500,fi,li$1,Hi$1,998,li$1],li$1,ci,Wi$1,zi$1,pi$1,[0,di,-1,Hi$1],li$1,-2,Bi$1,di,-1,ui,[0,ui,_i$1],978,Hi$1,pi$1,ki$1];qi$1.prototype.g=Ai$1(Ji$1);var Zi$1=Ti$1(qi$1,Ji$1),Qi$1=class extends Hn{constructor(ba){super(ba)}},ts$1=class extends Hn{constructor(ba){super(ba)}g(){return rn(this,Qi$1,1)}},es$1=[0,pi$1,[0,oi,ti,fi,-1]],ns$1=Ti$1(ts$1,es$1),rs$1=class extends Hn{constructor(ba){super(ba)}},is$1=class extends Hn{constructor(ba){super(ba)}},ss$1=class extends Hn{constructor(ba){super(ba)}h(){return en$1(this,rs$1,2)}g(){return rn(this,is$1,5)}},os$1=Ti$1(class extends Hn{constructor(oa){super(oa)}},[0,li$1,ai,ni,[0,vi$1,[0,oi,-3],[0,ti,-3],[0,oi,-1,[0,pi$1,[0,oi,-2]]],pi$1,[0,ti,-1,fi,ti]],fi,-1,ri,pi$1,[0,oi,ti],li$1,ri]),as$1=class extends Hn{constructor(ba){super(ba)}},cs$1=Ti$1(class extends Hn{constructor(oa){super(oa)}},[0,pi$1,[0,ti,-4]]),hs$1=class extends Hn{constructor(ba){super(ba)}},us$1=Ti$1(class extends Hn{constructor(oa){super(oa)}},[0,pi$1,[0,ti,-4]]),ls$1=class extends Hn{constructor(ba){super(ba)}},ds$1=[0,oi,-1,ni,vi$1],fs$1=class extends Hn{constructor(ba){super(ba)}};fs$1.prototype.g=Ai$1([0,ti,-4,ri]);var ps$1=class extends Hn{constructor(ba){super(ba)}},gs$1=Ti$1(class extends Hn{constructor(oa){super(oa)}},[0,pi$1,[0,1,oi,fi,es$1],ri]),ms$1=class extends Hn{constructor(ba){super(ba)}},ys$1=class extends Hn{constructor(ba){super(ba)}oa(){const ba=Ge$1(this);return ba??U$1()}},_s$1=class extends Hn{constructor(ba){super(ba)}},vs$1=[1,2],Es$1=Ti$1(class extends Hn{constructor(oa){super(oa)}},[0,pi$1,[0,vs$1,gi$1,[0,ni],gi$1,[0,mi$1],oi,fi],ri]),ws$1=class extends Hn{constructor(ba){super(ba)}},Ts$1=[0,fi,oi,ti,li$1,-1],As$1=class extends Hn{constructor(ba){super(ba)}},bs$1=[0,hi$1,-1],ks$1=class extends Hn{constructor(ba){super(ba)}},Ss$1=[1,2,3,4,5],xs$1=class extends Hn{constructor(ba){super(ba)}g(){return Ge$1(this)!=null}h(){return ln$1(this,2)!=null}},Ls$1=class extends Hn{constructor(ba){super(ba)}g(){return qt(Ce(this,2))??!1}},Rs=[0,mi$1,fi,[0,oi,ri,-1],[0,si,ri]],Fs$1=[0,Rs,hi$1,[0,Ss$1,gi$1,Ui$1,gi$1,Mi$1,gi$1,Fi$1,gi$1,Ci$1,gi$1,Pi$1],vi$1],Is$1=class extends Hn{constructor(ba){super(ba)}},Ms$1=[0,Fs$1,ti,-1,oi],Ps$1=wi$1(502141897,Is$1);Ni$1[502141897]=Ms$1;var Os$1=Ti$1(class extends Hn{constructor(oa){super(oa)}},[0,[0,vi$1,-1,ei$1,yi$1],ds$1]),Cs=class extends Hn{constructor(oa){super(oa)}},Us$1=class extends Hn{constructor(ba){super(ba)}},Ds$1=[0,Fs$1,ti,[0,Fs$1],hi$1],Ns=[0,Fs$1,Ms$1,Ds$1,ti,[0,[0,Rs]]],Bs=wi$1(508968150,Us$1);Ni$1[508968150]=Ns,Ni$1[508968149]=Ds$1;var Gs=class extends Hn{constructor(oa){super(oa)}},js=wi$1(513916220,Gs);Ni$1[513916220]=[0,Fs$1,Ns,oi];var Vs=class extends Hn{constructor(oa){super(oa)}h(){return en$1(this,ws$1,2)}g(){De$1(this,2)}},Xs$1=[0,Fs$1,Ts$1];Ni$1[478825465]=Xs$1;var Hs=class extends Hn{constructor(oa){super(oa)}},Ws=class extends Hn{constructor(oa){super(oa)}},zs=class extends Hn{constructor(oa){super(oa)}},Ks=class extends Hn{constructor(oa){super(oa)}},Ys$1=class extends Hn{constructor(ba){super(ba)}},$s$1=[0,Fs$1,[0,Fs$1],Xs$1,-1],qs=[0,Fs$1,ti,oi],Js$1=[0,Fs$1,ti],Zs=[0,Fs$1,qs,Js$1,ti],Qs$1=wi$1(479097054,Ys$1);Ni$1[479097054]=[0,Fs$1,Zs,$s$1],Ni$1[463370452]=$s$1,Ni$1[464864288]=qs;var to$1=wi$1(462713202,Ks);Ni$1[462713202]=Zs,Ni$1[474472470]=Js$1;var eo$1=class extends Hn{constructor(ba){super(ba)}},no$1=class extends Hn{constructor(ba){super(ba)}},ro$1=class extends Hn{constructor(ba){super(ba)}},io$1=class extends Hn{constructor(ba){super(ba)}},so$1=[0,Fs$1,ti,-1,oi],oo$1=[0,Fs$1,ti,hi$1];io$1.prototype.g=Ai$1([0,Fs$1,Js$1,[0,Fs$1],Ms$1,Ds$1,so$1,oo$1]);var ao$1=class extends Hn{constructor(ba){super(ba)}},co$1=wi$1(456383383,ao$1);Ni$1[456383383]=[0,Fs$1,Ts$1];var ho$1=class extends Hn{constructor(ba){super(ba)}},uo$1=wi$1(476348187,ho$1);Ni$1[476348187]=[0,Fs$1,bs$1];var lo$1=class extends Hn{constructor(ba){super(ba)}},fo$1=class extends Hn{constructor(ba){super(ba)}},po$1=[0,vi$1,-1],go$1=wi$1(458105876,class extends Hn{constructor(oa){super(oa)}g(){var oa=this.u;const ba=0|oa[Z$1],wa=2&ba;return oa=(function(xa,Sa,va){var Ea=fo$1;const La=2&Sa;let eu=!1;if(va==null){if(La)return be$1();va=[]}else if(va.constructor===ye$1){if((2&va.L)==0||La)return va;va=va.X()}else Array.isArray(va)?eu=!!(2&(0|va[Z$1])):va=[];if(La){if(!va.length)return be$1();eu||(eu=!0,rt(va))}else eu&&(eu=!1,va=ze(va));return eu||(64&(0|va[Z$1])?va[Z$1]&=-33:32&Sa&&et(va,32)),Ne(xa,Sa,2,Ea=new ye$1(va,Ea,ue,void 0)),Ea})(oa,ba,Ue(oa,ba,2)),!wa&&fo$1&&(oa.ra=!0),oa}});Ni$1[458105876]=[0,po$1,Wr$1,[!0,ri,[0,fi,-1,li$1]]];var mo$1=class extends Hn{constructor(ba){super(ba)}},yo$1=wi$1(458105758,mo$1);Ni$1[458105758]=[0,Fs$1,fi,po$1];var _o$1=class extends Hn{constructor(ba){super(ba)}},vo$1=wi$1(443442058,_o$1);Ni$1[443442058]=[0,Fs$1,fi,oi,ti,li$1,-1,hi$1,ti],Ni$1[514774813]=so$1;var Eo$1=class extends Hn{constructor(ba){super(ba)}},wo$1=wi$1(516587230,Eo$1);function To$1(oa,ba){return ba=ba?ba.clone():new ws$1,oa.displayNamesLocale!==void 0?De$1(ba,1,ae$1(oa.displayNamesLocale)):oa.displayNamesLocale===void 0&&De$1(ba,1),oa.maxResults!==void 0?pn$1(ba,2,oa.maxResults):"maxResults"in oa&&De$1(ba,2),oa.scoreThreshold!==void 0?gn$1(ba,3,oa.scoreThreshold):"scoreThreshold"in oa&&De$1(ba,3),oa.categoryAllowlist!==void 0?mn$1(ba,4,oa.categoryAllowlist):"categoryAllowlist"in oa&&De$1(ba,4),oa.categoryDenylist!==void 0?mn$1(ba,5,oa.categoryDenylist):"categoryDenylist"in oa&&De$1(ba,5),ba}function Ao$1(oa,ba=-1,wa=""){return{categories:oa.map((xa=>({index:un$1(xa,1)??0??-1,score:dn$1(xa,2)??0,categoryName:ln$1(xa,3)??""??"",displayName:ln$1(xa,4)??""??""}))),headIndex:ba,headName:wa}}function bo$1(oa){var Ea,La;var ba=Ve$1(oa,3,$t$1,je()),wa=Ve$1(oa,2,Qt,je()),xa=Ve$1(oa,1,ce$1,je()),Sa=Ve$1(oa,9,ce$1,je());const va={categories:[],keypoints:[]};for(let eu=0;eu<ba.length;eu++)va.categories.push({score:ba[eu],index:wa[eu]??-1,categoryName:xa[eu]??"",displayName:Sa[eu]??""});if((ba=(Ea=en$1(oa,ss$1,4))==null?void 0:Ea.h())&&(va.boundingBox={originX:un$1(ba,1)??0,originY:un$1(ba,2)??0,width:un$1(ba,3)??0,height:un$1(ba,4)??0,angle:0}),(La=en$1(oa,ss$1,4))==null?void 0:La.g().length)for(const eu of en$1(oa,ss$1,4).g())va.keypoints.push({x:Be(eu,1)??0,y:Be(eu,2)??0,score:Be(eu,4)??0,label:ln$1(eu,3)??""});return va}function ko$1(oa){const ba=[];for(const wa of rn(oa,hs$1,1))ba.push({x:dn$1(wa,1)??0,y:dn$1(wa,2)??0,z:dn$1(wa,3)??0,visibility:dn$1(wa,4)??0});return ba}function So$1(oa){const ba=[];for(const wa of rn(oa,as$1,1))ba.push({x:dn$1(wa,1)??0,y:dn$1(wa,2)??0,z:dn$1(wa,3)??0,visibility:dn$1(wa,4)??0});return ba}function xo$1(oa){return Array.from(oa,(ba=>ba>127?ba-256:ba))}function Lo$1(oa,ba){if(oa.length!==ba.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${oa.length} vs. ${ba.length}).`);let wa=0,xa=0,Sa=0;for(let va=0;va<oa.length;va++)wa+=oa[va]*ba[va],xa+=oa[va]*oa[va],Sa+=ba[va]*ba[va];if(xa<=0||Sa<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return wa/Math.sqrt(xa*Sa)}let Ro;Ni$1[516587230]=[0,Fs$1,so$1,oo$1,ti],Ni$1[518928384]=oo$1;const Fo$1=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Io$1(){if(Ro===void 0)try{await WebAssembly.instantiate(Fo$1),Ro=!0}catch{Ro=!1}return Ro}async function Mo(oa,ba=Ri$1``){const wa=await Io$1()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${ba}/${oa}_${wa}.js`,wasmBinaryPath:`${ba}/${oa}_${wa}.wasm`}}var Po$1=class{};function Oo$1(){var oa=navigator;return typeof OffscreenCanvas<"u"&&(!(function(ba=navigator){return(ba=ba.userAgent).includes("Safari")&&!ba.includes("Chrome")})(oa)||!!((oa=oa.userAgent.match(/Version\/([\d]+).*Safari/))&&oa.length>=1&&Number(oa[1])>=17))}async function Co$1(oa){if(typeof importScripts!="function"){const ba=document.createElement("script");return ba.src=oa.toString(),ba.crossOrigin="anonymous",new Promise(((wa,xa)=>{ba.addEventListener("load",(()=>{wa()}),!1),ba.addEventListener("error",(Sa=>{xa(Sa)}),!1),document.body.appendChild(ba)}))}importScripts(oa.toString())}function Uo(oa){return oa.videoWidth!==void 0?[oa.videoWidth,oa.videoHeight]:oa.naturalWidth!==void 0?[oa.naturalWidth,oa.naturalHeight]:oa.displayWidth!==void 0?[oa.displayWidth,oa.displayHeight]:[oa.width,oa.height]}function Do$1(oa,ba,wa){oa.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),wa(ba=oa.i.stringToNewUTF8(ba)),oa.i._free(ba)}function No(oa,ba,wa){if(!oa.i.canvas)throw Error("No OpenGL canvas configured.");if(wa?oa.i._bindTextureToStream(wa):oa.i._bindTextureToCanvas(),!(wa=oa.i.canvas.getContext("webgl2")||oa.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");oa.i.gpuOriginForWebTexturesIsBottomLeft&&wa.pixelStorei(wa.UNPACK_FLIP_Y_WEBGL,!0),wa.texImage2D(wa.TEXTURE_2D,0,wa.RGBA,wa.RGBA,wa.UNSIGNED_BYTE,ba),oa.i.gpuOriginForWebTexturesIsBottomLeft&&wa.pixelStorei(wa.UNPACK_FLIP_Y_WEBGL,!1);const[xa,Sa]=Uo(ba);return!oa.l||xa===oa.i.canvas.width&&Sa===oa.i.canvas.height||(oa.i.canvas.width=xa,oa.i.canvas.height=Sa),[xa,Sa]}function Bo(oa,ba,wa){oa.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const xa=new Uint32Array(ba.length);for(let Sa=0;Sa<ba.length;Sa++)xa[Sa]=oa.i.stringToNewUTF8(ba[Sa]);ba=oa.i._malloc(4*xa.length),oa.i.HEAPU32.set(xa,ba>>2),wa(ba);for(const Sa of xa)oa.i._free(Sa);oa.i._free(ba)}function Go(oa,ba,wa){oa.i.simpleListeners=oa.i.simpleListeners||{},oa.i.simpleListeners[ba]=wa}function jo$1(oa,ba,wa){let xa=[];oa.i.simpleListeners=oa.i.simpleListeners||{},oa.i.simpleListeners[ba]=(Sa,va,Ea)=>{va?(wa(xa,Ea),xa=[]):xa.push(Sa)}}Po$1.forVisionTasks=function(oa){return Mo("vision",oa)},Po$1.forTextTasks=function(oa){return Mo("text",oa)},Po$1.forGenAiExperimentalTasks=function(oa){return Mo("genai_experimental",oa)},Po$1.forGenAiTasks=function(oa){return Mo("genai",oa)},Po$1.forAudioTasks=function(oa){return Mo("audio",oa)},Po$1.isSimdSupported=function(){return Io$1()};async function Vo(oa,ba,wa,xa){return oa=await(async(Sa,va,Ea,La,eu)=>{if(va&&await Co$1(va),!self.ModuleFactory||Ea&&(await Co$1(Ea),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&eu&&((va=self.Module).locateFile=eu.locateFile,eu.mainScriptUrlOrBlob&&(va.mainScriptUrlOrBlob=eu.mainScriptUrlOrBlob)),eu=await self.ModuleFactory(self.Module||eu),self.ModuleFactory=self.Module=void 0,new Sa(eu,La)})(oa,wa.wasmLoaderPath,wa.assetLoaderPath,ba,{locateFile:Sa=>Sa.endsWith(".wasm")?wa.wasmBinaryPath.toString():wa.assetBinaryPath&&Sa.endsWith(".data")?wa.assetBinaryPath.toString():Sa}),await oa.o(xa),oa}function Xo$1(oa,ba){const wa=en$1(oa.baseOptions,xs$1,1)||new xs$1;typeof ba=="string"?(De$1(wa,2,ae$1(ba)),De$1(wa,1)):ba instanceof Uint8Array&&(De$1(wa,1,ft$1(ba,!1)),De$1(wa,2)),sn$1(oa.baseOptions,0,1,wa)}function Ho$1(oa){try{const ba=oa.G.length;if(ba===1)throw Error(oa.G[0].message);if(ba>1)throw Error("Encountered multiple errors: "+oa.G.map((wa=>wa.message)).join(", "))}finally{oa.G=[]}}function Wo(oa,ba){oa.B=Math.max(oa.B,ba)}function zo(oa,ba){oa.A=new Xi$1,Gi$1(oa.A,"PassThroughCalculator"),ji$1(oa.A,"free_memory"),Vi$1(oa.A,"free_memory_unused_out"),Yi$1(ba,"free_memory"),Ki$1(ba,oa.A)}function Ko$1(oa,ba){ji$1(oa.A,ba),Vi$1(oa.A,ba+"_unused_out")}function Yo$1(oa){oa.g.addBoolToStream(!0,"free_memory",oa.B)}var $o$1=class{constructor(ba){this.g=ba,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(ba,wa=!0){var xa,Sa,va,Ea,La,eu;if(wa){const Ta=ba.baseOptions||{};if((xa=ba.baseOptions)!=null&&xa.modelAssetBuffer&&((Sa=ba.baseOptions)!=null&&Sa.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((va=en$1(this.baseOptions,xs$1,1))!=null&&va.g()||(Ea=en$1(this.baseOptions,xs$1,1))!=null&&Ea.h()||(La=ba.baseOptions)!=null&&La.modelAssetBuffer||(eu=ba.baseOptions)!=null&&eu.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if((function(Aa,ka){let ru=en$1(Aa.baseOptions,ks$1,3);if(!ru){var nu=ru=new ks$1,su=new Oi$1;on(nu,4,Ss$1,su)}"delegate"in ka&&(ka.delegate==="GPU"?(ka=ru,nu=new Ii$1,on(ka,2,Ss$1,nu)):(ka=ru,nu=new Oi$1,on(ka,4,Ss$1,nu))),sn$1(Aa.baseOptions,0,3,ru)})(this,Ta),Ta.modelAssetPath)return fetch(Ta.modelAssetPath.toString()).then((Aa=>{if(Aa.ok)return Aa.arrayBuffer();throw Error(`Failed to fetch model: ${Ta.modelAssetPath} (${Aa.status})`)})).then((Aa=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(Aa),!0,!1,!1),Xo$1(this,"/model.dat"),this.m(),this.I()}));if(Ta.modelAssetBuffer instanceof Uint8Array)Xo$1(this,Ta.modelAssetBuffer);else if(Ta.modelAssetBuffer)return(async function(Aa){const ka=[];for(var ru=0;;){const{done:nu,value:su}=await Aa.read();if(nu)break;ka.push(su),ru+=su.length}if(ka.length===0)return new Uint8Array(0);if(ka.length===1)return ka[0];Aa=new Uint8Array(ru),ru=0;for(const nu of ka)Aa.set(nu,ru),ru+=nu.length;return Aa})(Ta.modelAssetBuffer).then((Aa=>{Xo$1(this,Aa),this.m(),this.I()}))}return this.m(),this.I(),Promise.resolve()}I(){}da(){let ba;if(this.g.da((wa=>{ba=Zi$1(wa)})),!ba)throw Error("Failed to retrieve CalculatorGraphConfig");return ba}setGraph(ba,wa){this.g.attachErrorListener(((xa,Sa)=>{this.G.push(Error(Sa))})),this.g.La(),this.g.setGraph(ba,wa),this.A=void 0,Ho$1(this)}finishProcessing(){this.g.finishProcessing(),Ho$1(this)}close(){this.A=void 0,this.g.closeGraph()}};function qo$1(oa,ba){if(!oa)throw Error(`Unable to obtain required WebGL resource: ${ba}`);return oa}$o$1.prototype.close=$o$1.prototype.close,(function(oa,ba){oa=oa.split(".");var wa,xa=t;for((oa[0]in xa)||xa.execScript===void 0||xa.execScript("var "+oa[0]);oa.length&&(wa=oa.shift());)oa.length||ba===void 0?xa=xa[wa]&&xa[wa]!==Object.prototype[wa]?xa[wa]:xa[wa]={}:xa[wa]=ba})("TaskRunner",$o$1);class Jo{constructor(ba,wa,xa,Sa){this.g=ba,this.h=wa,this.m=xa,this.l=Sa}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Zo$1(oa,ba,wa){const xa=oa.g;if(wa=qo$1(xa.createShader(wa),"Failed to create WebGL shader"),xa.shaderSource(wa,ba),xa.compileShader(wa),!xa.getShaderParameter(wa,xa.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${xa.getShaderInfoLog(wa)}`);return xa.attachShader(oa.h,wa),wa}function Qo$1(oa,ba){const wa=oa.g,xa=qo$1(wa.createVertexArray(),"Failed to create vertex array");wa.bindVertexArray(xa);const Sa=qo$1(wa.createBuffer(),"Failed to create buffer");wa.bindBuffer(wa.ARRAY_BUFFER,Sa),wa.enableVertexAttribArray(oa.O),wa.vertexAttribPointer(oa.O,2,wa.FLOAT,!1,0,0),wa.bufferData(wa.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),wa.STATIC_DRAW);const va=qo$1(wa.createBuffer(),"Failed to create buffer");return wa.bindBuffer(wa.ARRAY_BUFFER,va),wa.enableVertexAttribArray(oa.I),wa.vertexAttribPointer(oa.I,2,wa.FLOAT,!1,0,0),wa.bufferData(wa.ARRAY_BUFFER,new Float32Array(ba?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),wa.STATIC_DRAW),wa.bindBuffer(wa.ARRAY_BUFFER,null),wa.bindVertexArray(null),new Jo(wa,xa,Sa,va)}function ta$1(oa,ba){if(oa.g){if(ba!==oa.g)throw Error("Cannot change GL context once initialized")}else oa.g=ba}function ea$1(oa,ba,wa,xa){return ta$1(oa,ba),oa.h||(oa.m(),oa.C()),wa?(oa.s||(oa.s=Qo$1(oa,!0)),wa=oa.s):(oa.v||(oa.v=Qo$1(oa,!1)),wa=oa.v),ba.useProgram(oa.h),wa.bind(),oa.l(),oa=xa(),wa.g.bindVertexArray(null),oa}function na$1(oa,ba,wa){return ta$1(oa,ba),oa=qo$1(ba.createTexture(),"Failed to create texture"),ba.bindTexture(ba.TEXTURE_2D,oa),ba.texParameteri(ba.TEXTURE_2D,ba.TEXTURE_WRAP_S,ba.CLAMP_TO_EDGE),ba.texParameteri(ba.TEXTURE_2D,ba.TEXTURE_WRAP_T,ba.CLAMP_TO_EDGE),ba.texParameteri(ba.TEXTURE_2D,ba.TEXTURE_MIN_FILTER,wa??ba.LINEAR),ba.texParameteri(ba.TEXTURE_2D,ba.TEXTURE_MAG_FILTER,wa??ba.LINEAR),ba.bindTexture(ba.TEXTURE_2D,null),oa}function ra$1(oa,ba,wa){ta$1(oa,ba),oa.A||(oa.A=qo$1(ba.createFramebuffer(),"Failed to create framebuffe.")),ba.bindFramebuffer(ba.FRAMEBUFFER,oa.A),ba.framebufferTexture2D(ba.FRAMEBUFFER,ba.COLOR_ATTACHMENT0,ba.TEXTURE_2D,wa,0)}function ia(oa){var ba;(ba=oa.g)==null||ba.bindFramebuffer(oa.g.FRAMEBUFFER,null)}var sa$1=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const ba=this.g;if(this.h=qo$1(ba.createProgram(),"Failed to create WebGL program"),this.aa=Zo$1(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,ba.VERTEX_SHADER),this.Z=Zo$1(this,this.G(),ba.FRAGMENT_SHADER),ba.linkProgram(this.h),!ba.getProgramParameter(this.h,ba.LINK_STATUS))throw Error(`Error during program linking: ${ba.getProgramInfoLog(this.h)}`);this.O=ba.getAttribLocation(this.h,"aVertex"),this.I=ba.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const ba=this.g;ba.deleteProgram(this.h),ba.deleteShader(this.aa),ba.deleteShader(this.Z)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function ca$1(oa,ba){switch(ba){case 0:return oa.g.find((wa=>wa instanceof Uint8Array));case 1:return oa.g.find((wa=>wa instanceof Float32Array));case 2:return oa.g.find((wa=>typeof WebGLTexture<"u"&&wa instanceof WebGLTexture));default:throw Error(`Type is not supported: ${ba}`)}}function ha$1(oa){var ba=ca$1(oa,1);if(!ba){if(ba=ca$1(oa,0))ba=new Float32Array(ba).map((xa=>xa/255));else{ba=new Float32Array(oa.width*oa.height);const xa=la$1(oa);var wa=fa$1(oa);if(ra$1(wa,xa,ua$1(oa)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){wa=new Float32Array(oa.width*oa.height*4),xa.readPixels(0,0,oa.width,oa.height,xa.RGBA,xa.FLOAT,wa);for(let Sa=0,va=0;Sa<ba.length;++Sa,va+=4)ba[Sa]=wa[va]}else xa.readPixels(0,0,oa.width,oa.height,xa.RED,xa.FLOAT,ba)}oa.g.push(ba)}return ba}function ua$1(oa){let ba=ca$1(oa,2);if(!ba){const wa=la$1(oa);ba=pa$1(oa);const xa=ha$1(oa),Sa=da$1(oa);wa.texImage2D(wa.TEXTURE_2D,0,Sa,oa.width,oa.height,0,wa.RED,wa.FLOAT,xa),ga(oa)}return ba}function la$1(oa){if(!oa.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return oa.h||(oa.h=qo$1(oa.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),oa.h}function da$1(oa){if(oa=la$1(oa),!ma$1)if(oa.getExtension("EXT_color_buffer_float")&&oa.getExtension("OES_texture_float_linear")&&oa.getExtension("EXT_float_blend"))ma$1=oa.R32F;else{if(!oa.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");ma$1=oa.R16F}return ma$1}function fa$1(oa){return oa.l||(oa.l=new sa$1),oa.l}function pa$1(oa){const ba=la$1(oa);ba.viewport(0,0,oa.width,oa.height),ba.activeTexture(ba.TEXTURE0);let wa=ca$1(oa,2);return wa||(wa=na$1(fa$1(oa),ba,oa.m?ba.LINEAR:ba.NEAREST),oa.g.push(wa),oa.j=!0),ba.bindTexture(ba.TEXTURE_2D,wa),wa}function ga(oa){oa.h.bindTexture(oa.h.TEXTURE_2D,null)}var ma$1,ya=class{constructor(oa,ba,wa,xa,Sa,va,Ea){this.g=oa,this.m=ba,this.j=wa,this.canvas=xa,this.l=Sa,this.width=va,this.height=Ea,this.j&&--_a===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!ca$1(this,0)}ja(){return!!ca$1(this,1)}P(){return!!ca$1(this,2)}ia(){return(ba=ca$1(oa=this,0))||(ba=ha$1(oa),ba=new Uint8Array(ba.map((wa=>255*wa))),oa.g.push(ba)),ba;var oa,ba}ha(){return ha$1(this)}M(){return ua$1(this)}clone(){const oa=[];for(const ba of this.g){let wa;if(ba instanceof Uint8Array)wa=new Uint8Array(ba);else if(ba instanceof Float32Array)wa=new Float32Array(ba);else{if(!(ba instanceof WebGLTexture))throw Error(`Type is not supported: ${ba}`);{const xa=la$1(this),Sa=fa$1(this);xa.activeTexture(xa.TEXTURE1),wa=na$1(Sa,xa,this.m?xa.LINEAR:xa.NEAREST),xa.bindTexture(xa.TEXTURE_2D,wa);const va=da$1(this);xa.texImage2D(xa.TEXTURE_2D,0,va,this.width,this.height,0,xa.RED,xa.FLOAT,null),xa.bindTexture(xa.TEXTURE_2D,null),ra$1(Sa,xa,wa),ea$1(Sa,xa,!1,(()=>{pa$1(this),xa.clearColor(0,0,0,0),xa.clear(xa.COLOR_BUFFER_BIT),xa.drawArrays(xa.TRIANGLE_FAN,0,4),ga(this)})),ia(Sa),ga(this)}}oa.push(wa)}return new ya(oa,this.m,this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&la$1(this).deleteTexture(ca$1(this,2)),_a=-1}};ya.prototype.close=ya.prototype.close,ya.prototype.clone=ya.prototype.clone,ya.prototype.getAsWebGLTexture=ya.prototype.M,ya.prototype.getAsFloat32Array=ya.prototype.ha,ya.prototype.getAsUint8Array=ya.prototype.ia,ya.prototype.hasWebGLTexture=ya.prototype.P,ya.prototype.hasFloat32Array=ya.prototype.ja,ya.prototype.hasUint8Array=ya.prototype.Fa;var _a=250;function Ra(oa,ba){switch(ba){case 0:return oa.g.find((wa=>wa instanceof ImageData));case 1:return oa.g.find((wa=>typeof ImageBitmap<"u"&&wa instanceof ImageBitmap));case 2:return oa.g.find((wa=>typeof WebGLTexture<"u"&&wa instanceof WebGLTexture));default:throw Error(`Type is not supported: ${ba}`)}}function Fa(oa){var ba=Ra(oa,0);if(!ba){ba=Ma(oa);const wa=Pa(oa),xa=new Uint8Array(oa.width*oa.height*4);ra$1(wa,ba,Ia(oa)),ba.readPixels(0,0,oa.width,oa.height,ba.RGBA,ba.UNSIGNED_BYTE,xa),ia(wa),ba=new ImageData(new Uint8ClampedArray(xa.buffer),oa.width,oa.height),oa.g.push(ba)}return ba}function Ia(oa){let ba=Ra(oa,2);if(!ba){const wa=Ma(oa);ba=Oa(oa);const xa=Ra(oa,1)||Fa(oa);wa.texImage2D(wa.TEXTURE_2D,0,wa.RGBA,wa.RGBA,wa.UNSIGNED_BYTE,xa),Ca(oa)}return ba}function Ma(oa){if(!oa.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return oa.h||(oa.h=qo$1(oa.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),oa.h}function Pa(oa){return oa.l||(oa.l=new sa$1),oa.l}function Oa(oa){const ba=Ma(oa);ba.viewport(0,0,oa.width,oa.height),ba.activeTexture(ba.TEXTURE0);let wa=Ra(oa,2);return wa||(wa=na$1(Pa(oa),ba),oa.g.push(wa),oa.m=!0),ba.bindTexture(ba.TEXTURE_2D,wa),wa}function Ca(oa){oa.h.bindTexture(oa.h.TEXTURE_2D,null)}function Ua(oa){const ba=Ma(oa);return ea$1(Pa(oa),ba,!0,(()=>(function(wa,xa){const Sa=wa.canvas;if(Sa.width===wa.width&&Sa.height===wa.height)return xa();const va=Sa.width,Ea=Sa.height;return Sa.width=wa.width,Sa.height=wa.height,wa=xa(),Sa.width=va,Sa.height=Ea,wa})(oa,(()=>{if(ba.bindFramebuffer(ba.FRAMEBUFFER,null),ba.clearColor(0,0,0,0),ba.clear(ba.COLOR_BUFFER_BIT),ba.drawArrays(ba.TRIANGLE_FAN,0,4),!(oa.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return oa.canvas.transferToImageBitmap()}))))}var Da=class{constructor(oa,ba,wa,xa,Sa,va,Ea){this.g=oa,this.j=ba,this.m=wa,this.canvas=xa,this.l=Sa,this.width=va,this.height=Ea,(this.j||this.m)&&--Na===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ea(){return!!Ra(this,0)}ka(){return!!Ra(this,1)}P(){return!!Ra(this,2)}Ca(){return Fa(this)}Ba(){var oa=Ra(this,1);return oa||(Ia(this),Oa(this),oa=Ua(this),Ca(this),this.g.push(oa),this.j=!0),oa}M(){return Ia(this)}clone(){const oa=[];for(const ba of this.g){let wa;if(ba instanceof ImageData)wa=new ImageData(ba.data,this.width,this.height);else if(ba instanceof WebGLTexture){const xa=Ma(this),Sa=Pa(this);xa.activeTexture(xa.TEXTURE1),wa=na$1(Sa,xa),xa.bindTexture(xa.TEXTURE_2D,wa),xa.texImage2D(xa.TEXTURE_2D,0,xa.RGBA,this.width,this.height,0,xa.RGBA,xa.UNSIGNED_BYTE,null),xa.bindTexture(xa.TEXTURE_2D,null),ra$1(Sa,xa,wa),ea$1(Sa,xa,!1,(()=>{Oa(this),xa.clearColor(0,0,0,0),xa.clear(xa.COLOR_BUFFER_BIT),xa.drawArrays(xa.TRIANGLE_FAN,0,4),Ca(this)})),ia(Sa),Ca(this)}else{if(!(ba instanceof ImageBitmap))throw Error(`Type is not supported: ${ba}`);Ia(this),Oa(this),wa=Ua(this),Ca(this)}oa.push(wa)}return new Da(oa,this.ka(),this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Ra(this,1).close(),this.m&&Ma(this).deleteTexture(Ra(this,2)),Na=-1}};Da.prototype.close=Da.prototype.close,Da.prototype.clone=Da.prototype.clone,Da.prototype.getAsWebGLTexture=Da.prototype.M,Da.prototype.getAsImageBitmap=Da.prototype.Ba,Da.prototype.getAsImageData=Da.prototype.Ca,Da.prototype.hasWebGLTexture=Da.prototype.P,Da.prototype.hasImageBitmap=Da.prototype.ka,Da.prototype.hasImageData=Da.prototype.Ea;var Na=250;function Ba(...oa){return oa.map((([ba,wa])=>({start:ba,end:wa})))}const Ga=(function(oa){return class extends oa{La(){this.i._registerModelResourcesGraphService()}}})((ja$1=class{constructor(oa,ba){this.l=!0,this.i=oa,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",ba!==void 0?this.i.canvas=ba:Oo$1()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(oa){const ba=await(await fetch(oa)).arrayBuffer();oa=!(oa.endsWith(".pbtxt")||oa.endsWith(".textproto")),this.setGraph(new Uint8Array(ba),oa)}setGraphFromString(oa){this.setGraph(new TextEncoder().encode(oa),!1)}setGraph(oa,ba){const wa=oa.length,xa=this.i._malloc(wa);this.i.HEAPU8.set(oa,xa),ba?this.i._changeBinaryGraph(wa,xa):this.i._changeTextGraph(wa,xa),this.i._free(xa)}configureAudio(oa,ba,wa,xa,Sa){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Do$1(this,xa||"input_audio",(va=>{Do$1(this,Sa=Sa||"audio_header",(Ea=>{this.i._configureAudio(va,Ea,oa,ba??0,wa)}))}))}setAutoResizeCanvas(oa){this.l=oa}setAutoRenderToScreen(oa){this.i._setAutoRenderToScreen(oa)}setGpuBufferVerticalFlip(oa){this.i.gpuOriginForWebTexturesIsBottomLeft=oa}da(oa){Go(this,"__graph_config__",(ba=>{oa(ba)})),Do$1(this,"__graph_config__",(ba=>{this.i._getGraphConfig(ba,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(oa){this.i.errorListener=oa}attachEmptyPacketListener(oa,ba){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[oa]=ba}addAudioToStream(oa,ba,wa){this.addAudioToStreamWithShape(oa,0,0,ba,wa)}addAudioToStreamWithShape(oa,ba,wa,xa,Sa){const va=4*oa.length;this.h!==va&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(va),this.h=va),this.i.HEAPF32.set(oa,this.g/4),Do$1(this,xa,(Ea=>{this.i._addAudioToInputStream(this.g,ba,wa,Ea,Sa)}))}addGpuBufferToStream(oa,ba,wa){Do$1(this,ba,(xa=>{const[Sa,va]=No(this,oa,xa);this.i._addBoundTextureToStream(xa,Sa,va,wa)}))}addBoolToStream(oa,ba,wa){Do$1(this,ba,(xa=>{this.i._addBoolToInputStream(oa,xa,wa)}))}addDoubleToStream(oa,ba,wa){Do$1(this,ba,(xa=>{this.i._addDoubleToInputStream(oa,xa,wa)}))}addFloatToStream(oa,ba,wa){Do$1(this,ba,(xa=>{this.i._addFloatToInputStream(oa,xa,wa)}))}addIntToStream(oa,ba,wa){Do$1(this,ba,(xa=>{this.i._addIntToInputStream(oa,xa,wa)}))}addUintToStream(oa,ba,wa){Do$1(this,ba,(xa=>{this.i._addUintToInputStream(oa,xa,wa)}))}addStringToStream(oa,ba,wa){Do$1(this,ba,(xa=>{Do$1(this,oa,(Sa=>{this.i._addStringToInputStream(Sa,xa,wa)}))}))}addStringRecordToStream(oa,ba,wa){Do$1(this,ba,(xa=>{Bo(this,Object.keys(oa),(Sa=>{Bo(this,Object.values(oa),(va=>{this.i._addFlatHashMapToInputStream(Sa,va,Object.keys(oa).length,xa,wa)}))}))}))}addProtoToStream(oa,ba,wa,xa){Do$1(this,wa,(Sa=>{Do$1(this,ba,(va=>{const Ea=this.i._malloc(oa.length);this.i.HEAPU8.set(oa,Ea),this.i._addProtoToInputStream(Ea,oa.length,va,Sa,xa),this.i._free(Ea)}))}))}addEmptyPacketToStream(oa,ba){Do$1(this,oa,(wa=>{this.i._addEmptyPacketToInputStream(wa,ba)}))}addBoolVectorToStream(oa,ba,wa){Do$1(this,ba,(xa=>{const Sa=this.i._allocateBoolVector(oa.length);if(!Sa)throw Error("Unable to allocate new bool vector on heap.");for(const va of oa)this.i._addBoolVectorEntry(Sa,va);this.i._addBoolVectorToInputStream(Sa,xa,wa)}))}addDoubleVectorToStream(oa,ba,wa){Do$1(this,ba,(xa=>{const Sa=this.i._allocateDoubleVector(oa.length);if(!Sa)throw Error("Unable to allocate new double vector on heap.");for(const va of oa)this.i._addDoubleVectorEntry(Sa,va);this.i._addDoubleVectorToInputStream(Sa,xa,wa)}))}addFloatVectorToStream(oa,ba,wa){Do$1(this,ba,(xa=>{const Sa=this.i._allocateFloatVector(oa.length);if(!Sa)throw Error("Unable to allocate new float vector on heap.");for(const va of oa)this.i._addFloatVectorEntry(Sa,va);this.i._addFloatVectorToInputStream(Sa,xa,wa)}))}addIntVectorToStream(oa,ba,wa){Do$1(this,ba,(xa=>{const Sa=this.i._allocateIntVector(oa.length);if(!Sa)throw Error("Unable to allocate new int vector on heap.");for(const va of oa)this.i._addIntVectorEntry(Sa,va);this.i._addIntVectorToInputStream(Sa,xa,wa)}))}addUintVectorToStream(oa,ba,wa){Do$1(this,ba,(xa=>{const Sa=this.i._allocateUintVector(oa.length);if(!Sa)throw Error("Unable to allocate new unsigned int vector on heap.");for(const va of oa)this.i._addUintVectorEntry(Sa,va);this.i._addUintVectorToInputStream(Sa,xa,wa)}))}addStringVectorToStream(oa,ba,wa){Do$1(this,ba,(xa=>{const Sa=this.i._allocateStringVector(oa.length);if(!Sa)throw Error("Unable to allocate new string vector on heap.");for(const va of oa)Do$1(this,va,(Ea=>{this.i._addStringVectorEntry(Sa,Ea)}));this.i._addStringVectorToInputStream(Sa,xa,wa)}))}addBoolToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{this.i._addBoolToInputSidePacket(oa,wa)}))}addDoubleToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{this.i._addDoubleToInputSidePacket(oa,wa)}))}addFloatToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{this.i._addFloatToInputSidePacket(oa,wa)}))}addIntToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{this.i._addIntToInputSidePacket(oa,wa)}))}addUintToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{this.i._addUintToInputSidePacket(oa,wa)}))}addStringToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{Do$1(this,oa,(xa=>{this.i._addStringToInputSidePacket(xa,wa)}))}))}addProtoToInputSidePacket(oa,ba,wa){Do$1(this,wa,(xa=>{Do$1(this,ba,(Sa=>{const va=this.i._malloc(oa.length);this.i.HEAPU8.set(oa,va),this.i._addProtoToInputSidePacket(va,oa.length,Sa,xa),this.i._free(va)}))}))}addBoolVectorToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{const xa=this.i._allocateBoolVector(oa.length);if(!xa)throw Error("Unable to allocate new bool vector on heap.");for(const Sa of oa)this.i._addBoolVectorEntry(xa,Sa);this.i._addBoolVectorToInputSidePacket(xa,wa)}))}addDoubleVectorToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{const xa=this.i._allocateDoubleVector(oa.length);if(!xa)throw Error("Unable to allocate new double vector on heap.");for(const Sa of oa)this.i._addDoubleVectorEntry(xa,Sa);this.i._addDoubleVectorToInputSidePacket(xa,wa)}))}addFloatVectorToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{const xa=this.i._allocateFloatVector(oa.length);if(!xa)throw Error("Unable to allocate new float vector on heap.");for(const Sa of oa)this.i._addFloatVectorEntry(xa,Sa);this.i._addFloatVectorToInputSidePacket(xa,wa)}))}addIntVectorToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{const xa=this.i._allocateIntVector(oa.length);if(!xa)throw Error("Unable to allocate new int vector on heap.");for(const Sa of oa)this.i._addIntVectorEntry(xa,Sa);this.i._addIntVectorToInputSidePacket(xa,wa)}))}addUintVectorToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{const xa=this.i._allocateUintVector(oa.length);if(!xa)throw Error("Unable to allocate new unsigned int vector on heap.");for(const Sa of oa)this.i._addUintVectorEntry(xa,Sa);this.i._addUintVectorToInputSidePacket(xa,wa)}))}addStringVectorToInputSidePacket(oa,ba){Do$1(this,ba,(wa=>{const xa=this.i._allocateStringVector(oa.length);if(!xa)throw Error("Unable to allocate new string vector on heap.");for(const Sa of oa)Do$1(this,Sa,(va=>{this.i._addStringVectorEntry(xa,va)}));this.i._addStringVectorToInputSidePacket(xa,wa)}))}attachBoolListener(oa,ba){Go(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachBoolListener(wa)}))}attachBoolVectorListener(oa,ba){jo$1(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachBoolVectorListener(wa)}))}attachIntListener(oa,ba){Go(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachIntListener(wa)}))}attachIntVectorListener(oa,ba){jo$1(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachIntVectorListener(wa)}))}attachUintListener(oa,ba){Go(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachUintListener(wa)}))}attachUintVectorListener(oa,ba){jo$1(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachUintVectorListener(wa)}))}attachDoubleListener(oa,ba){Go(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachDoubleListener(wa)}))}attachDoubleVectorListener(oa,ba){jo$1(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachDoubleVectorListener(wa)}))}attachFloatListener(oa,ba){Go(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachFloatListener(wa)}))}attachFloatVectorListener(oa,ba){jo$1(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachFloatVectorListener(wa)}))}attachStringListener(oa,ba){Go(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachStringListener(wa)}))}attachStringVectorListener(oa,ba){jo$1(this,oa,ba),Do$1(this,oa,(wa=>{this.i._attachStringVectorListener(wa)}))}attachProtoListener(oa,ba,wa){Go(this,oa,ba),Do$1(this,oa,(xa=>{this.i._attachProtoListener(xa,wa||!1)}))}attachProtoVectorListener(oa,ba,wa){jo$1(this,oa,ba),Do$1(this,oa,(xa=>{this.i._attachProtoVectorListener(xa,wa||!1)}))}attachAudioListener(oa,ba,wa){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Go(this,oa,((xa,Sa)=>{xa=new Float32Array(xa.buffer,xa.byteOffset,xa.length/4),ba(xa,Sa)})),Do$1(this,oa,(xa=>{this.i._attachAudioListener(xa,wa||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends ja$1{get ea(){return this.i}qa(oa,ba,wa){Do$1(this,ba,(xa=>{const[Sa,va]=No(this,oa,xa);this.ea._addBoundTextureAsImageToStream(xa,Sa,va,wa)}))}U(oa,ba){Go(this,oa,ba),Do$1(this,oa,(wa=>{this.ea._attachImageListener(wa)}))}ca(oa,ba){jo$1(this,oa,ba),Do$1(this,oa,(wa=>{this.ea._attachImageVectorListener(wa)}))}}));var ja$1,Va=class extends Ga{};async function Xa$1(oa,ba,wa){return(async function(xa,Sa,va,Ea){return Vo(xa,Sa,va,Ea)})(oa,wa.canvas??(Oo$1()?void 0:document.createElement("canvas")),ba,wa)}function Ha$1(oa,ba,wa,xa){if(oa.T){const va=new fs$1;if(wa!=null&&wa.regionOfInterest){if(!oa.pa)throw Error("This task doesn't support region-of-interest.");var Sa=wa.regionOfInterest;if(Sa.left>=Sa.right||Sa.top>=Sa.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(Sa.left<0||Sa.top<0||Sa.right>1||Sa.bottom>1)throw Error("Expected RectF values to be in [0,1].");gn$1(va,1,(Sa.left+Sa.right)/2),gn$1(va,2,(Sa.top+Sa.bottom)/2),gn$1(va,4,Sa.right-Sa.left),gn$1(va,3,Sa.bottom-Sa.top)}else gn$1(va,1,.5),gn$1(va,2,.5),gn$1(va,4,1),gn$1(va,3,1);if(wa!=null&&wa.rotationDegrees){if((wa==null?void 0:wa.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(gn$1(va,5,-Math.PI*wa.rotationDegrees/180),(wa==null?void 0:wa.rotationDegrees)%180!=0){const[Ea,La]=Uo(ba);wa=dn$1(va,3)*La/Ea,Sa=dn$1(va,4)*Ea/La,gn$1(va,4,wa),gn$1(va,3,Sa)}}oa.g.addProtoToStream(va.g(),"mediapipe.NormalizedRect",oa.T,xa)}oa.g.qa(ba,oa.aa,xa??performance.now()),oa.finishProcessing()}function Wa(oa,ba,wa){var xa;if((xa=oa.baseOptions)!=null&&xa.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");Ha$1(oa,ba,wa,oa.B+1)}function za(oa,ba,wa,xa){var Sa;if(!((Sa=oa.baseOptions)!=null&&Sa.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");Ha$1(oa,ba,wa,xa)}function Ka$1(oa,ba,wa,xa){var Sa=ba.data;const va=ba.width,Ea=va*(ba=ba.height);if((Sa instanceof Uint8Array||Sa instanceof Float32Array)&&Sa.length!==Ea)throw Error("Unsupported channel count: "+Sa.length/Ea);return oa=new ya([Sa],wa,!1,oa.g.i.canvas,oa.O,va,ba),xa?oa.clone():oa}var Ya$1=class extends $o$1{constructor(ba,wa,xa,Sa){super(ba),this.g=ba,this.aa=wa,this.T=xa,this.pa=Sa,this.O=new sa$1}l(ba,wa=!0){if("runningMode"in ba&&fn$1(this.baseOptions,2,!!ba.runningMode&&ba.runningMode!=="IMAGE"),ba.canvas!==void 0&&this.g.i.canvas!==ba.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(ba,wa)}close(){this.O.close(),super.close()}};Ya$1.prototype.close=Ya$1.prototype.close;var $a=class extends Ya$1{constructor(oa,ba){super(new Va(oa,ba),"image_in","norm_rect_in",!1),this.j={detections:[]},sn$1(oa=this.h=new Is$1,0,1,ba=new Ls$1),gn$1(this.h,2,.5),gn$1(this.h,3,.3)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(oa){sn$1(this.h,0,1,oa)}o(oa){return"minDetectionConfidence"in oa&&gn$1(this.h,2,oa.minDetectionConfidence??.5),"minSuppressionThreshold"in oa&&gn$1(this.h,3,oa.minSuppressionThreshold??.3),this.l(oa)}D(oa,ba){return this.j={detections:[]},Wa(this,oa,ba),this.j}F(oa,ba,wa){return this.j={detections:[]},za(this,oa,wa,ba),this.j}m(){var oa=new qi$1;Yi$1(oa,"image_in"),Yi$1(oa,"norm_rect_in"),$i$1(oa,"detections");const ba=new Di$1;Xn$1(ba,Ps$1,this.h);const wa=new Xi$1;Gi$1(wa,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),ji$1(wa,"IMAGE:image_in"),ji$1(wa,"NORM_RECT:norm_rect_in"),Vi$1(wa,"DETECTIONS:detections"),wa.o(ba),Ki$1(oa,wa),this.g.attachProtoVectorListener("detections",((xa,Sa)=>{for(const va of xa)xa=os$1(va),this.j.detections.push(bo$1(xa));Wo(this,Sa)})),this.g.attachEmptyPacketListener("detections",(xa=>{Wo(this,xa)})),oa=oa.g(),this.setGraph(new Uint8Array(oa),!0)}};$a.prototype.detectForVideo=$a.prototype.F,$a.prototype.detect=$a.prototype.D,$a.prototype.setOptions=$a.prototype.o,$a.createFromModelPath=async function(oa,ba){return Xa$1($a,oa,{baseOptions:{modelAssetPath:ba}})},$a.createFromModelBuffer=function(oa,ba){return Xa$1($a,oa,{baseOptions:{modelAssetBuffer:ba}})},$a.createFromOptions=function(oa,ba){return Xa$1($a,oa,ba)};var qa$1=Ba([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Ja$1=Ba([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Za$1=Ba([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),Qa$1=Ba([474,475],[475,476],[476,477],[477,474]),tc$1=Ba([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),ec$1=Ba([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),nc$1=Ba([469,470],[470,471],[471,472],[472,469]),rc$1=Ba([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),ic$1=[...qa$1,...Ja$1,...Za$1,...tc$1,...ec$1,...rc$1],sc$1=Ba([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function oc$1(oa){oa.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var ac$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,sn$1(ba=this.h=new Us$1,0,1,wa=new Ls$1),this.v=new Cs,sn$1(this.h,0,3,this.v),this.s=new Is$1,sn$1(this.h,0,2,this.s),pn$1(this.s,4,1),gn$1(this.s,2,.5),gn$1(this.v,2,.5),gn$1(this.h,4,.5)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){return"numFaces"in ba&&pn$1(this.s,4,ba.numFaces??1),"minFaceDetectionConfidence"in ba&&gn$1(this.s,2,ba.minFaceDetectionConfidence??.5),"minTrackingConfidence"in ba&&gn$1(this.h,4,ba.minTrackingConfidence??.5),"minFacePresenceConfidence"in ba&&gn$1(this.v,2,ba.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in ba&&(this.outputFaceBlendshapes=!!ba.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in ba&&(this.outputFacialTransformationMatrixes=!!ba.outputFacialTransformationMatrixes),this.l(ba)}D(ba,wa){return oc$1(this),Wa(this,ba,wa),this.j}F(ba,wa,xa){return oc$1(this),za(this,ba,xa,wa),this.j}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"norm_rect"),$i$1(ba,"face_landmarks");const wa=new Di$1;Xn$1(wa,Bs,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"NORM_LANDMARKS:face_landmarks"),xa.o(wa),Ki$1(ba,xa),this.g.attachProtoVectorListener("face_landmarks",((Sa,va)=>{for(const Ea of Sa)Sa=us$1(Ea),this.j.faceLandmarks.push(ko$1(Sa));Wo(this,va)})),this.g.attachEmptyPacketListener("face_landmarks",(Sa=>{Wo(this,Sa)})),this.outputFaceBlendshapes&&($i$1(ba,"blendshapes"),Vi$1(xa,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",((Sa,va)=>{if(this.outputFaceBlendshapes)for(const Ea of Sa)Sa=ns$1(Ea),this.j.faceBlendshapes.push(Ao$1(Sa.g()??[]));Wo(this,va)})),this.g.attachEmptyPacketListener("blendshapes",(Sa=>{Wo(this,Sa)}))),this.outputFacialTransformationMatrixes&&($i$1(ba,"face_geometry"),Vi$1(xa,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",((Sa,va)=>{if(this.outputFacialTransformationMatrixes)for(const Ea of Sa)(Sa=en$1(Os$1(Ea),ls$1,2))&&this.j.facialTransformationMatrixes.push({rows:un$1(Sa,1)??0??0,columns:un$1(Sa,2)??0??0,data:Ve$1(Sa,3,$t$1,je()).slice()??[]});Wo(this,va)})),this.g.attachEmptyPacketListener("face_geometry",(Sa=>{Wo(this,Sa)}))),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};ac$1.prototype.detectForVideo=ac$1.prototype.F,ac$1.prototype.detect=ac$1.prototype.D,ac$1.prototype.setOptions=ac$1.prototype.o,ac$1.createFromModelPath=function(oa,ba){return Xa$1(ac$1,oa,{baseOptions:{modelAssetPath:ba}})},ac$1.createFromModelBuffer=function(oa,ba){return Xa$1(ac$1,oa,{baseOptions:{modelAssetBuffer:ba}})},ac$1.createFromOptions=function(oa,ba){return Xa$1(ac$1,oa,ba)},ac$1.FACE_LANDMARKS_LIPS=qa$1,ac$1.FACE_LANDMARKS_LEFT_EYE=Ja$1,ac$1.FACE_LANDMARKS_LEFT_EYEBROW=Za$1,ac$1.FACE_LANDMARKS_LEFT_IRIS=Qa$1,ac$1.FACE_LANDMARKS_RIGHT_EYE=tc$1,ac$1.FACE_LANDMARKS_RIGHT_EYEBROW=ec$1,ac$1.FACE_LANDMARKS_RIGHT_IRIS=nc$1,ac$1.FACE_LANDMARKS_FACE_OVAL=rc$1,ac$1.FACE_LANDMARKS_CONTOURS=ic$1,ac$1.FACE_LANDMARKS_TESSELATION=sc$1;var cc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect",!0),sn$1(ba=this.j=new Gs,0,1,wa=new Ls$1)}get baseOptions(){return en$1(this.j,Ls$1,1)}set baseOptions(ba){sn$1(this.j,0,1,ba)}o(ba){return super.l(ba)}Oa(ba,wa,xa){const Sa=typeof wa!="function"?wa:{};if(this.h=typeof wa=="function"?wa:xa,Wa(this,ba,Sa??{}),!this.h)return this.s}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"norm_rect"),$i$1(ba,"stylized_image");const wa=new Di$1;Xn$1(wa,js,this.j);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"STYLIZED_IMAGE:stylized_image"),xa.o(wa),Ki$1(ba,xa),this.g.U("stylized_image",((Sa,va)=>{var Ea=!this.h,La=Sa.data,eu=Sa.width;const Ta=eu*(Sa=Sa.height);if(La instanceof Uint8Array)if(La.length===3*Ta){const Aa=new Uint8ClampedArray(4*Ta);for(let ka=0;ka<Ta;++ka)Aa[4*ka]=La[3*ka],Aa[4*ka+1]=La[3*ka+1],Aa[4*ka+2]=La[3*ka+2],Aa[4*ka+3]=255;La=new ImageData(Aa,eu,Sa)}else{if(La.length!==4*Ta)throw Error("Unsupported channel count: "+La.length/Ta);La=new ImageData(new Uint8ClampedArray(La.buffer,La.byteOffset,La.length),eu,Sa)}else if(!(La instanceof WebGLTexture))throw Error(`Unsupported format: ${La.constructor.name}`);eu=new Da([La],!1,!1,this.g.i.canvas,this.O,eu,Sa),this.s=Ea=Ea?eu.clone():eu,this.h&&this.h(Ea),Wo(this,va)})),this.g.attachEmptyPacketListener("stylized_image",(Sa=>{this.s=null,this.h&&this.h(null),Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};cc$1.prototype.stylize=cc$1.prototype.Oa,cc$1.prototype.setOptions=cc$1.prototype.o,cc$1.createFromModelPath=function(oa,ba){return Xa$1(cc$1,oa,{baseOptions:{modelAssetPath:ba}})},cc$1.createFromModelBuffer=function(oa,ba){return Xa$1(cc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},cc$1.createFromOptions=function(oa,ba){return Xa$1(cc$1,oa,ba)};var hc$1=Ba([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function uc$1(oa){oa.gestures=[],oa.landmarks=[],oa.worldLandmarks=[],oa.handedness=[]}function lc$1(oa){return oa.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:oa.gestures,landmarks:oa.landmarks,worldLandmarks:oa.worldLandmarks,handedness:oa.handedness,handednesses:oa.handedness}}function dc$1(oa,ba=!0){const wa=[];for(const Sa of oa){var xa=ns$1(Sa);oa=[];for(const va of xa.g())xa=ba&&un$1(va,1)!=null?un$1(va,1)??0:-1,oa.push({score:dn$1(va,2)??0,index:xa,categoryName:ln$1(va,3)??""??"",displayName:ln$1(va,4)??""??""});wa.push(oa)}return wa}var fc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],sn$1(ba=this.j=new Ys$1,0,1,wa=new Ls$1),this.s=new Ks,sn$1(this.j,0,2,this.s),this.C=new zs,sn$1(this.s,0,3,this.C),this.v=new Ws,sn$1(this.s,0,2,this.v),this.h=new Hs,sn$1(this.j,0,3,this.h),gn$1(this.v,2,.5),gn$1(this.s,4,.5),gn$1(this.C,2,.5)}get baseOptions(){return en$1(this.j,Ls$1,1)}set baseOptions(ba){sn$1(this.j,0,1,ba)}o(ba){var va,Ea,La,eu;if(pn$1(this.v,3,ba.numHands??1),"minHandDetectionConfidence"in ba&&gn$1(this.v,2,ba.minHandDetectionConfidence??.5),"minTrackingConfidence"in ba&&gn$1(this.s,4,ba.minTrackingConfidence??.5),"minHandPresenceConfidence"in ba&&gn$1(this.C,2,ba.minHandPresenceConfidence??.5),ba.cannedGesturesClassifierOptions){var wa=new Vs,xa=wa,Sa=To$1(ba.cannedGesturesClassifierOptions,(va=en$1(this.h,Vs,3))==null?void 0:va.h());sn$1(xa,0,2,Sa),sn$1(this.h,0,3,wa)}else ba.cannedGesturesClassifierOptions===void 0&&((Ea=en$1(this.h,Vs,3))==null||Ea.g());return ba.customGesturesClassifierOptions?(sn$1(xa=wa=new Vs,0,2,Sa=To$1(ba.customGesturesClassifierOptions,(La=en$1(this.h,Vs,4))==null?void 0:La.h())),sn$1(this.h,0,4,wa)):ba.customGesturesClassifierOptions===void 0&&((eu=en$1(this.h,Vs,4))==null||eu.g()),this.l(ba)}Ja(ba,wa){return uc$1(this),Wa(this,ba,wa),lc$1(this)}Ka(ba,wa,xa){return uc$1(this),za(this,ba,xa,wa),lc$1(this)}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"norm_rect"),$i$1(ba,"hand_gestures"),$i$1(ba,"hand_landmarks"),$i$1(ba,"world_hand_landmarks"),$i$1(ba,"handedness");const wa=new Di$1;Xn$1(wa,Qs$1,this.j);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"HAND_GESTURES:hand_gestures"),Vi$1(xa,"LANDMARKS:hand_landmarks"),Vi$1(xa,"WORLD_LANDMARKS:world_hand_landmarks"),Vi$1(xa,"HANDEDNESS:handedness"),xa.o(wa),Ki$1(ba,xa),this.g.attachProtoVectorListener("hand_landmarks",((Sa,va)=>{for(const Ea of Sa){Sa=us$1(Ea);const La=[];for(const eu of rn(Sa,hs$1,1))La.push({x:dn$1(eu,1)??0,y:dn$1(eu,2)??0,z:dn$1(eu,3)??0,visibility:dn$1(eu,4)??0});this.landmarks.push(La)}Wo(this,va)})),this.g.attachEmptyPacketListener("hand_landmarks",(Sa=>{Wo(this,Sa)})),this.g.attachProtoVectorListener("world_hand_landmarks",((Sa,va)=>{for(const Ea of Sa){Sa=cs$1(Ea);const La=[];for(const eu of rn(Sa,as$1,1))La.push({x:dn$1(eu,1)??0,y:dn$1(eu,2)??0,z:dn$1(eu,3)??0,visibility:dn$1(eu,4)??0});this.worldLandmarks.push(La)}Wo(this,va)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(Sa=>{Wo(this,Sa)})),this.g.attachProtoVectorListener("hand_gestures",((Sa,va)=>{this.gestures.push(...dc$1(Sa,!1)),Wo(this,va)})),this.g.attachEmptyPacketListener("hand_gestures",(Sa=>{Wo(this,Sa)})),this.g.attachProtoVectorListener("handedness",((Sa,va)=>{this.handedness.push(...dc$1(Sa)),Wo(this,va)})),this.g.attachEmptyPacketListener("handedness",(Sa=>{Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};function pc$1(oa){return{landmarks:oa.landmarks,worldLandmarks:oa.worldLandmarks,handednesses:oa.handedness,handedness:oa.handedness}}fc$1.prototype.recognizeForVideo=fc$1.prototype.Ka,fc$1.prototype.recognize=fc$1.prototype.Ja,fc$1.prototype.setOptions=fc$1.prototype.o,fc$1.createFromModelPath=function(oa,ba){return Xa$1(fc$1,oa,{baseOptions:{modelAssetPath:ba}})},fc$1.createFromModelBuffer=function(oa,ba){return Xa$1(fc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},fc$1.createFromOptions=function(oa,ba){return Xa$1(fc$1,oa,ba)},fc$1.HAND_CONNECTIONS=hc$1;var gc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],sn$1(ba=this.h=new Ks,0,1,wa=new Ls$1),this.s=new zs,sn$1(this.h,0,3,this.s),this.j=new Ws,sn$1(this.h,0,2,this.j),pn$1(this.j,3,1),gn$1(this.j,2,.5),gn$1(this.s,2,.5),gn$1(this.h,4,.5)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){return"numHands"in ba&&pn$1(this.j,3,ba.numHands??1),"minHandDetectionConfidence"in ba&&gn$1(this.j,2,ba.minHandDetectionConfidence??.5),"minTrackingConfidence"in ba&&gn$1(this.h,4,ba.minTrackingConfidence??.5),"minHandPresenceConfidence"in ba&&gn$1(this.s,2,ba.minHandPresenceConfidence??.5),this.l(ba)}D(ba,wa){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Wa(this,ba,wa),pc$1(this)}F(ba,wa,xa){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],za(this,ba,xa,wa),pc$1(this)}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"norm_rect"),$i$1(ba,"hand_landmarks"),$i$1(ba,"world_hand_landmarks"),$i$1(ba,"handedness");const wa=new Di$1;Xn$1(wa,to$1,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"LANDMARKS:hand_landmarks"),Vi$1(xa,"WORLD_LANDMARKS:world_hand_landmarks"),Vi$1(xa,"HANDEDNESS:handedness"),xa.o(wa),Ki$1(ba,xa),this.g.attachProtoVectorListener("hand_landmarks",((Sa,va)=>{for(const Ea of Sa)Sa=us$1(Ea),this.landmarks.push(ko$1(Sa));Wo(this,va)})),this.g.attachEmptyPacketListener("hand_landmarks",(Sa=>{Wo(this,Sa)})),this.g.attachProtoVectorListener("world_hand_landmarks",((Sa,va)=>{for(const Ea of Sa)Sa=cs$1(Ea),this.worldLandmarks.push(So$1(Sa));Wo(this,va)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(Sa=>{Wo(this,Sa)})),this.g.attachProtoVectorListener("handedness",((Sa,va)=>{var Ea=this.handedness,La=Ea.push;const eu=[];for(const Ta of Sa){Sa=ns$1(Ta);const Aa=[];for(const ka of Sa.g())Aa.push({score:dn$1(ka,2)??0,index:un$1(ka,1)??0??-1,categoryName:ln$1(ka,3)??""??"",displayName:ln$1(ka,4)??""??""});eu.push(Aa)}La.call(Ea,...eu),Wo(this,va)})),this.g.attachEmptyPacketListener("handedness",(Sa=>{Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};gc$1.prototype.detectForVideo=gc$1.prototype.F,gc$1.prototype.detect=gc$1.prototype.D,gc$1.prototype.setOptions=gc$1.prototype.o,gc$1.createFromModelPath=function(oa,ba){return Xa$1(gc$1,oa,{baseOptions:{modelAssetPath:ba}})},gc$1.createFromModelBuffer=function(oa,ba){return Xa$1(gc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},gc$1.createFromOptions=function(oa,ba){return Xa$1(gc$1,oa,ba)},gc$1.HAND_CONNECTIONS=hc$1;var mc$1=Ba([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function yc$1(oa){oa.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function _c$1(oa){try{if(!oa.C)return oa.h;oa.C(oa.h)}finally{Yo$1(oa)}}function vc$1(oa,ba){oa=us$1(oa),ba.push(ko$1(oa))}var Ec$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,sn$1(ba=this.j=new io$1,0,1,wa=new Ls$1),this.J=new zs,sn$1(this.j,0,2,this.J),this.Z=new eo$1,sn$1(this.j,0,3,this.Z),this.s=new Is$1,sn$1(this.j,0,4,this.s),this.H=new Cs,sn$1(this.j,0,5,this.H),this.v=new no$1,sn$1(this.j,0,6,this.v),this.K=new ro$1,sn$1(this.j,0,7,this.K),gn$1(this.s,2,.5),gn$1(this.s,3,.3),gn$1(this.H,2,.5),gn$1(this.v,2,.5),gn$1(this.v,3,.3),gn$1(this.K,2,.5),gn$1(this.J,2,.5)}get baseOptions(){return en$1(this.j,Ls$1,1)}set baseOptions(ba){sn$1(this.j,0,1,ba)}o(ba){return"minFaceDetectionConfidence"in ba&&gn$1(this.s,2,ba.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in ba&&gn$1(this.s,3,ba.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in ba&&gn$1(this.H,2,ba.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in ba&&(this.outputFaceBlendshapes=!!ba.outputFaceBlendshapes),"minPoseDetectionConfidence"in ba&&gn$1(this.v,2,ba.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in ba&&gn$1(this.v,3,ba.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in ba&&gn$1(this.K,2,ba.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in ba&&(this.outputPoseSegmentationMasks=!!ba.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in ba&&gn$1(this.J,2,ba.minHandLandmarksConfidence??.5),this.l(ba)}D(ba,wa,xa){const Sa=typeof wa!="function"?wa:{};return this.C=typeof wa=="function"?wa:xa,yc$1(this),Wa(this,ba,Sa),_c$1(this)}F(ba,wa,xa,Sa){const va=typeof xa!="function"?xa:{};return this.C=typeof xa=="function"?xa:Sa,yc$1(this),za(this,ba,va,wa),_c$1(this)}m(){var ba=new qi$1;Yi$1(ba,"input_frames_image"),$i$1(ba,"pose_landmarks"),$i$1(ba,"pose_world_landmarks"),$i$1(ba,"face_landmarks"),$i$1(ba,"left_hand_landmarks"),$i$1(ba,"left_hand_world_landmarks"),$i$1(ba,"right_hand_landmarks"),$i$1(ba,"right_hand_world_landmarks");const wa=new Di$1,xa=new bi$1;Ke$1(xa,1,ae$1("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),(function(va,Ea){if(Ea!=null)if(Array.isArray(Ea))De$1(va,2,Re$1(Ea));else{if(!(typeof Ea=="string"||Ea instanceof N||O(Ea)))throw Error("invalid value in Any.value field: "+Ea+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");Ke$1(va,2,ft$1(Ea,!1),U$1())}})(xa,this.j.g());const Sa=new Xi$1;Gi$1(Sa,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),hn$1(Sa,8,bi$1,xa),ji$1(Sa,"IMAGE:input_frames_image"),Vi$1(Sa,"POSE_LANDMARKS:pose_landmarks"),Vi$1(Sa,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),Vi$1(Sa,"FACE_LANDMARKS:face_landmarks"),Vi$1(Sa,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),Vi$1(Sa,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),Vi$1(Sa,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),Vi$1(Sa,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),Sa.o(wa),Ki$1(ba,Sa),zo(this,ba),this.g.attachProtoListener("pose_landmarks",((va,Ea)=>{vc$1(va,this.h.poseLandmarks),Wo(this,Ea)})),this.g.attachEmptyPacketListener("pose_landmarks",(va=>{Wo(this,va)})),this.g.attachProtoListener("pose_world_landmarks",((va,Ea)=>{var La=this.h.poseWorldLandmarks;va=cs$1(va),La.push(So$1(va)),Wo(this,Ea)})),this.g.attachEmptyPacketListener("pose_world_landmarks",(va=>{Wo(this,va)})),this.outputPoseSegmentationMasks&&(Vi$1(Sa,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Ko$1(this,"pose_segmentation_mask"),this.g.U("pose_segmentation_mask",((va,Ea)=>{this.h.poseSegmentationMasks=[Ka$1(this,va,!0,!this.C)],Wo(this,Ea)})),this.g.attachEmptyPacketListener("pose_segmentation_mask",(va=>{this.h.poseSegmentationMasks=[],Wo(this,va)}))),this.g.attachProtoListener("face_landmarks",((va,Ea)=>{vc$1(va,this.h.faceLandmarks),Wo(this,Ea)})),this.g.attachEmptyPacketListener("face_landmarks",(va=>{Wo(this,va)})),this.outputFaceBlendshapes&&($i$1(ba,"extra_blendshapes"),Vi$1(Sa,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",((va,Ea)=>{var La=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(va=ns$1(va),La.push(Ao$1(va.g()??[]))),Wo(this,Ea)})),this.g.attachEmptyPacketListener("extra_blendshapes",(va=>{Wo(this,va)}))),this.g.attachProtoListener("left_hand_landmarks",((va,Ea)=>{vc$1(va,this.h.leftHandLandmarks),Wo(this,Ea)})),this.g.attachEmptyPacketListener("left_hand_landmarks",(va=>{Wo(this,va)})),this.g.attachProtoListener("left_hand_world_landmarks",((va,Ea)=>{var La=this.h.leftHandWorldLandmarks;va=cs$1(va),La.push(So$1(va)),Wo(this,Ea)})),this.g.attachEmptyPacketListener("left_hand_world_landmarks",(va=>{Wo(this,va)})),this.g.attachProtoListener("right_hand_landmarks",((va,Ea)=>{vc$1(va,this.h.rightHandLandmarks),Wo(this,Ea)})),this.g.attachEmptyPacketListener("right_hand_landmarks",(va=>{Wo(this,va)})),this.g.attachProtoListener("right_hand_world_landmarks",((va,Ea)=>{var La=this.h.rightHandWorldLandmarks;va=cs$1(va),La.push(So$1(va)),Wo(this,Ea)})),this.g.attachEmptyPacketListener("right_hand_world_landmarks",(va=>{Wo(this,va)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};Ec$1.prototype.detectForVideo=Ec$1.prototype.F,Ec$1.prototype.detect=Ec$1.prototype.D,Ec$1.prototype.setOptions=Ec$1.prototype.o,Ec$1.createFromModelPath=function(oa,ba){return Xa$1(Ec$1,oa,{baseOptions:{modelAssetPath:ba}})},Ec$1.createFromModelBuffer=function(oa,ba){return Xa$1(Ec$1,oa,{baseOptions:{modelAssetBuffer:ba}})},Ec$1.createFromOptions=function(oa,ba){return Xa$1(Ec$1,oa,ba)},Ec$1.HAND_CONNECTIONS=hc$1,Ec$1.POSE_CONNECTIONS=mc$1,Ec$1.FACE_LANDMARKS_LIPS=qa$1,Ec$1.FACE_LANDMARKS_LEFT_EYE=Ja$1,Ec$1.FACE_LANDMARKS_LEFT_EYEBROW=Za$1,Ec$1.FACE_LANDMARKS_LEFT_IRIS=Qa$1,Ec$1.FACE_LANDMARKS_RIGHT_EYE=tc$1,Ec$1.FACE_LANDMARKS_RIGHT_EYEBROW=ec$1,Ec$1.FACE_LANDMARKS_RIGHT_IRIS=nc$1,Ec$1.FACE_LANDMARKS_FACE_OVAL=rc$1,Ec$1.FACE_LANDMARKS_CONTOURS=ic$1,Ec$1.FACE_LANDMARKS_TESSELATION=sc$1;var wc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"input_image","norm_rect",!0),this.j={classifications:[]},sn$1(ba=this.h=new ao$1,0,1,wa=new Ls$1)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){return sn$1(this.h,0,2,To$1(ba,en$1(this.h,ws$1,2))),this.l(ba)}sa(ba,wa){return this.j={classifications:[]},Wa(this,ba,wa),this.j}ta(ba,wa,xa){return this.j={classifications:[]},za(this,ba,xa,wa),this.j}m(){var ba=new qi$1;Yi$1(ba,"input_image"),Yi$1(ba,"norm_rect"),$i$1(ba,"classifications");const wa=new Di$1;Xn$1(wa,co$1,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),ji$1(xa,"IMAGE:input_image"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"CLASSIFICATIONS:classifications"),xa.o(wa),Ki$1(ba,xa),this.g.attachProtoListener("classifications",((Sa,va)=>{this.j=(function(Ea){const La={classifications:rn(Ea,ps$1,1).map((eu=>{var Ta;return Ao$1(((Ta=en$1(eu,ts$1,4))==null?void 0:Ta.g())??[],un$1(eu,2)??0,ln$1(eu,3)??"")}))};return ie(Ce(Ea,2))!=null&&(La.timestampMs=ie(Ce(Ea,2))??0),La})(gs$1(Sa)),Wo(this,va)})),this.g.attachEmptyPacketListener("classifications",(Sa=>{Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};wc$1.prototype.classifyForVideo=wc$1.prototype.ta,wc$1.prototype.classify=wc$1.prototype.sa,wc$1.prototype.setOptions=wc$1.prototype.o,wc$1.createFromModelPath=function(oa,ba){return Xa$1(wc$1,oa,{baseOptions:{modelAssetPath:ba}})},wc$1.createFromModelBuffer=function(oa,ba){return Xa$1(wc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},wc$1.createFromOptions=function(oa,ba){return Xa$1(wc$1,oa,ba)};var Tc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect",!0),this.h=new ho$1,this.embeddings={embeddings:[]},sn$1(ba=this.h,0,1,wa=new Ls$1)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){var wa=this.h,xa=en$1(this.h,As$1,2);return xa=xa?xa.clone():new As$1,ba.l2Normalize!==void 0?fn$1(xa,1,ba.l2Normalize):"l2Normalize"in ba&&De$1(xa,1),ba.quantize!==void 0?fn$1(xa,2,ba.quantize):"quantize"in ba&&De$1(xa,2),sn$1(wa,0,2,xa),this.l(ba)}za(ba,wa){return Wa(this,ba,wa),this.embeddings}Aa(ba,wa,xa){return za(this,ba,xa,wa),this.embeddings}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"norm_rect"),$i$1(ba,"embeddings_out");const wa=new Di$1;Xn$1(wa,uo$1,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"EMBEDDINGS:embeddings_out"),xa.o(wa),Ki$1(ba,xa),this.g.attachProtoListener("embeddings_out",((Sa,va)=>{Sa=Es$1(Sa),this.embeddings=(function(Ea){return{embeddings:rn(Ea,_s$1,1).map((La=>{var Ta,Aa;const eu={headIndex:un$1(La,3)??0??-1,headName:ln$1(La,4)??""??""};if(tn$1(La,ms$1,$e(La,1))!==void 0)La=Ve$1(La=en$1(La,ms$1,$e(La,1)),1,$t$1,je()),eu.floatEmbedding=La.slice();else{const ka=new Uint8Array(0);eu.quantizedEmbedding=((Aa=(Ta=en$1(La,ys$1,$e(La,2)))==null?void 0:Ta.oa())==null?void 0:Aa.h())??ka}return eu})),timestampMs:ie(Ce(Ea,2))??0}})(Sa),Wo(this,va)})),this.g.attachEmptyPacketListener("embeddings_out",(Sa=>{Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};Tc$1.cosineSimilarity=function(oa,ba){if(oa.floatEmbedding&&ba.floatEmbedding)oa=Lo$1(oa.floatEmbedding,ba.floatEmbedding);else{if(!oa.quantizedEmbedding||!ba.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");oa=Lo$1(xo$1(oa.quantizedEmbedding),xo$1(ba.quantizedEmbedding))}return oa},Tc$1.prototype.embedForVideo=Tc$1.prototype.Aa,Tc$1.prototype.embed=Tc$1.prototype.za,Tc$1.prototype.setOptions=Tc$1.prototype.o,Tc$1.createFromModelPath=function(oa,ba){return Xa$1(Tc$1,oa,{baseOptions:{modelAssetPath:ba}})},Tc$1.createFromModelBuffer=function(oa,ba){return Xa$1(Tc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},Tc$1.createFromOptions=function(oa,ba){return Xa$1(Tc$1,oa,ba)};var Ac$1=class{constructor(ba,wa,xa){this.confidenceMasks=ba,this.categoryMask=wa,this.qualityScores=xa}close(){var ba,wa;(ba=this.confidenceMasks)==null||ba.forEach((xa=>{xa.close()})),(wa=this.categoryMask)==null||wa.close()}};function bc$1(oa){oa.categoryMask=void 0,oa.confidenceMasks=void 0,oa.qualityScores=void 0}function kc$1(oa){try{const ba=new Ac$1(oa.confidenceMasks,oa.categoryMask,oa.qualityScores);if(!oa.j)return ba;oa.j(ba)}finally{Yo$1(oa)}}Ac$1.prototype.close=Ac$1.prototype.close;var Sc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new mo$1,this.v=new lo$1,sn$1(this.h,0,3,this.v),sn$1(ba=this.h,0,1,wa=new Ls$1)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){return ba.displayNamesLocale!==void 0?De$1(this.h,2,ae$1(ba.displayNamesLocale)):"displayNamesLocale"in ba&&De$1(this.h,2),"outputCategoryMask"in ba&&(this.outputCategoryMask=ba.outputCategoryMask??!1),"outputConfidenceMasks"in ba&&(this.outputConfidenceMasks=ba.outputConfidenceMasks??!0),super.l(ba)}I(){(function(ba){var xa,Sa;const wa=rn(ba.da(),Xi$1,1).filter((va=>(ln$1(va,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")));if(ba.s=[],wa.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");wa.length===1&&(((Sa=(xa=en$1(wa[0],Di$1,7))==null?void 0:xa.l())==null?void 0:Sa.g())??new Map).forEach(((va,Ea)=>{ba.s[Number(Ea)]=ln$1(va,1)??""}))})(this)}segment(ba,wa,xa){const Sa=typeof wa!="function"?wa:{};return this.j=typeof wa=="function"?wa:xa,bc$1(this),Wa(this,ba,Sa),kc$1(this)}Ma(ba,wa,xa,Sa){const va=typeof xa!="function"?xa:{};return this.j=typeof xa=="function"?xa:Sa,bc$1(this),za(this,ba,va,wa),kc$1(this)}Da(){return this.s}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"norm_rect");const wa=new Di$1;Xn$1(wa,yo$1,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"NORM_RECT:norm_rect"),xa.o(wa),Ki$1(ba,xa),zo(this,ba),this.outputConfidenceMasks&&($i$1(ba,"confidence_masks"),Vi$1(xa,"CONFIDENCE_MASKS:confidence_masks"),Ko$1(this,"confidence_masks"),this.g.ca("confidence_masks",((Sa,va)=>{this.confidenceMasks=Sa.map((Ea=>Ka$1(this,Ea,!0,!this.j))),Wo(this,va)})),this.g.attachEmptyPacketListener("confidence_masks",(Sa=>{this.confidenceMasks=[],Wo(this,Sa)}))),this.outputCategoryMask&&($i$1(ba,"category_mask"),Vi$1(xa,"CATEGORY_MASK:category_mask"),Ko$1(this,"category_mask"),this.g.U("category_mask",((Sa,va)=>{this.categoryMask=Ka$1(this,Sa,!1,!this.j),Wo(this,va)})),this.g.attachEmptyPacketListener("category_mask",(Sa=>{this.categoryMask=void 0,Wo(this,Sa)}))),$i$1(ba,"quality_scores"),Vi$1(xa,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((Sa,va)=>{this.qualityScores=Sa,Wo(this,va)})),this.g.attachEmptyPacketListener("quality_scores",(Sa=>{this.categoryMask=void 0,Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};Sc$1.prototype.getLabels=Sc$1.prototype.Da,Sc$1.prototype.segmentForVideo=Sc$1.prototype.Ma,Sc$1.prototype.segment=Sc$1.prototype.segment,Sc$1.prototype.setOptions=Sc$1.prototype.o,Sc$1.createFromModelPath=function(oa,ba){return Xa$1(Sc$1,oa,{baseOptions:{modelAssetPath:ba}})},Sc$1.createFromModelBuffer=function(oa,ba){return Xa$1(Sc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},Sc$1.createFromOptions=function(oa,ba){return Xa$1(Sc$1,oa,ba)};var xc$1=class{constructor(ba,wa,xa){this.confidenceMasks=ba,this.categoryMask=wa,this.qualityScores=xa}close(){var ba,wa;(ba=this.confidenceMasks)==null||ba.forEach((xa=>{xa.close()})),(wa=this.categoryMask)==null||wa.close()}};xc$1.prototype.close=xc$1.prototype.close;var Lc$1=class extends Hn{constructor(ba){super(ba)}},Rc$1=[0,oi,-2],Fc$1=[0,Qr$1,-3,hi$1,Qr$1,-1],Ic$1=[0,Fc$1],Mc$1=[0,Fc$1,oi,-1],Pc$1=class extends Hn{constructor(ba){super(ba)}},Oc$1=[0,Qr$1,-1,hi$1],Cc$1=class extends Hn{constructor(ba){super(ba)}},Uc$1=class extends Hn{constructor(ba){super(ba)}},Dc$1=[1,2,3,4,5,6,7,8,9,10,14,15],Nc$1=class extends Hn{constructor(ba){super(ba)}};Nc$1.prototype.g=Ai$1([0,pi$1,[0,Dc$1,gi$1,Fc$1,gi$1,[0,Fc$1,Rc$1],gi$1,Ic$1,gi$1,[0,Ic$1,Rc$1],gi$1,Oc$1,gi$1,[0,Qr$1,-3,hi$1,vi$1],gi$1,[0,Qr$1,-3,hi$1],gi$1,[0,fi,Qr$1,-2,hi$1,oi,hi$1,-1,2,Qr$1,Rc$1],gi$1,Mc$1,gi$1,[0,Mc$1,Rc$1],Qr$1,Rc$1,fi,gi$1,[0,Qr$1,-3,hi$1,Rc$1,-1],gi$1,[0,pi$1,Oc$1]],fi,[0,fi,oi,-1,hi$1]]);var Bc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new mo$1,this.s=new lo$1,sn$1(this.h,0,3,this.s),sn$1(ba=this.h,0,1,wa=new Ls$1)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){return"outputCategoryMask"in ba&&(this.outputCategoryMask=ba.outputCategoryMask??!1),"outputConfidenceMasks"in ba&&(this.outputConfidenceMasks=ba.outputConfidenceMasks??!0),super.l(ba)}segment(ba,wa,xa,Sa){const va=typeof xa!="function"?xa:{};this.j=typeof xa=="function"?xa:Sa,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,xa=this.B+1,Sa=new Nc$1;const Ea=new Uc$1;var La=new Lc$1;if(pn$1(La,1,255),sn$1(Ea,0,12,La),wa.keypoint&&wa.scribble)throw Error("Cannot provide both keypoint and scribble.");if(wa.keypoint){var eu=new Pc$1;fn$1(eu,3,!0),gn$1(eu,1,wa.keypoint.x),gn$1(eu,2,wa.keypoint.y),on(Ea,5,Dc$1,eu)}else{if(!wa.scribble)throw Error("Must provide either a keypoint or a scribble.");for(eu of(La=new Cc$1,wa.scribble))fn$1(wa=new Pc$1,3,!0),gn$1(wa,1,eu.x),gn$1(wa,2,eu.y),hn$1(La,1,Pc$1,wa);on(Ea,15,Dc$1,La)}hn$1(Sa,1,Uc$1,Ea),this.g.addProtoToStream(Sa.g(),"drishti.RenderData","roi_in",xa),Wa(this,ba,va);e:{try{const Aa=new xc$1(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var Ta=Aa;break e}this.j(Aa)}finally{Yo$1(this)}Ta=void 0}return Ta}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"roi_in"),Yi$1(ba,"norm_rect_in");const wa=new Di$1;Xn$1(wa,yo$1,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"ROI:roi_in"),ji$1(xa,"NORM_RECT:norm_rect_in"),xa.o(wa),Ki$1(ba,xa),zo(this,ba),this.outputConfidenceMasks&&($i$1(ba,"confidence_masks"),Vi$1(xa,"CONFIDENCE_MASKS:confidence_masks"),Ko$1(this,"confidence_masks"),this.g.ca("confidence_masks",((Sa,va)=>{this.confidenceMasks=Sa.map((Ea=>Ka$1(this,Ea,!0,!this.j))),Wo(this,va)})),this.g.attachEmptyPacketListener("confidence_masks",(Sa=>{this.confidenceMasks=[],Wo(this,Sa)}))),this.outputCategoryMask&&($i$1(ba,"category_mask"),Vi$1(xa,"CATEGORY_MASK:category_mask"),Ko$1(this,"category_mask"),this.g.U("category_mask",((Sa,va)=>{this.categoryMask=Ka$1(this,Sa,!1,!this.j),Wo(this,va)})),this.g.attachEmptyPacketListener("category_mask",(Sa=>{this.categoryMask=void 0,Wo(this,Sa)}))),$i$1(ba,"quality_scores"),Vi$1(xa,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((Sa,va)=>{this.qualityScores=Sa,Wo(this,va)})),this.g.attachEmptyPacketListener("quality_scores",(Sa=>{this.categoryMask=void 0,Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};Bc$1.prototype.segment=Bc$1.prototype.segment,Bc$1.prototype.setOptions=Bc$1.prototype.o,Bc$1.createFromModelPath=function(oa,ba){return Xa$1(Bc$1,oa,{baseOptions:{modelAssetPath:ba}})},Bc$1.createFromModelBuffer=function(oa,ba){return Xa$1(Bc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},Bc$1.createFromOptions=function(oa,ba){return Xa$1(Bc$1,oa,ba)};var Gc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},sn$1(ba=this.h=new _o$1,0,1,wa=new Ls$1)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){return ba.displayNamesLocale!==void 0?De$1(this.h,2,ae$1(ba.displayNamesLocale)):"displayNamesLocale"in ba&&De$1(this.h,2),ba.maxResults!==void 0?pn$1(this.h,3,ba.maxResults):"maxResults"in ba&&De$1(this.h,3),ba.scoreThreshold!==void 0?gn$1(this.h,4,ba.scoreThreshold):"scoreThreshold"in ba&&De$1(this.h,4),ba.categoryAllowlist!==void 0?mn$1(this.h,5,ba.categoryAllowlist):"categoryAllowlist"in ba&&De$1(this.h,5),ba.categoryDenylist!==void 0?mn$1(this.h,6,ba.categoryDenylist):"categoryDenylist"in ba&&De$1(this.h,6),this.l(ba)}D(ba,wa){return this.j={detections:[]},Wa(this,ba,wa),this.j}F(ba,wa,xa){return this.j={detections:[]},za(this,ba,xa,wa),this.j}m(){var ba=new qi$1;Yi$1(ba,"input_frame_gpu"),Yi$1(ba,"norm_rect"),$i$1(ba,"detections");const wa=new Di$1;Xn$1(wa,vo$1,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.ObjectDetectorGraph"),ji$1(xa,"IMAGE:input_frame_gpu"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"DETECTIONS:detections"),xa.o(wa),Ki$1(ba,xa),this.g.attachProtoVectorListener("detections",((Sa,va)=>{for(const Ea of Sa)Sa=os$1(Ea),this.j.detections.push(bo$1(Sa));Wo(this,va)})),this.g.attachEmptyPacketListener("detections",(Sa=>{Wo(this,Sa)})),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};Gc$1.prototype.detectForVideo=Gc$1.prototype.F,Gc$1.prototype.detect=Gc$1.prototype.D,Gc$1.prototype.setOptions=Gc$1.prototype.o,Gc$1.createFromModelPath=async function(oa,ba){return Xa$1(Gc$1,oa,{baseOptions:{modelAssetPath:ba}})},Gc$1.createFromModelBuffer=function(oa,ba){return Xa$1(Gc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},Gc$1.createFromOptions=function(oa,ba){return Xa$1(Gc$1,oa,ba)};var jc$1=class{constructor(ba,wa,xa){this.landmarks=ba,this.worldLandmarks=wa,this.segmentationMasks=xa}close(){var ba;(ba=this.segmentationMasks)==null||ba.forEach((wa=>{wa.close()}))}};function Vc$1(oa){oa.landmarks=[],oa.worldLandmarks=[],oa.segmentationMasks=void 0}function Xc$1(oa){try{const ba=new jc$1(oa.landmarks,oa.worldLandmarks,oa.segmentationMasks);if(!oa.s)return ba;oa.s(ba)}finally{Yo$1(oa)}}jc$1.prototype.close=jc$1.prototype.close;var Hc$1=class extends Ya$1{constructor(ba,wa){super(new Va(ba,wa),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,sn$1(ba=this.h=new Eo$1,0,1,wa=new Ls$1),this.v=new ro$1,sn$1(this.h,0,3,this.v),this.j=new no$1,sn$1(this.h,0,2,this.j),pn$1(this.j,4,1),gn$1(this.j,2,.5),gn$1(this.v,2,.5),gn$1(this.h,4,.5)}get baseOptions(){return en$1(this.h,Ls$1,1)}set baseOptions(ba){sn$1(this.h,0,1,ba)}o(ba){return"numPoses"in ba&&pn$1(this.j,4,ba.numPoses??1),"minPoseDetectionConfidence"in ba&&gn$1(this.j,2,ba.minPoseDetectionConfidence??.5),"minTrackingConfidence"in ba&&gn$1(this.h,4,ba.minTrackingConfidence??.5),"minPosePresenceConfidence"in ba&&gn$1(this.v,2,ba.minPosePresenceConfidence??.5),"outputSegmentationMasks"in ba&&(this.outputSegmentationMasks=ba.outputSegmentationMasks??!1),this.l(ba)}D(ba,wa,xa){const Sa=typeof wa!="function"?wa:{};return this.s=typeof wa=="function"?wa:xa,Vc$1(this),Wa(this,ba,Sa),Xc$1(this)}F(ba,wa,xa,Sa){const va=typeof xa!="function"?xa:{};return this.s=typeof xa=="function"?xa:Sa,Vc$1(this),za(this,ba,va,wa),Xc$1(this)}m(){var ba=new qi$1;Yi$1(ba,"image_in"),Yi$1(ba,"norm_rect"),$i$1(ba,"normalized_landmarks"),$i$1(ba,"world_landmarks"),$i$1(ba,"segmentation_masks");const wa=new Di$1;Xn$1(wa,wo$1,this.h);const xa=new Xi$1;Gi$1(xa,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),ji$1(xa,"IMAGE:image_in"),ji$1(xa,"NORM_RECT:norm_rect"),Vi$1(xa,"NORM_LANDMARKS:normalized_landmarks"),Vi$1(xa,"WORLD_LANDMARKS:world_landmarks"),xa.o(wa),Ki$1(ba,xa),zo(this,ba),this.g.attachProtoVectorListener("normalized_landmarks",((Sa,va)=>{this.landmarks=[];for(const Ea of Sa)Sa=us$1(Ea),this.landmarks.push(ko$1(Sa));Wo(this,va)})),this.g.attachEmptyPacketListener("normalized_landmarks",(Sa=>{this.landmarks=[],Wo(this,Sa)})),this.g.attachProtoVectorListener("world_landmarks",((Sa,va)=>{this.worldLandmarks=[];for(const Ea of Sa)Sa=cs$1(Ea),this.worldLandmarks.push(So$1(Sa));Wo(this,va)})),this.g.attachEmptyPacketListener("world_landmarks",(Sa=>{this.worldLandmarks=[],Wo(this,Sa)})),this.outputSegmentationMasks&&(Vi$1(xa,"SEGMENTATION_MASK:segmentation_masks"),Ko$1(this,"segmentation_masks"),this.g.ca("segmentation_masks",((Sa,va)=>{this.segmentationMasks=Sa.map((Ea=>Ka$1(this,Ea,!0,!this.s))),Wo(this,va)})),this.g.attachEmptyPacketListener("segmentation_masks",(Sa=>{this.segmentationMasks=[],Wo(this,Sa)}))),ba=ba.g(),this.setGraph(new Uint8Array(ba),!0)}};Hc$1.prototype.detectForVideo=Hc$1.prototype.F,Hc$1.prototype.detect=Hc$1.prototype.D,Hc$1.prototype.setOptions=Hc$1.prototype.o,Hc$1.createFromModelPath=function(oa,ba){return Xa$1(Hc$1,oa,{baseOptions:{modelAssetPath:ba}})},Hc$1.createFromModelBuffer=function(oa,ba){return Xa$1(Hc$1,oa,{baseOptions:{modelAssetBuffer:ba}})},Hc$1.createFromOptions=function(oa,ba){return Xa$1(Hc$1,oa,ba)},Hc$1.POSE_CONNECTIONS=mc$1;/*!
 * ONNX Runtime Web v1.17.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var vd=Object.create,En=Object.defineProperty,wd=Object.getOwnPropertyDescriptor,_d=Object.getOwnPropertyNames,Od=Object.getPrototypeOf,Id=Object.prototype.hasOwnProperty,L=(oa,ba)=>()=>(oa&&(ba=oa(oa=0)),ba),me=(oa,ba)=>()=>(ba||oa((ba={exports:{}}).exports,ba),ba.exports),Pr=(oa,ba)=>{for(var wa in ba)En(oa,wa,{get:ba[wa],enumerable:!0})},Ha=(oa,ba,wa,xa)=>{if(ba&&typeof ba=="object"||typeof ba=="function")for(let Sa of _d(ba))!Id.call(oa,Sa)&&Sa!==wa&&En(oa,Sa,{get:()=>ba[Sa],enumerable:!(xa=wd(ba,Sa))||xa.enumerable});return oa},Er=(oa,ba,wa)=>(wa=oa!=null?vd(Od(oa)):{},Ha(!oa||!oa.__esModule?En(wa,"default",{value:oa,enumerable:!0}):wa,oa)),rr=oa=>Ha(En({},"__esModule",{value:!0}),oa),Dn,nr,or,Ln,Fn=L(()=>{Dn=new Map,nr=[],or=(oa,ba,wa)=>{if(ba&&typeof ba.init=="function"&&typeof ba.createInferenceSessionHandler=="function"){let xa=Dn.get(oa);if(xa===void 0)Dn.set(oa,{backend:ba,priority:wa});else{if(xa.priority>wa)return;if(xa.priority===wa&&xa.backend!==ba)throw new Error(`cannot register backend "${oa}" using priority ${wa}`)}if(wa>=0){let Sa=nr.indexOf(oa);Sa!==-1&&nr.splice(Sa,1);for(let va=0;va<nr.length;va++)if(Dn.get(nr[va]).priority<=wa){nr.splice(va,0,oa);return}nr.push(oa)}return}throw new TypeError("not a valid backend")},Ln=async oa=>{let ba=oa.length===0?nr:oa,wa=[];for(let xa of ba){let Sa=Dn.get(xa);if(Sa){if(Sa.initialized)return Sa.backend;if(Sa.aborted)continue;let va=!!Sa.initPromise;try{return va||(Sa.initPromise=Sa.backend.init(xa)),await Sa.initPromise,Sa.initialized=!0,Sa.backend}catch(Ea){va||wa.push({name:xa,err:Ea}),Sa.aborted=!0}finally{delete Sa.initPromise}}}throw new Error(`no available backend found. ERR: ${wa.map(xa=>`[${xa.name}] ${xa.err}`).join(", ")}`)}}),qa=L(()=>{Fn()}),ja,Ya=L(()=>{ja="1.17.0"}),Xa,ir,Ho=L(()=>{Ya(),Xa="warning",ir={wasm:{},webgl:{},webgpu:{},versions:{common:ja},set logLevel(oa){if(oa!==void 0){if(typeof oa!="string"||["verbose","info","warning","error","fatal"].indexOf(oa)===-1)throw new Error(`Unsupported logging level: ${oa}`);Xa=oa}},get logLevel(){return Xa}},Object.defineProperty(ir,"logLevel",{enumerable:!0})}),Z,Ka=L(()=>{Ho(),Z=ir}),Ja,Za,Qa=L(()=>{Ja=(oa,ba)=>{let wa=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);wa.width=oa.dims[3],wa.height=oa.dims[2];let xa=wa.getContext("2d");if(xa!=null){let Sa,va;(ba==null?void 0:ba.tensorLayout)!==void 0&&ba.tensorLayout==="NHWC"?(Sa=oa.dims[2],va=oa.dims[3]):(Sa=oa.dims[3],va=oa.dims[2]);let Ea=(ba==null?void 0:ba.format)!==void 0?ba.format:"RGB",La=ba==null?void 0:ba.norm,eu,Ta;La===void 0||La.mean===void 0?eu=[255,255,255,255]:typeof La.mean=="number"?eu=[La.mean,La.mean,La.mean,La.mean]:(eu=[La.mean[0],La.mean[1],La.mean[2],0],La.mean[3]!==void 0&&(eu[3]=La.mean[3])),La===void 0||La.bias===void 0?Ta=[0,0,0,0]:typeof La.bias=="number"?Ta=[La.bias,La.bias,La.bias,La.bias]:(Ta=[La.bias[0],La.bias[1],La.bias[2],0],La.bias[3]!==void 0&&(Ta[3]=La.bias[3]));let Aa=va*Sa,ka=0,ru=Aa,nu=Aa*2,su=-1;Ea==="RGBA"?(ka=0,ru=Aa,nu=Aa*2,su=Aa*3):Ea==="RGB"?(ka=0,ru=Aa,nu=Aa*2):Ea==="RBG"&&(ka=0,nu=Aa,ru=Aa*2);for(let uu=0;uu<va;uu++)for(let cu=0;cu<Sa;cu++){let gu=(oa.data[ka++]-Ta[0])*eu[0],hu=(oa.data[ru++]-Ta[1])*eu[1],mu=(oa.data[nu++]-Ta[2])*eu[2],Ou=su===-1?255:(oa.data[su++]-Ta[3])*eu[3];xa.fillStyle="rgba("+gu+","+hu+","+mu+","+Ou+")",xa.fillRect(cu,uu,1,1)}if("toDataURL"in wa)return wa.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Za=(oa,ba)=>{let wa=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),xa;if(wa!=null){let Sa,va,Ea;(ba==null?void 0:ba.tensorLayout)!==void 0&&ba.tensorLayout==="NHWC"?(Sa=oa.dims[2],va=oa.dims[1],Ea=oa.dims[3]):(Sa=oa.dims[3],va=oa.dims[2],Ea=oa.dims[1]);let La=ba!==void 0&&ba.format!==void 0?ba.format:"RGB",eu=ba==null?void 0:ba.norm,Ta,Aa;eu===void 0||eu.mean===void 0?Ta=[255,255,255,255]:typeof eu.mean=="number"?Ta=[eu.mean,eu.mean,eu.mean,eu.mean]:(Ta=[eu.mean[0],eu.mean[1],eu.mean[2],255],eu.mean[3]!==void 0&&(Ta[3]=eu.mean[3])),eu===void 0||eu.bias===void 0?Aa=[0,0,0,0]:typeof eu.bias=="number"?Aa=[eu.bias,eu.bias,eu.bias,eu.bias]:(Aa=[eu.bias[0],eu.bias[1],eu.bias[2],0],eu.bias[3]!==void 0&&(Aa[3]=eu.bias[3]));let ka=va*Sa;if(ba!==void 0&&(ba.format!==void 0&&Ea===4&&ba.format!=="RGBA"||Ea===3&&ba.format!=="RGB"&&ba.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let ru=4,nu=0,su=1,uu=2,cu=3,gu=0,hu=ka,mu=ka*2,Ou=-1;La==="RGBA"?(gu=0,hu=ka,mu=ka*2,Ou=ka*3):La==="RGB"?(gu=0,hu=ka,mu=ka*2):La==="RBG"&&(gu=0,mu=ka,hu=ka*2),xa=wa.createImageData(Sa,va);for(let uh=0;uh<va*Sa;nu+=ru,su+=ru,uu+=ru,cu+=ru,uh++)xa.data[nu]=(oa.data[gu++]-Aa[0])*Ta[0],xa.data[su]=(oa.data[hu++]-Aa[1])*Ta[1],xa.data[uu]=(oa.data[mu++]-Aa[2])*Ta[2],xa.data[cu]=Ou===-1?255:(oa.data[Ou++]-Aa[3])*Ta[3]}else throw new Error("Can not access image data");return xa}}),qo,es,ts,rs,ns,os=L(()=>{$n(),qo=(oa,ba)=>{if(oa===void 0)throw new Error("Image buffer must be defined");if(ba.height===void 0||ba.width===void 0)throw new Error("Image height and width must be defined");if(ba.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:wa,width:xa}=ba,Sa=ba.norm??{mean:255,bias:0},va,Ea;typeof Sa.mean=="number"?va=[Sa.mean,Sa.mean,Sa.mean,Sa.mean]:va=[Sa.mean[0],Sa.mean[1],Sa.mean[2],Sa.mean[3]??255],typeof Sa.bias=="number"?Ea=[Sa.bias,Sa.bias,Sa.bias,Sa.bias]:Ea=[Sa.bias[0],Sa.bias[1],Sa.bias[2],Sa.bias[3]??0];let La=ba.format!==void 0?ba.format:"RGBA",eu=ba.tensorFormat!==void 0&&ba.tensorFormat!==void 0?ba.tensorFormat:"RGB",Ta=wa*xa,Aa=eu==="RGBA"?new Float32Array(Ta*4):new Float32Array(Ta*3),ka=4,ru=0,nu=1,su=2,uu=3,cu=0,gu=Ta,hu=Ta*2,mu=-1;La==="RGB"&&(ka=3,ru=0,nu=1,su=2,uu=-1),eu==="RGBA"?mu=Ta*3:eu==="RBG"?(cu=0,hu=Ta,gu=Ta*2):eu==="BGR"&&(hu=0,gu=Ta,cu=Ta*2);for(let Ou=0;Ou<Ta;Ou++,ru+=ka,su+=ka,nu+=ka,uu+=ka)Aa[cu++]=(oa[ru]+Ea[0])/va[0],Aa[gu++]=(oa[nu]+Ea[1])/va[1],Aa[hu++]=(oa[su]+Ea[2])/va[2],mu!==-1&&uu!==-1&&(Aa[mu++]=(oa[uu]+Ea[3])/va[3]);return eu==="RGBA"?new Ye("float32",Aa,[1,4,wa,xa]):new Ye("float32",Aa,[1,3,wa,xa])},es=async(oa,ba)=>{let wa=typeof HTMLImageElement<"u"&&oa instanceof HTMLImageElement,xa=typeof ImageData<"u"&&oa instanceof ImageData,Sa=typeof ImageBitmap<"u"&&oa instanceof ImageBitmap,va=typeof oa=="string",Ea,La=ba??{},eu=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},Ta=Aa=>Aa instanceof HTMLCanvasElement||Aa instanceof OffscreenCanvas?Aa.getContext("2d"):null;if(wa){let Aa=eu();Aa.width=oa.width,Aa.height=oa.height;let ka=Ta(Aa);if(ka!=null){let ru=oa.height,nu=oa.width;if(ba!==void 0&&ba.resizedHeight!==void 0&&ba.resizedWidth!==void 0&&(ru=ba.resizedHeight,nu=ba.resizedWidth),ba!==void 0){if(La=ba,ba.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");La.tensorFormat="RGBA",La.height=ru,La.width=nu}else La.tensorFormat="RGBA",La.height=ru,La.width=nu;ka.drawImage(oa,0,0),Ea=ka.getImageData(0,0,nu,ru).data}else throw new Error("Can not access image data")}else if(xa){let Aa,ka;if(ba!==void 0&&ba.resizedWidth!==void 0&&ba.resizedHeight!==void 0?(Aa=ba.resizedHeight,ka=ba.resizedWidth):(Aa=oa.height,ka=oa.width),ba!==void 0&&(La=ba),La.format="RGBA",La.height=Aa,La.width=ka,ba!==void 0){let ru=eu();ru.width=ka,ru.height=Aa;let nu=Ta(ru);if(nu!=null)nu.putImageData(oa,0,0),Ea=nu.getImageData(0,0,ka,Aa).data;else throw new Error("Can not access image data")}else Ea=oa.data}else if(Sa){if(ba===void 0)throw new Error("Please provide image config with format for Imagebitmap");let Aa=eu();Aa.width=oa.width,Aa.height=oa.height;let ka=Ta(Aa);if(ka!=null){let ru=oa.height,nu=oa.width;return ka.drawImage(oa,0,0,nu,ru),Ea=ka.getImageData(0,0,nu,ru).data,La.height=ru,La.width=nu,qo(Ea,La)}else throw new Error("Can not access image data")}else{if(va)return new Promise((Aa,ka)=>{let ru=eu(),nu=Ta(ru);if(!oa||!nu)return ka();let su=new Image;su.crossOrigin="Anonymous",su.src=oa,su.onload=()=>{ru.width=su.width,ru.height=su.height,nu.drawImage(su,0,0,ru.width,ru.height);let uu=nu.getImageData(0,0,ru.width,ru.height);La.height=ru.height,La.width=ru.width,Aa(qo(uu.data,La))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(Ea!==void 0)return qo(Ea,La);throw new Error("Input data provided is not supported - aborted tensor creation")},ts=(oa,ba)=>{let{width:wa,height:xa,download:Sa,dispose:va}=ba,Ea=[1,xa,wa,4];return new Ye({location:"texture",type:"float32",texture:oa,dims:Ea,download:Sa,dispose:va})},rs=(oa,ba)=>{let{dataType:wa,dims:xa,download:Sa,dispose:va}=ba;return new Ye({location:"gpu-buffer",type:wa??"float32",gpuBuffer:oa,dims:xa,download:Sa,dispose:va})},ns=(oa,ba,wa)=>new Ye({location:"cpu-pinned",type:oa,data:ba,dims:wa??[ba.length]})}),Qr,Cn,is,as,ss=L(()=>{Qr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Cn=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),is=!1,as=()=>{if(!is){is=!0;let oa=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",ba=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";oa&&(Qr.set("int64",BigInt64Array),Cn.set(BigInt64Array,"int64")),ba&&(Qr.set("uint64",BigUint64Array),Cn.set(BigUint64Array,"uint64"))}}}),us,ls,fs=L(()=>{$n(),us=oa=>{let ba=1;for(let wa=0;wa<oa.length;wa++){let xa=oa[wa];if(typeof xa!="number"||!Number.isSafeInteger(xa))throw new TypeError(`dims[${wa}] must be an integer, got: ${xa}`);if(xa<0)throw new RangeError(`dims[${wa}] must be a non-negative integer, got: ${xa}`);ba*=xa}return ba},ls=(oa,ba)=>{switch(oa.location){case"cpu":return new Ye(oa.type,oa.data,ba);case"cpu-pinned":return new Ye({location:"cpu-pinned",data:oa.data,type:oa.type,dims:ba});case"texture":return new Ye({location:"texture",texture:oa.texture,type:oa.type,dims:ba});case"gpu-buffer":return new Ye({location:"gpu-buffer",gpuBuffer:oa.gpuBuffer,type:oa.type,dims:ba});default:throw new Error(`tensorReshape: tensor location ${oa.location} is not supported`)}}}),Ye,$n=L(()=>{Qa(),os(),ss(),fs(),Ye=class{constructor(oa,ba,wa){as();let xa,Sa;if(typeof oa=="object"&&"location"in oa)switch(this.dataLocation=oa.location,xa=oa.type,Sa=oa.dims,oa.location){case"cpu-pinned":{let Ea=Qr.get(xa);if(!Ea)throw new TypeError(`unsupported type "${xa}" to create tensor from pinned buffer`);if(!(oa.data instanceof Ea))throw new TypeError(`buffer should be of type ${Ea.name}`);this.cpuData=oa.data;break}case"texture":{if(xa!=="float32")throw new TypeError(`unsupported type "${xa}" to create tensor from texture`);this.gpuTextureData=oa.texture,this.downloader=oa.download,this.disposer=oa.dispose;break}case"gpu-buffer":{if(xa!=="float32"&&xa!=="float16"&&xa!=="int32"&&xa!=="int64"&&xa!=="uint32"&&xa!=="bool")throw new TypeError(`unsupported type "${xa}" to create tensor from gpu buffer`);this.gpuBufferData=oa.gpuBuffer,this.downloader=oa.download,this.disposer=oa.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let Ea,La;if(typeof oa=="string")if(xa=oa,La=wa,oa==="string"){if(!Array.isArray(ba))throw new TypeError("A string tensor's data must be a string array.");Ea=ba}else{let eu=Qr.get(oa);if(eu===void 0)throw new TypeError(`Unsupported tensor type: ${oa}.`);if(Array.isArray(ba)){if(oa==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");oa==="uint64"||oa==="int64"?Ea=eu.from(ba,BigInt):Ea=eu.from(ba)}else if(ba instanceof eu)Ea=ba;else throw new TypeError(`A ${xa} tensor's data must be type of ${eu}`)}else if(La=ba,Array.isArray(oa)){if(oa.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let eu=typeof oa[0];if(eu==="string")xa="string",Ea=oa;else if(eu==="boolean")xa="bool",Ea=Uint8Array.from(oa);else throw new TypeError(`Invalid element type of data array: ${eu}.`)}else{let eu=Cn.get(oa.constructor);if(eu===void 0)throw new TypeError(`Unsupported type for tensor data: ${oa.constructor}.`);xa=eu,Ea=oa}if(La===void 0)La=[Ea.length];else if(!Array.isArray(La))throw new TypeError("A tensor's dims must be a number array");Sa=La,this.cpuData=Ea,this.dataLocation="cpu"}let va=us(Sa);if(this.cpuData&&va!==this.cpuData.length)throw new Error(`Tensor's size(${va}) does not match data length(${this.cpuData.length}).`);this.type=xa,this.dims=Sa,this.size=va}static async fromImage(oa,ba){return es(oa,ba)}static fromTexture(oa,ba){return ts(oa,ba)}static fromGpuBuffer(oa,ba){return rs(oa,ba)}static fromPinnedBuffer(oa,ba,wa){return ns(oa,ba,wa)}toDataURL(oa){return Ja(this,oa)}toImageData(oa){return Za(this,oa)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(oa){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let ba=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=ba,oa&&this.disposer&&(this.disposer(),this.disposer=void 0),ba}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(oa){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ls(this,oa)}}}),Re,kn=L(()=>{$n(),Re=Ye}),cs,ps,ar,sr,jo=L(()=>{Ho(),cs=(oa,ba)=>{ir.wasm.trace&&console.timeStamp(`${oa}::ORT::${ba}`)},ps=(oa,ba)=>{var Sa;let wa=((Sa=new Error().stack)==null?void 0:Sa.split(/\r\n|\r|\n/g))||[],xa=!1;for(let va=0;va<wa.length;va++){if(xa&&!wa[va].includes("TRACE_FUNC")){let Ea=`FUNC_${oa}::${wa[va].trim().split(" ")[1]}`;ba&&(Ea+=`::${ba}`),cs("CPU",Ea);return}wa[va].includes("TRACE_FUNC")&&(xa=!0)}},ar=oa=>{ir.wasm.trace&&ps("BEGIN",oa)},sr=oa=>{ir.wasm.trace&&ps("END",oa)}}),Bn,ds=L(()=>{Fn(),kn(),jo(),Bn=class f0{constructor(ba){this.handler=ba}async run(ba,wa,xa){ar();let Sa={},va={};if(typeof ba!="object"||ba===null||ba instanceof Re||Array.isArray(ba))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let Ea=!0;if(typeof wa=="object"){if(wa===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(wa instanceof Re)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(wa)){if(wa.length===0)throw new TypeError("'fetches' cannot be an empty array.");Ea=!1;for(let Ta of wa){if(typeof Ta!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(Ta)===-1)throw new RangeError(`'fetches' contains invalid output name: ${Ta}.`);Sa[Ta]=null}if(typeof xa=="object"&&xa!==null)va=xa;else if(typeof xa<"u")throw new TypeError("'options' must be an object.")}else{let Ta=!1,Aa=Object.getOwnPropertyNames(wa);for(let ka of this.outputNames)if(Aa.indexOf(ka)!==-1){let ru=wa[ka];(ru===null||ru instanceof Re)&&(Ta=!0,Ea=!1,Sa[ka]=ru)}if(Ta){if(typeof xa=="object"&&xa!==null)va=xa;else if(typeof xa<"u")throw new TypeError("'options' must be an object.")}else va=wa}}else if(typeof wa<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let Ta of this.inputNames)if(typeof ba[Ta]>"u")throw new Error(`input '${Ta}' is missing in 'feeds'.`);if(Ea)for(let Ta of this.outputNames)Sa[Ta]=null;let La=await this.handler.run(ba,Sa,va),eu={};for(let Ta in La)if(Object.hasOwnProperty.call(La,Ta)){let Aa=La[Ta];Aa instanceof Re?eu[Ta]=Aa:eu[Ta]=new Re(Aa.type,Aa.data,Aa.dims)}return sr(),eu}async release(){return this.handler.dispose()}static async create(ba,wa,xa,Sa){ar();let va,Ea={};if(typeof ba=="string"){if(va=ba,typeof wa=="object"&&wa!==null)Ea=wa;else if(typeof wa<"u")throw new TypeError("'options' must be an object.")}else if(ba instanceof Uint8Array){if(va=ba,typeof wa=="object"&&wa!==null)Ea=wa;else if(typeof wa<"u")throw new TypeError("'options' must be an object.")}else if(ba instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&ba instanceof SharedArrayBuffer){let Ta=ba,Aa=0,ka=ba.byteLength;if(typeof wa=="object"&&wa!==null)Ea=wa;else if(typeof wa=="number"){if(Aa=wa,!Number.isSafeInteger(Aa))throw new RangeError("'byteOffset' must be an integer.");if(Aa<0||Aa>=Ta.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${Ta.byteLength}).`);if(ka=ba.byteLength-Aa,typeof xa=="number"){if(ka=xa,!Number.isSafeInteger(ka))throw new RangeError("'byteLength' must be an integer.");if(ka<=0||Aa+ka>Ta.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${Ta.byteLength-Aa}].`);if(typeof Sa=="object"&&Sa!==null)Ea=Sa;else if(typeof Sa<"u")throw new TypeError("'options' must be an object.")}else if(typeof xa<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof wa<"u")throw new TypeError("'options' must be an object.");va=new Uint8Array(Ta,Aa,ka)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let La=(Ea.executionProviders||[]).map(Ta=>typeof Ta=="string"?Ta:Ta.name),eu=await(await Ln(La)).createInferenceSessionHandler(va,Ea);return sr(),new f0(eu)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Sd,hs=L(()=>{ds(),Sd=Bn}),ms=L(()=>{}),Ad,Nn,bs=L(()=>{Fn(),kn(),Ad="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Nn=class p0{constructor(ba,wa,xa){this.handler=ba,this.hasOptimizerModel=wa,this.hasEvalModel=xa}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(ba,wa){let xa=ba.evalModel||"",Sa=ba.optimizerModel||"",va=wa||{},Ea=(va.executionProviders||[]).map(eu=>typeof eu=="string"?eu:eu.name),La=await Ln(Ea);if(La.createTrainingSessionHandler){let eu=await La.createTrainingSessionHandler(ba.checkpointState,ba.trainModel,xa,Sa,va);return new p0(eu,!!ba.optimizerModel,!!ba.evalModel)}else throw new Error(Ad)}typeNarrowingForRunStep(ba,wa,xa,Sa,va){let Ea={},La={};if(typeof xa!="object"||xa===null||xa instanceof Re||Array.isArray(xa))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let eu=!0;if(typeof Sa=="object"){if(Sa===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(Sa instanceof Re)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(Sa)){if(Sa.length===0)throw new TypeError("'fetches' cannot be an empty array.");eu=!1;for(let Ta of Sa){if(typeof Ta!="string")throw new TypeError("'fetches' must be a string array or an object.");if(wa.indexOf(Ta)===-1)throw new RangeError(`'fetches' contains invalid output name: ${Ta}.`);Ea[Ta]=null}if(typeof va=="object"&&va!==null)La=va;else if(typeof va<"u")throw new TypeError("'options' must be an object.")}else{let Ta=!1,Aa=Object.getOwnPropertyNames(Sa);for(let ka of wa)if(Aa.indexOf(ka)!==-1){let ru=Sa[ka];(ru===null||ru instanceof Re)&&(Ta=!0,eu=!1,Ea[ka]=ru)}if(Ta){if(typeof va=="object"&&va!==null)La=va;else if(typeof va<"u")throw new TypeError("'options' must be an object.")}else La=Sa}}else if(typeof Sa<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let Ta of ba)if(typeof xa[Ta]>"u")throw new Error(`input '${Ta}' is missing in 'feeds'.`);if(eu)for(let Ta of wa)Ea[Ta]=null;return[Ea,La]}convertHandlerReturnTypeToMapOfTensors(ba){let wa={};for(let xa in ba)if(Object.hasOwnProperty.call(ba,xa)){let Sa=ba[xa];Sa instanceof Re?wa[xa]=Sa:wa[xa]=new Re(Sa.type,Sa.data,Sa.dims)}return wa}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(ba,wa,xa){let[Sa,va]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,ba,wa,xa),Ea=await this.handler.runTrainStep(ba,Sa,va);return this.convertHandlerReturnTypeToMapOfTensors(Ea)}async runOptimizerStep(ba){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(ba||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(ba,wa,xa){if(this.hasEvalModel){let[Sa,va]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,ba,wa,xa),Ea=await this.handler.runEvalStep(ba,Sa,va);return this.convertHandlerReturnTypeToMapOfTensors(Ea)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(ba=!0){return this.handler.getParametersSize(ba)}async loadParametersBuffer(ba,wa=!0){let xa=await this.getParametersSize(wa);if(ba.length!==4*xa)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(ba,wa)}async getContiguousParameters(ba=!0){return this.handler.getContiguousParameters(ba)}async release(){return this.handler.dispose()}}}),Pd,gs=L(()=>{bs(),Pd=Nn}),Yo={};Pr(Yo,{InferenceSession:()=>Sd,TRACE:()=>cs,TRACE_FUNC_BEGIN:()=>ar,TRACE_FUNC_END:()=>sr,Tensor:()=>Re,TrainingSession:()=>Pd,env:()=>Z,registerBackend:()=>or});var vt=L(()=>{qa(),Ka(),hs(),kn(),jo(),ms(),gs()});function jt(oa,ba,wa,xa){if(ba===void 0)return Dd(oa);if(wa===void 0)Rn(oa,ba);else if(typeof wa=="number"&&xa===void 0)Rn(oa,ba);else if(typeof wa=="string"&&xa===void 0)Rn(oa,wa,1,ba);else if(typeof wa=="string"&&typeof xa=="number")Rn(oa,wa,xa,ba);else throw new TypeError("input is valid")}function Dd(oa){return{verbose:jt.verbose.bind(null,oa),info:jt.info.bind(null,oa),warning:jt.warning.bind(null,oa),error:jt.error.bind(null,oa),fatal:jt.fatal.bind(null,oa)}}function Rn(oa,ba,wa,xa){let Sa=en[xa||""]||en[""];Ts[oa]<Ts[Sa.minimalSeverity]||(Sa.logDateTime&&(ba=`${new Date().toISOString()}|${ba}`),Sa.logSourceLocation,Ed[Sa.provider].log(oa,ba,xa))}var Xo,Ko,Ts,Ed,xs,en,ce,Gn,Un,zn,Mn,ut=L(()=>{Xo=class{log(oa,ba,wa){}},Ko=class{log(oa,ba,wa){console.log(`${this.color(oa)} ${wa?"\x1B[35m"+wa+"\x1B[0m ":""}${ba}`)}color(oa){switch(oa){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${oa}`)}}},Ts={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ed={none:new Xo,console:new Ko},xs={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en={"":xs},(oa=>{function ba(Ta,Aa){oa("verbose",Ta,Aa)}oa.verbose=ba;function wa(Ta,Aa){oa("info",Ta,Aa)}oa.info=wa;function xa(Ta,Aa){oa("warning",Ta,Aa)}oa.warning=xa;function Sa(Ta,Aa){oa("error",Ta,Aa)}oa.error=Sa;function va(Ta,Aa){oa("fatal",Ta,Aa)}oa.fatal=va;function Ea(Ta){en={},La("",Ta||{})}oa.reset=Ea;function La(Ta,Aa){if(Ta==="*")Ea(Aa);else{let ka=en[Ta]||xs;en[Ta]={provider:Aa.provider||ka.provider,minimalSeverity:Aa.minimalSeverity||ka.minimalSeverity,logDateTime:Aa.logDateTime===void 0?ka.logDateTime:Aa.logDateTime,logSourceLocation:Aa.logSourceLocation===void 0?ka.logSourceLocation:Aa.logSourceLocation}}}oa.set=La;function eu(Ta){let Aa={};Ta.logLevel&&(Aa.minimalSeverity=Ta.logLevel),La("",Aa)}oa.setWithEnv=eu})(jt||(jt={})),ce=jt,Gn=class{constructor(oa,ba,wa,xa,Sa,va){this.category=oa,this.name=ba,this.startTime=wa,this.endCallback=xa,this.timer=Sa,this.ctx=va}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Un=class{constructor(oa,ba,wa,xa){this.category=oa,this.name=ba,this.startTime=wa,this.endTime=xa}},zn=class{constructor(oa,ba,wa){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=oa===void 0?1e4:oa,this._flushBatchSize=ba===void 0?10:ba,this._flushIntervalInMilliseconds=wa===void 0?5e3:wa}static create(oa){return oa===void 0?new this:new this(oa.maxNumberEvents,oa.flushBatchSize,oa.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Mn(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(oa,ba,wa,xa){let Sa=this._started?this.begin(oa,ba,xa):void 0,va=!1,Ea=wa();if(Ea&&typeof Ea.then=="function")return va=!0,new Promise((La,eu)=>{Ea.then(async Ta=>{Sa&&await Sa.end(),La(Ta)},async Ta=>{Sa&&await Sa.end(),eu(Ta)})});if(!va&&Sa){let La=Sa.end();if(La&&typeof La.then=="function")return new Promise((eu,Ta)=>{La.then(()=>{eu(Ea)},Aa=>{Ta(Aa)})})}return Ea}begin(oa,ba,wa){if(!this._started)throw new Error("profiler is not started yet");if(wa===void 0){let xa=Mn();return this.flush(xa),new Gn(oa,ba,xa,Sa=>this.endSync(Sa))}else{let xa=wa.beginTimer();return new Gn(oa,ba,0,async Sa=>this.end(Sa),xa,wa)}}async end(oa){let ba=await oa.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Un(oa.category,oa.name,oa.startTime,ba)),this.flush(ba))}endSync(oa){let ba=Mn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Un(oa.category,oa.name,oa.startTime,ba)),this.flush(ba))}logOneEvent(oa){ce.verbose(`Profiler.${oa.category}`,`${(oa.endTime-oa.startTime).toFixed(2)}ms on event '${oa.name}' at ${oa.endTime.toFixed(2)}`)}flush(oa){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||oa-this._flushTime>=this._flushIntervalInMilliseconds){for(let ba=this._flushPointer;this._flushPointer<ba+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Mn()}}get started(){return this._started}},Mn=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs(oa,ba,wa){for(let xa of wa){let Sa=xa[0],va=xa[1],Ea=xa[2],La=xa[3],eu=xa[4];if(oa.opType===Sa){for(let Ta of ba)if((Ta.domain===va||Ta.domain==="ai.onnx"&&va==="")&&Ld(Ta.version,Ea))return{opImpl:La,opInit:eu}}}throw new TypeError(`cannot resolve operator '${oa.opType}' with opsets: ${ba.map(xa=>`${xa.domain||"ai.onnx"} v${xa.version}`).join(", ")}`)}function Ld(oa,ba){if(ba.endsWith("+")){let wa=Number.parseInt(ba.substring(0,ba.length-1),10);return!isNaN(wa)&&wa<=oa}else if(ba.split("-").length===2){let wa=ba.split("-"),xa=Number.parseInt(wa[0],10),Sa=Number.parseInt(wa[1],10);return!isNaN(xa)&&!isNaN(Sa)&&xa<=oa&&oa<=Sa}else return Number.parseInt(ba,10)===oa}var ws=L(()=>{}),_s=me(oa=>{oa.__esModule=!0;var ba=(function(){function wa(xa){if(!xa)throw new TypeError("Invalid argument; `value` has no value.");this.value=wa.EMPTY,xa&&wa.isGuid(xa)&&(this.value=xa)}return wa.isGuid=function(xa){var Sa=xa.toString();return xa&&(xa instanceof wa||wa.validator.test(Sa))},wa.create=function(){return new wa([wa.gen(2),wa.gen(1),wa.gen(1),wa.gen(1),wa.gen(3)].join("-"))},wa.createEmpty=function(){return new wa("emptyguid")},wa.parse=function(xa){return new wa(xa)},wa.raw=function(){return[wa.gen(2),wa.gen(1),wa.gen(1),wa.gen(1),wa.gen(3)].join("-")},wa.gen=function(xa){for(var Sa="",va=0;va<xa;va++)Sa+=((1+Math.random())*65536|0).toString(16).substring(1);return Sa},wa.prototype.equals=function(xa){return wa.isGuid(xa)&&this.value===xa.toString()},wa.prototype.isEmpty=function(){return this.value===wa.EMPTY},wa.prototype.toString=function(){return this.value},wa.prototype.toJSON=function(){return{value:this.value}},wa.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),wa.EMPTY="00000000-0000-0000-0000-000000000000",wa})();oa.Guid=ba});function be(oa,ba,wa){this.low=oa|0,this.high=ba|0,this.unsigned=!!wa}function We(oa){return(oa&&oa.__isLong__)===!0}function Os(oa){var ba=Math.clz32(oa&-oa);return oa?31-ba:ba}function ur(oa,ba){var wa,xa,Sa;return ba?(oa>>>=0,(Sa=0<=oa&&oa<256)&&(xa=Ss[oa],xa)?xa:(wa=le(oa,0,!0),Sa&&(Ss[oa]=wa),wa)):(oa|=0,(Sa=-128<=oa&&oa<128)&&(xa=Is[oa],xa)?xa:(wa=le(oa,oa<0?-1:0,!1),Sa&&(Is[oa]=wa),wa))}function ft(oa,ba){if(isNaN(oa))return ba?Ut:wt;if(ba){if(oa<0)return Ut;if(oa>=Ds)return $s}else{if(oa<=-Ps)return tt;if(oa+1>=Ps)return Fs}return oa<0?ft(-oa,ba).neg():le(oa%Lr|0,oa/Lr|0,ba)}function le(oa,ba,wa){return new be(oa,ba,wa)}function Qo(oa,ba,wa){if(oa.length===0)throw Error("empty string");if(typeof ba=="number"?(wa=ba,ba=!1):ba=!!ba,oa==="NaN"||oa==="Infinity"||oa==="+Infinity"||oa==="-Infinity")return ba?Ut:wt;if(wa=wa||10,wa<2||36<wa)throw RangeError("radix");var xa;if((xa=oa.indexOf("-"))>0)throw Error("interior hyphen");if(xa===0)return Qo(oa.substring(1),ba,wa).neg();for(var Sa=ft(Vn(wa,8)),va=wt,Ea=0;Ea<oa.length;Ea+=8){var La=Math.min(8,oa.length-Ea),eu=parseInt(oa.substring(Ea,Ea+La),wa);if(La<8){var Ta=ft(Vn(wa,La));va=va.mul(Ta).add(ft(eu))}else va=va.mul(Sa),va=va.add(ft(eu))}return va.unsigned=ba,va}function _t(oa,ba){return typeof oa=="number"?ft(oa,ba):typeof oa=="string"?Qo(oa,ba):le(oa.low,oa.high,typeof ba=="boolean"?ba:oa.unsigned)}var lt,Is,Ss,Vn,As,$d,Lr,Ds,Ps,Es,wt,Ut,Dr,Ls,Zo,Fs,$s,tt,$,zt,ei=L(()=>{lt=null;try{lt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=We,Is={},Ss={},be.fromInt=ur,be.fromNumber=ft,be.fromBits=le,Vn=Math.pow,be.fromString=Qo,be.fromValue=_t,As=65536,$d=1<<24,Lr=As*As,Ds=Lr*Lr,Ps=Ds/2,Es=ur($d),wt=ur(0),be.ZERO=wt,Ut=ur(0,!0),be.UZERO=Ut,Dr=ur(1),be.ONE=Dr,Ls=ur(1,!0),be.UONE=Ls,Zo=ur(-1),be.NEG_ONE=Zo,Fs=le(-1,2147483647,!1),be.MAX_VALUE=Fs,$s=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s,tt=le(0,-2147483648,!1),be.MIN_VALUE=tt,$=be.prototype,$.toInt=function(){return this.unsigned?this.low>>>0:this.low},$.toNumber=function(){return this.unsigned?(this.high>>>0)*Lr+(this.low>>>0):this.high*Lr+(this.low>>>0)},$.toString=function(oa){if(oa=oa||10,oa<2||36<oa)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(tt)){var ba=ft(oa),wa=this.div(ba),xa=wa.mul(ba).sub(this);return wa.toString(oa)+xa.toInt().toString(oa)}else return"-"+this.neg().toString(oa);for(var Sa=ft(Vn(oa,6),this.unsigned),va=this,Ea="";;){var La=va.div(Sa),eu=va.sub(La.mul(Sa)).toInt()>>>0,Ta=eu.toString(oa);if(va=La,va.isZero())return Ta+Ea;for(;Ta.length<6;)Ta="0"+Ta;Ea=""+Ta+Ea}},$.getHighBits=function(){return this.high},$.getHighBitsUnsigned=function(){return this.high>>>0},$.getLowBits=function(){return this.low},$.getLowBitsUnsigned=function(){return this.low>>>0},$.getNumBitsAbs=function(){if(this.isNegative())return this.eq(tt)?64:this.neg().getNumBitsAbs();for(var oa=this.high!=0?this.high:this.low,ba=31;ba>0&&!(oa&1<<ba);ba--);return this.high!=0?ba+33:ba+1},$.isZero=function(){return this.high===0&&this.low===0},$.eqz=$.isZero,$.isNegative=function(){return!this.unsigned&&this.high<0},$.isPositive=function(){return this.unsigned||this.high>=0},$.isOdd=function(){return(this.low&1)===1},$.isEven=function(){return(this.low&1)===0},$.equals=function(oa){return We(oa)||(oa=_t(oa)),this.unsigned!==oa.unsigned&&this.high>>>31===1&&oa.high>>>31===1?!1:this.high===oa.high&&this.low===oa.low},$.eq=$.equals,$.notEquals=function(oa){return!this.eq(oa)},$.neq=$.notEquals,$.ne=$.notEquals,$.lessThan=function(oa){return this.comp(oa)<0},$.lt=$.lessThan,$.lessThanOrEqual=function(oa){return this.comp(oa)<=0},$.lte=$.lessThanOrEqual,$.le=$.lessThanOrEqual,$.greaterThan=function(oa){return this.comp(oa)>0},$.gt=$.greaterThan,$.greaterThanOrEqual=function(oa){return this.comp(oa)>=0},$.gte=$.greaterThanOrEqual,$.ge=$.greaterThanOrEqual,$.compare=function(oa){if(We(oa)||(oa=_t(oa)),this.eq(oa))return 0;var ba=this.isNegative(),wa=oa.isNegative();return ba&&!wa?-1:!ba&&wa?1:this.unsigned?oa.high>>>0>this.high>>>0||oa.high===this.high&&oa.low>>>0>this.low>>>0?-1:1:this.sub(oa).isNegative()?-1:1},$.comp=$.compare,$.negate=function(){return!this.unsigned&&this.eq(tt)?tt:this.not().add(Dr)},$.neg=$.negate,$.add=function(oa){We(oa)||(oa=_t(oa));var ba=this.high>>>16,wa=this.high&65535,xa=this.low>>>16,Sa=this.low&65535,va=oa.high>>>16,Ea=oa.high&65535,La=oa.low>>>16,eu=oa.low&65535,Ta=0,Aa=0,ka=0,ru=0;return ru+=Sa+eu,ka+=ru>>>16,ru&=65535,ka+=xa+La,Aa+=ka>>>16,ka&=65535,Aa+=wa+Ea,Ta+=Aa>>>16,Aa&=65535,Ta+=ba+va,Ta&=65535,le(ka<<16|ru,Ta<<16|Aa,this.unsigned)},$.subtract=function(oa){return We(oa)||(oa=_t(oa)),this.add(oa.neg())},$.sub=$.subtract,$.multiply=function(oa){if(this.isZero())return this;if(We(oa)||(oa=_t(oa)),lt){var ba=lt.mul(this.low,this.high,oa.low,oa.high);return le(ba,lt.get_high(),this.unsigned)}if(oa.isZero())return this.unsigned?Ut:wt;if(this.eq(tt))return oa.isOdd()?tt:wt;if(oa.eq(tt))return this.isOdd()?tt:wt;if(this.isNegative())return oa.isNegative()?this.neg().mul(oa.neg()):this.neg().mul(oa).neg();if(oa.isNegative())return this.mul(oa.neg()).neg();if(this.lt(Es)&&oa.lt(Es))return ft(this.toNumber()*oa.toNumber(),this.unsigned);var wa=this.high>>>16,xa=this.high&65535,Sa=this.low>>>16,va=this.low&65535,Ea=oa.high>>>16,La=oa.high&65535,eu=oa.low>>>16,Ta=oa.low&65535,Aa=0,ka=0,ru=0,nu=0;return nu+=va*Ta,ru+=nu>>>16,nu&=65535,ru+=Sa*Ta,ka+=ru>>>16,ru&=65535,ru+=va*eu,ka+=ru>>>16,ru&=65535,ka+=xa*Ta,Aa+=ka>>>16,ka&=65535,ka+=Sa*eu,Aa+=ka>>>16,ka&=65535,ka+=va*La,Aa+=ka>>>16,ka&=65535,Aa+=wa*Ta+xa*eu+Sa*La+va*Ea,Aa&=65535,le(ru<<16|nu,Aa<<16|ka,this.unsigned)},$.mul=$.multiply,$.divide=function(oa){if(We(oa)||(oa=_t(oa)),oa.isZero())throw Error("division by zero");if(lt){if(!this.unsigned&&this.high===-2147483648&&oa.low===-1&&oa.high===-1)return this;var ba=(this.unsigned?lt.div_u:lt.div_s)(this.low,this.high,oa.low,oa.high);return le(ba,lt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ut:wt;var wa,xa,Sa;if(this.unsigned){if(oa.unsigned||(oa=oa.toUnsigned()),oa.gt(this))return Ut;if(oa.gt(this.shru(1)))return Ls;Sa=Ut}else{if(this.eq(tt)){if(oa.eq(Dr)||oa.eq(Zo))return tt;if(oa.eq(tt))return Dr;var va=this.shr(1);return wa=va.div(oa).shl(1),wa.eq(wt)?oa.isNegative()?Dr:Zo:(xa=this.sub(oa.mul(wa)),Sa=wa.add(xa.div(oa)),Sa)}else if(oa.eq(tt))return this.unsigned?Ut:wt;if(this.isNegative())return oa.isNegative()?this.neg().div(oa.neg()):this.neg().div(oa).neg();if(oa.isNegative())return this.div(oa.neg()).neg();Sa=wt}for(xa=this;xa.gte(oa);){wa=Math.max(1,Math.floor(xa.toNumber()/oa.toNumber()));for(var Ea=Math.ceil(Math.log(wa)/Math.LN2),La=Ea<=48?1:Vn(2,Ea-48),eu=ft(wa),Ta=eu.mul(oa);Ta.isNegative()||Ta.gt(xa);)wa-=La,eu=ft(wa,this.unsigned),Ta=eu.mul(oa);eu.isZero()&&(eu=Dr),Sa=Sa.add(eu),xa=xa.sub(Ta)}return Sa},$.div=$.divide,$.modulo=function(oa){if(We(oa)||(oa=_t(oa)),lt){var ba=(this.unsigned?lt.rem_u:lt.rem_s)(this.low,this.high,oa.low,oa.high);return le(ba,lt.get_high(),this.unsigned)}return this.sub(this.div(oa).mul(oa))},$.mod=$.modulo,$.rem=$.modulo,$.not=function(){return le(~this.low,~this.high,this.unsigned)},$.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},$.clz=$.countLeadingZeros,$.countTrailingZeros=function(){return this.low?Os(this.low):Os(this.high)+32},$.ctz=$.countTrailingZeros,$.and=function(oa){return We(oa)||(oa=_t(oa)),le(this.low&oa.low,this.high&oa.high,this.unsigned)},$.or=function(oa){return We(oa)||(oa=_t(oa)),le(this.low|oa.low,this.high|oa.high,this.unsigned)},$.xor=function(oa){return We(oa)||(oa=_t(oa)),le(this.low^oa.low,this.high^oa.high,this.unsigned)},$.shiftLeft=function(oa){return We(oa)&&(oa=oa.toInt()),(oa&=63)===0?this:oa<32?le(this.low<<oa,this.high<<oa|this.low>>>32-oa,this.unsigned):le(0,this.low<<oa-32,this.unsigned)},$.shl=$.shiftLeft,$.shiftRight=function(oa){return We(oa)&&(oa=oa.toInt()),(oa&=63)===0?this:oa<32?le(this.low>>>oa|this.high<<32-oa,this.high>>oa,this.unsigned):le(this.high>>oa-32,this.high>=0?0:-1,this.unsigned)},$.shr=$.shiftRight,$.shiftRightUnsigned=function(oa){return We(oa)&&(oa=oa.toInt()),(oa&=63)===0?this:oa<32?le(this.low>>>oa|this.high<<32-oa,this.high>>>oa,this.unsigned):oa===32?le(this.high,0,this.unsigned):le(this.high>>>oa-32,0,this.unsigned)},$.shru=$.shiftRightUnsigned,$.shr_u=$.shiftRightUnsigned,$.rotateLeft=function(oa){var ba;return We(oa)&&(oa=oa.toInt()),(oa&=63)===0?this:oa===32?le(this.high,this.low,this.unsigned):oa<32?(ba=32-oa,le(this.low<<oa|this.high>>>ba,this.high<<oa|this.low>>>ba,this.unsigned)):(oa-=32,ba=32-oa,le(this.high<<oa|this.low>>>ba,this.low<<oa|this.high>>>ba,this.unsigned))},$.rotl=$.rotateLeft,$.rotateRight=function(oa){var ba;return We(oa)&&(oa=oa.toInt()),(oa&=63)===0?this:oa===32?le(this.high,this.low,this.unsigned):oa<32?(ba=32-oa,le(this.high<<ba|this.low>>>oa,this.low<<ba|this.high>>>oa,this.unsigned)):(oa-=32,ba=32-oa,le(this.low<<ba|this.high>>>oa,this.high<<ba|this.low>>>oa,this.unsigned))},$.rotr=$.rotateRight,$.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},$.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},$.toBytes=function(oa){return oa?this.toBytesLE():this.toBytesBE()},$.toBytesLE=function(){var oa=this.high,ba=this.low;return[ba&255,ba>>>8&255,ba>>>16&255,ba>>>24,oa&255,oa>>>8&255,oa>>>16&255,oa>>>24]},$.toBytesBE=function(){var oa=this.high,ba=this.low;return[oa>>>24,oa>>>16&255,oa>>>8&255,oa&255,ba>>>24,ba>>>16&255,ba>>>8&255,ba&255]},be.fromBytes=function(oa,ba,wa){return wa?be.fromBytesLE(oa,ba):be.fromBytesBE(oa,ba)},be.fromBytesLE=function(oa,ba){return new be(oa[0]|oa[1]<<8|oa[2]<<16|oa[3]<<24,oa[4]|oa[5]<<8|oa[6]<<16|oa[7]<<24,ba)},be.fromBytesBE=function(oa,ba){return new be(oa[4]<<24|oa[5]<<16|oa[6]<<8|oa[7],oa[0]<<24|oa[1]<<16|oa[2]<<8|oa[3],ba)},zt=be}),_,Wn=L(()=>{_={},_.Offset,_.Table,_.SIZEOF_SHORT=2,_.SIZEOF_INT=4,_.FILE_IDENTIFIER_LENGTH=4,_.SIZE_PREFIX_LENGTH=4,_.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_.int32=new Int32Array(2),_.float32=new Float32Array(_.int32.buffer),_.float64=new Float64Array(_.int32.buffer),_.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_.Long=function(oa,ba){this.low=oa|0,this.high=ba|0},_.Long.create=function(oa,ba){return oa==0&&ba==0?_.Long.ZERO:new _.Long(oa,ba)},_.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_.Long.prototype.equals=function(oa){return this.low==oa.low&&this.high==oa.high},_.Long.ZERO=new _.Long(0,0),_.Builder=function(oa){if(oa)var ba=oa;else var ba=1024;this.bb=_.ByteBuffer.allocate(ba),this.space=ba,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.forceDefaults=function(oa){this.force_defaults=oa},_.Builder.prototype.dataBuffer=function(){return this.bb},_.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_.Builder.prototype.prep=function(oa,ba){oa>this.minalign&&(this.minalign=oa);for(var wa=~(this.bb.capacity()-this.space+ba)+1&oa-1;this.space<wa+oa+ba;){var xa=this.bb.capacity();this.bb=_.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-xa}this.pad(wa)},_.Builder.prototype.pad=function(oa){for(var ba=0;ba<oa;ba++)this.bb.writeInt8(--this.space,0)},_.Builder.prototype.writeInt8=function(oa){this.bb.writeInt8(this.space-=1,oa)},_.Builder.prototype.writeInt16=function(oa){this.bb.writeInt16(this.space-=2,oa)},_.Builder.prototype.writeInt32=function(oa){this.bb.writeInt32(this.space-=4,oa)},_.Builder.prototype.writeInt64=function(oa){this.bb.writeInt64(this.space-=8,oa)},_.Builder.prototype.writeFloat32=function(oa){this.bb.writeFloat32(this.space-=4,oa)},_.Builder.prototype.writeFloat64=function(oa){this.bb.writeFloat64(this.space-=8,oa)},_.Builder.prototype.addInt8=function(oa){this.prep(1,0),this.writeInt8(oa)},_.Builder.prototype.addInt16=function(oa){this.prep(2,0),this.writeInt16(oa)},_.Builder.prototype.addInt32=function(oa){this.prep(4,0),this.writeInt32(oa)},_.Builder.prototype.addInt64=function(oa){this.prep(8,0),this.writeInt64(oa)},_.Builder.prototype.addFloat32=function(oa){this.prep(4,0),this.writeFloat32(oa)},_.Builder.prototype.addFloat64=function(oa){this.prep(8,0),this.writeFloat64(oa)},_.Builder.prototype.addFieldInt8=function(oa,ba,wa){(this.force_defaults||ba!=wa)&&(this.addInt8(ba),this.slot(oa))},_.Builder.prototype.addFieldInt16=function(oa,ba,wa){(this.force_defaults||ba!=wa)&&(this.addInt16(ba),this.slot(oa))},_.Builder.prototype.addFieldInt32=function(oa,ba,wa){(this.force_defaults||ba!=wa)&&(this.addInt32(ba),this.slot(oa))},_.Builder.prototype.addFieldInt64=function(oa,ba,wa){(this.force_defaults||!ba.equals(wa))&&(this.addInt64(ba),this.slot(oa))},_.Builder.prototype.addFieldFloat32=function(oa,ba,wa){(this.force_defaults||ba!=wa)&&(this.addFloat32(ba),this.slot(oa))},_.Builder.prototype.addFieldFloat64=function(oa,ba,wa){(this.force_defaults||ba!=wa)&&(this.addFloat64(ba),this.slot(oa))},_.Builder.prototype.addFieldOffset=function(oa,ba,wa){(this.force_defaults||ba!=wa)&&(this.addOffset(ba),this.slot(oa))},_.Builder.prototype.addFieldStruct=function(oa,ba,wa){ba!=wa&&(this.nested(ba),this.slot(oa))},_.Builder.prototype.nested=function(oa){if(oa!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_.Builder.prototype.slot=function(oa){this.vtable[oa]=this.offset()},_.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_.Builder.growByteBuffer=function(oa){var ba=oa.capacity();if(ba&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var wa=ba<<1,xa=_.ByteBuffer.allocate(wa);return xa.setPosition(wa-ba),xa.bytes().set(oa.bytes(),wa-ba),xa},_.Builder.prototype.addOffset=function(oa){this.prep(_.SIZEOF_INT,0),this.writeInt32(this.offset()-oa+_.SIZEOF_INT)},_.Builder.prototype.startObject=function(oa){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=oa;for(var ba=0;ba<oa;ba++)this.vtable[ba]=0;this.isNested=!0,this.object_start=this.offset()},_.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var oa=this.offset(),ba=this.vtable_in_use-1;ba>=0&&this.vtable[ba]==0;ba--);for(var wa=ba+1;ba>=0;ba--)this.addInt16(this.vtable[ba]!=0?oa-this.vtable[ba]:0);var xa=2;this.addInt16(oa-this.object_start);var Sa=(wa+xa)*_.SIZEOF_SHORT;this.addInt16(Sa);var va=0,Ea=this.space;e:for(ba=0;ba<this.vtables.length;ba++){var La=this.bb.capacity()-this.vtables[ba];if(Sa==this.bb.readInt16(La)){for(var eu=_.SIZEOF_SHORT;eu<Sa;eu+=_.SIZEOF_SHORT)if(this.bb.readInt16(Ea+eu)!=this.bb.readInt16(La+eu))continue e;va=this.vtables[ba];break}}return va?(this.space=this.bb.capacity()-oa,this.bb.writeInt32(this.space,va-oa)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-oa,this.offset()-oa)),this.isNested=!1,oa},_.Builder.prototype.finish=function(oa,ba,wa){var xa=wa?_.SIZE_PREFIX_LENGTH:0;if(ba){var Sa=ba;if(this.prep(this.minalign,_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH+xa),Sa.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var va=_.FILE_IDENTIFIER_LENGTH-1;va>=0;va--)this.writeInt8(Sa.charCodeAt(va))}this.prep(this.minalign,_.SIZEOF_INT+xa),this.addOffset(oa),xa&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_.Builder.prototype.finishSizePrefixed=function(oa,ba){this.finish(oa,ba,!0)},_.Builder.prototype.requiredField=function(oa,ba){var wa=this.bb.capacity()-oa,xa=wa-this.bb.readInt32(wa),Sa=this.bb.readInt16(xa+ba)!=0;if(!Sa)throw new Error("FlatBuffers: field "+ba+" must be set")},_.Builder.prototype.startVector=function(oa,ba,wa){this.notNested(),this.vector_num_elems=ba,this.prep(_.SIZEOF_INT,oa*ba),this.prep(wa,oa*ba)},_.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_.Builder.prototype.createString=function(oa){if(oa instanceof Uint8Array)var ba=oa;else for(var ba=[],wa=0;wa<oa.length;){var xa,Sa=oa.charCodeAt(wa++);if(Sa<55296||Sa>=56320)xa=Sa;else{var va=oa.charCodeAt(wa++);xa=(Sa<<10)+va+-56613888}xa<128?ba.push(xa):(xa<2048?ba.push(xa>>6&31|192):(xa<65536?ba.push(xa>>12&15|224):ba.push(xa>>18&7|240,xa>>12&63|128),ba.push(xa>>6&63|128)),ba.push(xa&63|128))}this.addInt8(0),this.startVector(1,ba.length,1),this.bb.setPosition(this.space-=ba.length);for(var wa=0,Ea=this.space,La=this.bb.bytes();wa<ba.length;wa++)La[Ea++]=ba[wa];return this.endVector()},_.Builder.prototype.createLong=function(oa,ba){return _.Long.create(oa,ba)},_.ByteBuffer=function(oa){this.bytes_=oa,this.position_=0},_.ByteBuffer.allocate=function(oa){return new _.ByteBuffer(new Uint8Array(oa))},_.ByteBuffer.prototype.clear=function(){this.position_=0},_.ByteBuffer.prototype.bytes=function(){return this.bytes_},_.ByteBuffer.prototype.position=function(){return this.position_},_.ByteBuffer.prototype.setPosition=function(oa){this.position_=oa},_.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_.ByteBuffer.prototype.readInt8=function(oa){return this.readUint8(oa)<<24>>24},_.ByteBuffer.prototype.readUint8=function(oa){return this.bytes_[oa]},_.ByteBuffer.prototype.readInt16=function(oa){return this.readUint16(oa)<<16>>16},_.ByteBuffer.prototype.readUint16=function(oa){return this.bytes_[oa]|this.bytes_[oa+1]<<8},_.ByteBuffer.prototype.readInt32=function(oa){return this.bytes_[oa]|this.bytes_[oa+1]<<8|this.bytes_[oa+2]<<16|this.bytes_[oa+3]<<24},_.ByteBuffer.prototype.readUint32=function(oa){return this.readInt32(oa)>>>0},_.ByteBuffer.prototype.readInt64=function(oa){return new _.Long(this.readInt32(oa),this.readInt32(oa+4))},_.ByteBuffer.prototype.readUint64=function(oa){return new _.Long(this.readUint32(oa),this.readUint32(oa+4))},_.ByteBuffer.prototype.readFloat32=function(oa){return _.int32[0]=this.readInt32(oa),_.float32[0]},_.ByteBuffer.prototype.readFloat64=function(oa){return _.int32[_.isLittleEndian?0:1]=this.readInt32(oa),_.int32[_.isLittleEndian?1:0]=this.readInt32(oa+4),_.float64[0]},_.ByteBuffer.prototype.writeInt8=function(oa,ba){this.bytes_[oa]=ba},_.ByteBuffer.prototype.writeUint8=function(oa,ba){this.bytes_[oa]=ba},_.ByteBuffer.prototype.writeInt16=function(oa,ba){this.bytes_[oa]=ba,this.bytes_[oa+1]=ba>>8},_.ByteBuffer.prototype.writeUint16=function(oa,ba){this.bytes_[oa]=ba,this.bytes_[oa+1]=ba>>8},_.ByteBuffer.prototype.writeInt32=function(oa,ba){this.bytes_[oa]=ba,this.bytes_[oa+1]=ba>>8,this.bytes_[oa+2]=ba>>16,this.bytes_[oa+3]=ba>>24},_.ByteBuffer.prototype.writeUint32=function(oa,ba){this.bytes_[oa]=ba,this.bytes_[oa+1]=ba>>8,this.bytes_[oa+2]=ba>>16,this.bytes_[oa+3]=ba>>24},_.ByteBuffer.prototype.writeInt64=function(oa,ba){this.writeInt32(oa,ba.low),this.writeInt32(oa+4,ba.high)},_.ByteBuffer.prototype.writeUint64=function(oa,ba){this.writeUint32(oa,ba.low),this.writeUint32(oa+4,ba.high)},_.ByteBuffer.prototype.writeFloat32=function(oa,ba){_.float32[0]=ba,this.writeInt32(oa,_.int32[0])},_.ByteBuffer.prototype.writeFloat64=function(oa,ba){_.float64[0]=ba,this.writeInt32(oa,_.int32[_.isLittleEndian?0:1]),this.writeInt32(oa+4,_.int32[_.isLittleEndian?1:0])},_.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var oa="",ba=0;ba<_.FILE_IDENTIFIER_LENGTH;ba++)oa+=String.fromCharCode(this.readInt8(this.position_+_.SIZEOF_INT+ba));return oa},_.ByteBuffer.prototype.__offset=function(oa,ba){var wa=oa-this.readInt32(oa);return ba<this.readInt16(wa)?this.readInt16(wa+ba):0},_.ByteBuffer.prototype.__union=function(oa,ba){return oa.bb_pos=ba+this.readInt32(ba),oa.bb=this,oa},_.ByteBuffer.prototype.__string=function(oa,ba){oa+=this.readInt32(oa);var wa=this.readInt32(oa),xa="",Sa=0;if(oa+=_.SIZEOF_INT,ba===_.Encoding.UTF8_BYTES)return this.bytes_.subarray(oa,oa+wa);for(;Sa<wa;){var va,Ea=this.readUint8(oa+Sa++);if(Ea<192)va=Ea;else{var La=this.readUint8(oa+Sa++);if(Ea<224)va=(Ea&31)<<6|La&63;else{var eu=this.readUint8(oa+Sa++);if(Ea<240)va=(Ea&15)<<12|(La&63)<<6|eu&63;else{var Ta=this.readUint8(oa+Sa++);va=(Ea&7)<<18|(La&63)<<12|(eu&63)<<6|Ta&63}}}va<65536?xa+=String.fromCharCode(va):(va-=65536,xa+=String.fromCharCode((va>>10)+55296,(va&1023)+56320))}return xa},_.ByteBuffer.prototype.__indirect=function(oa){return oa+this.readInt32(oa)},_.ByteBuffer.prototype.__vector=function(oa){return oa+this.readInt32(oa)+_.SIZEOF_INT},_.ByteBuffer.prototype.__vector_len=function(oa){return this.readInt32(oa+this.readInt32(oa))},_.ByteBuffer.prototype.__has_identifier=function(oa){if(oa.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var ba=0;ba<_.FILE_IDENTIFIER_LENGTH;ba++)if(oa.charCodeAt(ba)!=this.readInt8(this.position_+_.SIZEOF_INT+ba))return!1;return!0},_.ByteBuffer.prototype.createLong=function(oa,ba){return _.Long.create(oa,ba)}}),W,tn=L(()=>{Wn(),(oa=>{(ba=>{(wa=>{(xa=>(xa[xa.UNDEFINED=0]="UNDEFINED",xa[xa.FLOAT=1]="FLOAT",xa[xa.INT=2]="INT",xa[xa.STRING=3]="STRING",xa[xa.TENSOR=4]="TENSOR",xa[xa.GRAPH=5]="GRAPH",xa[xa.FLOATS=6]="FLOATS",xa[xa.INTS=7]="INTS",xa[xa.STRINGS=8]="STRINGS",xa[xa.TENSORS=9]="TENSORS",xa[xa.GRAPHS=10]="GRAPHS",xa[xa.SPARSE_TENSOR=11]="SPARSE_TENSOR",xa[xa.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(wa.AttributeType||(wa.AttributeType={}))})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{(xa=>(xa[xa.UNKNOWN=0]="UNKNOWN",xa[xa.VALUE=1]="VALUE",xa[xa.PARAM=2]="PARAM"))(wa.DimensionValueType||(wa.DimensionValueType={}))})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{(xa=>(xa[xa.UNDEFINED=0]="UNDEFINED",xa[xa.FLOAT=1]="FLOAT",xa[xa.UINT8=2]="UINT8",xa[xa.INT8=3]="INT8",xa[xa.UINT16=4]="UINT16",xa[xa.INT16=5]="INT16",xa[xa.INT32=6]="INT32",xa[xa.INT64=7]="INT64",xa[xa.STRING=8]="STRING",xa[xa.BOOL=9]="BOOL",xa[xa.FLOAT16=10]="FLOAT16",xa[xa.DOUBLE=11]="DOUBLE",xa[xa.UINT32=12]="UINT32",xa[xa.UINT64=13]="UINT64",xa[xa.COMPLEX64=14]="COMPLEX64",xa[xa.COMPLEX128=15]="COMPLEX128",xa[xa.BFLOAT16=16]="BFLOAT16",xa[xa.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",xa[xa.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",xa[xa.FLOAT8E5M2=19]="FLOAT8E5M2",xa[xa.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(wa.TensorDataType||(wa.TensorDataType={}))})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{(xa=>(xa[xa.Primitive=0]="Primitive",xa[xa.Fused=1]="Fused"))(wa.NodeType||(wa.NodeType={}))})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{(xa=>(xa[xa.NONE=0]="NONE",xa[xa.tensor_type=1]="tensor_type",xa[xa.sequence_type=2]="sequence_type",xa[xa.map_type=3]="map_type"))(wa.TypeInfoValue||(wa.TypeInfoValue={}))})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsShape(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsShape(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}dim(va,Ea){let La=this.bb.__offset(this.bb_pos,4);return La?(Ea||new oa.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}dimLength(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.__vector_len(this.bb_pos+va):0}static startShape(va){va.startObject(1)}static addDim(va,Ea){va.addFieldOffset(0,Ea,0)}static createDimVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startDimVector(va,Ea){va.startVector(4,Ea,4)}static endShape(va){return va.endObject()}static createShape(va,Ea){return xa.startShape(va),xa.addDim(va,Ea),xa.endShape(va)}}wa.Shape=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsDimension(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsDimension(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}value(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?(va||new oa.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}denotation(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}static startDimension(va){va.startObject(2)}static addValue(va,Ea){va.addFieldOffset(0,Ea,0)}static addDenotation(va,Ea){va.addFieldOffset(1,Ea,0)}static endDimension(va){return va.endObject()}static createDimension(va,Ea,La){return xa.startDimension(va),xa.addValue(va,Ea),xa.addDenotation(va,La),xa.endDimension(va)}}wa.Dimension=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsDimensionValue(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsDimensionValue(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}dimType(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.readInt8(this.bb_pos+va):0}dimValue(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.readInt64(this.bb_pos+va):this.bb.createLong(0,0)}dimParam(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}static startDimensionValue(va){va.startObject(3)}static addDimType(va,Ea){va.addFieldInt8(0,Ea,0)}static addDimValue(va,Ea){va.addFieldInt64(1,Ea,va.createLong(0,0))}static addDimParam(va,Ea){va.addFieldOffset(2,Ea,0)}static endDimensionValue(va){return va.endObject()}static createDimensionValue(va,Ea,La,eu){return xa.startDimensionValue(va),xa.addDimType(va,Ea),xa.addDimValue(va,La),xa.addDimParam(va,eu),xa.endDimensionValue(va)}}wa.DimensionValue=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsTensorTypeAndShape(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsTensorTypeAndShape(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}elemType(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.readInt32(this.bb_pos+va):0}shape(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?(va||new oa.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}static startTensorTypeAndShape(va){va.startObject(2)}static addElemType(va,Ea){va.addFieldInt32(0,Ea,0)}static addShape(va,Ea){va.addFieldOffset(1,Ea,0)}static endTensorTypeAndShape(va){return va.endObject()}static createTensorTypeAndShape(va,Ea,La){return xa.startTensorTypeAndShape(va),xa.addElemType(va,Ea),xa.addShape(va,La),xa.endTensorTypeAndShape(va)}}wa.TensorTypeAndShape=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsMapType(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsMapType(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}keyType(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.readInt32(this.bb_pos+va):0}valueType(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?(va||new oa.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}static startMapType(va){va.startObject(2)}static addKeyType(va,Ea){va.addFieldInt32(0,Ea,0)}static addValueType(va,Ea){va.addFieldOffset(1,Ea,0)}static endMapType(va){return va.endObject()}static createMapType(va,Ea,La){return xa.startMapType(va),xa.addKeyType(va,Ea),xa.addValueType(va,La),xa.endMapType(va)}}wa.MapType=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsSequenceType(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsSequenceType(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}elemType(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?(va||new oa.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}static startSequenceType(va){va.startObject(1)}static addElemType(va,Ea){va.addFieldOffset(0,Ea,0)}static endSequenceType(va){return va.endObject()}static createSequenceType(va,Ea){return xa.startSequenceType(va),xa.addElemType(va,Ea),xa.endSequenceType(va)}}wa.SequenceType=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(va,Ea,La,eu){return va.prep(4,12),va.writeInt32(eu),va.writeInt32(La),va.writeInt32(Ea),va.offset()}}wa.EdgeEnd=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsNodeEdge(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsNodeEdge(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}nodeIndex(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.readUint32(this.bb_pos+va):0}inputEdges(va,Ea){let La=this.bb.__offset(this.bb_pos,6);return La?(Ea||new oa.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+La)+va*12,this.bb):null}inputEdgesLength(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.__vector_len(this.bb_pos+va):0}outputEdges(va,Ea){let La=this.bb.__offset(this.bb_pos,8);return La?(Ea||new oa.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+La)+va*12,this.bb):null}outputEdgesLength(){let va=this.bb.__offset(this.bb_pos,8);return va?this.bb.__vector_len(this.bb_pos+va):0}static startNodeEdge(va){va.startObject(3)}static addNodeIndex(va,Ea){va.addFieldInt32(0,Ea,0)}static addInputEdges(va,Ea){va.addFieldOffset(1,Ea,0)}static startInputEdgesVector(va,Ea){va.startVector(12,Ea,4)}static addOutputEdges(va,Ea){va.addFieldOffset(2,Ea,0)}static startOutputEdgesVector(va,Ea){va.startVector(12,Ea,4)}static endNodeEdge(va){return va.endObject()}static createNodeEdge(va,Ea,La,eu){return xa.startNodeEdge(va),xa.addNodeIndex(va,Ea),xa.addInputEdges(va,La),xa.addOutputEdges(va,eu),xa.endNodeEdge(va)}}wa.NodeEdge=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsNode(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsNode(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}name(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}docString(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}domain(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}sinceVersion(){let va=this.bb.__offset(this.bb_pos,10);return va?this.bb.readInt32(this.bb_pos+va):0}index(){let va=this.bb.__offset(this.bb_pos,12);return va?this.bb.readUint32(this.bb_pos+va):0}opType(va){let Ea=this.bb.__offset(this.bb_pos,14);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}type(){let va=this.bb.__offset(this.bb_pos,16);return va?this.bb.readInt32(this.bb_pos+va):0}executionProviderType(va){let Ea=this.bb.__offset(this.bb_pos,18);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}inputs(va,Ea){let La=this.bb.__offset(this.bb_pos,20);return La?this.bb.__string(this.bb.__vector(this.bb_pos+La)+va*4,Ea):null}inputsLength(){let va=this.bb.__offset(this.bb_pos,20);return va?this.bb.__vector_len(this.bb_pos+va):0}outputs(va,Ea){let La=this.bb.__offset(this.bb_pos,22);return La?this.bb.__string(this.bb.__vector(this.bb_pos+La)+va*4,Ea):null}outputsLength(){let va=this.bb.__offset(this.bb_pos,22);return va?this.bb.__vector_len(this.bb_pos+va):0}attributes(va,Ea){let La=this.bb.__offset(this.bb_pos,24);return La?(Ea||new oa.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}attributesLength(){let va=this.bb.__offset(this.bb_pos,24);return va?this.bb.__vector_len(this.bb_pos+va):0}inputArgCounts(va){let Ea=this.bb.__offset(this.bb_pos,26);return Ea?this.bb.readInt32(this.bb.__vector(this.bb_pos+Ea)+va*4):0}inputArgCountsLength(){let va=this.bb.__offset(this.bb_pos,26);return va?this.bb.__vector_len(this.bb_pos+va):0}inputArgCountsArray(){let va=this.bb.__offset(this.bb_pos,26);return va?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+va),this.bb.__vector_len(this.bb_pos+va)):null}implicitInputs(va,Ea){let La=this.bb.__offset(this.bb_pos,28);return La?this.bb.__string(this.bb.__vector(this.bb_pos+La)+va*4,Ea):null}implicitInputsLength(){let va=this.bb.__offset(this.bb_pos,28);return va?this.bb.__vector_len(this.bb_pos+va):0}static startNode(va){va.startObject(13)}static addName(va,Ea){va.addFieldOffset(0,Ea,0)}static addDocString(va,Ea){va.addFieldOffset(1,Ea,0)}static addDomain(va,Ea){va.addFieldOffset(2,Ea,0)}static addSinceVersion(va,Ea){va.addFieldInt32(3,Ea,0)}static addIndex(va,Ea){va.addFieldInt32(4,Ea,0)}static addOpType(va,Ea){va.addFieldOffset(5,Ea,0)}static addType(va,Ea){va.addFieldInt32(6,Ea,0)}static addExecutionProviderType(va,Ea){va.addFieldOffset(7,Ea,0)}static addInputs(va,Ea){va.addFieldOffset(8,Ea,0)}static createInputsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startInputsVector(va,Ea){va.startVector(4,Ea,4)}static addOutputs(va,Ea){va.addFieldOffset(9,Ea,0)}static createOutputsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startOutputsVector(va,Ea){va.startVector(4,Ea,4)}static addAttributes(va,Ea){va.addFieldOffset(10,Ea,0)}static createAttributesVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startAttributesVector(va,Ea){va.startVector(4,Ea,4)}static addInputArgCounts(va,Ea){va.addFieldOffset(11,Ea,0)}static createInputArgCountsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addInt32(Ea[La]);return va.endVector()}static startInputArgCountsVector(va,Ea){va.startVector(4,Ea,4)}static addImplicitInputs(va,Ea){va.addFieldOffset(12,Ea,0)}static createImplicitInputsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startImplicitInputsVector(va,Ea){va.startVector(4,Ea,4)}static endNode(va){return va.endObject()}static createNode(va,Ea,La,eu,Ta,Aa,ka,ru,nu,su,uu,cu,gu,hu){return xa.startNode(va),xa.addName(va,Ea),xa.addDocString(va,La),xa.addDomain(va,eu),xa.addSinceVersion(va,Ta),xa.addIndex(va,Aa),xa.addOpType(va,ka),xa.addType(va,ru),xa.addExecutionProviderType(va,nu),xa.addInputs(va,su),xa.addOutputs(va,uu),xa.addAttributes(va,cu),xa.addInputArgCounts(va,gu),xa.addImplicitInputs(va,hu),xa.endNode(va)}}wa.Node=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsValueInfo(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsValueInfo(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}name(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}docString(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}type(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?(va||new oa.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}static startValueInfo(va){va.startObject(3)}static addName(va,Ea){va.addFieldOffset(0,Ea,0)}static addDocString(va,Ea){va.addFieldOffset(1,Ea,0)}static addType(va,Ea){va.addFieldOffset(2,Ea,0)}static endValueInfo(va){return va.endObject()}static createValueInfo(va,Ea,La,eu){return xa.startValueInfo(va),xa.addName(va,Ea),xa.addDocString(va,La),xa.addType(va,eu),xa.endValueInfo(va)}}wa.ValueInfo=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsTypeInfo(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsTypeInfo(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}denotation(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}valueType(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.readUint8(this.bb_pos+va):0}value(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?this.bb.__union(va,this.bb_pos+Ea):null}static startTypeInfo(va){va.startObject(3)}static addDenotation(va,Ea){va.addFieldOffset(0,Ea,0)}static addValueType(va,Ea){va.addFieldInt8(1,Ea,0)}static addValue(va,Ea){va.addFieldOffset(2,Ea,0)}static endTypeInfo(va){return va.endObject()}static createTypeInfo(va,Ea,La,eu){return xa.startTypeInfo(va),xa.addDenotation(va,Ea),xa.addValueType(va,La),xa.addValue(va,eu),xa.endTypeInfo(va)}}wa.TypeInfo=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsOperatorSetId(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsOperatorSetId(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}domain(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}version(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.readInt64(this.bb_pos+va):this.bb.createLong(0,0)}static startOperatorSetId(va){va.startObject(2)}static addDomain(va,Ea){va.addFieldOffset(0,Ea,0)}static addVersion(va,Ea){va.addFieldInt64(1,Ea,va.createLong(0,0))}static endOperatorSetId(va){return va.endObject()}static createOperatorSetId(va,Ea,La){return xa.startOperatorSetId(va),xa.addDomain(va,Ea),xa.addVersion(va,La),xa.endOperatorSetId(va)}}wa.OperatorSetId=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsTensor(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsTensor(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}name(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}docString(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}dims(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ea)+va*8):this.bb.createLong(0,0)}dimsLength(){let va=this.bb.__offset(this.bb_pos,8);return va?this.bb.__vector_len(this.bb_pos+va):0}dataType(){let va=this.bb.__offset(this.bb_pos,10);return va?this.bb.readInt32(this.bb_pos+va):0}rawData(va){let Ea=this.bb.__offset(this.bb_pos,12);return Ea?this.bb.readUint8(this.bb.__vector(this.bb_pos+Ea)+va):0}rawDataLength(){let va=this.bb.__offset(this.bb_pos,12);return va?this.bb.__vector_len(this.bb_pos+va):0}rawDataArray(){let va=this.bb.__offset(this.bb_pos,12);return va?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+va),this.bb.__vector_len(this.bb_pos+va)):null}stringData(va,Ea){let La=this.bb.__offset(this.bb_pos,14);return La?this.bb.__string(this.bb.__vector(this.bb_pos+La)+va*4,Ea):null}stringDataLength(){let va=this.bb.__offset(this.bb_pos,14);return va?this.bb.__vector_len(this.bb_pos+va):0}static startTensor(va){va.startObject(6)}static addName(va,Ea){va.addFieldOffset(0,Ea,0)}static addDocString(va,Ea){va.addFieldOffset(1,Ea,0)}static addDims(va,Ea){va.addFieldOffset(2,Ea,0)}static createDimsVector(va,Ea){va.startVector(8,Ea.length,8);for(let La=Ea.length-1;La>=0;La--)va.addInt64(Ea[La]);return va.endVector()}static startDimsVector(va,Ea){va.startVector(8,Ea,8)}static addDataType(va,Ea){va.addFieldInt32(3,Ea,0)}static addRawData(va,Ea){va.addFieldOffset(4,Ea,0)}static createRawDataVector(va,Ea){va.startVector(1,Ea.length,1);for(let La=Ea.length-1;La>=0;La--)va.addInt8(Ea[La]);return va.endVector()}static startRawDataVector(va,Ea){va.startVector(1,Ea,1)}static addStringData(va,Ea){va.addFieldOffset(5,Ea,0)}static createStringDataVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startStringDataVector(va,Ea){va.startVector(4,Ea,4)}static endTensor(va){return va.endObject()}static createTensor(va,Ea,La,eu,Ta,Aa,ka){return xa.startTensor(va),xa.addName(va,Ea),xa.addDocString(va,La),xa.addDims(va,eu),xa.addDataType(va,Ta),xa.addRawData(va,Aa),xa.addStringData(va,ka),xa.endTensor(va)}}wa.Tensor=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsSparseTensor(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsSparseTensor(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}values(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?(va||new oa.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}indices(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?(va||new oa.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}dims(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ea)+va*8):this.bb.createLong(0,0)}dimsLength(){let va=this.bb.__offset(this.bb_pos,8);return va?this.bb.__vector_len(this.bb_pos+va):0}static startSparseTensor(va){va.startObject(3)}static addValues(va,Ea){va.addFieldOffset(0,Ea,0)}static addIndices(va,Ea){va.addFieldOffset(1,Ea,0)}static addDims(va,Ea){va.addFieldOffset(2,Ea,0)}static createDimsVector(va,Ea){va.startVector(8,Ea.length,8);for(let La=Ea.length-1;La>=0;La--)va.addInt64(Ea[La]);return va.endVector()}static startDimsVector(va,Ea){va.startVector(8,Ea,8)}static endSparseTensor(va){return va.endObject()}static createSparseTensor(va,Ea,La,eu){return xa.startSparseTensor(va),xa.addValues(va,Ea),xa.addIndices(va,La),xa.addDims(va,eu),xa.endSparseTensor(va)}}wa.SparseTensor=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsAttribute(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsAttribute(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}name(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}docString(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}type(){let va=this.bb.__offset(this.bb_pos,8);return va?this.bb.readInt32(this.bb_pos+va):0}f(){let va=this.bb.__offset(this.bb_pos,10);return va?this.bb.readFloat32(this.bb_pos+va):0}i(){let va=this.bb.__offset(this.bb_pos,12);return va?this.bb.readInt64(this.bb_pos+va):this.bb.createLong(0,0)}s(va){let Ea=this.bb.__offset(this.bb_pos,14);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}t(va){let Ea=this.bb.__offset(this.bb_pos,16);return Ea?(va||new oa.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}g(va){let Ea=this.bb.__offset(this.bb_pos,18);return Ea?(va||new oa.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}floats(va){let Ea=this.bb.__offset(this.bb_pos,20);return Ea?this.bb.readFloat32(this.bb.__vector(this.bb_pos+Ea)+va*4):0}floatsLength(){let va=this.bb.__offset(this.bb_pos,20);return va?this.bb.__vector_len(this.bb_pos+va):0}floatsArray(){let va=this.bb.__offset(this.bb_pos,20);return va?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+va),this.bb.__vector_len(this.bb_pos+va)):null}ints(va){let Ea=this.bb.__offset(this.bb_pos,22);return Ea?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ea)+va*8):this.bb.createLong(0,0)}intsLength(){let va=this.bb.__offset(this.bb_pos,22);return va?this.bb.__vector_len(this.bb_pos+va):0}strings(va,Ea){let La=this.bb.__offset(this.bb_pos,24);return La?this.bb.__string(this.bb.__vector(this.bb_pos+La)+va*4,Ea):null}stringsLength(){let va=this.bb.__offset(this.bb_pos,24);return va?this.bb.__vector_len(this.bb_pos+va):0}tensors(va,Ea){let La=this.bb.__offset(this.bb_pos,26);return La?(Ea||new oa.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}tensorsLength(){let va=this.bb.__offset(this.bb_pos,26);return va?this.bb.__vector_len(this.bb_pos+va):0}graphs(va,Ea){let La=this.bb.__offset(this.bb_pos,28);return La?(Ea||new oa.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}graphsLength(){let va=this.bb.__offset(this.bb_pos,28);return va?this.bb.__vector_len(this.bb_pos+va):0}static startAttribute(va){va.startObject(13)}static addName(va,Ea){va.addFieldOffset(0,Ea,0)}static addDocString(va,Ea){va.addFieldOffset(1,Ea,0)}static addType(va,Ea){va.addFieldInt32(2,Ea,0)}static addF(va,Ea){va.addFieldFloat32(3,Ea,0)}static addI(va,Ea){va.addFieldInt64(4,Ea,va.createLong(0,0))}static addS(va,Ea){va.addFieldOffset(5,Ea,0)}static addT(va,Ea){va.addFieldOffset(6,Ea,0)}static addG(va,Ea){va.addFieldOffset(7,Ea,0)}static addFloats(va,Ea){va.addFieldOffset(8,Ea,0)}static createFloatsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addFloat32(Ea[La]);return va.endVector()}static startFloatsVector(va,Ea){va.startVector(4,Ea,4)}static addInts(va,Ea){va.addFieldOffset(9,Ea,0)}static createIntsVector(va,Ea){va.startVector(8,Ea.length,8);for(let La=Ea.length-1;La>=0;La--)va.addInt64(Ea[La]);return va.endVector()}static startIntsVector(va,Ea){va.startVector(8,Ea,8)}static addStrings(va,Ea){va.addFieldOffset(10,Ea,0)}static createStringsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startStringsVector(va,Ea){va.startVector(4,Ea,4)}static addTensors(va,Ea){va.addFieldOffset(11,Ea,0)}static createTensorsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startTensorsVector(va,Ea){va.startVector(4,Ea,4)}static addGraphs(va,Ea){va.addFieldOffset(12,Ea,0)}static createGraphsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startGraphsVector(va,Ea){va.startVector(4,Ea,4)}static endAttribute(va){return va.endObject()}static createAttribute(va,Ea,La,eu,Ta,Aa,ka,ru,nu,su,uu,cu,gu,hu){return xa.startAttribute(va),xa.addName(va,Ea),xa.addDocString(va,La),xa.addType(va,eu),xa.addF(va,Ta),xa.addI(va,Aa),xa.addS(va,ka),xa.addT(va,ru),xa.addG(va,nu),xa.addFloats(va,su),xa.addInts(va,uu),xa.addStrings(va,cu),xa.addTensors(va,gu),xa.addGraphs(va,hu),xa.endAttribute(va)}}wa.Attribute=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsGraph(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsGraph(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}initializers(va,Ea){let La=this.bb.__offset(this.bb_pos,4);return La?(Ea||new oa.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}initializersLength(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.__vector_len(this.bb_pos+va):0}nodeArgs(va,Ea){let La=this.bb.__offset(this.bb_pos,6);return La?(Ea||new oa.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}nodeArgsLength(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.__vector_len(this.bb_pos+va):0}nodes(va,Ea){let La=this.bb.__offset(this.bb_pos,8);return La?(Ea||new oa.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}nodesLength(){let va=this.bb.__offset(this.bb_pos,8);return va?this.bb.__vector_len(this.bb_pos+va):0}maxNodeIndex(){let va=this.bb.__offset(this.bb_pos,10);return va?this.bb.readUint32(this.bb_pos+va):0}nodeEdges(va,Ea){let La=this.bb.__offset(this.bb_pos,12);return La?(Ea||new oa.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}nodeEdgesLength(){let va=this.bb.__offset(this.bb_pos,12);return va?this.bb.__vector_len(this.bb_pos+va):0}inputs(va,Ea){let La=this.bb.__offset(this.bb_pos,14);return La?this.bb.__string(this.bb.__vector(this.bb_pos+La)+va*4,Ea):null}inputsLength(){let va=this.bb.__offset(this.bb_pos,14);return va?this.bb.__vector_len(this.bb_pos+va):0}outputs(va,Ea){let La=this.bb.__offset(this.bb_pos,16);return La?this.bb.__string(this.bb.__vector(this.bb_pos+La)+va*4,Ea):null}outputsLength(){let va=this.bb.__offset(this.bb_pos,16);return va?this.bb.__vector_len(this.bb_pos+va):0}sparseInitializers(va,Ea){let La=this.bb.__offset(this.bb_pos,18);return La?(Ea||new oa.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}sparseInitializersLength(){let va=this.bb.__offset(this.bb_pos,18);return va?this.bb.__vector_len(this.bb_pos+va):0}static startGraph(va){va.startObject(8)}static addInitializers(va,Ea){va.addFieldOffset(0,Ea,0)}static createInitializersVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startInitializersVector(va,Ea){va.startVector(4,Ea,4)}static addNodeArgs(va,Ea){va.addFieldOffset(1,Ea,0)}static createNodeArgsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startNodeArgsVector(va,Ea){va.startVector(4,Ea,4)}static addNodes(va,Ea){va.addFieldOffset(2,Ea,0)}static createNodesVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startNodesVector(va,Ea){va.startVector(4,Ea,4)}static addMaxNodeIndex(va,Ea){va.addFieldInt32(3,Ea,0)}static addNodeEdges(va,Ea){va.addFieldOffset(4,Ea,0)}static createNodeEdgesVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startNodeEdgesVector(va,Ea){va.startVector(4,Ea,4)}static addInputs(va,Ea){va.addFieldOffset(5,Ea,0)}static createInputsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startInputsVector(va,Ea){va.startVector(4,Ea,4)}static addOutputs(va,Ea){va.addFieldOffset(6,Ea,0)}static createOutputsVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startOutputsVector(va,Ea){va.startVector(4,Ea,4)}static addSparseInitializers(va,Ea){va.addFieldOffset(7,Ea,0)}static createSparseInitializersVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startSparseInitializersVector(va,Ea){va.startVector(4,Ea,4)}static endGraph(va){return va.endObject()}static createGraph(va,Ea,La,eu,Ta,Aa,ka,ru,nu){return xa.startGraph(va),xa.addInitializers(va,Ea),xa.addNodeArgs(va,La),xa.addNodes(va,eu),xa.addMaxNodeIndex(va,Ta),xa.addNodeEdges(va,Aa),xa.addInputs(va,ka),xa.addOutputs(va,ru),xa.addSparseInitializers(va,nu),xa.endGraph(va)}}wa.Graph=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsModel(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsModel(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}irVersion(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.readInt64(this.bb_pos+va):this.bb.createLong(0,0)}opsetImport(va,Ea){let La=this.bb.__offset(this.bb_pos,6);return La?(Ea||new oa.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}opsetImportLength(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.__vector_len(this.bb_pos+va):0}producerName(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}producerVersion(va){let Ea=this.bb.__offset(this.bb_pos,10);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}domain(va){let Ea=this.bb.__offset(this.bb_pos,12);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}modelVersion(){let va=this.bb.__offset(this.bb_pos,14);return va?this.bb.readInt64(this.bb_pos+va):this.bb.createLong(0,0)}docString(va){let Ea=this.bb.__offset(this.bb_pos,16);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}graph(va){let Ea=this.bb.__offset(this.bb_pos,18);return Ea?(va||new oa.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}graphDocString(va){let Ea=this.bb.__offset(this.bb_pos,20);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}static startModel(va){va.startObject(9)}static addIrVersion(va,Ea){va.addFieldInt64(0,Ea,va.createLong(0,0))}static addOpsetImport(va,Ea){va.addFieldOffset(1,Ea,0)}static createOpsetImportVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startOpsetImportVector(va,Ea){va.startVector(4,Ea,4)}static addProducerName(va,Ea){va.addFieldOffset(2,Ea,0)}static addProducerVersion(va,Ea){va.addFieldOffset(3,Ea,0)}static addDomain(va,Ea){va.addFieldOffset(4,Ea,0)}static addModelVersion(va,Ea){va.addFieldInt64(5,Ea,va.createLong(0,0))}static addDocString(va,Ea){va.addFieldOffset(6,Ea,0)}static addGraph(va,Ea){va.addFieldOffset(7,Ea,0)}static addGraphDocString(va,Ea){va.addFieldOffset(8,Ea,0)}static endModel(va){return va.endObject()}static createModel(va,Ea,La,eu,Ta,Aa,ka,ru,nu,su){return xa.startModel(va),xa.addIrVersion(va,Ea),xa.addOpsetImport(va,La),xa.addProducerName(va,eu),xa.addProducerVersion(va,Ta),xa.addDomain(va,Aa),xa.addModelVersion(va,ka),xa.addDocString(va,ru),xa.addGraph(va,nu),xa.addGraphDocString(va,su),xa.endModel(va)}}wa.Model=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsKernelCreateInfos(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsKernelCreateInfos(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}nodeIndices(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.readUint32(this.bb.__vector(this.bb_pos+Ea)+va*4):0}nodeIndicesLength(){let va=this.bb.__offset(this.bb_pos,4);return va?this.bb.__vector_len(this.bb_pos+va):0}nodeIndicesArray(){let va=this.bb.__offset(this.bb_pos,4);return va?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+va),this.bb.__vector_len(this.bb_pos+va)):null}kernelDefHashes(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?this.bb.readUint64(this.bb.__vector(this.bb_pos+Ea)+va*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.__vector_len(this.bb_pos+va):0}static startKernelCreateInfos(va){va.startObject(2)}static addNodeIndices(va,Ea){va.addFieldOffset(0,Ea,0)}static createNodeIndicesVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addInt32(Ea[La]);return va.endVector()}static startNodeIndicesVector(va,Ea){va.startVector(4,Ea,4)}static addKernelDefHashes(va,Ea){va.addFieldOffset(1,Ea,0)}static createKernelDefHashesVector(va,Ea){va.startVector(8,Ea.length,8);for(let La=Ea.length-1;La>=0;La--)va.addInt64(Ea[La]);return va.endVector()}static startKernelDefHashesVector(va,Ea){va.startVector(8,Ea,8)}static endKernelCreateInfos(va){return va.endObject()}static createKernelCreateInfos(va,Ea,La){return xa.startKernelCreateInfos(va),xa.addNodeIndices(va,Ea),xa.addKernelDefHashes(va,La),xa.endKernelCreateInfos(va)}}wa.KernelCreateInfos=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsSubGraphSessionState(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsSubGraphSessionState(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}graphId(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}sessionState(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?(va||new oa.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}static startSubGraphSessionState(va){va.startObject(2)}static addGraphId(va,Ea){va.addFieldOffset(0,Ea,0)}static addSessionState(va,Ea){va.addFieldOffset(1,Ea,0)}static endSubGraphSessionState(va){let Ea=va.endObject();return va.requiredField(Ea,4),Ea}static createSubGraphSessionState(va,Ea,La){return xa.startSubGraphSessionState(va),xa.addGraphId(va,Ea),xa.addSessionState(va,La),xa.endSubGraphSessionState(va)}}wa.SubGraphSessionState=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsSessionState(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsSessionState(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}kernels(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?(va||new oa.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}subGraphSessionStates(va,Ea){let La=this.bb.__offset(this.bb_pos,6);return La?(Ea||new oa.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+La)+va*4),this.bb):null}subGraphSessionStatesLength(){let va=this.bb.__offset(this.bb_pos,6);return va?this.bb.__vector_len(this.bb_pos+va):0}static startSessionState(va){va.startObject(2)}static addKernels(va,Ea){va.addFieldOffset(0,Ea,0)}static addSubGraphSessionStates(va,Ea){va.addFieldOffset(1,Ea,0)}static createSubGraphSessionStatesVector(va,Ea){va.startVector(4,Ea.length,4);for(let La=Ea.length-1;La>=0;La--)va.addOffset(Ea[La]);return va.endVector()}static startSubGraphSessionStatesVector(va,Ea){va.startVector(4,Ea,4)}static endSessionState(va){return va.endObject()}static createSessionState(va,Ea,La){return xa.startSessionState(va),xa.addKernels(va,Ea),xa.addSubGraphSessionStates(va,La),xa.endSessionState(va)}}wa.SessionState=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={})),(oa=>{(ba=>{(wa=>{class xa{constructor(){this.bb=null,this.bb_pos=0}__init(va,Ea){return this.bb_pos=va,this.bb=Ea,this}static getRootAsInferenceSession(va,Ea){return(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static getSizePrefixedRootAsInferenceSession(va,Ea){return va.setPosition(va.position()+_.SIZE_PREFIX_LENGTH),(Ea||new xa).__init(va.readInt32(va.position())+va.position(),va)}static bufferHasIdentifier(va){return va.__has_identifier("ORTM")}ortVersion(va){let Ea=this.bb.__offset(this.bb_pos,4);return Ea?this.bb.__string(this.bb_pos+Ea,va):null}model(va){let Ea=this.bb.__offset(this.bb_pos,6);return Ea?(va||new oa.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}sessionState(va){let Ea=this.bb.__offset(this.bb_pos,8);return Ea?(va||new oa.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Ea),this.bb):null}static startInferenceSession(va){va.startObject(3)}static addOrtVersion(va,Ea){va.addFieldOffset(0,Ea,0)}static addModel(va,Ea){va.addFieldOffset(1,Ea,0)}static addSessionState(va,Ea){va.addFieldOffset(2,Ea,0)}static endInferenceSession(va){return va.endObject()}static finishInferenceSessionBuffer(va,Ea){va.finish(Ea,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(va,Ea){va.finish(Ea,"ORTM",!0)}static createInferenceSession(va,Ea,La,eu){return xa.startInferenceSession(va),xa.addOrtVersion(va,Ea),xa.addModel(va,La),xa.addSessionState(va,eu),xa.endInferenceSession(va)}}wa.InferenceSession=xa})(ba.fbs||(ba.fbs={}))})(oa.experimental||(oa.experimental={}))})(W||(W={}))}),ks=me((oa,ba)=>{ba.exports=wa;function wa(xa,Sa){for(var va=new Array(arguments.length-1),Ea=0,La=2,eu=!0;La<arguments.length;)va[Ea++]=arguments[La++];return new Promise(function(Ta,Aa){va[Ea]=function(ka){if(eu)if(eu=!1,ka)Aa(ka);else{for(var ru=new Array(arguments.length-1),nu=0;nu<ru.length;)ru[nu++]=arguments[nu];Ta.apply(null,ru)}};try{xa.apply(Sa||null,va)}catch(ka){eu&&(eu=!1,Aa(ka))}})}}),Ms=me(oa=>{var ba=oa;ba.length=function(Ea){var La=Ea.length;if(!La)return 0;for(var eu=0;--La%4>1&&Ea.charAt(La)==="=";)++eu;return Math.ceil(Ea.length*3)/4-eu};var wa=new Array(64),xa=new Array(123);for(Sa=0;Sa<64;)xa[wa[Sa]=Sa<26?Sa+65:Sa<52?Sa+71:Sa<62?Sa-4:Sa-59|43]=Sa++;var Sa;ba.encode=function(Ea,La,eu){for(var Ta=null,Aa=[],ka=0,ru=0,nu;La<eu;){var su=Ea[La++];switch(ru){case 0:Aa[ka++]=wa[su>>2],nu=(su&3)<<4,ru=1;break;case 1:Aa[ka++]=wa[nu|su>>4],nu=(su&15)<<2,ru=2;break;case 2:Aa[ka++]=wa[nu|su>>6],Aa[ka++]=wa[su&63],ru=0;break}ka>8191&&((Ta||(Ta=[])).push(String.fromCharCode.apply(String,Aa)),ka=0)}return ru&&(Aa[ka++]=wa[nu],Aa[ka++]=61,ru===1&&(Aa[ka++]=61)),Ta?(ka&&Ta.push(String.fromCharCode.apply(String,Aa.slice(0,ka))),Ta.join("")):String.fromCharCode.apply(String,Aa.slice(0,ka))};var va="invalid encoding";ba.decode=function(Ea,La,eu){for(var Ta=eu,Aa=0,ka,ru=0;ru<Ea.length;){var nu=Ea.charCodeAt(ru++);if(nu===61&&Aa>1)break;if((nu=xa[nu])===void 0)throw Error(va);switch(Aa){case 0:ka=nu,Aa=1;break;case 1:La[eu++]=ka<<2|(nu&48)>>4,ka=nu,Aa=2;break;case 2:La[eu++]=(ka&15)<<4|(nu&60)>>2,ka=nu,Aa=3;break;case 3:La[eu++]=(ka&3)<<6|nu,Aa=0;break}}if(Aa===1)throw Error(va);return eu-Ta},ba.test=function(Ea){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Ea)}}),Us=me((oa,ba)=>{ba.exports=wa;function wa(){this._listeners={}}wa.prototype.on=function(xa,Sa,va){return(this._listeners[xa]||(this._listeners[xa]=[])).push({fn:Sa,ctx:va||this}),this},wa.prototype.off=function(xa,Sa){if(xa===void 0)this._listeners={};else if(Sa===void 0)this._listeners[xa]=[];else for(var va=this._listeners[xa],Ea=0;Ea<va.length;)va[Ea].fn===Sa?va.splice(Ea,1):++Ea;return this},wa.prototype.emit=function(xa){var Sa=this._listeners[xa];if(Sa){for(var va=[],Ea=1;Ea<arguments.length;)va.push(arguments[Ea++]);for(Ea=0;Ea<Sa.length;)Sa[Ea].fn.apply(Sa[Ea++].ctx,va)}return this}}),Ys=me((oa,ba)=>{ba.exports=wa(wa);function wa(La){return typeof Float32Array<"u"?(function(){var eu=new Float32Array([-0]),Ta=new Uint8Array(eu.buffer),Aa=Ta[3]===128;function ka(uu,cu,gu){eu[0]=uu,cu[gu]=Ta[0],cu[gu+1]=Ta[1],cu[gu+2]=Ta[2],cu[gu+3]=Ta[3]}function ru(uu,cu,gu){eu[0]=uu,cu[gu]=Ta[3],cu[gu+1]=Ta[2],cu[gu+2]=Ta[1],cu[gu+3]=Ta[0]}La.writeFloatLE=Aa?ka:ru,La.writeFloatBE=Aa?ru:ka;function nu(uu,cu){return Ta[0]=uu[cu],Ta[1]=uu[cu+1],Ta[2]=uu[cu+2],Ta[3]=uu[cu+3],eu[0]}function su(uu,cu){return Ta[3]=uu[cu],Ta[2]=uu[cu+1],Ta[1]=uu[cu+2],Ta[0]=uu[cu+3],eu[0]}La.readFloatLE=Aa?nu:su,La.readFloatBE=Aa?su:nu})():(function(){function eu(Aa,ka,ru,nu){var su=ka<0?1:0;if(su&&(ka=-ka),ka===0)Aa(1/ka>0?0:2147483648,ru,nu);else if(isNaN(ka))Aa(2143289344,ru,nu);else if(ka>34028234663852886e22)Aa((su<<31|2139095040)>>>0,ru,nu);else if(ka<11754943508222875e-54)Aa((su<<31|Math.round(ka/1401298464324817e-60))>>>0,ru,nu);else{var uu=Math.floor(Math.log(ka)/Math.LN2),cu=Math.round(ka*Math.pow(2,-uu)*8388608)&8388607;Aa((su<<31|uu+127<<23|cu)>>>0,ru,nu)}}La.writeFloatLE=eu.bind(null,xa),La.writeFloatBE=eu.bind(null,Sa);function Ta(Aa,ka,ru){var nu=Aa(ka,ru),su=(nu>>31)*2+1,uu=nu>>>23&255,cu=nu&8388607;return uu===255?cu?NaN:su*(1/0):uu===0?su*1401298464324817e-60*cu:su*Math.pow(2,uu-150)*(cu+8388608)}La.readFloatLE=Ta.bind(null,va),La.readFloatBE=Ta.bind(null,Ea)})(),typeof Float64Array<"u"?(function(){var eu=new Float64Array([-0]),Ta=new Uint8Array(eu.buffer),Aa=Ta[7]===128;function ka(uu,cu,gu){eu[0]=uu,cu[gu]=Ta[0],cu[gu+1]=Ta[1],cu[gu+2]=Ta[2],cu[gu+3]=Ta[3],cu[gu+4]=Ta[4],cu[gu+5]=Ta[5],cu[gu+6]=Ta[6],cu[gu+7]=Ta[7]}function ru(uu,cu,gu){eu[0]=uu,cu[gu]=Ta[7],cu[gu+1]=Ta[6],cu[gu+2]=Ta[5],cu[gu+3]=Ta[4],cu[gu+4]=Ta[3],cu[gu+5]=Ta[2],cu[gu+6]=Ta[1],cu[gu+7]=Ta[0]}La.writeDoubleLE=Aa?ka:ru,La.writeDoubleBE=Aa?ru:ka;function nu(uu,cu){return Ta[0]=uu[cu],Ta[1]=uu[cu+1],Ta[2]=uu[cu+2],Ta[3]=uu[cu+3],Ta[4]=uu[cu+4],Ta[5]=uu[cu+5],Ta[6]=uu[cu+6],Ta[7]=uu[cu+7],eu[0]}function su(uu,cu){return Ta[7]=uu[cu],Ta[6]=uu[cu+1],Ta[5]=uu[cu+2],Ta[4]=uu[cu+3],Ta[3]=uu[cu+4],Ta[2]=uu[cu+5],Ta[1]=uu[cu+6],Ta[0]=uu[cu+7],eu[0]}La.readDoubleLE=Aa?nu:su,La.readDoubleBE=Aa?su:nu})():(function(){function eu(Aa,ka,ru,nu,su,uu){var cu=nu<0?1:0;if(cu&&(nu=-nu),nu===0)Aa(0,su,uu+ka),Aa(1/nu>0?0:2147483648,su,uu+ru);else if(isNaN(nu))Aa(0,su,uu+ka),Aa(2146959360,su,uu+ru);else if(nu>17976931348623157e292)Aa(0,su,uu+ka),Aa((cu<<31|2146435072)>>>0,su,uu+ru);else{var gu;if(nu<22250738585072014e-324)gu=nu/5e-324,Aa(gu>>>0,su,uu+ka),Aa((cu<<31|gu/4294967296)>>>0,su,uu+ru);else{var hu=Math.floor(Math.log(nu)/Math.LN2);hu===1024&&(hu=1023),gu=nu*Math.pow(2,-hu),Aa(gu*4503599627370496>>>0,su,uu+ka),Aa((cu<<31|hu+1023<<20|gu*1048576&1048575)>>>0,su,uu+ru)}}}La.writeDoubleLE=eu.bind(null,xa,0,4),La.writeDoubleBE=eu.bind(null,Sa,4,0);function Ta(Aa,ka,ru,nu,su){var uu=Aa(nu,su+ka),cu=Aa(nu,su+ru),gu=(cu>>31)*2+1,hu=cu>>>20&2047,mu=4294967296*(cu&1048575)+uu;return hu===2047?mu?NaN:gu*(1/0):hu===0?gu*5e-324*mu:gu*Math.pow(2,hu-1075)*(mu+4503599627370496)}La.readDoubleLE=Ta.bind(null,va,0,4),La.readDoubleBE=Ta.bind(null,Ea,4,0)})(),La}function xa(La,eu,Ta){eu[Ta]=La&255,eu[Ta+1]=La>>>8&255,eu[Ta+2]=La>>>16&255,eu[Ta+3]=La>>>24}function Sa(La,eu,Ta){eu[Ta]=La>>>24,eu[Ta+1]=La>>>16&255,eu[Ta+2]=La>>>8&255,eu[Ta+3]=La&255}function va(La,eu){return(La[eu]|La[eu+1]<<8|La[eu+2]<<16|La[eu+3]<<24)>>>0}function Ea(La,eu){return(La[eu]<<24|La[eu+1]<<16|La[eu+2]<<8|La[eu+3])>>>0}}),Xs=me((exports$1,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(oa){}return null}}),Js=me(oa=>{var ba=oa;ba.length=function(wa){for(var xa=0,Sa=0,va=0;va<wa.length;++va)Sa=wa.charCodeAt(va),Sa<128?xa+=1:Sa<2048?xa+=2:(Sa&64512)===55296&&(wa.charCodeAt(va+1)&64512)===56320?(++va,xa+=4):xa+=3;return xa},ba.read=function(wa,xa,Sa){var va=Sa-xa;if(va<1)return"";for(var Ea=null,La=[],eu=0,Ta;xa<Sa;)Ta=wa[xa++],Ta<128?La[eu++]=Ta:Ta>191&&Ta<224?La[eu++]=(Ta&31)<<6|wa[xa++]&63:Ta>239&&Ta<365?(Ta=((Ta&7)<<18|(wa[xa++]&63)<<12|(wa[xa++]&63)<<6|wa[xa++]&63)-65536,La[eu++]=55296+(Ta>>10),La[eu++]=56320+(Ta&1023)):La[eu++]=(Ta&15)<<12|(wa[xa++]&63)<<6|wa[xa++]&63,eu>8191&&((Ea||(Ea=[])).push(String.fromCharCode.apply(String,La)),eu=0);return Ea?(eu&&Ea.push(String.fromCharCode.apply(String,La.slice(0,eu))),Ea.join("")):String.fromCharCode.apply(String,La.slice(0,eu))},ba.write=function(wa,xa,Sa){for(var va=Sa,Ea,La,eu=0;eu<wa.length;++eu)Ea=wa.charCodeAt(eu),Ea<128?xa[Sa++]=Ea:Ea<2048?(xa[Sa++]=Ea>>6|192,xa[Sa++]=Ea&63|128):(Ea&64512)===55296&&((La=wa.charCodeAt(eu+1))&64512)===56320?(Ea=65536+((Ea&1023)<<10)+(La&1023),++eu,xa[Sa++]=Ea>>18|240,xa[Sa++]=Ea>>12&63|128,xa[Sa++]=Ea>>6&63|128,xa[Sa++]=Ea&63|128):(xa[Sa++]=Ea>>12|224,xa[Sa++]=Ea>>6&63|128,xa[Sa++]=Ea&63|128);return Sa-va}}),Qs=me((oa,ba)=>{ba.exports=wa;function wa(xa,Sa,va){var Ea=va||8192,La=Ea>>>1,eu=null,Ta=Ea;return function(Aa){if(Aa<1||Aa>La)return xa(Aa);Ta+Aa>Ea&&(eu=xa(Ea),Ta=0);var ka=Sa.call(eu,Ta,Ta+=Aa);return Ta&7&&(Ta=(Ta|7)+1),ka}}}),tu=me((oa,ba)=>{ba.exports=xa;var wa=Xt();function xa(La,eu){this.lo=La>>>0,this.hi=eu>>>0}var Sa=xa.zero=new xa(0,0);Sa.toNumber=function(){return 0},Sa.zzEncode=Sa.zzDecode=function(){return this},Sa.length=function(){return 1};var va=xa.zeroHash="\0\0\0\0\0\0\0\0";xa.fromNumber=function(La){if(La===0)return Sa;var eu=La<0;eu&&(La=-La);var Ta=La>>>0,Aa=(La-Ta)/4294967296>>>0;return eu&&(Aa=~Aa>>>0,Ta=~Ta>>>0,++Ta>4294967295&&(Ta=0,++Aa>4294967295&&(Aa=0))),new xa(Ta,Aa)},xa.from=function(La){if(typeof La=="number")return xa.fromNumber(La);if(wa.isString(La))if(wa.Long)La=wa.Long.fromString(La);else return xa.fromNumber(parseInt(La,10));return La.low||La.high?new xa(La.low>>>0,La.high>>>0):Sa},xa.prototype.toNumber=function(La){if(!La&&this.hi>>>31){var eu=~this.lo+1>>>0,Ta=~this.hi>>>0;return eu||(Ta=Ta+1>>>0),-(eu+Ta*4294967296)}return this.lo+this.hi*4294967296},xa.prototype.toLong=function(La){return wa.Long?new wa.Long(this.lo|0,this.hi|0,!!La):{low:this.lo|0,high:this.hi|0,unsigned:!!La}};var Ea=String.prototype.charCodeAt;xa.fromHash=function(La){return La===va?Sa:new xa((Ea.call(La,0)|Ea.call(La,1)<<8|Ea.call(La,2)<<16|Ea.call(La,3)<<24)>>>0,(Ea.call(La,4)|Ea.call(La,5)<<8|Ea.call(La,6)<<16|Ea.call(La,7)<<24)>>>0)},xa.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},xa.prototype.zzEncode=function(){var La=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^La)>>>0,this.lo=(this.lo<<1^La)>>>0,this},xa.prototype.zzDecode=function(){var La=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^La)>>>0,this.hi=(this.hi>>>1^La)>>>0,this},xa.prototype.length=function(){var La=this.lo,eu=(this.lo>>>28|this.hi<<4)>>>0,Ta=this.hi>>>24;return Ta===0?eu===0?La<16384?La<128?1:2:La<2097152?3:4:eu<16384?eu<128?5:6:eu<2097152?7:8:Ta<128?9:10}}),Xt=me(oa=>{var ba=oa;ba.asPromise=ks(),ba.base64=Ms(),ba.EventEmitter=Us(),ba.float=Ys(),ba.inquire=Xs(),ba.utf8=Js(),ba.pool=Qs(),ba.LongBits=tu(),ba.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),ba.global=ba.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||oa,ba.emptyArray=Object.freeze?Object.freeze([]):[],ba.emptyObject=Object.freeze?Object.freeze({}):{},ba.isInteger=Number.isInteger||function(Sa){return typeof Sa=="number"&&isFinite(Sa)&&Math.floor(Sa)===Sa},ba.isString=function(Sa){return typeof Sa=="string"||Sa instanceof String},ba.isObject=function(Sa){return Sa&&typeof Sa=="object"},ba.isset=ba.isSet=function(Sa,va){var Ea=Sa[va];return Ea!=null&&Sa.hasOwnProperty(va)?typeof Ea!="object"||(Array.isArray(Ea)?Ea.length:Object.keys(Ea).length)>0:!1},ba.Buffer=(function(){try{var Sa=ba.inquire("buffer").Buffer;return Sa.prototype.utf8Write?Sa:null}catch{return null}})(),ba._Buffer_from=null,ba._Buffer_allocUnsafe=null,ba.newBuffer=function(Sa){return typeof Sa=="number"?ba.Buffer?ba._Buffer_allocUnsafe(Sa):new ba.Array(Sa):ba.Buffer?ba._Buffer_from(Sa):typeof Uint8Array>"u"?Sa:new Uint8Array(Sa)},ba.Array=typeof Uint8Array<"u"?Uint8Array:Array,ba.Long=ba.global.dcodeIO&&ba.global.dcodeIO.Long||ba.global.Long||ba.inquire("long"),ba.key2Re=/^true|false|0|1$/,ba.key32Re=/^-?(?:0|[1-9][0-9]*)$/,ba.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,ba.longToHash=function(Sa){return Sa?ba.LongBits.from(Sa).toHash():ba.LongBits.zeroHash},ba.longFromHash=function(Sa,va){var Ea=ba.LongBits.fromHash(Sa);return ba.Long?ba.Long.fromBits(Ea.lo,Ea.hi,va):Ea.toNumber(!!va)};function wa(Sa,va,Ea){for(var La=Object.keys(va),eu=0;eu<La.length;++eu)(Sa[La[eu]]===void 0||!Ea)&&(Sa[La[eu]]=va[La[eu]]);return Sa}ba.merge=wa,ba.lcFirst=function(Sa){return Sa.charAt(0).toLowerCase()+Sa.substring(1)};function xa(Sa){function va(Ea,La){if(!(this instanceof va))return new va(Ea,La);Object.defineProperty(this,"message",{get:function(){return Ea}}),Error.captureStackTrace?Error.captureStackTrace(this,va):Object.defineProperty(this,"stack",{value:new Error().stack||""}),La&&wa(this,La)}return va.prototype=Object.create(Error.prototype,{constructor:{value:va,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return Sa},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),va}ba.newError=xa,ba.ProtocolError=xa("ProtocolError"),ba.oneOfGetter=function(Sa){for(var va={},Ea=0;Ea<Sa.length;++Ea)va[Sa[Ea]]=1;return function(){for(var La=Object.keys(this),eu=La.length-1;eu>-1;--eu)if(va[La[eu]]===1&&this[La[eu]]!==void 0&&this[La[eu]]!==null)return La[eu]}},ba.oneOfSetter=function(Sa){return function(va){for(var Ea=0;Ea<Sa.length;++Ea)Sa[Ea]!==va&&delete this[Sa[Ea]]}},ba.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},ba._configure=function(){var Sa=ba.Buffer;if(!Sa){ba._Buffer_from=ba._Buffer_allocUnsafe=null;return}ba._Buffer_from=Sa.from!==Uint8Array.from&&Sa.from||function(va,Ea){return new Sa(va,Ea)},ba._Buffer_allocUnsafe=Sa.allocUnsafe||function(va){return new Sa(va)}}}),li=me((oa,ba)=>{ba.exports=Aa;var wa=Xt(),xa,Sa=wa.LongBits,va=wa.base64,Ea=wa.utf8;function La(hu,mu,Ou){this.fn=hu,this.len=mu,this.next=void 0,this.val=Ou}function eu(){}function Ta(hu){this.head=hu.head,this.tail=hu.tail,this.len=hu.len,this.next=hu.states}function Aa(){this.len=0,this.head=new La(eu,0,0),this.tail=this.head,this.states=null}var ka=function(){return wa.Buffer?function(){return(Aa.create=function(){return new xa})()}:function(){return new Aa}};Aa.create=ka(),Aa.alloc=function(hu){return new wa.Array(hu)},wa.Array!==Array&&(Aa.alloc=wa.pool(Aa.alloc,wa.Array.prototype.subarray)),Aa.prototype._push=function(hu,mu,Ou){return this.tail=this.tail.next=new La(hu,mu,Ou),this.len+=mu,this};function ru(hu,mu,Ou){mu[Ou]=hu&255}function nu(hu,mu,Ou){for(;hu>127;)mu[Ou++]=hu&127|128,hu>>>=7;mu[Ou]=hu}function su(hu,mu){this.len=hu,this.next=void 0,this.val=mu}su.prototype=Object.create(La.prototype),su.prototype.fn=nu,Aa.prototype.uint32=function(hu){return this.len+=(this.tail=this.tail.next=new su((hu=hu>>>0)<128?1:hu<16384?2:hu<2097152?3:hu<268435456?4:5,hu)).len,this},Aa.prototype.int32=function(hu){return hu<0?this._push(uu,10,Sa.fromNumber(hu)):this.uint32(hu)},Aa.prototype.sint32=function(hu){return this.uint32((hu<<1^hu>>31)>>>0)};function uu(hu,mu,Ou){for(;hu.hi;)mu[Ou++]=hu.lo&127|128,hu.lo=(hu.lo>>>7|hu.hi<<25)>>>0,hu.hi>>>=7;for(;hu.lo>127;)mu[Ou++]=hu.lo&127|128,hu.lo=hu.lo>>>7;mu[Ou++]=hu.lo}Aa.prototype.uint64=function(hu){var mu=Sa.from(hu);return this._push(uu,mu.length(),mu)},Aa.prototype.int64=Aa.prototype.uint64,Aa.prototype.sint64=function(hu){var mu=Sa.from(hu).zzEncode();return this._push(uu,mu.length(),mu)},Aa.prototype.bool=function(hu){return this._push(ru,1,hu?1:0)};function cu(hu,mu,Ou){mu[Ou]=hu&255,mu[Ou+1]=hu>>>8&255,mu[Ou+2]=hu>>>16&255,mu[Ou+3]=hu>>>24}Aa.prototype.fixed32=function(hu){return this._push(cu,4,hu>>>0)},Aa.prototype.sfixed32=Aa.prototype.fixed32,Aa.prototype.fixed64=function(hu){var mu=Sa.from(hu);return this._push(cu,4,mu.lo)._push(cu,4,mu.hi)},Aa.prototype.sfixed64=Aa.prototype.fixed64,Aa.prototype.float=function(hu){return this._push(wa.float.writeFloatLE,4,hu)},Aa.prototype.double=function(hu){return this._push(wa.float.writeDoubleLE,8,hu)};var gu=wa.Array.prototype.set?function(hu,mu,Ou){mu.set(hu,Ou)}:function(hu,mu,Ou){for(var uh=0;uh<hu.length;++uh)mu[Ou+uh]=hu[uh]};Aa.prototype.bytes=function(hu){var mu=hu.length>>>0;if(!mu)return this._push(ru,1,0);if(wa.isString(hu)){var Ou=Aa.alloc(mu=va.length(hu));va.decode(hu,Ou,0),hu=Ou}return this.uint32(mu)._push(gu,mu,hu)},Aa.prototype.string=function(hu){var mu=Ea.length(hu);return mu?this.uint32(mu)._push(Ea.write,mu,hu):this._push(ru,1,0)},Aa.prototype.fork=function(){return this.states=new Ta(this),this.head=this.tail=new La(eu,0,0),this.len=0,this},Aa.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new La(eu,0,0),this.len=0),this},Aa.prototype.ldelim=function(){var hu=this.head,mu=this.tail,Ou=this.len;return this.reset().uint32(Ou),Ou&&(this.tail.next=hu.next,this.tail=mu,this.len+=Ou),this},Aa.prototype.finish=function(){for(var hu=this.head.next,mu=this.constructor.alloc(this.len),Ou=0;hu;)hu.fn(hu.val,mu,Ou),Ou+=hu.len,hu=hu.next;return mu},Aa._configure=function(hu){xa=hu,Aa.create=ka(),xa._configure()}}),fu=me((oa,ba)=>{ba.exports=Sa;var wa=li();(Sa.prototype=Object.create(wa.prototype)).constructor=Sa;var xa=Xt();function Sa(){wa.call(this)}Sa._configure=function(){Sa.alloc=xa._Buffer_allocUnsafe,Sa.writeBytesBuffer=xa.Buffer&&xa.Buffer.prototype instanceof Uint8Array&&xa.Buffer.prototype.set.name==="set"?function(Ea,La,eu){La.set(Ea,eu)}:function(Ea,La,eu){if(Ea.copy)Ea.copy(La,eu,0,Ea.length);else for(var Ta=0;Ta<Ea.length;)La[eu++]=Ea[Ta++]}},Sa.prototype.bytes=function(Ea){xa.isString(Ea)&&(Ea=xa._Buffer_from(Ea,"base64"));var La=Ea.length>>>0;return this.uint32(La),La&&this._push(Sa.writeBytesBuffer,La,Ea),this};function va(Ea,La,eu){Ea.length<40?xa.utf8.write(Ea,La,eu):La.utf8Write?La.utf8Write(Ea,eu):La.write(Ea,eu)}Sa.prototype.string=function(Ea){var La=xa.Buffer.byteLength(Ea);return this.uint32(La),La&&this._push(va,La,Ea),this},Sa._configure()}),pi=me((oa,ba)=>{ba.exports=La;var wa=Xt(),xa,Sa=wa.LongBits,va=wa.utf8;function Ea(nu,su){return RangeError("index out of range: "+nu.pos+" + "+(su||1)+" > "+nu.len)}function La(nu){this.buf=nu,this.pos=0,this.len=nu.length}var eu=typeof Uint8Array<"u"?function(nu){if(nu instanceof Uint8Array||Array.isArray(nu))return new La(nu);throw Error("illegal buffer")}:function(nu){if(Array.isArray(nu))return new La(nu);throw Error("illegal buffer")},Ta=function(){return wa.Buffer?function(nu){return(La.create=function(su){return wa.Buffer.isBuffer(su)?new xa(su):eu(su)})(nu)}:eu};La.create=Ta(),La.prototype._slice=wa.Array.prototype.subarray||wa.Array.prototype.slice,La.prototype.uint32=(function(){var nu=4294967295;return function(){if(nu=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(nu=(nu|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(nu=(nu|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(nu=(nu|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(nu=(nu|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return nu;if((this.pos+=5)>this.len)throw this.pos=this.len,Ea(this,10);return nu}})(),La.prototype.int32=function(){return this.uint32()|0},La.prototype.sint32=function(){var nu=this.uint32();return nu>>>1^-(nu&1)|0};function Aa(){var nu=new Sa(0,0),su=0;if(this.len-this.pos>4){for(;su<4;++su)if(nu.lo=(nu.lo|(this.buf[this.pos]&127)<<su*7)>>>0,this.buf[this.pos++]<128)return nu;if(nu.lo=(nu.lo|(this.buf[this.pos]&127)<<28)>>>0,nu.hi=(nu.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return nu;su=0}else{for(;su<3;++su){if(this.pos>=this.len)throw Ea(this);if(nu.lo=(nu.lo|(this.buf[this.pos]&127)<<su*7)>>>0,this.buf[this.pos++]<128)return nu}return nu.lo=(nu.lo|(this.buf[this.pos++]&127)<<su*7)>>>0,nu}if(this.len-this.pos>4){for(;su<5;++su)if(nu.hi=(nu.hi|(this.buf[this.pos]&127)<<su*7+3)>>>0,this.buf[this.pos++]<128)return nu}else for(;su<5;++su){if(this.pos>=this.len)throw Ea(this);if(nu.hi=(nu.hi|(this.buf[this.pos]&127)<<su*7+3)>>>0,this.buf[this.pos++]<128)return nu}throw Error("invalid varint encoding")}La.prototype.bool=function(){return this.uint32()!==0};function ka(nu,su){return(nu[su-4]|nu[su-3]<<8|nu[su-2]<<16|nu[su-1]<<24)>>>0}La.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ea(this,4);return ka(this.buf,this.pos+=4)},La.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ea(this,4);return ka(this.buf,this.pos+=4)|0};function ru(){if(this.pos+8>this.len)throw Ea(this,8);return new Sa(ka(this.buf,this.pos+=4),ka(this.buf,this.pos+=4))}La.prototype.float=function(){if(this.pos+4>this.len)throw Ea(this,4);var nu=wa.float.readFloatLE(this.buf,this.pos);return this.pos+=4,nu},La.prototype.double=function(){if(this.pos+8>this.len)throw Ea(this,4);var nu=wa.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,nu},La.prototype.bytes=function(){var nu=this.uint32(),su=this.pos,uu=this.pos+nu;if(uu>this.len)throw Ea(this,nu);return this.pos+=nu,Array.isArray(this.buf)?this.buf.slice(su,uu):su===uu?new this.buf.constructor(0):this._slice.call(this.buf,su,uu)},La.prototype.string=function(){var nu=this.bytes();return va.read(nu,0,nu.length)},La.prototype.skip=function(nu){if(typeof nu=="number"){if(this.pos+nu>this.len)throw Ea(this,nu);this.pos+=nu}else do if(this.pos>=this.len)throw Ea(this);while(this.buf[this.pos++]&128);return this},La.prototype.skipType=function(nu){switch(nu){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(nu=this.uint32()&7)!==4;)this.skipType(nu);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+nu+" at offset "+this.pos)}return this},La._configure=function(nu){xa=nu,La.create=Ta(),xa._configure();var su=wa.Long?"toLong":"toNumber";wa.merge(La.prototype,{int64:function(){return Aa.call(this)[su](!1)},uint64:function(){return Aa.call(this)[su](!0)},sint64:function(){return Aa.call(this).zzDecode()[su](!1)},fixed64:function(){return ru.call(this)[su](!0)},sfixed64:function(){return ru.call(this)[su](!1)}})}}),Tu=me((oa,ba)=>{ba.exports=Sa;var wa=pi();(Sa.prototype=Object.create(wa.prototype)).constructor=Sa;var xa=Xt();function Sa(va){wa.call(this,va)}Sa._configure=function(){xa.Buffer&&(Sa.prototype._slice=xa.Buffer.prototype.slice)},Sa.prototype.string=function(){var va=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+va,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+va,this.len))},Sa._configure()}),vu=me((oa,ba)=>{ba.exports=xa;var wa=Xt();(xa.prototype=Object.create(wa.EventEmitter.prototype)).constructor=xa;function xa(Sa,va,Ea){if(typeof Sa!="function")throw TypeError("rpcImpl must be a function");wa.EventEmitter.call(this),this.rpcImpl=Sa,this.requestDelimited=!!va,this.responseDelimited=!!Ea}xa.prototype.rpcCall=function Sa(va,Ea,La,eu,Ta){if(!eu)throw TypeError("request must be specified");var Aa=this;if(!Ta)return wa.asPromise(Sa,Aa,va,Ea,La,eu);if(!Aa.rpcImpl){setTimeout(function(){Ta(Error("already ended"))},0);return}try{return Aa.rpcImpl(va,Ea[Aa.requestDelimited?"encodeDelimited":"encode"](eu).finish(),function(ka,ru){if(ka)return Aa.emit("error",ka,va),Ta(ka);if(ru===null){Aa.end(!0);return}if(!(ru instanceof La))try{ru=La[Aa.responseDelimited?"decodeDelimited":"decode"](ru)}catch(nu){return Aa.emit("error",nu,va),Ta(nu)}return Aa.emit("data",ru,va),Ta(null,ru)})}catch(ka){Aa.emit("error",ka,va),setTimeout(function(){Ta(ka)},0);return}},xa.prototype.end=function(Sa){return this.rpcImpl&&(Sa||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),_u=me(oa=>{var ba=oa;ba.Service=vu()}),Iu=me((oa,ba)=>{ba.exports={}}),Pu=me(oa=>{var ba=oa;ba.build="minimal",ba.Writer=li(),ba.BufferWriter=fu(),ba.Reader=pi(),ba.BufferReader=Tu(),ba.util=Xt(),ba.rpc=_u(),ba.roots=Iu(),ba.configure=wa;function wa(){ba.util._configure(),ba.Writer._configure(ba.BufferWriter),ba.Reader._configure(ba.BufferReader)}wa()}),Du=me((oa,ba)=>{ba.exports=Pu()}),$r=me((oa,ba)=>{var wa=Du(),xa=wa.Reader,Sa=wa.Writer,va=wa.util,Ea=wa.roots.default||(wa.roots.default={});Ea.onnx=(function(){var La={};return La.Version=(function(){var eu={},Ta=Object.create(eu);return Ta[eu[0]="_START_VERSION"]=0,Ta[eu[1]="IR_VERSION_2017_10_10"]=1,Ta[eu[2]="IR_VERSION_2017_10_30"]=2,Ta[eu[3]="IR_VERSION_2017_11_3"]=3,Ta[eu[4]="IR_VERSION_2019_1_22"]=4,Ta[eu[5]="IR_VERSION_2019_3_18"]=5,Ta[eu[6]="IR_VERSION_2019_9_19"]=6,Ta[eu[7]="IR_VERSION_2020_5_8"]=7,Ta[eu[8]="IR_VERSION_2021_7_30"]=8,Ta[eu[9]="IR_VERSION"]=9,Ta})(),La.AttributeProto=(function(){function eu(Ta){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.name="",eu.prototype.refAttrName="",eu.prototype.docString="",eu.prototype.type=0,eu.prototype.f=0,eu.prototype.i=va.Long?va.Long.fromBits(0,0,!1):0,eu.prototype.s=va.newBuffer([]),eu.prototype.t=null,eu.prototype.g=null,eu.prototype.sparseTensor=null,eu.prototype.tp=null,eu.prototype.floats=va.emptyArray,eu.prototype.ints=va.emptyArray,eu.prototype.strings=va.emptyArray,eu.prototype.tensors=va.emptyArray,eu.prototype.graphs=va.emptyArray,eu.prototype.sparseTensors=va.emptyArray,eu.prototype.typeProtos=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.name!=null&&Object.hasOwnProperty.call(Ta,"name")&&Aa.uint32(10).string(Ta.name),Ta.f!=null&&Object.hasOwnProperty.call(Ta,"f")&&Aa.uint32(21).float(Ta.f),Ta.i!=null&&Object.hasOwnProperty.call(Ta,"i")&&Aa.uint32(24).int64(Ta.i),Ta.s!=null&&Object.hasOwnProperty.call(Ta,"s")&&Aa.uint32(34).bytes(Ta.s),Ta.t!=null&&Object.hasOwnProperty.call(Ta,"t")&&Ea.onnx.TensorProto.encode(Ta.t,Aa.uint32(42).fork()).ldelim(),Ta.g!=null&&Object.hasOwnProperty.call(Ta,"g")&&Ea.onnx.GraphProto.encode(Ta.g,Aa.uint32(50).fork()).ldelim(),Ta.floats!=null&&Ta.floats.length){Aa.uint32(58).fork();for(var ka=0;ka<Ta.floats.length;++ka)Aa.float(Ta.floats[ka]);Aa.ldelim()}if(Ta.ints!=null&&Ta.ints.length){Aa.uint32(66).fork();for(var ka=0;ka<Ta.ints.length;++ka)Aa.int64(Ta.ints[ka]);Aa.ldelim()}if(Ta.strings!=null&&Ta.strings.length)for(var ka=0;ka<Ta.strings.length;++ka)Aa.uint32(74).bytes(Ta.strings[ka]);if(Ta.tensors!=null&&Ta.tensors.length)for(var ka=0;ka<Ta.tensors.length;++ka)Ea.onnx.TensorProto.encode(Ta.tensors[ka],Aa.uint32(82).fork()).ldelim();if(Ta.graphs!=null&&Ta.graphs.length)for(var ka=0;ka<Ta.graphs.length;++ka)Ea.onnx.GraphProto.encode(Ta.graphs[ka],Aa.uint32(90).fork()).ldelim();if(Ta.docString!=null&&Object.hasOwnProperty.call(Ta,"docString")&&Aa.uint32(106).string(Ta.docString),Ta.tp!=null&&Object.hasOwnProperty.call(Ta,"tp")&&Ea.onnx.TypeProto.encode(Ta.tp,Aa.uint32(114).fork()).ldelim(),Ta.typeProtos!=null&&Ta.typeProtos.length)for(var ka=0;ka<Ta.typeProtos.length;++ka)Ea.onnx.TypeProto.encode(Ta.typeProtos[ka],Aa.uint32(122).fork()).ldelim();if(Ta.type!=null&&Object.hasOwnProperty.call(Ta,"type")&&Aa.uint32(160).int32(Ta.type),Ta.refAttrName!=null&&Object.hasOwnProperty.call(Ta,"refAttrName")&&Aa.uint32(170).string(Ta.refAttrName),Ta.sparseTensor!=null&&Object.hasOwnProperty.call(Ta,"sparseTensor")&&Ea.onnx.SparseTensorProto.encode(Ta.sparseTensor,Aa.uint32(178).fork()).ldelim(),Ta.sparseTensors!=null&&Ta.sparseTensors.length)for(var ka=0;ka<Ta.sparseTensors.length;++ka)Ea.onnx.SparseTensorProto.encode(Ta.sparseTensors[ka],Aa.uint32(186).fork()).ldelim();return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.AttributeProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.name=Ta.string();break}case 21:{ru.refAttrName=Ta.string();break}case 13:{ru.docString=Ta.string();break}case 20:{ru.type=Ta.int32();break}case 2:{ru.f=Ta.float();break}case 3:{ru.i=Ta.int64();break}case 4:{ru.s=Ta.bytes();break}case 5:{ru.t=Ea.onnx.TensorProto.decode(Ta,Ta.uint32());break}case 6:{ru.g=Ea.onnx.GraphProto.decode(Ta,Ta.uint32());break}case 22:{ru.sparseTensor=Ea.onnx.SparseTensorProto.decode(Ta,Ta.uint32());break}case 14:{ru.tp=Ea.onnx.TypeProto.decode(Ta,Ta.uint32());break}case 7:{if(ru.floats&&ru.floats.length||(ru.floats=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.floats.push(Ta.float());else ru.floats.push(Ta.float());break}case 8:{if(ru.ints&&ru.ints.length||(ru.ints=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.ints.push(Ta.int64());else ru.ints.push(Ta.int64());break}case 9:{ru.strings&&ru.strings.length||(ru.strings=[]),ru.strings.push(Ta.bytes());break}case 10:{ru.tensors&&ru.tensors.length||(ru.tensors=[]),ru.tensors.push(Ea.onnx.TensorProto.decode(Ta,Ta.uint32()));break}case 11:{ru.graphs&&ru.graphs.length||(ru.graphs=[]),ru.graphs.push(Ea.onnx.GraphProto.decode(Ta,Ta.uint32()));break}case 23:{ru.sparseTensors&&ru.sparseTensors.length||(ru.sparseTensors=[]),ru.sparseTensors.push(Ea.onnx.SparseTensorProto.decode(Ta,Ta.uint32()));break}case 15:{ru.typeProtos&&ru.typeProtos.length||(ru.typeProtos=[]),ru.typeProtos.push(Ea.onnx.TypeProto.decode(Ta,Ta.uint32()));break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.name!=null&&Ta.hasOwnProperty("name")&&!va.isString(Ta.name))return"name: string expected";if(Ta.refAttrName!=null&&Ta.hasOwnProperty("refAttrName")&&!va.isString(Ta.refAttrName))return"refAttrName: string expected";if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&!va.isString(Ta.docString))return"docString: string expected";if(Ta.type!=null&&Ta.hasOwnProperty("type"))switch(Ta.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(Ta.f!=null&&Ta.hasOwnProperty("f")&&typeof Ta.f!="number")return"f: number expected";if(Ta.i!=null&&Ta.hasOwnProperty("i")&&!va.isInteger(Ta.i)&&!(Ta.i&&va.isInteger(Ta.i.low)&&va.isInteger(Ta.i.high)))return"i: integer|Long expected";if(Ta.s!=null&&Ta.hasOwnProperty("s")&&!(Ta.s&&typeof Ta.s.length=="number"||va.isString(Ta.s)))return"s: buffer expected";if(Ta.t!=null&&Ta.hasOwnProperty("t")){var Aa=Ea.onnx.TensorProto.verify(Ta.t);if(Aa)return"t."+Aa}if(Ta.g!=null&&Ta.hasOwnProperty("g")){var Aa=Ea.onnx.GraphProto.verify(Ta.g);if(Aa)return"g."+Aa}if(Ta.sparseTensor!=null&&Ta.hasOwnProperty("sparseTensor")){var Aa=Ea.onnx.SparseTensorProto.verify(Ta.sparseTensor);if(Aa)return"sparseTensor."+Aa}if(Ta.tp!=null&&Ta.hasOwnProperty("tp")){var Aa=Ea.onnx.TypeProto.verify(Ta.tp);if(Aa)return"tp."+Aa}if(Ta.floats!=null&&Ta.hasOwnProperty("floats")){if(!Array.isArray(Ta.floats))return"floats: array expected";for(var ka=0;ka<Ta.floats.length;++ka)if(typeof Ta.floats[ka]!="number")return"floats: number[] expected"}if(Ta.ints!=null&&Ta.hasOwnProperty("ints")){if(!Array.isArray(Ta.ints))return"ints: array expected";for(var ka=0;ka<Ta.ints.length;++ka)if(!va.isInteger(Ta.ints[ka])&&!(Ta.ints[ka]&&va.isInteger(Ta.ints[ka].low)&&va.isInteger(Ta.ints[ka].high)))return"ints: integer|Long[] expected"}if(Ta.strings!=null&&Ta.hasOwnProperty("strings")){if(!Array.isArray(Ta.strings))return"strings: array expected";for(var ka=0;ka<Ta.strings.length;++ka)if(!(Ta.strings[ka]&&typeof Ta.strings[ka].length=="number"||va.isString(Ta.strings[ka])))return"strings: buffer[] expected"}if(Ta.tensors!=null&&Ta.hasOwnProperty("tensors")){if(!Array.isArray(Ta.tensors))return"tensors: array expected";for(var ka=0;ka<Ta.tensors.length;++ka){var Aa=Ea.onnx.TensorProto.verify(Ta.tensors[ka]);if(Aa)return"tensors."+Aa}}if(Ta.graphs!=null&&Ta.hasOwnProperty("graphs")){if(!Array.isArray(Ta.graphs))return"graphs: array expected";for(var ka=0;ka<Ta.graphs.length;++ka){var Aa=Ea.onnx.GraphProto.verify(Ta.graphs[ka]);if(Aa)return"graphs."+Aa}}if(Ta.sparseTensors!=null&&Ta.hasOwnProperty("sparseTensors")){if(!Array.isArray(Ta.sparseTensors))return"sparseTensors: array expected";for(var ka=0;ka<Ta.sparseTensors.length;++ka){var Aa=Ea.onnx.SparseTensorProto.verify(Ta.sparseTensors[ka]);if(Aa)return"sparseTensors."+Aa}}if(Ta.typeProtos!=null&&Ta.hasOwnProperty("typeProtos")){if(!Array.isArray(Ta.typeProtos))return"typeProtos: array expected";for(var ka=0;ka<Ta.typeProtos.length;++ka){var Aa=Ea.onnx.TypeProto.verify(Ta.typeProtos[ka]);if(Aa)return"typeProtos."+Aa}}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.AttributeProto)return Ta;var Aa=new Ea.onnx.AttributeProto;switch(Ta.name!=null&&(Aa.name=String(Ta.name)),Ta.refAttrName!=null&&(Aa.refAttrName=String(Ta.refAttrName)),Ta.docString!=null&&(Aa.docString=String(Ta.docString)),Ta.type){default:if(typeof Ta.type=="number"){Aa.type=Ta.type;break}break;case"UNDEFINED":case 0:Aa.type=0;break;case"FLOAT":case 1:Aa.type=1;break;case"INT":case 2:Aa.type=2;break;case"STRING":case 3:Aa.type=3;break;case"TENSOR":case 4:Aa.type=4;break;case"GRAPH":case 5:Aa.type=5;break;case"SPARSE_TENSOR":case 11:Aa.type=11;break;case"TYPE_PROTO":case 13:Aa.type=13;break;case"FLOATS":case 6:Aa.type=6;break;case"INTS":case 7:Aa.type=7;break;case"STRINGS":case 8:Aa.type=8;break;case"TENSORS":case 9:Aa.type=9;break;case"GRAPHS":case 10:Aa.type=10;break;case"SPARSE_TENSORS":case 12:Aa.type=12;break;case"TYPE_PROTOS":case 14:Aa.type=14;break}if(Ta.f!=null&&(Aa.f=Number(Ta.f)),Ta.i!=null&&(va.Long?(Aa.i=va.Long.fromValue(Ta.i)).unsigned=!1:typeof Ta.i=="string"?Aa.i=parseInt(Ta.i,10):typeof Ta.i=="number"?Aa.i=Ta.i:typeof Ta.i=="object"&&(Aa.i=new va.LongBits(Ta.i.low>>>0,Ta.i.high>>>0).toNumber())),Ta.s!=null&&(typeof Ta.s=="string"?va.base64.decode(Ta.s,Aa.s=va.newBuffer(va.base64.length(Ta.s)),0):Ta.s.length>=0&&(Aa.s=Ta.s)),Ta.t!=null){if(typeof Ta.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");Aa.t=Ea.onnx.TensorProto.fromObject(Ta.t)}if(Ta.g!=null){if(typeof Ta.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");Aa.g=Ea.onnx.GraphProto.fromObject(Ta.g)}if(Ta.sparseTensor!=null){if(typeof Ta.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");Aa.sparseTensor=Ea.onnx.SparseTensorProto.fromObject(Ta.sparseTensor)}if(Ta.tp!=null){if(typeof Ta.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");Aa.tp=Ea.onnx.TypeProto.fromObject(Ta.tp)}if(Ta.floats){if(!Array.isArray(Ta.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");Aa.floats=[];for(var ka=0;ka<Ta.floats.length;++ka)Aa.floats[ka]=Number(Ta.floats[ka])}if(Ta.ints){if(!Array.isArray(Ta.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");Aa.ints=[];for(var ka=0;ka<Ta.ints.length;++ka)va.Long?(Aa.ints[ka]=va.Long.fromValue(Ta.ints[ka])).unsigned=!1:typeof Ta.ints[ka]=="string"?Aa.ints[ka]=parseInt(Ta.ints[ka],10):typeof Ta.ints[ka]=="number"?Aa.ints[ka]=Ta.ints[ka]:typeof Ta.ints[ka]=="object"&&(Aa.ints[ka]=new va.LongBits(Ta.ints[ka].low>>>0,Ta.ints[ka].high>>>0).toNumber())}if(Ta.strings){if(!Array.isArray(Ta.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");Aa.strings=[];for(var ka=0;ka<Ta.strings.length;++ka)typeof Ta.strings[ka]=="string"?va.base64.decode(Ta.strings[ka],Aa.strings[ka]=va.newBuffer(va.base64.length(Ta.strings[ka])),0):Ta.strings[ka].length>=0&&(Aa.strings[ka]=Ta.strings[ka])}if(Ta.tensors){if(!Array.isArray(Ta.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");Aa.tensors=[];for(var ka=0;ka<Ta.tensors.length;++ka){if(typeof Ta.tensors[ka]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");Aa.tensors[ka]=Ea.onnx.TensorProto.fromObject(Ta.tensors[ka])}}if(Ta.graphs){if(!Array.isArray(Ta.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");Aa.graphs=[];for(var ka=0;ka<Ta.graphs.length;++ka){if(typeof Ta.graphs[ka]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");Aa.graphs[ka]=Ea.onnx.GraphProto.fromObject(Ta.graphs[ka])}}if(Ta.sparseTensors){if(!Array.isArray(Ta.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");Aa.sparseTensors=[];for(var ka=0;ka<Ta.sparseTensors.length;++ka){if(typeof Ta.sparseTensors[ka]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");Aa.sparseTensors[ka]=Ea.onnx.SparseTensorProto.fromObject(Ta.sparseTensors[ka])}}if(Ta.typeProtos){if(!Array.isArray(Ta.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");Aa.typeProtos=[];for(var ka=0;ka<Ta.typeProtos.length;++ka){if(typeof Ta.typeProtos[ka]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");Aa.typeProtos[ka]=Ea.onnx.TypeProto.fromObject(Ta.typeProtos[ka])}}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.floats=[],ka.ints=[],ka.strings=[],ka.tensors=[],ka.graphs=[],ka.typeProtos=[],ka.sparseTensors=[]),Aa.defaults){if(ka.name="",ka.f=0,va.Long){var ru=new va.Long(0,0,!1);ka.i=Aa.longs===String?ru.toString():Aa.longs===Number?ru.toNumber():ru}else ka.i=Aa.longs===String?"0":0;Aa.bytes===String?ka.s="":(ka.s=[],Aa.bytes!==Array&&(ka.s=va.newBuffer(ka.s))),ka.t=null,ka.g=null,ka.docString="",ka.tp=null,ka.type=Aa.enums===String?"UNDEFINED":0,ka.refAttrName="",ka.sparseTensor=null}if(Ta.name!=null&&Ta.hasOwnProperty("name")&&(ka.name=Ta.name),Ta.f!=null&&Ta.hasOwnProperty("f")&&(ka.f=Aa.json&&!isFinite(Ta.f)?String(Ta.f):Ta.f),Ta.i!=null&&Ta.hasOwnProperty("i")&&(typeof Ta.i=="number"?ka.i=Aa.longs===String?String(Ta.i):Ta.i:ka.i=Aa.longs===String?va.Long.prototype.toString.call(Ta.i):Aa.longs===Number?new va.LongBits(Ta.i.low>>>0,Ta.i.high>>>0).toNumber():Ta.i),Ta.s!=null&&Ta.hasOwnProperty("s")&&(ka.s=Aa.bytes===String?va.base64.encode(Ta.s,0,Ta.s.length):Aa.bytes===Array?Array.prototype.slice.call(Ta.s):Ta.s),Ta.t!=null&&Ta.hasOwnProperty("t")&&(ka.t=Ea.onnx.TensorProto.toObject(Ta.t,Aa)),Ta.g!=null&&Ta.hasOwnProperty("g")&&(ka.g=Ea.onnx.GraphProto.toObject(Ta.g,Aa)),Ta.floats&&Ta.floats.length){ka.floats=[];for(var nu=0;nu<Ta.floats.length;++nu)ka.floats[nu]=Aa.json&&!isFinite(Ta.floats[nu])?String(Ta.floats[nu]):Ta.floats[nu]}if(Ta.ints&&Ta.ints.length){ka.ints=[];for(var nu=0;nu<Ta.ints.length;++nu)typeof Ta.ints[nu]=="number"?ka.ints[nu]=Aa.longs===String?String(Ta.ints[nu]):Ta.ints[nu]:ka.ints[nu]=Aa.longs===String?va.Long.prototype.toString.call(Ta.ints[nu]):Aa.longs===Number?new va.LongBits(Ta.ints[nu].low>>>0,Ta.ints[nu].high>>>0).toNumber():Ta.ints[nu]}if(Ta.strings&&Ta.strings.length){ka.strings=[];for(var nu=0;nu<Ta.strings.length;++nu)ka.strings[nu]=Aa.bytes===String?va.base64.encode(Ta.strings[nu],0,Ta.strings[nu].length):Aa.bytes===Array?Array.prototype.slice.call(Ta.strings[nu]):Ta.strings[nu]}if(Ta.tensors&&Ta.tensors.length){ka.tensors=[];for(var nu=0;nu<Ta.tensors.length;++nu)ka.tensors[nu]=Ea.onnx.TensorProto.toObject(Ta.tensors[nu],Aa)}if(Ta.graphs&&Ta.graphs.length){ka.graphs=[];for(var nu=0;nu<Ta.graphs.length;++nu)ka.graphs[nu]=Ea.onnx.GraphProto.toObject(Ta.graphs[nu],Aa)}if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&(ka.docString=Ta.docString),Ta.tp!=null&&Ta.hasOwnProperty("tp")&&(ka.tp=Ea.onnx.TypeProto.toObject(Ta.tp,Aa)),Ta.typeProtos&&Ta.typeProtos.length){ka.typeProtos=[];for(var nu=0;nu<Ta.typeProtos.length;++nu)ka.typeProtos[nu]=Ea.onnx.TypeProto.toObject(Ta.typeProtos[nu],Aa)}if(Ta.type!=null&&Ta.hasOwnProperty("type")&&(ka.type=Aa.enums===String?Ea.onnx.AttributeProto.AttributeType[Ta.type]===void 0?Ta.type:Ea.onnx.AttributeProto.AttributeType[Ta.type]:Ta.type),Ta.refAttrName!=null&&Ta.hasOwnProperty("refAttrName")&&(ka.refAttrName=Ta.refAttrName),Ta.sparseTensor!=null&&Ta.hasOwnProperty("sparseTensor")&&(ka.sparseTensor=Ea.onnx.SparseTensorProto.toObject(Ta.sparseTensor,Aa)),Ta.sparseTensors&&Ta.sparseTensors.length){ka.sparseTensors=[];for(var nu=0;nu<Ta.sparseTensors.length;++nu)ka.sparseTensors[nu]=Ea.onnx.SparseTensorProto.toObject(Ta.sparseTensors[nu],Aa)}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.AttributeProto"},eu.AttributeType=(function(){var Ta={},Aa=Object.create(Ta);return Aa[Ta[0]="UNDEFINED"]=0,Aa[Ta[1]="FLOAT"]=1,Aa[Ta[2]="INT"]=2,Aa[Ta[3]="STRING"]=3,Aa[Ta[4]="TENSOR"]=4,Aa[Ta[5]="GRAPH"]=5,Aa[Ta[11]="SPARSE_TENSOR"]=11,Aa[Ta[13]="TYPE_PROTO"]=13,Aa[Ta[6]="FLOATS"]=6,Aa[Ta[7]="INTS"]=7,Aa[Ta[8]="STRINGS"]=8,Aa[Ta[9]="TENSORS"]=9,Aa[Ta[10]="GRAPHS"]=10,Aa[Ta[12]="SPARSE_TENSORS"]=12,Aa[Ta[14]="TYPE_PROTOS"]=14,Aa})(),eu})(),La.ValueInfoProto=(function(){function eu(Ta){if(Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.name="",eu.prototype.type=null,eu.prototype.docString="",eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){return Aa||(Aa=Sa.create()),Ta.name!=null&&Object.hasOwnProperty.call(Ta,"name")&&Aa.uint32(10).string(Ta.name),Ta.type!=null&&Object.hasOwnProperty.call(Ta,"type")&&Ea.onnx.TypeProto.encode(Ta.type,Aa.uint32(18).fork()).ldelim(),Ta.docString!=null&&Object.hasOwnProperty.call(Ta,"docString")&&Aa.uint32(26).string(Ta.docString),Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.ValueInfoProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.name=Ta.string();break}case 2:{ru.type=Ea.onnx.TypeProto.decode(Ta,Ta.uint32());break}case 3:{ru.docString=Ta.string();break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.name!=null&&Ta.hasOwnProperty("name")&&!va.isString(Ta.name))return"name: string expected";if(Ta.type!=null&&Ta.hasOwnProperty("type")){var Aa=Ea.onnx.TypeProto.verify(Ta.type);if(Aa)return"type."+Aa}return Ta.docString!=null&&Ta.hasOwnProperty("docString")&&!va.isString(Ta.docString)?"docString: string expected":null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.ValueInfoProto)return Ta;var Aa=new Ea.onnx.ValueInfoProto;if(Ta.name!=null&&(Aa.name=String(Ta.name)),Ta.type!=null){if(typeof Ta.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");Aa.type=Ea.onnx.TypeProto.fromObject(Ta.type)}return Ta.docString!=null&&(Aa.docString=String(Ta.docString)),Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};return Aa.defaults&&(ka.name="",ka.type=null,ka.docString=""),Ta.name!=null&&Ta.hasOwnProperty("name")&&(ka.name=Ta.name),Ta.type!=null&&Ta.hasOwnProperty("type")&&(ka.type=Ea.onnx.TypeProto.toObject(Ta.type,Aa)),Ta.docString!=null&&Ta.hasOwnProperty("docString")&&(ka.docString=Ta.docString),ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.ValueInfoProto"},eu})(),La.NodeProto=(function(){function eu(Ta){if(this.input=[],this.output=[],this.attribute=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.input=va.emptyArray,eu.prototype.output=va.emptyArray,eu.prototype.name="",eu.prototype.opType="",eu.prototype.domain="",eu.prototype.attribute=va.emptyArray,eu.prototype.docString="",eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.input!=null&&Ta.input.length)for(var ka=0;ka<Ta.input.length;++ka)Aa.uint32(10).string(Ta.input[ka]);if(Ta.output!=null&&Ta.output.length)for(var ka=0;ka<Ta.output.length;++ka)Aa.uint32(18).string(Ta.output[ka]);if(Ta.name!=null&&Object.hasOwnProperty.call(Ta,"name")&&Aa.uint32(26).string(Ta.name),Ta.opType!=null&&Object.hasOwnProperty.call(Ta,"opType")&&Aa.uint32(34).string(Ta.opType),Ta.attribute!=null&&Ta.attribute.length)for(var ka=0;ka<Ta.attribute.length;++ka)Ea.onnx.AttributeProto.encode(Ta.attribute[ka],Aa.uint32(42).fork()).ldelim();return Ta.docString!=null&&Object.hasOwnProperty.call(Ta,"docString")&&Aa.uint32(50).string(Ta.docString),Ta.domain!=null&&Object.hasOwnProperty.call(Ta,"domain")&&Aa.uint32(58).string(Ta.domain),Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.NodeProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.input&&ru.input.length||(ru.input=[]),ru.input.push(Ta.string());break}case 2:{ru.output&&ru.output.length||(ru.output=[]),ru.output.push(Ta.string());break}case 3:{ru.name=Ta.string();break}case 4:{ru.opType=Ta.string();break}case 7:{ru.domain=Ta.string();break}case 5:{ru.attribute&&ru.attribute.length||(ru.attribute=[]),ru.attribute.push(Ea.onnx.AttributeProto.decode(Ta,Ta.uint32()));break}case 6:{ru.docString=Ta.string();break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.input!=null&&Ta.hasOwnProperty("input")){if(!Array.isArray(Ta.input))return"input: array expected";for(var Aa=0;Aa<Ta.input.length;++Aa)if(!va.isString(Ta.input[Aa]))return"input: string[] expected"}if(Ta.output!=null&&Ta.hasOwnProperty("output")){if(!Array.isArray(Ta.output))return"output: array expected";for(var Aa=0;Aa<Ta.output.length;++Aa)if(!va.isString(Ta.output[Aa]))return"output: string[] expected"}if(Ta.name!=null&&Ta.hasOwnProperty("name")&&!va.isString(Ta.name))return"name: string expected";if(Ta.opType!=null&&Ta.hasOwnProperty("opType")&&!va.isString(Ta.opType))return"opType: string expected";if(Ta.domain!=null&&Ta.hasOwnProperty("domain")&&!va.isString(Ta.domain))return"domain: string expected";if(Ta.attribute!=null&&Ta.hasOwnProperty("attribute")){if(!Array.isArray(Ta.attribute))return"attribute: array expected";for(var Aa=0;Aa<Ta.attribute.length;++Aa){var ka=Ea.onnx.AttributeProto.verify(Ta.attribute[Aa]);if(ka)return"attribute."+ka}}return Ta.docString!=null&&Ta.hasOwnProperty("docString")&&!va.isString(Ta.docString)?"docString: string expected":null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.NodeProto)return Ta;var Aa=new Ea.onnx.NodeProto;if(Ta.input){if(!Array.isArray(Ta.input))throw TypeError(".onnx.NodeProto.input: array expected");Aa.input=[];for(var ka=0;ka<Ta.input.length;++ka)Aa.input[ka]=String(Ta.input[ka])}if(Ta.output){if(!Array.isArray(Ta.output))throw TypeError(".onnx.NodeProto.output: array expected");Aa.output=[];for(var ka=0;ka<Ta.output.length;++ka)Aa.output[ka]=String(Ta.output[ka])}if(Ta.name!=null&&(Aa.name=String(Ta.name)),Ta.opType!=null&&(Aa.opType=String(Ta.opType)),Ta.domain!=null&&(Aa.domain=String(Ta.domain)),Ta.attribute){if(!Array.isArray(Ta.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");Aa.attribute=[];for(var ka=0;ka<Ta.attribute.length;++ka){if(typeof Ta.attribute[ka]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");Aa.attribute[ka]=Ea.onnx.AttributeProto.fromObject(Ta.attribute[ka])}}return Ta.docString!=null&&(Aa.docString=String(Ta.docString)),Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.input=[],ka.output=[],ka.attribute=[]),Aa.defaults&&(ka.name="",ka.opType="",ka.docString="",ka.domain=""),Ta.input&&Ta.input.length){ka.input=[];for(var ru=0;ru<Ta.input.length;++ru)ka.input[ru]=Ta.input[ru]}if(Ta.output&&Ta.output.length){ka.output=[];for(var ru=0;ru<Ta.output.length;++ru)ka.output[ru]=Ta.output[ru]}if(Ta.name!=null&&Ta.hasOwnProperty("name")&&(ka.name=Ta.name),Ta.opType!=null&&Ta.hasOwnProperty("opType")&&(ka.opType=Ta.opType),Ta.attribute&&Ta.attribute.length){ka.attribute=[];for(var ru=0;ru<Ta.attribute.length;++ru)ka.attribute[ru]=Ea.onnx.AttributeProto.toObject(Ta.attribute[ru],Aa)}return Ta.docString!=null&&Ta.hasOwnProperty("docString")&&(ka.docString=Ta.docString),Ta.domain!=null&&Ta.hasOwnProperty("domain")&&(ka.domain=Ta.domain),ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.NodeProto"},eu})(),La.TrainingInfoProto=(function(){function eu(Ta){if(this.initializationBinding=[],this.updateBinding=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.initialization=null,eu.prototype.algorithm=null,eu.prototype.initializationBinding=va.emptyArray,eu.prototype.updateBinding=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.initialization!=null&&Object.hasOwnProperty.call(Ta,"initialization")&&Ea.onnx.GraphProto.encode(Ta.initialization,Aa.uint32(10).fork()).ldelim(),Ta.algorithm!=null&&Object.hasOwnProperty.call(Ta,"algorithm")&&Ea.onnx.GraphProto.encode(Ta.algorithm,Aa.uint32(18).fork()).ldelim(),Ta.initializationBinding!=null&&Ta.initializationBinding.length)for(var ka=0;ka<Ta.initializationBinding.length;++ka)Ea.onnx.StringStringEntryProto.encode(Ta.initializationBinding[ka],Aa.uint32(26).fork()).ldelim();if(Ta.updateBinding!=null&&Ta.updateBinding.length)for(var ka=0;ka<Ta.updateBinding.length;++ka)Ea.onnx.StringStringEntryProto.encode(Ta.updateBinding[ka],Aa.uint32(34).fork()).ldelim();return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.TrainingInfoProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.initialization=Ea.onnx.GraphProto.decode(Ta,Ta.uint32());break}case 2:{ru.algorithm=Ea.onnx.GraphProto.decode(Ta,Ta.uint32());break}case 3:{ru.initializationBinding&&ru.initializationBinding.length||(ru.initializationBinding=[]),ru.initializationBinding.push(Ea.onnx.StringStringEntryProto.decode(Ta,Ta.uint32()));break}case 4:{ru.updateBinding&&ru.updateBinding.length||(ru.updateBinding=[]),ru.updateBinding.push(Ea.onnx.StringStringEntryProto.decode(Ta,Ta.uint32()));break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.initialization!=null&&Ta.hasOwnProperty("initialization")){var Aa=Ea.onnx.GraphProto.verify(Ta.initialization);if(Aa)return"initialization."+Aa}if(Ta.algorithm!=null&&Ta.hasOwnProperty("algorithm")){var Aa=Ea.onnx.GraphProto.verify(Ta.algorithm);if(Aa)return"algorithm."+Aa}if(Ta.initializationBinding!=null&&Ta.hasOwnProperty("initializationBinding")){if(!Array.isArray(Ta.initializationBinding))return"initializationBinding: array expected";for(var ka=0;ka<Ta.initializationBinding.length;++ka){var Aa=Ea.onnx.StringStringEntryProto.verify(Ta.initializationBinding[ka]);if(Aa)return"initializationBinding."+Aa}}if(Ta.updateBinding!=null&&Ta.hasOwnProperty("updateBinding")){if(!Array.isArray(Ta.updateBinding))return"updateBinding: array expected";for(var ka=0;ka<Ta.updateBinding.length;++ka){var Aa=Ea.onnx.StringStringEntryProto.verify(Ta.updateBinding[ka]);if(Aa)return"updateBinding."+Aa}}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.TrainingInfoProto)return Ta;var Aa=new Ea.onnx.TrainingInfoProto;if(Ta.initialization!=null){if(typeof Ta.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");Aa.initialization=Ea.onnx.GraphProto.fromObject(Ta.initialization)}if(Ta.algorithm!=null){if(typeof Ta.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");Aa.algorithm=Ea.onnx.GraphProto.fromObject(Ta.algorithm)}if(Ta.initializationBinding){if(!Array.isArray(Ta.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");Aa.initializationBinding=[];for(var ka=0;ka<Ta.initializationBinding.length;++ka){if(typeof Ta.initializationBinding[ka]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");Aa.initializationBinding[ka]=Ea.onnx.StringStringEntryProto.fromObject(Ta.initializationBinding[ka])}}if(Ta.updateBinding){if(!Array.isArray(Ta.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");Aa.updateBinding=[];for(var ka=0;ka<Ta.updateBinding.length;++ka){if(typeof Ta.updateBinding[ka]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");Aa.updateBinding[ka]=Ea.onnx.StringStringEntryProto.fromObject(Ta.updateBinding[ka])}}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.initializationBinding=[],ka.updateBinding=[]),Aa.defaults&&(ka.initialization=null,ka.algorithm=null),Ta.initialization!=null&&Ta.hasOwnProperty("initialization")&&(ka.initialization=Ea.onnx.GraphProto.toObject(Ta.initialization,Aa)),Ta.algorithm!=null&&Ta.hasOwnProperty("algorithm")&&(ka.algorithm=Ea.onnx.GraphProto.toObject(Ta.algorithm,Aa)),Ta.initializationBinding&&Ta.initializationBinding.length){ka.initializationBinding=[];for(var ru=0;ru<Ta.initializationBinding.length;++ru)ka.initializationBinding[ru]=Ea.onnx.StringStringEntryProto.toObject(Ta.initializationBinding[ru],Aa)}if(Ta.updateBinding&&Ta.updateBinding.length){ka.updateBinding=[];for(var ru=0;ru<Ta.updateBinding.length;++ru)ka.updateBinding[ru]=Ea.onnx.StringStringEntryProto.toObject(Ta.updateBinding[ru],Aa)}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.TrainingInfoProto"},eu})(),La.ModelProto=(function(){function eu(Ta){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.irVersion=va.Long?va.Long.fromBits(0,0,!1):0,eu.prototype.opsetImport=va.emptyArray,eu.prototype.producerName="",eu.prototype.producerVersion="",eu.prototype.domain="",eu.prototype.modelVersion=va.Long?va.Long.fromBits(0,0,!1):0,eu.prototype.docString="",eu.prototype.graph=null,eu.prototype.metadataProps=va.emptyArray,eu.prototype.trainingInfo=va.emptyArray,eu.prototype.functions=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.irVersion!=null&&Object.hasOwnProperty.call(Ta,"irVersion")&&Aa.uint32(8).int64(Ta.irVersion),Ta.producerName!=null&&Object.hasOwnProperty.call(Ta,"producerName")&&Aa.uint32(18).string(Ta.producerName),Ta.producerVersion!=null&&Object.hasOwnProperty.call(Ta,"producerVersion")&&Aa.uint32(26).string(Ta.producerVersion),Ta.domain!=null&&Object.hasOwnProperty.call(Ta,"domain")&&Aa.uint32(34).string(Ta.domain),Ta.modelVersion!=null&&Object.hasOwnProperty.call(Ta,"modelVersion")&&Aa.uint32(40).int64(Ta.modelVersion),Ta.docString!=null&&Object.hasOwnProperty.call(Ta,"docString")&&Aa.uint32(50).string(Ta.docString),Ta.graph!=null&&Object.hasOwnProperty.call(Ta,"graph")&&Ea.onnx.GraphProto.encode(Ta.graph,Aa.uint32(58).fork()).ldelim(),Ta.opsetImport!=null&&Ta.opsetImport.length)for(var ka=0;ka<Ta.opsetImport.length;++ka)Ea.onnx.OperatorSetIdProto.encode(Ta.opsetImport[ka],Aa.uint32(66).fork()).ldelim();if(Ta.metadataProps!=null&&Ta.metadataProps.length)for(var ka=0;ka<Ta.metadataProps.length;++ka)Ea.onnx.StringStringEntryProto.encode(Ta.metadataProps[ka],Aa.uint32(114).fork()).ldelim();if(Ta.trainingInfo!=null&&Ta.trainingInfo.length)for(var ka=0;ka<Ta.trainingInfo.length;++ka)Ea.onnx.TrainingInfoProto.encode(Ta.trainingInfo[ka],Aa.uint32(162).fork()).ldelim();if(Ta.functions!=null&&Ta.functions.length)for(var ka=0;ka<Ta.functions.length;++ka)Ea.onnx.FunctionProto.encode(Ta.functions[ka],Aa.uint32(202).fork()).ldelim();return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.ModelProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.irVersion=Ta.int64();break}case 8:{ru.opsetImport&&ru.opsetImport.length||(ru.opsetImport=[]),ru.opsetImport.push(Ea.onnx.OperatorSetIdProto.decode(Ta,Ta.uint32()));break}case 2:{ru.producerName=Ta.string();break}case 3:{ru.producerVersion=Ta.string();break}case 4:{ru.domain=Ta.string();break}case 5:{ru.modelVersion=Ta.int64();break}case 6:{ru.docString=Ta.string();break}case 7:{ru.graph=Ea.onnx.GraphProto.decode(Ta,Ta.uint32());break}case 14:{ru.metadataProps&&ru.metadataProps.length||(ru.metadataProps=[]),ru.metadataProps.push(Ea.onnx.StringStringEntryProto.decode(Ta,Ta.uint32()));break}case 20:{ru.trainingInfo&&ru.trainingInfo.length||(ru.trainingInfo=[]),ru.trainingInfo.push(Ea.onnx.TrainingInfoProto.decode(Ta,Ta.uint32()));break}case 25:{ru.functions&&ru.functions.length||(ru.functions=[]),ru.functions.push(Ea.onnx.FunctionProto.decode(Ta,Ta.uint32()));break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.irVersion!=null&&Ta.hasOwnProperty("irVersion")&&!va.isInteger(Ta.irVersion)&&!(Ta.irVersion&&va.isInteger(Ta.irVersion.low)&&va.isInteger(Ta.irVersion.high)))return"irVersion: integer|Long expected";if(Ta.opsetImport!=null&&Ta.hasOwnProperty("opsetImport")){if(!Array.isArray(Ta.opsetImport))return"opsetImport: array expected";for(var Aa=0;Aa<Ta.opsetImport.length;++Aa){var ka=Ea.onnx.OperatorSetIdProto.verify(Ta.opsetImport[Aa]);if(ka)return"opsetImport."+ka}}if(Ta.producerName!=null&&Ta.hasOwnProperty("producerName")&&!va.isString(Ta.producerName))return"producerName: string expected";if(Ta.producerVersion!=null&&Ta.hasOwnProperty("producerVersion")&&!va.isString(Ta.producerVersion))return"producerVersion: string expected";if(Ta.domain!=null&&Ta.hasOwnProperty("domain")&&!va.isString(Ta.domain))return"domain: string expected";if(Ta.modelVersion!=null&&Ta.hasOwnProperty("modelVersion")&&!va.isInteger(Ta.modelVersion)&&!(Ta.modelVersion&&va.isInteger(Ta.modelVersion.low)&&va.isInteger(Ta.modelVersion.high)))return"modelVersion: integer|Long expected";if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&!va.isString(Ta.docString))return"docString: string expected";if(Ta.graph!=null&&Ta.hasOwnProperty("graph")){var ka=Ea.onnx.GraphProto.verify(Ta.graph);if(ka)return"graph."+ka}if(Ta.metadataProps!=null&&Ta.hasOwnProperty("metadataProps")){if(!Array.isArray(Ta.metadataProps))return"metadataProps: array expected";for(var Aa=0;Aa<Ta.metadataProps.length;++Aa){var ka=Ea.onnx.StringStringEntryProto.verify(Ta.metadataProps[Aa]);if(ka)return"metadataProps."+ka}}if(Ta.trainingInfo!=null&&Ta.hasOwnProperty("trainingInfo")){if(!Array.isArray(Ta.trainingInfo))return"trainingInfo: array expected";for(var Aa=0;Aa<Ta.trainingInfo.length;++Aa){var ka=Ea.onnx.TrainingInfoProto.verify(Ta.trainingInfo[Aa]);if(ka)return"trainingInfo."+ka}}if(Ta.functions!=null&&Ta.hasOwnProperty("functions")){if(!Array.isArray(Ta.functions))return"functions: array expected";for(var Aa=0;Aa<Ta.functions.length;++Aa){var ka=Ea.onnx.FunctionProto.verify(Ta.functions[Aa]);if(ka)return"functions."+ka}}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.ModelProto)return Ta;var Aa=new Ea.onnx.ModelProto;if(Ta.irVersion!=null&&(va.Long?(Aa.irVersion=va.Long.fromValue(Ta.irVersion)).unsigned=!1:typeof Ta.irVersion=="string"?Aa.irVersion=parseInt(Ta.irVersion,10):typeof Ta.irVersion=="number"?Aa.irVersion=Ta.irVersion:typeof Ta.irVersion=="object"&&(Aa.irVersion=new va.LongBits(Ta.irVersion.low>>>0,Ta.irVersion.high>>>0).toNumber())),Ta.opsetImport){if(!Array.isArray(Ta.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");Aa.opsetImport=[];for(var ka=0;ka<Ta.opsetImport.length;++ka){if(typeof Ta.opsetImport[ka]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");Aa.opsetImport[ka]=Ea.onnx.OperatorSetIdProto.fromObject(Ta.opsetImport[ka])}}if(Ta.producerName!=null&&(Aa.producerName=String(Ta.producerName)),Ta.producerVersion!=null&&(Aa.producerVersion=String(Ta.producerVersion)),Ta.domain!=null&&(Aa.domain=String(Ta.domain)),Ta.modelVersion!=null&&(va.Long?(Aa.modelVersion=va.Long.fromValue(Ta.modelVersion)).unsigned=!1:typeof Ta.modelVersion=="string"?Aa.modelVersion=parseInt(Ta.modelVersion,10):typeof Ta.modelVersion=="number"?Aa.modelVersion=Ta.modelVersion:typeof Ta.modelVersion=="object"&&(Aa.modelVersion=new va.LongBits(Ta.modelVersion.low>>>0,Ta.modelVersion.high>>>0).toNumber())),Ta.docString!=null&&(Aa.docString=String(Ta.docString)),Ta.graph!=null){if(typeof Ta.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");Aa.graph=Ea.onnx.GraphProto.fromObject(Ta.graph)}if(Ta.metadataProps){if(!Array.isArray(Ta.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");Aa.metadataProps=[];for(var ka=0;ka<Ta.metadataProps.length;++ka){if(typeof Ta.metadataProps[ka]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");Aa.metadataProps[ka]=Ea.onnx.StringStringEntryProto.fromObject(Ta.metadataProps[ka])}}if(Ta.trainingInfo){if(!Array.isArray(Ta.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");Aa.trainingInfo=[];for(var ka=0;ka<Ta.trainingInfo.length;++ka){if(typeof Ta.trainingInfo[ka]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");Aa.trainingInfo[ka]=Ea.onnx.TrainingInfoProto.fromObject(Ta.trainingInfo[ka])}}if(Ta.functions){if(!Array.isArray(Ta.functions))throw TypeError(".onnx.ModelProto.functions: array expected");Aa.functions=[];for(var ka=0;ka<Ta.functions.length;++ka){if(typeof Ta.functions[ka]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");Aa.functions[ka]=Ea.onnx.FunctionProto.fromObject(Ta.functions[ka])}}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.opsetImport=[],ka.metadataProps=[],ka.trainingInfo=[],ka.functions=[]),Aa.defaults){if(va.Long){var ru=new va.Long(0,0,!1);ka.irVersion=Aa.longs===String?ru.toString():Aa.longs===Number?ru.toNumber():ru}else ka.irVersion=Aa.longs===String?"0":0;if(ka.producerName="",ka.producerVersion="",ka.domain="",va.Long){var ru=new va.Long(0,0,!1);ka.modelVersion=Aa.longs===String?ru.toString():Aa.longs===Number?ru.toNumber():ru}else ka.modelVersion=Aa.longs===String?"0":0;ka.docString="",ka.graph=null}if(Ta.irVersion!=null&&Ta.hasOwnProperty("irVersion")&&(typeof Ta.irVersion=="number"?ka.irVersion=Aa.longs===String?String(Ta.irVersion):Ta.irVersion:ka.irVersion=Aa.longs===String?va.Long.prototype.toString.call(Ta.irVersion):Aa.longs===Number?new va.LongBits(Ta.irVersion.low>>>0,Ta.irVersion.high>>>0).toNumber():Ta.irVersion),Ta.producerName!=null&&Ta.hasOwnProperty("producerName")&&(ka.producerName=Ta.producerName),Ta.producerVersion!=null&&Ta.hasOwnProperty("producerVersion")&&(ka.producerVersion=Ta.producerVersion),Ta.domain!=null&&Ta.hasOwnProperty("domain")&&(ka.domain=Ta.domain),Ta.modelVersion!=null&&Ta.hasOwnProperty("modelVersion")&&(typeof Ta.modelVersion=="number"?ka.modelVersion=Aa.longs===String?String(Ta.modelVersion):Ta.modelVersion:ka.modelVersion=Aa.longs===String?va.Long.prototype.toString.call(Ta.modelVersion):Aa.longs===Number?new va.LongBits(Ta.modelVersion.low>>>0,Ta.modelVersion.high>>>0).toNumber():Ta.modelVersion),Ta.docString!=null&&Ta.hasOwnProperty("docString")&&(ka.docString=Ta.docString),Ta.graph!=null&&Ta.hasOwnProperty("graph")&&(ka.graph=Ea.onnx.GraphProto.toObject(Ta.graph,Aa)),Ta.opsetImport&&Ta.opsetImport.length){ka.opsetImport=[];for(var nu=0;nu<Ta.opsetImport.length;++nu)ka.opsetImport[nu]=Ea.onnx.OperatorSetIdProto.toObject(Ta.opsetImport[nu],Aa)}if(Ta.metadataProps&&Ta.metadataProps.length){ka.metadataProps=[];for(var nu=0;nu<Ta.metadataProps.length;++nu)ka.metadataProps[nu]=Ea.onnx.StringStringEntryProto.toObject(Ta.metadataProps[nu],Aa)}if(Ta.trainingInfo&&Ta.trainingInfo.length){ka.trainingInfo=[];for(var nu=0;nu<Ta.trainingInfo.length;++nu)ka.trainingInfo[nu]=Ea.onnx.TrainingInfoProto.toObject(Ta.trainingInfo[nu],Aa)}if(Ta.functions&&Ta.functions.length){ka.functions=[];for(var nu=0;nu<Ta.functions.length;++nu)ka.functions[nu]=Ea.onnx.FunctionProto.toObject(Ta.functions[nu],Aa)}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.ModelProto"},eu})(),La.StringStringEntryProto=(function(){function eu(Ta){if(Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.key="",eu.prototype.value="",eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){return Aa||(Aa=Sa.create()),Ta.key!=null&&Object.hasOwnProperty.call(Ta,"key")&&Aa.uint32(10).string(Ta.key),Ta.value!=null&&Object.hasOwnProperty.call(Ta,"value")&&Aa.uint32(18).string(Ta.value),Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.StringStringEntryProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.key=Ta.string();break}case 2:{ru.value=Ta.string();break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){return typeof Ta!="object"||Ta===null?"object expected":Ta.key!=null&&Ta.hasOwnProperty("key")&&!va.isString(Ta.key)?"key: string expected":Ta.value!=null&&Ta.hasOwnProperty("value")&&!va.isString(Ta.value)?"value: string expected":null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.StringStringEntryProto)return Ta;var Aa=new Ea.onnx.StringStringEntryProto;return Ta.key!=null&&(Aa.key=String(Ta.key)),Ta.value!=null&&(Aa.value=String(Ta.value)),Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};return Aa.defaults&&(ka.key="",ka.value=""),Ta.key!=null&&Ta.hasOwnProperty("key")&&(ka.key=Ta.key),Ta.value!=null&&Ta.hasOwnProperty("value")&&(ka.value=Ta.value),ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.StringStringEntryProto"},eu})(),La.TensorAnnotation=(function(){function eu(Ta){if(this.quantParameterTensorNames=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.tensorName="",eu.prototype.quantParameterTensorNames=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.tensorName!=null&&Object.hasOwnProperty.call(Ta,"tensorName")&&Aa.uint32(10).string(Ta.tensorName),Ta.quantParameterTensorNames!=null&&Ta.quantParameterTensorNames.length)for(var ka=0;ka<Ta.quantParameterTensorNames.length;++ka)Ea.onnx.StringStringEntryProto.encode(Ta.quantParameterTensorNames[ka],Aa.uint32(18).fork()).ldelim();return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.TensorAnnotation;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.tensorName=Ta.string();break}case 2:{ru.quantParameterTensorNames&&ru.quantParameterTensorNames.length||(ru.quantParameterTensorNames=[]),ru.quantParameterTensorNames.push(Ea.onnx.StringStringEntryProto.decode(Ta,Ta.uint32()));break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.tensorName!=null&&Ta.hasOwnProperty("tensorName")&&!va.isString(Ta.tensorName))return"tensorName: string expected";if(Ta.quantParameterTensorNames!=null&&Ta.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(Ta.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var Aa=0;Aa<Ta.quantParameterTensorNames.length;++Aa){var ka=Ea.onnx.StringStringEntryProto.verify(Ta.quantParameterTensorNames[Aa]);if(ka)return"quantParameterTensorNames."+ka}}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.TensorAnnotation)return Ta;var Aa=new Ea.onnx.TensorAnnotation;if(Ta.tensorName!=null&&(Aa.tensorName=String(Ta.tensorName)),Ta.quantParameterTensorNames){if(!Array.isArray(Ta.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");Aa.quantParameterTensorNames=[];for(var ka=0;ka<Ta.quantParameterTensorNames.length;++ka){if(typeof Ta.quantParameterTensorNames[ka]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");Aa.quantParameterTensorNames[ka]=Ea.onnx.StringStringEntryProto.fromObject(Ta.quantParameterTensorNames[ka])}}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.quantParameterTensorNames=[]),Aa.defaults&&(ka.tensorName=""),Ta.tensorName!=null&&Ta.hasOwnProperty("tensorName")&&(ka.tensorName=Ta.tensorName),Ta.quantParameterTensorNames&&Ta.quantParameterTensorNames.length){ka.quantParameterTensorNames=[];for(var ru=0;ru<Ta.quantParameterTensorNames.length;++ru)ka.quantParameterTensorNames[ru]=Ea.onnx.StringStringEntryProto.toObject(Ta.quantParameterTensorNames[ru],Aa)}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.TensorAnnotation"},eu})(),La.GraphProto=(function(){function eu(Ta){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.node=va.emptyArray,eu.prototype.name="",eu.prototype.initializer=va.emptyArray,eu.prototype.sparseInitializer=va.emptyArray,eu.prototype.docString="",eu.prototype.input=va.emptyArray,eu.prototype.output=va.emptyArray,eu.prototype.valueInfo=va.emptyArray,eu.prototype.quantizationAnnotation=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.node!=null&&Ta.node.length)for(var ka=0;ka<Ta.node.length;++ka)Ea.onnx.NodeProto.encode(Ta.node[ka],Aa.uint32(10).fork()).ldelim();if(Ta.name!=null&&Object.hasOwnProperty.call(Ta,"name")&&Aa.uint32(18).string(Ta.name),Ta.initializer!=null&&Ta.initializer.length)for(var ka=0;ka<Ta.initializer.length;++ka)Ea.onnx.TensorProto.encode(Ta.initializer[ka],Aa.uint32(42).fork()).ldelim();if(Ta.docString!=null&&Object.hasOwnProperty.call(Ta,"docString")&&Aa.uint32(82).string(Ta.docString),Ta.input!=null&&Ta.input.length)for(var ka=0;ka<Ta.input.length;++ka)Ea.onnx.ValueInfoProto.encode(Ta.input[ka],Aa.uint32(90).fork()).ldelim();if(Ta.output!=null&&Ta.output.length)for(var ka=0;ka<Ta.output.length;++ka)Ea.onnx.ValueInfoProto.encode(Ta.output[ka],Aa.uint32(98).fork()).ldelim();if(Ta.valueInfo!=null&&Ta.valueInfo.length)for(var ka=0;ka<Ta.valueInfo.length;++ka)Ea.onnx.ValueInfoProto.encode(Ta.valueInfo[ka],Aa.uint32(106).fork()).ldelim();if(Ta.quantizationAnnotation!=null&&Ta.quantizationAnnotation.length)for(var ka=0;ka<Ta.quantizationAnnotation.length;++ka)Ea.onnx.TensorAnnotation.encode(Ta.quantizationAnnotation[ka],Aa.uint32(114).fork()).ldelim();if(Ta.sparseInitializer!=null&&Ta.sparseInitializer.length)for(var ka=0;ka<Ta.sparseInitializer.length;++ka)Ea.onnx.SparseTensorProto.encode(Ta.sparseInitializer[ka],Aa.uint32(122).fork()).ldelim();return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.GraphProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.node&&ru.node.length||(ru.node=[]),ru.node.push(Ea.onnx.NodeProto.decode(Ta,Ta.uint32()));break}case 2:{ru.name=Ta.string();break}case 5:{ru.initializer&&ru.initializer.length||(ru.initializer=[]),ru.initializer.push(Ea.onnx.TensorProto.decode(Ta,Ta.uint32()));break}case 15:{ru.sparseInitializer&&ru.sparseInitializer.length||(ru.sparseInitializer=[]),ru.sparseInitializer.push(Ea.onnx.SparseTensorProto.decode(Ta,Ta.uint32()));break}case 10:{ru.docString=Ta.string();break}case 11:{ru.input&&ru.input.length||(ru.input=[]),ru.input.push(Ea.onnx.ValueInfoProto.decode(Ta,Ta.uint32()));break}case 12:{ru.output&&ru.output.length||(ru.output=[]),ru.output.push(Ea.onnx.ValueInfoProto.decode(Ta,Ta.uint32()));break}case 13:{ru.valueInfo&&ru.valueInfo.length||(ru.valueInfo=[]),ru.valueInfo.push(Ea.onnx.ValueInfoProto.decode(Ta,Ta.uint32()));break}case 14:{ru.quantizationAnnotation&&ru.quantizationAnnotation.length||(ru.quantizationAnnotation=[]),ru.quantizationAnnotation.push(Ea.onnx.TensorAnnotation.decode(Ta,Ta.uint32()));break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.node!=null&&Ta.hasOwnProperty("node")){if(!Array.isArray(Ta.node))return"node: array expected";for(var Aa=0;Aa<Ta.node.length;++Aa){var ka=Ea.onnx.NodeProto.verify(Ta.node[Aa]);if(ka)return"node."+ka}}if(Ta.name!=null&&Ta.hasOwnProperty("name")&&!va.isString(Ta.name))return"name: string expected";if(Ta.initializer!=null&&Ta.hasOwnProperty("initializer")){if(!Array.isArray(Ta.initializer))return"initializer: array expected";for(var Aa=0;Aa<Ta.initializer.length;++Aa){var ka=Ea.onnx.TensorProto.verify(Ta.initializer[Aa]);if(ka)return"initializer."+ka}}if(Ta.sparseInitializer!=null&&Ta.hasOwnProperty("sparseInitializer")){if(!Array.isArray(Ta.sparseInitializer))return"sparseInitializer: array expected";for(var Aa=0;Aa<Ta.sparseInitializer.length;++Aa){var ka=Ea.onnx.SparseTensorProto.verify(Ta.sparseInitializer[Aa]);if(ka)return"sparseInitializer."+ka}}if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&!va.isString(Ta.docString))return"docString: string expected";if(Ta.input!=null&&Ta.hasOwnProperty("input")){if(!Array.isArray(Ta.input))return"input: array expected";for(var Aa=0;Aa<Ta.input.length;++Aa){var ka=Ea.onnx.ValueInfoProto.verify(Ta.input[Aa]);if(ka)return"input."+ka}}if(Ta.output!=null&&Ta.hasOwnProperty("output")){if(!Array.isArray(Ta.output))return"output: array expected";for(var Aa=0;Aa<Ta.output.length;++Aa){var ka=Ea.onnx.ValueInfoProto.verify(Ta.output[Aa]);if(ka)return"output."+ka}}if(Ta.valueInfo!=null&&Ta.hasOwnProperty("valueInfo")){if(!Array.isArray(Ta.valueInfo))return"valueInfo: array expected";for(var Aa=0;Aa<Ta.valueInfo.length;++Aa){var ka=Ea.onnx.ValueInfoProto.verify(Ta.valueInfo[Aa]);if(ka)return"valueInfo."+ka}}if(Ta.quantizationAnnotation!=null&&Ta.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(Ta.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var Aa=0;Aa<Ta.quantizationAnnotation.length;++Aa){var ka=Ea.onnx.TensorAnnotation.verify(Ta.quantizationAnnotation[Aa]);if(ka)return"quantizationAnnotation."+ka}}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.GraphProto)return Ta;var Aa=new Ea.onnx.GraphProto;if(Ta.node){if(!Array.isArray(Ta.node))throw TypeError(".onnx.GraphProto.node: array expected");Aa.node=[];for(var ka=0;ka<Ta.node.length;++ka){if(typeof Ta.node[ka]!="object")throw TypeError(".onnx.GraphProto.node: object expected");Aa.node[ka]=Ea.onnx.NodeProto.fromObject(Ta.node[ka])}}if(Ta.name!=null&&(Aa.name=String(Ta.name)),Ta.initializer){if(!Array.isArray(Ta.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");Aa.initializer=[];for(var ka=0;ka<Ta.initializer.length;++ka){if(typeof Ta.initializer[ka]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");Aa.initializer[ka]=Ea.onnx.TensorProto.fromObject(Ta.initializer[ka])}}if(Ta.sparseInitializer){if(!Array.isArray(Ta.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");Aa.sparseInitializer=[];for(var ka=0;ka<Ta.sparseInitializer.length;++ka){if(typeof Ta.sparseInitializer[ka]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");Aa.sparseInitializer[ka]=Ea.onnx.SparseTensorProto.fromObject(Ta.sparseInitializer[ka])}}if(Ta.docString!=null&&(Aa.docString=String(Ta.docString)),Ta.input){if(!Array.isArray(Ta.input))throw TypeError(".onnx.GraphProto.input: array expected");Aa.input=[];for(var ka=0;ka<Ta.input.length;++ka){if(typeof Ta.input[ka]!="object")throw TypeError(".onnx.GraphProto.input: object expected");Aa.input[ka]=Ea.onnx.ValueInfoProto.fromObject(Ta.input[ka])}}if(Ta.output){if(!Array.isArray(Ta.output))throw TypeError(".onnx.GraphProto.output: array expected");Aa.output=[];for(var ka=0;ka<Ta.output.length;++ka){if(typeof Ta.output[ka]!="object")throw TypeError(".onnx.GraphProto.output: object expected");Aa.output[ka]=Ea.onnx.ValueInfoProto.fromObject(Ta.output[ka])}}if(Ta.valueInfo){if(!Array.isArray(Ta.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");Aa.valueInfo=[];for(var ka=0;ka<Ta.valueInfo.length;++ka){if(typeof Ta.valueInfo[ka]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");Aa.valueInfo[ka]=Ea.onnx.ValueInfoProto.fromObject(Ta.valueInfo[ka])}}if(Ta.quantizationAnnotation){if(!Array.isArray(Ta.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");Aa.quantizationAnnotation=[];for(var ka=0;ka<Ta.quantizationAnnotation.length;++ka){if(typeof Ta.quantizationAnnotation[ka]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");Aa.quantizationAnnotation[ka]=Ea.onnx.TensorAnnotation.fromObject(Ta.quantizationAnnotation[ka])}}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.node=[],ka.initializer=[],ka.input=[],ka.output=[],ka.valueInfo=[],ka.quantizationAnnotation=[],ka.sparseInitializer=[]),Aa.defaults&&(ka.name="",ka.docString=""),Ta.node&&Ta.node.length){ka.node=[];for(var ru=0;ru<Ta.node.length;++ru)ka.node[ru]=Ea.onnx.NodeProto.toObject(Ta.node[ru],Aa)}if(Ta.name!=null&&Ta.hasOwnProperty("name")&&(ka.name=Ta.name),Ta.initializer&&Ta.initializer.length){ka.initializer=[];for(var ru=0;ru<Ta.initializer.length;++ru)ka.initializer[ru]=Ea.onnx.TensorProto.toObject(Ta.initializer[ru],Aa)}if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&(ka.docString=Ta.docString),Ta.input&&Ta.input.length){ka.input=[];for(var ru=0;ru<Ta.input.length;++ru)ka.input[ru]=Ea.onnx.ValueInfoProto.toObject(Ta.input[ru],Aa)}if(Ta.output&&Ta.output.length){ka.output=[];for(var ru=0;ru<Ta.output.length;++ru)ka.output[ru]=Ea.onnx.ValueInfoProto.toObject(Ta.output[ru],Aa)}if(Ta.valueInfo&&Ta.valueInfo.length){ka.valueInfo=[];for(var ru=0;ru<Ta.valueInfo.length;++ru)ka.valueInfo[ru]=Ea.onnx.ValueInfoProto.toObject(Ta.valueInfo[ru],Aa)}if(Ta.quantizationAnnotation&&Ta.quantizationAnnotation.length){ka.quantizationAnnotation=[];for(var ru=0;ru<Ta.quantizationAnnotation.length;++ru)ka.quantizationAnnotation[ru]=Ea.onnx.TensorAnnotation.toObject(Ta.quantizationAnnotation[ru],Aa)}if(Ta.sparseInitializer&&Ta.sparseInitializer.length){ka.sparseInitializer=[];for(var ru=0;ru<Ta.sparseInitializer.length;++ru)ka.sparseInitializer[ru]=Ea.onnx.SparseTensorProto.toObject(Ta.sparseInitializer[ru],Aa)}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.GraphProto"},eu})(),La.TensorProto=(function(){function eu(Ta){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.dims=va.emptyArray,eu.prototype.dataType=0,eu.prototype.segment=null,eu.prototype.floatData=va.emptyArray,eu.prototype.int32Data=va.emptyArray,eu.prototype.stringData=va.emptyArray,eu.prototype.int64Data=va.emptyArray,eu.prototype.name="",eu.prototype.docString="",eu.prototype.rawData=va.newBuffer([]),eu.prototype.externalData=va.emptyArray,eu.prototype.dataLocation=0,eu.prototype.doubleData=va.emptyArray,eu.prototype.uint64Data=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.dims!=null&&Ta.dims.length){Aa.uint32(10).fork();for(var ka=0;ka<Ta.dims.length;++ka)Aa.int64(Ta.dims[ka]);Aa.ldelim()}if(Ta.dataType!=null&&Object.hasOwnProperty.call(Ta,"dataType")&&Aa.uint32(16).int32(Ta.dataType),Ta.segment!=null&&Object.hasOwnProperty.call(Ta,"segment")&&Ea.onnx.TensorProto.Segment.encode(Ta.segment,Aa.uint32(26).fork()).ldelim(),Ta.floatData!=null&&Ta.floatData.length){Aa.uint32(34).fork();for(var ka=0;ka<Ta.floatData.length;++ka)Aa.float(Ta.floatData[ka]);Aa.ldelim()}if(Ta.int32Data!=null&&Ta.int32Data.length){Aa.uint32(42).fork();for(var ka=0;ka<Ta.int32Data.length;++ka)Aa.int32(Ta.int32Data[ka]);Aa.ldelim()}if(Ta.stringData!=null&&Ta.stringData.length)for(var ka=0;ka<Ta.stringData.length;++ka)Aa.uint32(50).bytes(Ta.stringData[ka]);if(Ta.int64Data!=null&&Ta.int64Data.length){Aa.uint32(58).fork();for(var ka=0;ka<Ta.int64Data.length;++ka)Aa.int64(Ta.int64Data[ka]);Aa.ldelim()}if(Ta.name!=null&&Object.hasOwnProperty.call(Ta,"name")&&Aa.uint32(66).string(Ta.name),Ta.rawData!=null&&Object.hasOwnProperty.call(Ta,"rawData")&&Aa.uint32(74).bytes(Ta.rawData),Ta.doubleData!=null&&Ta.doubleData.length){Aa.uint32(82).fork();for(var ka=0;ka<Ta.doubleData.length;++ka)Aa.double(Ta.doubleData[ka]);Aa.ldelim()}if(Ta.uint64Data!=null&&Ta.uint64Data.length){Aa.uint32(90).fork();for(var ka=0;ka<Ta.uint64Data.length;++ka)Aa.uint64(Ta.uint64Data[ka]);Aa.ldelim()}if(Ta.docString!=null&&Object.hasOwnProperty.call(Ta,"docString")&&Aa.uint32(98).string(Ta.docString),Ta.externalData!=null&&Ta.externalData.length)for(var ka=0;ka<Ta.externalData.length;++ka)Ea.onnx.StringStringEntryProto.encode(Ta.externalData[ka],Aa.uint32(106).fork()).ldelim();return Ta.dataLocation!=null&&Object.hasOwnProperty.call(Ta,"dataLocation")&&Aa.uint32(112).int32(Ta.dataLocation),Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.TensorProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{if(ru.dims&&ru.dims.length||(ru.dims=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.dims.push(Ta.int64());else ru.dims.push(Ta.int64());break}case 2:{ru.dataType=Ta.int32();break}case 3:{ru.segment=Ea.onnx.TensorProto.Segment.decode(Ta,Ta.uint32());break}case 4:{if(ru.floatData&&ru.floatData.length||(ru.floatData=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.floatData.push(Ta.float());else ru.floatData.push(Ta.float());break}case 5:{if(ru.int32Data&&ru.int32Data.length||(ru.int32Data=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.int32Data.push(Ta.int32());else ru.int32Data.push(Ta.int32());break}case 6:{ru.stringData&&ru.stringData.length||(ru.stringData=[]),ru.stringData.push(Ta.bytes());break}case 7:{if(ru.int64Data&&ru.int64Data.length||(ru.int64Data=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.int64Data.push(Ta.int64());else ru.int64Data.push(Ta.int64());break}case 8:{ru.name=Ta.string();break}case 12:{ru.docString=Ta.string();break}case 9:{ru.rawData=Ta.bytes();break}case 13:{ru.externalData&&ru.externalData.length||(ru.externalData=[]),ru.externalData.push(Ea.onnx.StringStringEntryProto.decode(Ta,Ta.uint32()));break}case 14:{ru.dataLocation=Ta.int32();break}case 10:{if(ru.doubleData&&ru.doubleData.length||(ru.doubleData=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.doubleData.push(Ta.double());else ru.doubleData.push(Ta.double());break}case 11:{if(ru.uint64Data&&ru.uint64Data.length||(ru.uint64Data=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.uint64Data.push(Ta.uint64());else ru.uint64Data.push(Ta.uint64());break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.dims!=null&&Ta.hasOwnProperty("dims")){if(!Array.isArray(Ta.dims))return"dims: array expected";for(var Aa=0;Aa<Ta.dims.length;++Aa)if(!va.isInteger(Ta.dims[Aa])&&!(Ta.dims[Aa]&&va.isInteger(Ta.dims[Aa].low)&&va.isInteger(Ta.dims[Aa].high)))return"dims: integer|Long[] expected"}if(Ta.dataType!=null&&Ta.hasOwnProperty("dataType")&&!va.isInteger(Ta.dataType))return"dataType: integer expected";if(Ta.segment!=null&&Ta.hasOwnProperty("segment")){var ka=Ea.onnx.TensorProto.Segment.verify(Ta.segment);if(ka)return"segment."+ka}if(Ta.floatData!=null&&Ta.hasOwnProperty("floatData")){if(!Array.isArray(Ta.floatData))return"floatData: array expected";for(var Aa=0;Aa<Ta.floatData.length;++Aa)if(typeof Ta.floatData[Aa]!="number")return"floatData: number[] expected"}if(Ta.int32Data!=null&&Ta.hasOwnProperty("int32Data")){if(!Array.isArray(Ta.int32Data))return"int32Data: array expected";for(var Aa=0;Aa<Ta.int32Data.length;++Aa)if(!va.isInteger(Ta.int32Data[Aa]))return"int32Data: integer[] expected"}if(Ta.stringData!=null&&Ta.hasOwnProperty("stringData")){if(!Array.isArray(Ta.stringData))return"stringData: array expected";for(var Aa=0;Aa<Ta.stringData.length;++Aa)if(!(Ta.stringData[Aa]&&typeof Ta.stringData[Aa].length=="number"||va.isString(Ta.stringData[Aa])))return"stringData: buffer[] expected"}if(Ta.int64Data!=null&&Ta.hasOwnProperty("int64Data")){if(!Array.isArray(Ta.int64Data))return"int64Data: array expected";for(var Aa=0;Aa<Ta.int64Data.length;++Aa)if(!va.isInteger(Ta.int64Data[Aa])&&!(Ta.int64Data[Aa]&&va.isInteger(Ta.int64Data[Aa].low)&&va.isInteger(Ta.int64Data[Aa].high)))return"int64Data: integer|Long[] expected"}if(Ta.name!=null&&Ta.hasOwnProperty("name")&&!va.isString(Ta.name))return"name: string expected";if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&!va.isString(Ta.docString))return"docString: string expected";if(Ta.rawData!=null&&Ta.hasOwnProperty("rawData")&&!(Ta.rawData&&typeof Ta.rawData.length=="number"||va.isString(Ta.rawData)))return"rawData: buffer expected";if(Ta.externalData!=null&&Ta.hasOwnProperty("externalData")){if(!Array.isArray(Ta.externalData))return"externalData: array expected";for(var Aa=0;Aa<Ta.externalData.length;++Aa){var ka=Ea.onnx.StringStringEntryProto.verify(Ta.externalData[Aa]);if(ka)return"externalData."+ka}}if(Ta.dataLocation!=null&&Ta.hasOwnProperty("dataLocation"))switch(Ta.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(Ta.doubleData!=null&&Ta.hasOwnProperty("doubleData")){if(!Array.isArray(Ta.doubleData))return"doubleData: array expected";for(var Aa=0;Aa<Ta.doubleData.length;++Aa)if(typeof Ta.doubleData[Aa]!="number")return"doubleData: number[] expected"}if(Ta.uint64Data!=null&&Ta.hasOwnProperty("uint64Data")){if(!Array.isArray(Ta.uint64Data))return"uint64Data: array expected";for(var Aa=0;Aa<Ta.uint64Data.length;++Aa)if(!va.isInteger(Ta.uint64Data[Aa])&&!(Ta.uint64Data[Aa]&&va.isInteger(Ta.uint64Data[Aa].low)&&va.isInteger(Ta.uint64Data[Aa].high)))return"uint64Data: integer|Long[] expected"}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.TensorProto)return Ta;var Aa=new Ea.onnx.TensorProto;if(Ta.dims){if(!Array.isArray(Ta.dims))throw TypeError(".onnx.TensorProto.dims: array expected");Aa.dims=[];for(var ka=0;ka<Ta.dims.length;++ka)va.Long?(Aa.dims[ka]=va.Long.fromValue(Ta.dims[ka])).unsigned=!1:typeof Ta.dims[ka]=="string"?Aa.dims[ka]=parseInt(Ta.dims[ka],10):typeof Ta.dims[ka]=="number"?Aa.dims[ka]=Ta.dims[ka]:typeof Ta.dims[ka]=="object"&&(Aa.dims[ka]=new va.LongBits(Ta.dims[ka].low>>>0,Ta.dims[ka].high>>>0).toNumber())}if(Ta.dataType!=null&&(Aa.dataType=Ta.dataType|0),Ta.segment!=null){if(typeof Ta.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");Aa.segment=Ea.onnx.TensorProto.Segment.fromObject(Ta.segment)}if(Ta.floatData){if(!Array.isArray(Ta.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");Aa.floatData=[];for(var ka=0;ka<Ta.floatData.length;++ka)Aa.floatData[ka]=Number(Ta.floatData[ka])}if(Ta.int32Data){if(!Array.isArray(Ta.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");Aa.int32Data=[];for(var ka=0;ka<Ta.int32Data.length;++ka)Aa.int32Data[ka]=Ta.int32Data[ka]|0}if(Ta.stringData){if(!Array.isArray(Ta.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");Aa.stringData=[];for(var ka=0;ka<Ta.stringData.length;++ka)typeof Ta.stringData[ka]=="string"?va.base64.decode(Ta.stringData[ka],Aa.stringData[ka]=va.newBuffer(va.base64.length(Ta.stringData[ka])),0):Ta.stringData[ka].length>=0&&(Aa.stringData[ka]=Ta.stringData[ka])}if(Ta.int64Data){if(!Array.isArray(Ta.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");Aa.int64Data=[];for(var ka=0;ka<Ta.int64Data.length;++ka)va.Long?(Aa.int64Data[ka]=va.Long.fromValue(Ta.int64Data[ka])).unsigned=!1:typeof Ta.int64Data[ka]=="string"?Aa.int64Data[ka]=parseInt(Ta.int64Data[ka],10):typeof Ta.int64Data[ka]=="number"?Aa.int64Data[ka]=Ta.int64Data[ka]:typeof Ta.int64Data[ka]=="object"&&(Aa.int64Data[ka]=new va.LongBits(Ta.int64Data[ka].low>>>0,Ta.int64Data[ka].high>>>0).toNumber())}if(Ta.name!=null&&(Aa.name=String(Ta.name)),Ta.docString!=null&&(Aa.docString=String(Ta.docString)),Ta.rawData!=null&&(typeof Ta.rawData=="string"?va.base64.decode(Ta.rawData,Aa.rawData=va.newBuffer(va.base64.length(Ta.rawData)),0):Ta.rawData.length>=0&&(Aa.rawData=Ta.rawData)),Ta.externalData){if(!Array.isArray(Ta.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");Aa.externalData=[];for(var ka=0;ka<Ta.externalData.length;++ka){if(typeof Ta.externalData[ka]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");Aa.externalData[ka]=Ea.onnx.StringStringEntryProto.fromObject(Ta.externalData[ka])}}switch(Ta.dataLocation){default:if(typeof Ta.dataLocation=="number"){Aa.dataLocation=Ta.dataLocation;break}break;case"DEFAULT":case 0:Aa.dataLocation=0;break;case"EXTERNAL":case 1:Aa.dataLocation=1;break}if(Ta.doubleData){if(!Array.isArray(Ta.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");Aa.doubleData=[];for(var ka=0;ka<Ta.doubleData.length;++ka)Aa.doubleData[ka]=Number(Ta.doubleData[ka])}if(Ta.uint64Data){if(!Array.isArray(Ta.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");Aa.uint64Data=[];for(var ka=0;ka<Ta.uint64Data.length;++ka)va.Long?(Aa.uint64Data[ka]=va.Long.fromValue(Ta.uint64Data[ka])).unsigned=!0:typeof Ta.uint64Data[ka]=="string"?Aa.uint64Data[ka]=parseInt(Ta.uint64Data[ka],10):typeof Ta.uint64Data[ka]=="number"?Aa.uint64Data[ka]=Ta.uint64Data[ka]:typeof Ta.uint64Data[ka]=="object"&&(Aa.uint64Data[ka]=new va.LongBits(Ta.uint64Data[ka].low>>>0,Ta.uint64Data[ka].high>>>0).toNumber(!0))}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.dims=[],ka.floatData=[],ka.int32Data=[],ka.stringData=[],ka.int64Data=[],ka.doubleData=[],ka.uint64Data=[],ka.externalData=[]),Aa.defaults&&(ka.dataType=0,ka.segment=null,ka.name="",Aa.bytes===String?ka.rawData="":(ka.rawData=[],Aa.bytes!==Array&&(ka.rawData=va.newBuffer(ka.rawData))),ka.docString="",ka.dataLocation=Aa.enums===String?"DEFAULT":0),Ta.dims&&Ta.dims.length){ka.dims=[];for(var ru=0;ru<Ta.dims.length;++ru)typeof Ta.dims[ru]=="number"?ka.dims[ru]=Aa.longs===String?String(Ta.dims[ru]):Ta.dims[ru]:ka.dims[ru]=Aa.longs===String?va.Long.prototype.toString.call(Ta.dims[ru]):Aa.longs===Number?new va.LongBits(Ta.dims[ru].low>>>0,Ta.dims[ru].high>>>0).toNumber():Ta.dims[ru]}if(Ta.dataType!=null&&Ta.hasOwnProperty("dataType")&&(ka.dataType=Ta.dataType),Ta.segment!=null&&Ta.hasOwnProperty("segment")&&(ka.segment=Ea.onnx.TensorProto.Segment.toObject(Ta.segment,Aa)),Ta.floatData&&Ta.floatData.length){ka.floatData=[];for(var ru=0;ru<Ta.floatData.length;++ru)ka.floatData[ru]=Aa.json&&!isFinite(Ta.floatData[ru])?String(Ta.floatData[ru]):Ta.floatData[ru]}if(Ta.int32Data&&Ta.int32Data.length){ka.int32Data=[];for(var ru=0;ru<Ta.int32Data.length;++ru)ka.int32Data[ru]=Ta.int32Data[ru]}if(Ta.stringData&&Ta.stringData.length){ka.stringData=[];for(var ru=0;ru<Ta.stringData.length;++ru)ka.stringData[ru]=Aa.bytes===String?va.base64.encode(Ta.stringData[ru],0,Ta.stringData[ru].length):Aa.bytes===Array?Array.prototype.slice.call(Ta.stringData[ru]):Ta.stringData[ru]}if(Ta.int64Data&&Ta.int64Data.length){ka.int64Data=[];for(var ru=0;ru<Ta.int64Data.length;++ru)typeof Ta.int64Data[ru]=="number"?ka.int64Data[ru]=Aa.longs===String?String(Ta.int64Data[ru]):Ta.int64Data[ru]:ka.int64Data[ru]=Aa.longs===String?va.Long.prototype.toString.call(Ta.int64Data[ru]):Aa.longs===Number?new va.LongBits(Ta.int64Data[ru].low>>>0,Ta.int64Data[ru].high>>>0).toNumber():Ta.int64Data[ru]}if(Ta.name!=null&&Ta.hasOwnProperty("name")&&(ka.name=Ta.name),Ta.rawData!=null&&Ta.hasOwnProperty("rawData")&&(ka.rawData=Aa.bytes===String?va.base64.encode(Ta.rawData,0,Ta.rawData.length):Aa.bytes===Array?Array.prototype.slice.call(Ta.rawData):Ta.rawData),Ta.doubleData&&Ta.doubleData.length){ka.doubleData=[];for(var ru=0;ru<Ta.doubleData.length;++ru)ka.doubleData[ru]=Aa.json&&!isFinite(Ta.doubleData[ru])?String(Ta.doubleData[ru]):Ta.doubleData[ru]}if(Ta.uint64Data&&Ta.uint64Data.length){ka.uint64Data=[];for(var ru=0;ru<Ta.uint64Data.length;++ru)typeof Ta.uint64Data[ru]=="number"?ka.uint64Data[ru]=Aa.longs===String?String(Ta.uint64Data[ru]):Ta.uint64Data[ru]:ka.uint64Data[ru]=Aa.longs===String?va.Long.prototype.toString.call(Ta.uint64Data[ru]):Aa.longs===Number?new va.LongBits(Ta.uint64Data[ru].low>>>0,Ta.uint64Data[ru].high>>>0).toNumber(!0):Ta.uint64Data[ru]}if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&(ka.docString=Ta.docString),Ta.externalData&&Ta.externalData.length){ka.externalData=[];for(var ru=0;ru<Ta.externalData.length;++ru)ka.externalData[ru]=Ea.onnx.StringStringEntryProto.toObject(Ta.externalData[ru],Aa)}return Ta.dataLocation!=null&&Ta.hasOwnProperty("dataLocation")&&(ka.dataLocation=Aa.enums===String?Ea.onnx.TensorProto.DataLocation[Ta.dataLocation]===void 0?Ta.dataLocation:Ea.onnx.TensorProto.DataLocation[Ta.dataLocation]:Ta.dataLocation),ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.TensorProto"},eu.DataType=(function(){var Ta={},Aa=Object.create(Ta);return Aa[Ta[0]="UNDEFINED"]=0,Aa[Ta[1]="FLOAT"]=1,Aa[Ta[2]="UINT8"]=2,Aa[Ta[3]="INT8"]=3,Aa[Ta[4]="UINT16"]=4,Aa[Ta[5]="INT16"]=5,Aa[Ta[6]="INT32"]=6,Aa[Ta[7]="INT64"]=7,Aa[Ta[8]="STRING"]=8,Aa[Ta[9]="BOOL"]=9,Aa[Ta[10]="FLOAT16"]=10,Aa[Ta[11]="DOUBLE"]=11,Aa[Ta[12]="UINT32"]=12,Aa[Ta[13]="UINT64"]=13,Aa[Ta[14]="COMPLEX64"]=14,Aa[Ta[15]="COMPLEX128"]=15,Aa[Ta[16]="BFLOAT16"]=16,Aa[Ta[17]="FLOAT8E4M3FN"]=17,Aa[Ta[18]="FLOAT8E4M3FNUZ"]=18,Aa[Ta[19]="FLOAT8E5M2"]=19,Aa[Ta[20]="FLOAT8E5M2FNUZ"]=20,Aa})(),eu.Segment=(function(){function Ta(Aa){if(Aa)for(var ka=Object.keys(Aa),ru=0;ru<ka.length;++ru)Aa[ka[ru]]!=null&&(this[ka[ru]]=Aa[ka[ru]])}return Ta.prototype.begin=va.Long?va.Long.fromBits(0,0,!1):0,Ta.prototype.end=va.Long?va.Long.fromBits(0,0,!1):0,Ta.create=function(Aa){return new Ta(Aa)},Ta.encode=function(Aa,ka){return ka||(ka=Sa.create()),Aa.begin!=null&&Object.hasOwnProperty.call(Aa,"begin")&&ka.uint32(8).int64(Aa.begin),Aa.end!=null&&Object.hasOwnProperty.call(Aa,"end")&&ka.uint32(16).int64(Aa.end),ka},Ta.encodeDelimited=function(Aa,ka){return this.encode(Aa,ka).ldelim()},Ta.decode=function(Aa,ka){Aa instanceof xa||(Aa=xa.create(Aa));for(var ru=ka===void 0?Aa.len:Aa.pos+ka,nu=new Ea.onnx.TensorProto.Segment;Aa.pos<ru;){var su=Aa.uint32();switch(su>>>3){case 1:{nu.begin=Aa.int64();break}case 2:{nu.end=Aa.int64();break}default:Aa.skipType(su&7);break}}return nu},Ta.decodeDelimited=function(Aa){return Aa instanceof xa||(Aa=new xa(Aa)),this.decode(Aa,Aa.uint32())},Ta.verify=function(Aa){return typeof Aa!="object"||Aa===null?"object expected":Aa.begin!=null&&Aa.hasOwnProperty("begin")&&!va.isInteger(Aa.begin)&&!(Aa.begin&&va.isInteger(Aa.begin.low)&&va.isInteger(Aa.begin.high))?"begin: integer|Long expected":Aa.end!=null&&Aa.hasOwnProperty("end")&&!va.isInteger(Aa.end)&&!(Aa.end&&va.isInteger(Aa.end.low)&&va.isInteger(Aa.end.high))?"end: integer|Long expected":null},Ta.fromObject=function(Aa){if(Aa instanceof Ea.onnx.TensorProto.Segment)return Aa;var ka=new Ea.onnx.TensorProto.Segment;return Aa.begin!=null&&(va.Long?(ka.begin=va.Long.fromValue(Aa.begin)).unsigned=!1:typeof Aa.begin=="string"?ka.begin=parseInt(Aa.begin,10):typeof Aa.begin=="number"?ka.begin=Aa.begin:typeof Aa.begin=="object"&&(ka.begin=new va.LongBits(Aa.begin.low>>>0,Aa.begin.high>>>0).toNumber())),Aa.end!=null&&(va.Long?(ka.end=va.Long.fromValue(Aa.end)).unsigned=!1:typeof Aa.end=="string"?ka.end=parseInt(Aa.end,10):typeof Aa.end=="number"?ka.end=Aa.end:typeof Aa.end=="object"&&(ka.end=new va.LongBits(Aa.end.low>>>0,Aa.end.high>>>0).toNumber())),ka},Ta.toObject=function(Aa,ka){ka||(ka={});var ru={};if(ka.defaults){if(va.Long){var nu=new va.Long(0,0,!1);ru.begin=ka.longs===String?nu.toString():ka.longs===Number?nu.toNumber():nu}else ru.begin=ka.longs===String?"0":0;if(va.Long){var nu=new va.Long(0,0,!1);ru.end=ka.longs===String?nu.toString():ka.longs===Number?nu.toNumber():nu}else ru.end=ka.longs===String?"0":0}return Aa.begin!=null&&Aa.hasOwnProperty("begin")&&(typeof Aa.begin=="number"?ru.begin=ka.longs===String?String(Aa.begin):Aa.begin:ru.begin=ka.longs===String?va.Long.prototype.toString.call(Aa.begin):ka.longs===Number?new va.LongBits(Aa.begin.low>>>0,Aa.begin.high>>>0).toNumber():Aa.begin),Aa.end!=null&&Aa.hasOwnProperty("end")&&(typeof Aa.end=="number"?ru.end=ka.longs===String?String(Aa.end):Aa.end:ru.end=ka.longs===String?va.Long.prototype.toString.call(Aa.end):ka.longs===Number?new va.LongBits(Aa.end.low>>>0,Aa.end.high>>>0).toNumber():Aa.end),ru},Ta.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},Ta.getTypeUrl=function(Aa){return Aa===void 0&&(Aa="type.googleapis.com"),Aa+"/onnx.TensorProto.Segment"},Ta})(),eu.DataLocation=(function(){var Ta={},Aa=Object.create(Ta);return Aa[Ta[0]="DEFAULT"]=0,Aa[Ta[1]="EXTERNAL"]=1,Aa})(),eu})(),La.SparseTensorProto=(function(){function eu(Ta){if(this.dims=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.values=null,eu.prototype.indices=null,eu.prototype.dims=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.values!=null&&Object.hasOwnProperty.call(Ta,"values")&&Ea.onnx.TensorProto.encode(Ta.values,Aa.uint32(10).fork()).ldelim(),Ta.indices!=null&&Object.hasOwnProperty.call(Ta,"indices")&&Ea.onnx.TensorProto.encode(Ta.indices,Aa.uint32(18).fork()).ldelim(),Ta.dims!=null&&Ta.dims.length){Aa.uint32(26).fork();for(var ka=0;ka<Ta.dims.length;++ka)Aa.int64(Ta.dims[ka]);Aa.ldelim()}return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.SparseTensorProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.values=Ea.onnx.TensorProto.decode(Ta,Ta.uint32());break}case 2:{ru.indices=Ea.onnx.TensorProto.decode(Ta,Ta.uint32());break}case 3:{if(ru.dims&&ru.dims.length||(ru.dims=[]),(nu&7)===2)for(var su=Ta.uint32()+Ta.pos;Ta.pos<su;)ru.dims.push(Ta.int64());else ru.dims.push(Ta.int64());break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.values!=null&&Ta.hasOwnProperty("values")){var Aa=Ea.onnx.TensorProto.verify(Ta.values);if(Aa)return"values."+Aa}if(Ta.indices!=null&&Ta.hasOwnProperty("indices")){var Aa=Ea.onnx.TensorProto.verify(Ta.indices);if(Aa)return"indices."+Aa}if(Ta.dims!=null&&Ta.hasOwnProperty("dims")){if(!Array.isArray(Ta.dims))return"dims: array expected";for(var ka=0;ka<Ta.dims.length;++ka)if(!va.isInteger(Ta.dims[ka])&&!(Ta.dims[ka]&&va.isInteger(Ta.dims[ka].low)&&va.isInteger(Ta.dims[ka].high)))return"dims: integer|Long[] expected"}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.SparseTensorProto)return Ta;var Aa=new Ea.onnx.SparseTensorProto;if(Ta.values!=null){if(typeof Ta.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");Aa.values=Ea.onnx.TensorProto.fromObject(Ta.values)}if(Ta.indices!=null){if(typeof Ta.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");Aa.indices=Ea.onnx.TensorProto.fromObject(Ta.indices)}if(Ta.dims){if(!Array.isArray(Ta.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");Aa.dims=[];for(var ka=0;ka<Ta.dims.length;++ka)va.Long?(Aa.dims[ka]=va.Long.fromValue(Ta.dims[ka])).unsigned=!1:typeof Ta.dims[ka]=="string"?Aa.dims[ka]=parseInt(Ta.dims[ka],10):typeof Ta.dims[ka]=="number"?Aa.dims[ka]=Ta.dims[ka]:typeof Ta.dims[ka]=="object"&&(Aa.dims[ka]=new va.LongBits(Ta.dims[ka].low>>>0,Ta.dims[ka].high>>>0).toNumber())}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.dims=[]),Aa.defaults&&(ka.values=null,ka.indices=null),Ta.values!=null&&Ta.hasOwnProperty("values")&&(ka.values=Ea.onnx.TensorProto.toObject(Ta.values,Aa)),Ta.indices!=null&&Ta.hasOwnProperty("indices")&&(ka.indices=Ea.onnx.TensorProto.toObject(Ta.indices,Aa)),Ta.dims&&Ta.dims.length){ka.dims=[];for(var ru=0;ru<Ta.dims.length;++ru)typeof Ta.dims[ru]=="number"?ka.dims[ru]=Aa.longs===String?String(Ta.dims[ru]):Ta.dims[ru]:ka.dims[ru]=Aa.longs===String?va.Long.prototype.toString.call(Ta.dims[ru]):Aa.longs===Number?new va.LongBits(Ta.dims[ru].low>>>0,Ta.dims[ru].high>>>0).toNumber():Ta.dims[ru]}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.SparseTensorProto"},eu})(),La.TensorShapeProto=(function(){function eu(Ta){if(this.dim=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.dim=va.emptyArray,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.dim!=null&&Ta.dim.length)for(var ka=0;ka<Ta.dim.length;++ka)Ea.onnx.TensorShapeProto.Dimension.encode(Ta.dim[ka],Aa.uint32(10).fork()).ldelim();return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.TensorShapeProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.dim&&ru.dim.length||(ru.dim=[]),ru.dim.push(Ea.onnx.TensorShapeProto.Dimension.decode(Ta,Ta.uint32()));break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.dim!=null&&Ta.hasOwnProperty("dim")){if(!Array.isArray(Ta.dim))return"dim: array expected";for(var Aa=0;Aa<Ta.dim.length;++Aa){var ka=Ea.onnx.TensorShapeProto.Dimension.verify(Ta.dim[Aa]);if(ka)return"dim."+ka}}return null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.TensorShapeProto)return Ta;var Aa=new Ea.onnx.TensorShapeProto;if(Ta.dim){if(!Array.isArray(Ta.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");Aa.dim=[];for(var ka=0;ka<Ta.dim.length;++ka){if(typeof Ta.dim[ka]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");Aa.dim[ka]=Ea.onnx.TensorShapeProto.Dimension.fromObject(Ta.dim[ka])}}return Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.dim=[]),Ta.dim&&Ta.dim.length){ka.dim=[];for(var ru=0;ru<Ta.dim.length;++ru)ka.dim[ru]=Ea.onnx.TensorShapeProto.Dimension.toObject(Ta.dim[ru],Aa)}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.TensorShapeProto"},eu.Dimension=(function(){function Ta(ka){if(ka)for(var ru=Object.keys(ka),nu=0;nu<ru.length;++nu)ka[ru[nu]]!=null&&(this[ru[nu]]=ka[ru[nu]])}Ta.prototype.dimValue=null,Ta.prototype.dimParam=null,Ta.prototype.denotation="";var Aa;return Object.defineProperty(Ta.prototype,"value",{get:va.oneOfGetter(Aa=["dimValue","dimParam"]),set:va.oneOfSetter(Aa)}),Ta.create=function(ka){return new Ta(ka)},Ta.encode=function(ka,ru){return ru||(ru=Sa.create()),ka.dimValue!=null&&Object.hasOwnProperty.call(ka,"dimValue")&&ru.uint32(8).int64(ka.dimValue),ka.dimParam!=null&&Object.hasOwnProperty.call(ka,"dimParam")&&ru.uint32(18).string(ka.dimParam),ka.denotation!=null&&Object.hasOwnProperty.call(ka,"denotation")&&ru.uint32(26).string(ka.denotation),ru},Ta.encodeDelimited=function(ka,ru){return this.encode(ka,ru).ldelim()},Ta.decode=function(ka,ru){ka instanceof xa||(ka=xa.create(ka));for(var nu=ru===void 0?ka.len:ka.pos+ru,su=new Ea.onnx.TensorShapeProto.Dimension;ka.pos<nu;){var uu=ka.uint32();switch(uu>>>3){case 1:{su.dimValue=ka.int64();break}case 2:{su.dimParam=ka.string();break}case 3:{su.denotation=ka.string();break}default:ka.skipType(uu&7);break}}return su},Ta.decodeDelimited=function(ka){return ka instanceof xa||(ka=new xa(ka)),this.decode(ka,ka.uint32())},Ta.verify=function(ka){if(typeof ka!="object"||ka===null)return"object expected";var ru={};if(ka.dimValue!=null&&ka.hasOwnProperty("dimValue")&&(ru.value=1,!va.isInteger(ka.dimValue)&&!(ka.dimValue&&va.isInteger(ka.dimValue.low)&&va.isInteger(ka.dimValue.high))))return"dimValue: integer|Long expected";if(ka.dimParam!=null&&ka.hasOwnProperty("dimParam")){if(ru.value===1)return"value: multiple values";if(ru.value=1,!va.isString(ka.dimParam))return"dimParam: string expected"}return ka.denotation!=null&&ka.hasOwnProperty("denotation")&&!va.isString(ka.denotation)?"denotation: string expected":null},Ta.fromObject=function(ka){if(ka instanceof Ea.onnx.TensorShapeProto.Dimension)return ka;var ru=new Ea.onnx.TensorShapeProto.Dimension;return ka.dimValue!=null&&(va.Long?(ru.dimValue=va.Long.fromValue(ka.dimValue)).unsigned=!1:typeof ka.dimValue=="string"?ru.dimValue=parseInt(ka.dimValue,10):typeof ka.dimValue=="number"?ru.dimValue=ka.dimValue:typeof ka.dimValue=="object"&&(ru.dimValue=new va.LongBits(ka.dimValue.low>>>0,ka.dimValue.high>>>0).toNumber())),ka.dimParam!=null&&(ru.dimParam=String(ka.dimParam)),ka.denotation!=null&&(ru.denotation=String(ka.denotation)),ru},Ta.toObject=function(ka,ru){ru||(ru={});var nu={};return ru.defaults&&(nu.denotation=""),ka.dimValue!=null&&ka.hasOwnProperty("dimValue")&&(typeof ka.dimValue=="number"?nu.dimValue=ru.longs===String?String(ka.dimValue):ka.dimValue:nu.dimValue=ru.longs===String?va.Long.prototype.toString.call(ka.dimValue):ru.longs===Number?new va.LongBits(ka.dimValue.low>>>0,ka.dimValue.high>>>0).toNumber():ka.dimValue,ru.oneofs&&(nu.value="dimValue")),ka.dimParam!=null&&ka.hasOwnProperty("dimParam")&&(nu.dimParam=ka.dimParam,ru.oneofs&&(nu.value="dimParam")),ka.denotation!=null&&ka.hasOwnProperty("denotation")&&(nu.denotation=ka.denotation),nu},Ta.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},Ta.getTypeUrl=function(ka){return ka===void 0&&(ka="type.googleapis.com"),ka+"/onnx.TensorShapeProto.Dimension"},Ta})(),eu})(),La.TypeProto=(function(){function eu(Aa){if(Aa)for(var ka=Object.keys(Aa),ru=0;ru<ka.length;++ru)Aa[ka[ru]]!=null&&(this[ka[ru]]=Aa[ka[ru]])}eu.prototype.tensorType=null,eu.prototype.sequenceType=null,eu.prototype.mapType=null,eu.prototype.optionalType=null,eu.prototype.sparseTensorType=null,eu.prototype.denotation="";var Ta;return Object.defineProperty(eu.prototype,"value",{get:va.oneOfGetter(Ta=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:va.oneOfSetter(Ta)}),eu.create=function(Aa){return new eu(Aa)},eu.encode=function(Aa,ka){return ka||(ka=Sa.create()),Aa.tensorType!=null&&Object.hasOwnProperty.call(Aa,"tensorType")&&Ea.onnx.TypeProto.Tensor.encode(Aa.tensorType,ka.uint32(10).fork()).ldelim(),Aa.sequenceType!=null&&Object.hasOwnProperty.call(Aa,"sequenceType")&&Ea.onnx.TypeProto.Sequence.encode(Aa.sequenceType,ka.uint32(34).fork()).ldelim(),Aa.mapType!=null&&Object.hasOwnProperty.call(Aa,"mapType")&&Ea.onnx.TypeProto.Map.encode(Aa.mapType,ka.uint32(42).fork()).ldelim(),Aa.denotation!=null&&Object.hasOwnProperty.call(Aa,"denotation")&&ka.uint32(50).string(Aa.denotation),Aa.sparseTensorType!=null&&Object.hasOwnProperty.call(Aa,"sparseTensorType")&&Ea.onnx.TypeProto.SparseTensor.encode(Aa.sparseTensorType,ka.uint32(66).fork()).ldelim(),Aa.optionalType!=null&&Object.hasOwnProperty.call(Aa,"optionalType")&&Ea.onnx.TypeProto.Optional.encode(Aa.optionalType,ka.uint32(74).fork()).ldelim(),ka},eu.encodeDelimited=function(Aa,ka){return this.encode(Aa,ka).ldelim()},eu.decode=function(Aa,ka){Aa instanceof xa||(Aa=xa.create(Aa));for(var ru=ka===void 0?Aa.len:Aa.pos+ka,nu=new Ea.onnx.TypeProto;Aa.pos<ru;){var su=Aa.uint32();switch(su>>>3){case 1:{nu.tensorType=Ea.onnx.TypeProto.Tensor.decode(Aa,Aa.uint32());break}case 4:{nu.sequenceType=Ea.onnx.TypeProto.Sequence.decode(Aa,Aa.uint32());break}case 5:{nu.mapType=Ea.onnx.TypeProto.Map.decode(Aa,Aa.uint32());break}case 9:{nu.optionalType=Ea.onnx.TypeProto.Optional.decode(Aa,Aa.uint32());break}case 8:{nu.sparseTensorType=Ea.onnx.TypeProto.SparseTensor.decode(Aa,Aa.uint32());break}case 6:{nu.denotation=Aa.string();break}default:Aa.skipType(su&7);break}}return nu},eu.decodeDelimited=function(Aa){return Aa instanceof xa||(Aa=new xa(Aa)),this.decode(Aa,Aa.uint32())},eu.verify=function(Aa){if(typeof Aa!="object"||Aa===null)return"object expected";var ka={};if(Aa.tensorType!=null&&Aa.hasOwnProperty("tensorType")){ka.value=1;{var ru=Ea.onnx.TypeProto.Tensor.verify(Aa.tensorType);if(ru)return"tensorType."+ru}}if(Aa.sequenceType!=null&&Aa.hasOwnProperty("sequenceType")){if(ka.value===1)return"value: multiple values";ka.value=1;{var ru=Ea.onnx.TypeProto.Sequence.verify(Aa.sequenceType);if(ru)return"sequenceType."+ru}}if(Aa.mapType!=null&&Aa.hasOwnProperty("mapType")){if(ka.value===1)return"value: multiple values";ka.value=1;{var ru=Ea.onnx.TypeProto.Map.verify(Aa.mapType);if(ru)return"mapType."+ru}}if(Aa.optionalType!=null&&Aa.hasOwnProperty("optionalType")){if(ka.value===1)return"value: multiple values";ka.value=1;{var ru=Ea.onnx.TypeProto.Optional.verify(Aa.optionalType);if(ru)return"optionalType."+ru}}if(Aa.sparseTensorType!=null&&Aa.hasOwnProperty("sparseTensorType")){if(ka.value===1)return"value: multiple values";ka.value=1;{var ru=Ea.onnx.TypeProto.SparseTensor.verify(Aa.sparseTensorType);if(ru)return"sparseTensorType."+ru}}return Aa.denotation!=null&&Aa.hasOwnProperty("denotation")&&!va.isString(Aa.denotation)?"denotation: string expected":null},eu.fromObject=function(Aa){if(Aa instanceof Ea.onnx.TypeProto)return Aa;var ka=new Ea.onnx.TypeProto;if(Aa.tensorType!=null){if(typeof Aa.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");ka.tensorType=Ea.onnx.TypeProto.Tensor.fromObject(Aa.tensorType)}if(Aa.sequenceType!=null){if(typeof Aa.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");ka.sequenceType=Ea.onnx.TypeProto.Sequence.fromObject(Aa.sequenceType)}if(Aa.mapType!=null){if(typeof Aa.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");ka.mapType=Ea.onnx.TypeProto.Map.fromObject(Aa.mapType)}if(Aa.optionalType!=null){if(typeof Aa.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");ka.optionalType=Ea.onnx.TypeProto.Optional.fromObject(Aa.optionalType)}if(Aa.sparseTensorType!=null){if(typeof Aa.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");ka.sparseTensorType=Ea.onnx.TypeProto.SparseTensor.fromObject(Aa.sparseTensorType)}return Aa.denotation!=null&&(ka.denotation=String(Aa.denotation)),ka},eu.toObject=function(Aa,ka){ka||(ka={});var ru={};return ka.defaults&&(ru.denotation=""),Aa.tensorType!=null&&Aa.hasOwnProperty("tensorType")&&(ru.tensorType=Ea.onnx.TypeProto.Tensor.toObject(Aa.tensorType,ka),ka.oneofs&&(ru.value="tensorType")),Aa.sequenceType!=null&&Aa.hasOwnProperty("sequenceType")&&(ru.sequenceType=Ea.onnx.TypeProto.Sequence.toObject(Aa.sequenceType,ka),ka.oneofs&&(ru.value="sequenceType")),Aa.mapType!=null&&Aa.hasOwnProperty("mapType")&&(ru.mapType=Ea.onnx.TypeProto.Map.toObject(Aa.mapType,ka),ka.oneofs&&(ru.value="mapType")),Aa.denotation!=null&&Aa.hasOwnProperty("denotation")&&(ru.denotation=Aa.denotation),Aa.sparseTensorType!=null&&Aa.hasOwnProperty("sparseTensorType")&&(ru.sparseTensorType=Ea.onnx.TypeProto.SparseTensor.toObject(Aa.sparseTensorType,ka),ka.oneofs&&(ru.value="sparseTensorType")),Aa.optionalType!=null&&Aa.hasOwnProperty("optionalType")&&(ru.optionalType=Ea.onnx.TypeProto.Optional.toObject(Aa.optionalType,ka),ka.oneofs&&(ru.value="optionalType")),ru},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Aa){return Aa===void 0&&(Aa="type.googleapis.com"),Aa+"/onnx.TypeProto"},eu.Tensor=(function(){function Aa(ka){if(ka)for(var ru=Object.keys(ka),nu=0;nu<ru.length;++nu)ka[ru[nu]]!=null&&(this[ru[nu]]=ka[ru[nu]])}return Aa.prototype.elemType=0,Aa.prototype.shape=null,Aa.create=function(ka){return new Aa(ka)},Aa.encode=function(ka,ru){return ru||(ru=Sa.create()),ka.elemType!=null&&Object.hasOwnProperty.call(ka,"elemType")&&ru.uint32(8).int32(ka.elemType),ka.shape!=null&&Object.hasOwnProperty.call(ka,"shape")&&Ea.onnx.TensorShapeProto.encode(ka.shape,ru.uint32(18).fork()).ldelim(),ru},Aa.encodeDelimited=function(ka,ru){return this.encode(ka,ru).ldelim()},Aa.decode=function(ka,ru){ka instanceof xa||(ka=xa.create(ka));for(var nu=ru===void 0?ka.len:ka.pos+ru,su=new Ea.onnx.TypeProto.Tensor;ka.pos<nu;){var uu=ka.uint32();switch(uu>>>3){case 1:{su.elemType=ka.int32();break}case 2:{su.shape=Ea.onnx.TensorShapeProto.decode(ka,ka.uint32());break}default:ka.skipType(uu&7);break}}return su},Aa.decodeDelimited=function(ka){return ka instanceof xa||(ka=new xa(ka)),this.decode(ka,ka.uint32())},Aa.verify=function(ka){if(typeof ka!="object"||ka===null)return"object expected";if(ka.elemType!=null&&ka.hasOwnProperty("elemType")&&!va.isInteger(ka.elemType))return"elemType: integer expected";if(ka.shape!=null&&ka.hasOwnProperty("shape")){var ru=Ea.onnx.TensorShapeProto.verify(ka.shape);if(ru)return"shape."+ru}return null},Aa.fromObject=function(ka){if(ka instanceof Ea.onnx.TypeProto.Tensor)return ka;var ru=new Ea.onnx.TypeProto.Tensor;if(ka.elemType!=null&&(ru.elemType=ka.elemType|0),ka.shape!=null){if(typeof ka.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");ru.shape=Ea.onnx.TensorShapeProto.fromObject(ka.shape)}return ru},Aa.toObject=function(ka,ru){ru||(ru={});var nu={};return ru.defaults&&(nu.elemType=0,nu.shape=null),ka.elemType!=null&&ka.hasOwnProperty("elemType")&&(nu.elemType=ka.elemType),ka.shape!=null&&ka.hasOwnProperty("shape")&&(nu.shape=Ea.onnx.TensorShapeProto.toObject(ka.shape,ru)),nu},Aa.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},Aa.getTypeUrl=function(ka){return ka===void 0&&(ka="type.googleapis.com"),ka+"/onnx.TypeProto.Tensor"},Aa})(),eu.Sequence=(function(){function Aa(ka){if(ka)for(var ru=Object.keys(ka),nu=0;nu<ru.length;++nu)ka[ru[nu]]!=null&&(this[ru[nu]]=ka[ru[nu]])}return Aa.prototype.elemType=null,Aa.create=function(ka){return new Aa(ka)},Aa.encode=function(ka,ru){return ru||(ru=Sa.create()),ka.elemType!=null&&Object.hasOwnProperty.call(ka,"elemType")&&Ea.onnx.TypeProto.encode(ka.elemType,ru.uint32(10).fork()).ldelim(),ru},Aa.encodeDelimited=function(ka,ru){return this.encode(ka,ru).ldelim()},Aa.decode=function(ka,ru){ka instanceof xa||(ka=xa.create(ka));for(var nu=ru===void 0?ka.len:ka.pos+ru,su=new Ea.onnx.TypeProto.Sequence;ka.pos<nu;){var uu=ka.uint32();switch(uu>>>3){case 1:{su.elemType=Ea.onnx.TypeProto.decode(ka,ka.uint32());break}default:ka.skipType(uu&7);break}}return su},Aa.decodeDelimited=function(ka){return ka instanceof xa||(ka=new xa(ka)),this.decode(ka,ka.uint32())},Aa.verify=function(ka){if(typeof ka!="object"||ka===null)return"object expected";if(ka.elemType!=null&&ka.hasOwnProperty("elemType")){var ru=Ea.onnx.TypeProto.verify(ka.elemType);if(ru)return"elemType."+ru}return null},Aa.fromObject=function(ka){if(ka instanceof Ea.onnx.TypeProto.Sequence)return ka;var ru=new Ea.onnx.TypeProto.Sequence;if(ka.elemType!=null){if(typeof ka.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");ru.elemType=Ea.onnx.TypeProto.fromObject(ka.elemType)}return ru},Aa.toObject=function(ka,ru){ru||(ru={});var nu={};return ru.defaults&&(nu.elemType=null),ka.elemType!=null&&ka.hasOwnProperty("elemType")&&(nu.elemType=Ea.onnx.TypeProto.toObject(ka.elemType,ru)),nu},Aa.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},Aa.getTypeUrl=function(ka){return ka===void 0&&(ka="type.googleapis.com"),ka+"/onnx.TypeProto.Sequence"},Aa})(),eu.Map=(function(){function Aa(ka){if(ka)for(var ru=Object.keys(ka),nu=0;nu<ru.length;++nu)ka[ru[nu]]!=null&&(this[ru[nu]]=ka[ru[nu]])}return Aa.prototype.keyType=0,Aa.prototype.valueType=null,Aa.create=function(ka){return new Aa(ka)},Aa.encode=function(ka,ru){return ru||(ru=Sa.create()),ka.keyType!=null&&Object.hasOwnProperty.call(ka,"keyType")&&ru.uint32(8).int32(ka.keyType),ka.valueType!=null&&Object.hasOwnProperty.call(ka,"valueType")&&Ea.onnx.TypeProto.encode(ka.valueType,ru.uint32(18).fork()).ldelim(),ru},Aa.encodeDelimited=function(ka,ru){return this.encode(ka,ru).ldelim()},Aa.decode=function(ka,ru){ka instanceof xa||(ka=xa.create(ka));for(var nu=ru===void 0?ka.len:ka.pos+ru,su=new Ea.onnx.TypeProto.Map;ka.pos<nu;){var uu=ka.uint32();switch(uu>>>3){case 1:{su.keyType=ka.int32();break}case 2:{su.valueType=Ea.onnx.TypeProto.decode(ka,ka.uint32());break}default:ka.skipType(uu&7);break}}return su},Aa.decodeDelimited=function(ka){return ka instanceof xa||(ka=new xa(ka)),this.decode(ka,ka.uint32())},Aa.verify=function(ka){if(typeof ka!="object"||ka===null)return"object expected";if(ka.keyType!=null&&ka.hasOwnProperty("keyType")&&!va.isInteger(ka.keyType))return"keyType: integer expected";if(ka.valueType!=null&&ka.hasOwnProperty("valueType")){var ru=Ea.onnx.TypeProto.verify(ka.valueType);if(ru)return"valueType."+ru}return null},Aa.fromObject=function(ka){if(ka instanceof Ea.onnx.TypeProto.Map)return ka;var ru=new Ea.onnx.TypeProto.Map;if(ka.keyType!=null&&(ru.keyType=ka.keyType|0),ka.valueType!=null){if(typeof ka.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");ru.valueType=Ea.onnx.TypeProto.fromObject(ka.valueType)}return ru},Aa.toObject=function(ka,ru){ru||(ru={});var nu={};return ru.defaults&&(nu.keyType=0,nu.valueType=null),ka.keyType!=null&&ka.hasOwnProperty("keyType")&&(nu.keyType=ka.keyType),ka.valueType!=null&&ka.hasOwnProperty("valueType")&&(nu.valueType=Ea.onnx.TypeProto.toObject(ka.valueType,ru)),nu},Aa.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},Aa.getTypeUrl=function(ka){return ka===void 0&&(ka="type.googleapis.com"),ka+"/onnx.TypeProto.Map"},Aa})(),eu.Optional=(function(){function Aa(ka){if(ka)for(var ru=Object.keys(ka),nu=0;nu<ru.length;++nu)ka[ru[nu]]!=null&&(this[ru[nu]]=ka[ru[nu]])}return Aa.prototype.elemType=null,Aa.create=function(ka){return new Aa(ka)},Aa.encode=function(ka,ru){return ru||(ru=Sa.create()),ka.elemType!=null&&Object.hasOwnProperty.call(ka,"elemType")&&Ea.onnx.TypeProto.encode(ka.elemType,ru.uint32(10).fork()).ldelim(),ru},Aa.encodeDelimited=function(ka,ru){return this.encode(ka,ru).ldelim()},Aa.decode=function(ka,ru){ka instanceof xa||(ka=xa.create(ka));for(var nu=ru===void 0?ka.len:ka.pos+ru,su=new Ea.onnx.TypeProto.Optional;ka.pos<nu;){var uu=ka.uint32();switch(uu>>>3){case 1:{su.elemType=Ea.onnx.TypeProto.decode(ka,ka.uint32());break}default:ka.skipType(uu&7);break}}return su},Aa.decodeDelimited=function(ka){return ka instanceof xa||(ka=new xa(ka)),this.decode(ka,ka.uint32())},Aa.verify=function(ka){if(typeof ka!="object"||ka===null)return"object expected";if(ka.elemType!=null&&ka.hasOwnProperty("elemType")){var ru=Ea.onnx.TypeProto.verify(ka.elemType);if(ru)return"elemType."+ru}return null},Aa.fromObject=function(ka){if(ka instanceof Ea.onnx.TypeProto.Optional)return ka;var ru=new Ea.onnx.TypeProto.Optional;if(ka.elemType!=null){if(typeof ka.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");ru.elemType=Ea.onnx.TypeProto.fromObject(ka.elemType)}return ru},Aa.toObject=function(ka,ru){ru||(ru={});var nu={};return ru.defaults&&(nu.elemType=null),ka.elemType!=null&&ka.hasOwnProperty("elemType")&&(nu.elemType=Ea.onnx.TypeProto.toObject(ka.elemType,ru)),nu},Aa.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},Aa.getTypeUrl=function(ka){return ka===void 0&&(ka="type.googleapis.com"),ka+"/onnx.TypeProto.Optional"},Aa})(),eu.SparseTensor=(function(){function Aa(ka){if(ka)for(var ru=Object.keys(ka),nu=0;nu<ru.length;++nu)ka[ru[nu]]!=null&&(this[ru[nu]]=ka[ru[nu]])}return Aa.prototype.elemType=0,Aa.prototype.shape=null,Aa.create=function(ka){return new Aa(ka)},Aa.encode=function(ka,ru){return ru||(ru=Sa.create()),ka.elemType!=null&&Object.hasOwnProperty.call(ka,"elemType")&&ru.uint32(8).int32(ka.elemType),ka.shape!=null&&Object.hasOwnProperty.call(ka,"shape")&&Ea.onnx.TensorShapeProto.encode(ka.shape,ru.uint32(18).fork()).ldelim(),ru},Aa.encodeDelimited=function(ka,ru){return this.encode(ka,ru).ldelim()},Aa.decode=function(ka,ru){ka instanceof xa||(ka=xa.create(ka));for(var nu=ru===void 0?ka.len:ka.pos+ru,su=new Ea.onnx.TypeProto.SparseTensor;ka.pos<nu;){var uu=ka.uint32();switch(uu>>>3){case 1:{su.elemType=ka.int32();break}case 2:{su.shape=Ea.onnx.TensorShapeProto.decode(ka,ka.uint32());break}default:ka.skipType(uu&7);break}}return su},Aa.decodeDelimited=function(ka){return ka instanceof xa||(ka=new xa(ka)),this.decode(ka,ka.uint32())},Aa.verify=function(ka){if(typeof ka!="object"||ka===null)return"object expected";if(ka.elemType!=null&&ka.hasOwnProperty("elemType")&&!va.isInteger(ka.elemType))return"elemType: integer expected";if(ka.shape!=null&&ka.hasOwnProperty("shape")){var ru=Ea.onnx.TensorShapeProto.verify(ka.shape);if(ru)return"shape."+ru}return null},Aa.fromObject=function(ka){if(ka instanceof Ea.onnx.TypeProto.SparseTensor)return ka;var ru=new Ea.onnx.TypeProto.SparseTensor;if(ka.elemType!=null&&(ru.elemType=ka.elemType|0),ka.shape!=null){if(typeof ka.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");ru.shape=Ea.onnx.TensorShapeProto.fromObject(ka.shape)}return ru},Aa.toObject=function(ka,ru){ru||(ru={});var nu={};return ru.defaults&&(nu.elemType=0,nu.shape=null),ka.elemType!=null&&ka.hasOwnProperty("elemType")&&(nu.elemType=ka.elemType),ka.shape!=null&&ka.hasOwnProperty("shape")&&(nu.shape=Ea.onnx.TensorShapeProto.toObject(ka.shape,ru)),nu},Aa.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},Aa.getTypeUrl=function(ka){return ka===void 0&&(ka="type.googleapis.com"),ka+"/onnx.TypeProto.SparseTensor"},Aa})(),eu})(),La.OperatorSetIdProto=(function(){function eu(Ta){if(Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.domain="",eu.prototype.version=va.Long?va.Long.fromBits(0,0,!1):0,eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){return Aa||(Aa=Sa.create()),Ta.domain!=null&&Object.hasOwnProperty.call(Ta,"domain")&&Aa.uint32(10).string(Ta.domain),Ta.version!=null&&Object.hasOwnProperty.call(Ta,"version")&&Aa.uint32(16).int64(Ta.version),Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.OperatorSetIdProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.domain=Ta.string();break}case 2:{ru.version=Ta.int64();break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){return typeof Ta!="object"||Ta===null?"object expected":Ta.domain!=null&&Ta.hasOwnProperty("domain")&&!va.isString(Ta.domain)?"domain: string expected":Ta.version!=null&&Ta.hasOwnProperty("version")&&!va.isInteger(Ta.version)&&!(Ta.version&&va.isInteger(Ta.version.low)&&va.isInteger(Ta.version.high))?"version: integer|Long expected":null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.OperatorSetIdProto)return Ta;var Aa=new Ea.onnx.OperatorSetIdProto;return Ta.domain!=null&&(Aa.domain=String(Ta.domain)),Ta.version!=null&&(va.Long?(Aa.version=va.Long.fromValue(Ta.version)).unsigned=!1:typeof Ta.version=="string"?Aa.version=parseInt(Ta.version,10):typeof Ta.version=="number"?Aa.version=Ta.version:typeof Ta.version=="object"&&(Aa.version=new va.LongBits(Ta.version.low>>>0,Ta.version.high>>>0).toNumber())),Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if(Aa.defaults)if(ka.domain="",va.Long){var ru=new va.Long(0,0,!1);ka.version=Aa.longs===String?ru.toString():Aa.longs===Number?ru.toNumber():ru}else ka.version=Aa.longs===String?"0":0;return Ta.domain!=null&&Ta.hasOwnProperty("domain")&&(ka.domain=Ta.domain),Ta.version!=null&&Ta.hasOwnProperty("version")&&(typeof Ta.version=="number"?ka.version=Aa.longs===String?String(Ta.version):Ta.version:ka.version=Aa.longs===String?va.Long.prototype.toString.call(Ta.version):Aa.longs===Number?new va.LongBits(Ta.version.low>>>0,Ta.version.high>>>0).toNumber():Ta.version),ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.OperatorSetIdProto"},eu})(),La.OperatorStatus=(function(){var eu={},Ta=Object.create(eu);return Ta[eu[0]="EXPERIMENTAL"]=0,Ta[eu[1]="STABLE"]=1,Ta})(),La.FunctionProto=(function(){function eu(Ta){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],Ta)for(var Aa=Object.keys(Ta),ka=0;ka<Aa.length;++ka)Ta[Aa[ka]]!=null&&(this[Aa[ka]]=Ta[Aa[ka]])}return eu.prototype.name="",eu.prototype.input=va.emptyArray,eu.prototype.output=va.emptyArray,eu.prototype.attribute=va.emptyArray,eu.prototype.attributeProto=va.emptyArray,eu.prototype.node=va.emptyArray,eu.prototype.docString="",eu.prototype.opsetImport=va.emptyArray,eu.prototype.domain="",eu.create=function(Ta){return new eu(Ta)},eu.encode=function(Ta,Aa){if(Aa||(Aa=Sa.create()),Ta.name!=null&&Object.hasOwnProperty.call(Ta,"name")&&Aa.uint32(10).string(Ta.name),Ta.input!=null&&Ta.input.length)for(var ka=0;ka<Ta.input.length;++ka)Aa.uint32(34).string(Ta.input[ka]);if(Ta.output!=null&&Ta.output.length)for(var ka=0;ka<Ta.output.length;++ka)Aa.uint32(42).string(Ta.output[ka]);if(Ta.attribute!=null&&Ta.attribute.length)for(var ka=0;ka<Ta.attribute.length;++ka)Aa.uint32(50).string(Ta.attribute[ka]);if(Ta.node!=null&&Ta.node.length)for(var ka=0;ka<Ta.node.length;++ka)Ea.onnx.NodeProto.encode(Ta.node[ka],Aa.uint32(58).fork()).ldelim();if(Ta.docString!=null&&Object.hasOwnProperty.call(Ta,"docString")&&Aa.uint32(66).string(Ta.docString),Ta.opsetImport!=null&&Ta.opsetImport.length)for(var ka=0;ka<Ta.opsetImport.length;++ka)Ea.onnx.OperatorSetIdProto.encode(Ta.opsetImport[ka],Aa.uint32(74).fork()).ldelim();if(Ta.domain!=null&&Object.hasOwnProperty.call(Ta,"domain")&&Aa.uint32(82).string(Ta.domain),Ta.attributeProto!=null&&Ta.attributeProto.length)for(var ka=0;ka<Ta.attributeProto.length;++ka)Ea.onnx.AttributeProto.encode(Ta.attributeProto[ka],Aa.uint32(90).fork()).ldelim();return Aa},eu.encodeDelimited=function(Ta,Aa){return this.encode(Ta,Aa).ldelim()},eu.decode=function(Ta,Aa){Ta instanceof xa||(Ta=xa.create(Ta));for(var ka=Aa===void 0?Ta.len:Ta.pos+Aa,ru=new Ea.onnx.FunctionProto;Ta.pos<ka;){var nu=Ta.uint32();switch(nu>>>3){case 1:{ru.name=Ta.string();break}case 4:{ru.input&&ru.input.length||(ru.input=[]),ru.input.push(Ta.string());break}case 5:{ru.output&&ru.output.length||(ru.output=[]),ru.output.push(Ta.string());break}case 6:{ru.attribute&&ru.attribute.length||(ru.attribute=[]),ru.attribute.push(Ta.string());break}case 11:{ru.attributeProto&&ru.attributeProto.length||(ru.attributeProto=[]),ru.attributeProto.push(Ea.onnx.AttributeProto.decode(Ta,Ta.uint32()));break}case 7:{ru.node&&ru.node.length||(ru.node=[]),ru.node.push(Ea.onnx.NodeProto.decode(Ta,Ta.uint32()));break}case 8:{ru.docString=Ta.string();break}case 9:{ru.opsetImport&&ru.opsetImport.length||(ru.opsetImport=[]),ru.opsetImport.push(Ea.onnx.OperatorSetIdProto.decode(Ta,Ta.uint32()));break}case 10:{ru.domain=Ta.string();break}default:Ta.skipType(nu&7);break}}return ru},eu.decodeDelimited=function(Ta){return Ta instanceof xa||(Ta=new xa(Ta)),this.decode(Ta,Ta.uint32())},eu.verify=function(Ta){if(typeof Ta!="object"||Ta===null)return"object expected";if(Ta.name!=null&&Ta.hasOwnProperty("name")&&!va.isString(Ta.name))return"name: string expected";if(Ta.input!=null&&Ta.hasOwnProperty("input")){if(!Array.isArray(Ta.input))return"input: array expected";for(var Aa=0;Aa<Ta.input.length;++Aa)if(!va.isString(Ta.input[Aa]))return"input: string[] expected"}if(Ta.output!=null&&Ta.hasOwnProperty("output")){if(!Array.isArray(Ta.output))return"output: array expected";for(var Aa=0;Aa<Ta.output.length;++Aa)if(!va.isString(Ta.output[Aa]))return"output: string[] expected"}if(Ta.attribute!=null&&Ta.hasOwnProperty("attribute")){if(!Array.isArray(Ta.attribute))return"attribute: array expected";for(var Aa=0;Aa<Ta.attribute.length;++Aa)if(!va.isString(Ta.attribute[Aa]))return"attribute: string[] expected"}if(Ta.attributeProto!=null&&Ta.hasOwnProperty("attributeProto")){if(!Array.isArray(Ta.attributeProto))return"attributeProto: array expected";for(var Aa=0;Aa<Ta.attributeProto.length;++Aa){var ka=Ea.onnx.AttributeProto.verify(Ta.attributeProto[Aa]);if(ka)return"attributeProto."+ka}}if(Ta.node!=null&&Ta.hasOwnProperty("node")){if(!Array.isArray(Ta.node))return"node: array expected";for(var Aa=0;Aa<Ta.node.length;++Aa){var ka=Ea.onnx.NodeProto.verify(Ta.node[Aa]);if(ka)return"node."+ka}}if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&!va.isString(Ta.docString))return"docString: string expected";if(Ta.opsetImport!=null&&Ta.hasOwnProperty("opsetImport")){if(!Array.isArray(Ta.opsetImport))return"opsetImport: array expected";for(var Aa=0;Aa<Ta.opsetImport.length;++Aa){var ka=Ea.onnx.OperatorSetIdProto.verify(Ta.opsetImport[Aa]);if(ka)return"opsetImport."+ka}}return Ta.domain!=null&&Ta.hasOwnProperty("domain")&&!va.isString(Ta.domain)?"domain: string expected":null},eu.fromObject=function(Ta){if(Ta instanceof Ea.onnx.FunctionProto)return Ta;var Aa=new Ea.onnx.FunctionProto;if(Ta.name!=null&&(Aa.name=String(Ta.name)),Ta.input){if(!Array.isArray(Ta.input))throw TypeError(".onnx.FunctionProto.input: array expected");Aa.input=[];for(var ka=0;ka<Ta.input.length;++ka)Aa.input[ka]=String(Ta.input[ka])}if(Ta.output){if(!Array.isArray(Ta.output))throw TypeError(".onnx.FunctionProto.output: array expected");Aa.output=[];for(var ka=0;ka<Ta.output.length;++ka)Aa.output[ka]=String(Ta.output[ka])}if(Ta.attribute){if(!Array.isArray(Ta.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");Aa.attribute=[];for(var ka=0;ka<Ta.attribute.length;++ka)Aa.attribute[ka]=String(Ta.attribute[ka])}if(Ta.attributeProto){if(!Array.isArray(Ta.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");Aa.attributeProto=[];for(var ka=0;ka<Ta.attributeProto.length;++ka){if(typeof Ta.attributeProto[ka]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");Aa.attributeProto[ka]=Ea.onnx.AttributeProto.fromObject(Ta.attributeProto[ka])}}if(Ta.node){if(!Array.isArray(Ta.node))throw TypeError(".onnx.FunctionProto.node: array expected");Aa.node=[];for(var ka=0;ka<Ta.node.length;++ka){if(typeof Ta.node[ka]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");Aa.node[ka]=Ea.onnx.NodeProto.fromObject(Ta.node[ka])}}if(Ta.docString!=null&&(Aa.docString=String(Ta.docString)),Ta.opsetImport){if(!Array.isArray(Ta.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");Aa.opsetImport=[];for(var ka=0;ka<Ta.opsetImport.length;++ka){if(typeof Ta.opsetImport[ka]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");Aa.opsetImport[ka]=Ea.onnx.OperatorSetIdProto.fromObject(Ta.opsetImport[ka])}}return Ta.domain!=null&&(Aa.domain=String(Ta.domain)),Aa},eu.toObject=function(Ta,Aa){Aa||(Aa={});var ka={};if((Aa.arrays||Aa.defaults)&&(ka.input=[],ka.output=[],ka.attribute=[],ka.node=[],ka.opsetImport=[],ka.attributeProto=[]),Aa.defaults&&(ka.name="",ka.docString="",ka.domain=""),Ta.name!=null&&Ta.hasOwnProperty("name")&&(ka.name=Ta.name),Ta.input&&Ta.input.length){ka.input=[];for(var ru=0;ru<Ta.input.length;++ru)ka.input[ru]=Ta.input[ru]}if(Ta.output&&Ta.output.length){ka.output=[];for(var ru=0;ru<Ta.output.length;++ru)ka.output[ru]=Ta.output[ru]}if(Ta.attribute&&Ta.attribute.length){ka.attribute=[];for(var ru=0;ru<Ta.attribute.length;++ru)ka.attribute[ru]=Ta.attribute[ru]}if(Ta.node&&Ta.node.length){ka.node=[];for(var ru=0;ru<Ta.node.length;++ru)ka.node[ru]=Ea.onnx.NodeProto.toObject(Ta.node[ru],Aa)}if(Ta.docString!=null&&Ta.hasOwnProperty("docString")&&(ka.docString=Ta.docString),Ta.opsetImport&&Ta.opsetImport.length){ka.opsetImport=[];for(var ru=0;ru<Ta.opsetImport.length;++ru)ka.opsetImport[ru]=Ea.onnx.OperatorSetIdProto.toObject(Ta.opsetImport[ru],Aa)}if(Ta.domain!=null&&Ta.hasOwnProperty("domain")&&(ka.domain=Ta.domain),Ta.attributeProto&&Ta.attributeProto.length){ka.attributeProto=[];for(var ru=0;ru<Ta.attributeProto.length;++ru)ka.attributeProto[ru]=Ea.onnx.AttributeProto.toObject(Ta.attributeProto[ru],Aa)}return ka},eu.prototype.toJSON=function(){return this.constructor.toObject(this,wa.util.toJSONOptions)},eu.getTypeUrl=function(Ta){return Ta===void 0&&(Ta="type.googleapis.com"),Ta+"/onnx.FunctionProto"},eu})(),La})(),ba.exports=Ea});function Cr(oa,ba){if(!oa)throw new Error(typeof ba=="string"?ba:ba())}function sn(oa){return new TextDecoder().decode(oa)}var ye,cr,hi,Xe,Xn,Ve,nt,U,an,pr,dr,hr,fe=L(()=>{Wn(),ei(),ye=Er($r()),mr(),cr=class{static arraysEqual(oa,ba){if(oa.length!==ba.length)return!1;for(let wa=0;wa<oa.length;wa++)if(oa[wa]!==ba[wa])return!1;return!0}},hi=class{static preprocessInputShapes(oa,ba){let wa=oa.length===1?[1,oa[0]]:oa,xa=ba.length===1?[ba[0],1]:ba;return[wa,xa]}static postprocessOutputShape(oa,ba,wa){ba===1&&oa.splice(oa.length-2,1),wa===1&&oa.pop()}static calcMatMulShape(oa,ba){return oa[1]!==ba[0]?void 0:[oa[0],ba[1]]}},Xe=class W1{static calcShape(ba,wa,xa=!1){let Sa=ba.length,va=wa.length;if(Sa===0)return wa;if(va===0)return ba;let Ea=Math.max(ba.length,wa.length),La=new Array(Ea);if(xa){if(Sa<2||va<2)return;let eu=hi.calcMatMulShape([ba[Sa-2],ba[Sa-1]],[wa[va-2],wa[va-1]]);if(eu===void 0)return;[La[Ea-2],La[Ea-1]]=eu}for(let eu=xa?3:1;eu<=Ea;eu++){let Ta=Sa-eu<0?1:ba[Sa-eu],Aa=va-eu<0?1:wa[va-eu];if(Ta!==Aa&&Ta>1&&Aa>1)return;La[Ea-eu]=Math.max(Ta,Aa)}return La}static index(ba,wa){let xa=new Array(wa.length);return W1.fillIndex(ba,wa,xa),xa}static fillIndex(ba,wa,xa){let Sa=ba.length-wa.length;for(let va=0;va<wa.length;va++)xa[va]=ba[Sa+va]%wa[va]}static calc(ba,wa,xa,Sa,va){let Ea=W1.calcShape(ba.dims,wa.dims);if(Ea){if(Sa&&!U.areEqual(Ea,ba.dims))return;let La=U.size(Ea),eu=Sa?ba:new Fe(Ea,va||ba.type);if(Ea.length===0)eu.set([],xa(ba.get([]),wa.get([])));else{let Ta=new Array(Ea.length),Aa=new Array(ba.dims.length),ka=new Array(wa.dims.length),ru=0,nu=0,su=!1,uu=!1;ba.dims.length===0&&(ru=ba.get([]),su=!0),wa.dims.length===0&&(nu=wa.get([]),uu=!0);let cu;for(let gu=0;gu<La;gu++){cu=gu;for(let hu=Ea.length-1;hu>=0;hu--)Ta[hu]=cu%Ea[hu],cu=Math.floor(cu/Ea[hu]);su||(W1.fillIndex(Ta,ba.dims,Aa),ru=ba.get(Aa)),uu||(W1.fillIndex(Ta,wa.dims,ka),nu=wa.get(ka)),eu.set(Ta,xa(ru,nu))}}return eu}}static isValidBroadcast(ba,wa){let xa=ba.length,Sa=wa.length;if(xa>Sa)return!1;for(let va=1;va<=xa;va++)if(ba[xa-va]!==1&&ba[xa-va]!==wa[Sa-va])return!1;return!0}static getBroadcastDims(ba,wa){let xa=ba.length,Sa=[];for(let va=0;va<xa;va++){let Ea=xa-1-va,La=ba[Ea]||1;(wa[wa.length-1-va]||1)>1&&La===1&&Sa.unshift(Ea)}return Sa}},Xn=class{static getShapeOfGemmResult(oa,ba,wa,xa,Sa){if(oa.length!==2||wa.length!==2)throw new Error("shape need to be of size 2");let va,Ea,La;ba?(va=oa[1],Ea=oa[0]):(va=oa[0],Ea=oa[1]);let eu=-1;if(xa?(La=wa[0],eu=1):(La=wa[1],eu=0),wa[eu]!==Ea)throw new Error("dimension mismatch");if(va<=0||La<=0||Ea<=0)throw new Error("invalid shape specified");if(Sa&&!Xe.isValidBroadcast(Sa,[va,La]))throw new Error("gemm: invalid bias shape for broadcast");return[va,La,Ea]}},Ve=class Lg{static tensorDataTypeFromProto(ba){switch(ba){case ye.onnx.TensorProto.DataType.INT8:return"int8";case ye.onnx.TensorProto.DataType.UINT8:return"uint8";case ye.onnx.TensorProto.DataType.BOOL:return"bool";case ye.onnx.TensorProto.DataType.INT16:return"int16";case ye.onnx.TensorProto.DataType.UINT16:return"uint16";case ye.onnx.TensorProto.DataType.INT32:return"int32";case ye.onnx.TensorProto.DataType.UINT32:return"uint32";case ye.onnx.TensorProto.DataType.FLOAT:return"float32";case ye.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye.onnx.TensorProto.DataType.STRING:return"string";case ye.onnx.TensorProto.DataType.INT64:return"int32";case ye.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye.onnx.TensorProto.DataType[ba]}`)}}static tensorDataTypeStringToEnum(ba){switch(ba){case"int8":return ye.onnx.TensorProto.DataType.INT8;case"uint8":return ye.onnx.TensorProto.DataType.UINT8;case"bool":return ye.onnx.TensorProto.DataType.BOOL;case"int16":return ye.onnx.TensorProto.DataType.INT16;case"uint16":return ye.onnx.TensorProto.DataType.UINT16;case"int32":return ye.onnx.TensorProto.DataType.INT32;case"uint32":return ye.onnx.TensorProto.DataType.UINT32;case"float32":return ye.onnx.TensorProto.DataType.FLOAT;case"float64":return ye.onnx.TensorProto.DataType.DOUBLE;case"string":return ye.onnx.TensorProto.DataType.STRING;case"int64":return ye.onnx.TensorProto.DataType.INT64;case"uint64":return ye.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${ba}`)}}static tensorDimsFromProto(ba){return ba.map(wa=>zt.isLong(wa)?wa.toNumber():wa)}static tensorValueTypeFromProto(ba){return{tensorType:Lg.tensorDataTypeFromProto(ba.elemType),shape:{dims:Lg.tensorDimsFromProto(ba.shape.dim.map(wa=>wa.dimValue))}}}static tensorDimsFromORTFormat(ba){let wa=[];for(let xa=0;xa<ba.dimsLength();xa++)wa.push(nt.longToNumber(ba.dims(xa)));return wa}static tensorAttributesFromORTFormat(ba){let wa=[];for(let xa=0;xa<ba.attributesLength();xa++)wa.push(ba.attributes(xa));return wa}},nt=class{static longToNumber(oa,ba){return zt.isLong(oa)?oa.toNumber():oa instanceof _.Long?zt.fromValue({low:oa.low,high:oa.high,unsigned:ba??!1}).toNumber():oa}static isLong(oa){return zt.isLong(oa)||oa instanceof _.Long}},U=class E1{static size(ba){return E1.getSizeFromDimensionRange(ba,0,ba.length)}static sizeFromDimension(ba,wa){if(wa<0||wa>ba.length)throw new Error(`invalid dimension of ${wa} for sizeFromDimension as Tensor has ${ba.length} dimensions.`);return E1.getSizeFromDimensionRange(ba,wa,ba.length)}static sizeToDimension(ba,wa){if(wa<0||wa>ba.length)throw new Error(`invalid dimension of ${wa} for sizeToDimension as Tensor has ${ba.length} dimensions.`);return E1.getSizeFromDimensionRange(ba,0,wa)}static getSizeFromDimensionRange(ba,wa,xa){let Sa=1;for(let va=wa;va<xa;va++){if(ba[va]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");Sa*=ba[va]}return Sa}static computeStrides(ba){let wa=ba.length;if(wa===0)return[];if(wa===1)return[1];let xa=new Array(wa);xa[wa-1]=1,xa[wa-2]=ba[wa-1];for(let Sa=wa-3;Sa>=0;--Sa)xa[Sa]=xa[Sa+1]*ba[Sa+1];return xa}static transpose(ba){return ba.slice().reverse()}static indicesToOffset(ba,wa,xa){xa===void 0&&(xa=ba.length);let Sa=0;for(let va=0;va<xa;++va)Sa+=wa[va]*ba[va];return Sa}static offsetToIndices(ba,wa){let xa=wa.length;if(xa===0)return[];if(xa===1)return[ba*wa[0]];let Sa=new Array(wa.length);for(let va=0;va<Sa.length-1;++va)Sa[va]=Math.floor(ba/wa[va]),ba-=Sa[va]*wa[va];return Sa[Sa.length-1]=ba,Sa}static normalizeAxis(ba,wa){if(ba<-wa&&ba>=wa)throw new Error("unsupported axis for this operation.");return ba<0?ba+wa:ba}static normalizeAxes(ba,wa){return ba.map(xa=>this.normalizeAxis(xa,wa))}static incrementIndex(ba,wa,xa){if(wa.length===0||ba.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(xa===void 0)xa=wa.length;else if(xa<=0||xa>wa.length)throw new Error("Incorrect axis to increment on");for(let Sa=xa-1;Sa>=0&&(ba[Sa]++,!(ba[Sa]<wa[Sa]));--Sa)ba[Sa]=0}static calculateReshapedDims(ba,wa){if(wa.length===0){if(ba.length===0||E1.size(ba)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let xa=wa.length,Sa=new Array(xa),va=-1,Ea=1;for(let eu=0;eu<xa;eu++){if(wa[eu]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(wa[eu]===-1){if(va!==-1)throw new Error("at most one dimension in shape hints can be -1");va=eu}else{if(wa[eu]===0){if(eu>=ba.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");Sa[eu]=ba[eu]}else Sa[eu]=wa[eu];Ea*=Sa[eu]}}let La=E1.size(ba);if(va!==-1){if(La%Ea!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${ba}] Output shape: [${wa}]`);Sa[va]=La/Ea}else if(Ea!==La)throw new Error("reshapedDims and originalDims don't have matching sizes");return Sa}static sortBasedOnPerm(ba,wa){return wa?wa.map(xa=>ba[xa]):ba.slice().reverse()}static padShape(ba,wa){let xa=ba.length;return ba.map((Sa,va)=>Sa+wa[va]+wa[va+xa])}static areEqual(ba,wa){return ba.length!==wa.length?!1:ba.every((xa,Sa)=>xa===wa[Sa])}static validateDimsAndCalcSize(ba){if(ba.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let wa=1;for(let xa of ba){if(!Number.isInteger(xa))throw new TypeError(`Invalid shape: ${xa} is not an integer`);if(xa<0||xa>2147483647)throw new TypeError(`Invalid shape: length ${xa} is not allowed`);wa*=xa}return wa}static flattenShape(ba,wa){wa<0&&(wa+=ba.length);let xa=ba.reduce((va,Ea)=>va*Ea,1),Sa=ba.slice(wa).reduce((va,Ea)=>va*Ea,1);return[xa/Sa,Sa]}static squeezeShape(ba,wa){let xa=new Array;wa=E1.normalizeAxes(wa,ba.length);for(let Sa=0;Sa<ba.length;Sa++){let va=wa.indexOf(Sa)>=0;if(va&&ba[Sa]!==1)throw new Error("squeeze an axis of size different than 1");(wa.length===0&&ba[Sa]>1||wa.length>0&&!va)&&xa.push(ba[Sa])}return xa}static unsqueezeShape(ba,wa){let xa=new Array(ba.length+wa.length);xa.fill(0);for(let va=0;va<wa.length;va++){let Ea=E1.normalizeAxis(wa[va],xa.length);if(Ea>=xa.length)throw new Error("'axes' has an out of range axis");if(xa[Ea]!==0)throw new Error("'axes' has a duplicate axis");xa[Ea]=1}let Sa=0;for(let va=0;va<xa.length;va++)xa[va]===0&&(xa[va]=ba[Sa++]);if(Sa!==ba.length)throw new Error("the unsqueezed dimension could not be established");return xa}},an=class d0{static splitShape(ba,wa,xa,Sa){if(xa.length===0){if(!Sa)throw new Error("need to know number of outputs when the 'split' attribute is not specified");d0.determineSplit(ba[wa],Sa,xa)}let va=[],Ea=[0];for(let La=0;La<xa.length;++La){La!==0&&Ea.push(Ea[La-1]+xa[La-1]);let eu=ba.slice();eu[wa]=xa[La],va.push(eu)}return[va,Ea]}static determineSplit(ba,wa,xa){if(ba%wa!==0)throw new Error("cannot split tensor to equal sized parts");for(let Sa=0;Sa<wa;++Sa)xa.push(ba/wa)}},pr=class q1{static adjustPoolAttributes(ba,wa,xa,Sa,va,Ea){if(!ba&&xa.length!==wa.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(ba)for(let La=0;La<wa.length-2;La++)La>=xa.length?xa.push(wa[La+2]):xa[La]=wa[La+2];for(let La=0;La<xa.length;La++)if(La<Sa.length){if(Sa[La]<0)throw new Error("strides should be greater than or equal to 1")}else Sa.push(1);for(let La=0;La<xa.length;La++)if(La<va.length){if(va[La]<0)throw new Error("dilations should be greater than or equal to 1")}else va.push(1);for(let La=0;La<xa.length*2;La++)if(La<Ea.length){if(Ea[La]<0)throw new Error("pad should be greater than or equal to 1")}else Ea.push(0);for(let La=0;La<xa.length;La++){if(xa[La]<=0)throw new Error("kernel shapes need to be greater than 0");if(Ea[La]>=xa[La]||Ea[La+xa.length]>=xa[La])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(ba,wa,xa,Sa,va,Ea){if(Ea){if(va.length!==2*(ba.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(wa.length!==ba.length-2)throw new Error("length of strides should be the length of data dimensions");if(Sa.length!==ba.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let La=0;La<ba.length-2;La++)q1.adjustPadAndReturnShape(ba[La+2],wa[La],xa[La],Sa[La],va,La,La+ba.length-2,Ea)}}static computePoolOutputShape(ba,wa,xa,Sa,va,Ea,La){if(wa.length<=0)throw new Error("input shape must be of size greater than 0");let eu=[wa[0],wa[1]];return q1.computeShapeHelper(ba,wa,eu,xa,Sa,va,Ea,La),eu}static computeConvOutputShape(ba,wa,xa,Sa,va,Ea,La){if(ba.length<=0||wa.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let eu=[ba[0],wa[0]];return q1.computeShapeHelper(!1,ba,eu,xa,Sa,va,Ea,La),eu}static computeShapeHelper(ba,wa,xa,Sa,va,Ea,La,eu){if(ba)for(let Ta=0;Ta<wa.length-2;Ta++)xa.push(1);else for(let Ta=0;Ta<wa.length-2;Ta++)xa.push(q1.adjustPadAndReturnShape(wa[Ta+2],Sa[Ta],va[Ta],Ea[Ta],La,Ta,Ta+wa.length-2,eu))}static adjustPadAndReturnShape(ba,wa,xa,Sa,va,Ea,La,eu){let Ta=xa*(Sa-1)+1;if(eu&&eu!=="NOTSET")switch(eu){case"VALID":return va[Ea]=0,va[La]=0,Math.floor((ba-Ta)/wa+1);case"SAME_LOWER":case"SAME_UPPER":if(xa!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let Aa=((ba+wa-1)/wa-1)*wa+Sa-ba;return va[Ea]=Math.floor(eu==="SAME_LOWER"?(Aa+1)/2:Aa/2),va[La]=Aa-va[Ea],Math.floor((ba+Aa-Sa)/wa+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((ba+va[Ea]+va[La]-Ta)/wa+1)}},dr=-34028234663852886e22,hr=34028234663852886e22});function Vd(oa){switch(oa){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${oa}`)}}function Fu(oa){switch(oa){case te.onnx.TensorProto.DataType.UINT8:case te.onnx.TensorProto.DataType.INT8:case te.onnx.TensorProto.DataType.BOOL:return 1;case te.onnx.TensorProto.DataType.UINT16:case te.onnx.TensorProto.DataType.INT16:return 2;case te.onnx.TensorProto.DataType.FLOAT:case te.onnx.TensorProto.DataType.INT32:case te.onnx.TensorProto.DataType.UINT32:return 4;case te.onnx.TensorProto.DataType.INT64:case te.onnx.TensorProto.DataType.DOUBLE:case te.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${te.onnx.TensorProto.DataType[oa]}`)}}function Wd(oa,ba){return new(ku(ba))(oa)}function ku(oa){switch(oa){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function bi(oa,ba){if(ba===te.onnx.TensorProto.DataType.INT64||ba===mi.TensorDataType.INT64){if(oa.greaterThanOrEqual(2147483648)||oa.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(ba===te.onnx.TensorProto.DataType.UINT32||ba===mi.TensorDataType.UINT32||ba===te.onnx.TensorProto.DataType.UINT64||ba===mi.TensorDataType.UINT64){if(oa.greaterThanOrEqual(4294967296)||oa.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${te.onnx.TensorProto.DataType[ba]}`);return oa.toNumber()}function $u(oa,ba,wa){switch(ba){case te.onnx.TensorProto.DataType.BOOL:case te.onnx.TensorProto.DataType.UINT8:return oa.getUint8(wa);case te.onnx.TensorProto.DataType.INT8:return oa.getInt8(wa);case te.onnx.TensorProto.DataType.UINT16:return oa.getUint16(wa,!0);case te.onnx.TensorProto.DataType.INT16:return oa.getInt16(wa,!0);case te.onnx.TensorProto.DataType.FLOAT:return oa.getFloat32(wa,!0);case te.onnx.TensorProto.DataType.INT32:return oa.getInt32(wa,!0);case te.onnx.TensorProto.DataType.UINT32:return oa.getUint32(wa,!0);case te.onnx.TensorProto.DataType.INT64:return bi(zt.fromBits(oa.getUint32(wa,!0),oa.getUint32(wa+4,!0),!1),ba);case te.onnx.TensorProto.DataType.DOUBLE:return oa.getFloat64(wa,!0);case te.onnx.TensorProto.DataType.UINT64:return bi(zt.fromBits(oa.getUint32(wa,!0),oa.getUint32(wa+4,!0),!0),ba);default:throw new Error(`cannot read from DataView for type ${te.onnx.TensorProto.DataType[ba]}`)}}var Cu,te,mi,Fe,mr=L(()=>{Cu=Er(_s()),ei(),tn(),te=Er($r()),fe(),mi=W.experimental.fbs,Fe=class _g{constructor(ba,wa,xa,Sa,va,Ea=Cu.Guid.create()){this.dims=ba,this.type=wa,this.dataProvider=xa,this.asyncDataProvider=Sa,this.cache=va,this.dataId=Ea,this.size=U.validateDimsAndCalcSize(ba);let La=this.size,eu=xa===void 0&&Sa===void 0&&va===void 0;if(va!==void 0&&va.length!==La)throw new RangeError("Input dims doesn't match data length.");if(wa==="string"){if(va!==void 0&&(!Array.isArray(va)||!va.every(Ta=>typeof Ta=="string")))throw new TypeError("cache should be a string array");eu&&(this.cache=new Array(La))}else{if(va!==void 0){let Ta=ku(wa);if(!(va instanceof Ta))throw new TypeError(`cache should be type ${Ta.name}`)}if(eu){let Ta=new ArrayBuffer(La*Vd(wa));this.cache=Wd(Ta,wa)}}}get data(){if(this.cache===void 0){let ba=this.dataProvider(this.dataId);if(ba.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=ba}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(ba){return this.data[U.indicesToOffset(ba,this.strides)]}set(ba,wa){this.data[U.indicesToOffset(ba,this.strides)]=wa}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U.computeStrides(this.dims)),this._strides}static fromProto(ba){if(!ba)throw new Error("cannot construct Value from an empty tensor");let wa=Ve.tensorDataTypeFromProto(ba.dataType),xa=Ve.tensorDimsFromProto(ba.dims),Sa=new _g(xa,wa);if(wa==="string")ba.stringData.forEach((va,Ea)=>{Sa.data[Ea]=sn(va)});else if(ba.rawData&&typeof ba.rawData.byteLength=="number"&&ba.rawData.byteLength>0){let va=Sa.data,Ea=new DataView(ba.rawData.buffer,ba.rawData.byteOffset,ba.rawData.byteLength),La=Fu(ba.dataType),eu=ba.rawData.byteLength/La;if(ba.rawData.byteLength%La!==0)throw new Error("invalid buffer length");if(va.length!==eu)throw new Error("buffer length mismatch");for(let Ta=0;Ta<eu;Ta++){let Aa=$u(Ea,ba.dataType,Ta*La);va[Ta]=Aa}}else{let va;switch(ba.dataType){case te.onnx.TensorProto.DataType.FLOAT:va=ba.floatData;break;case te.onnx.TensorProto.DataType.INT32:case te.onnx.TensorProto.DataType.INT16:case te.onnx.TensorProto.DataType.UINT16:case te.onnx.TensorProto.DataType.INT8:case te.onnx.TensorProto.DataType.UINT8:case te.onnx.TensorProto.DataType.BOOL:va=ba.int32Data;break;case te.onnx.TensorProto.DataType.INT64:va=ba.int64Data;break;case te.onnx.TensorProto.DataType.DOUBLE:va=ba.doubleData;break;case te.onnx.TensorProto.DataType.UINT32:case te.onnx.TensorProto.DataType.UINT64:va=ba.uint64Data;break;default:throw new Error("unspecific error")}if(va==null)throw new Error("failed to populate data from a tensorproto value");let Ea=Sa.data;if(Ea.length!==va.length)throw new Error("array length mismatch");for(let La=0;La<va.length;La++){let eu=va[La];zt.isLong(eu)?Ea[La]=bi(eu,ba.dataType):Ea[La]=eu}}return Sa}static fromData(ba,wa,xa){return new _g(wa,xa,void 0,void 0,ba)}static fromOrtTensor(ba){if(!ba)throw new Error("cannot construct Value from an empty tensor");let wa=Ve.tensorDimsFromORTFormat(ba),xa=Ve.tensorDataTypeFromProto(ba.dataType()),Sa=new _g(wa,xa);if(xa==="string")for(let va=0;va<ba.stringDataLength();va++)Sa.data[va]=ba.stringData(va);else if(ba.rawDataArray()&&typeof ba.rawDataLength()=="number"&&ba.rawDataLength()>0){let va=Sa.data,Ea=new DataView(ba.rawDataArray().buffer,ba.rawDataArray().byteOffset,ba.rawDataLength()),La=Fu(ba.dataType()),eu=ba.rawDataLength()/La;if(ba.rawDataLength()%La!==0)throw new Error("invalid buffer length");if(va.length!==eu)throw new Error("buffer length mismatch");for(let Ta=0;Ta<eu;Ta++){let Aa=$u(Ea,ba.dataType(),Ta*La);va[Ta]=Aa}}return Sa}}});function q(oa){return oa===1?Hd:qd}function Bu(oa){let ba=q(oa);return`${ba.version}
      precision highp float;
      ${ba.attribute} vec3 position;
      ${ba.attribute} vec2 textureCoord;

      ${ba.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Nu(oa){let ba=q(oa);return`${ba.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${ba.varyingFrag} vec2 TexCoords;
    ${ba.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Ru(oa,ba){let wa=q(oa);return`
  void main() {
    int indices[${ba}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${wa.output} = result;
  }
  `}var Hd,qd,xe=L(()=>{Hd={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},qd={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L(()=>{});async function gi(oa,ba=xa=>0,wa){return new Promise((xa,Sa)=>{let va=0,Ea=()=>{if(oa()){xa();return}va++;let La=ba(va);setTimeout(Ea,La)};Ea()})}function Kn(oa){return Cr(typeof oa<"u"&&oa.length!==0,()=>"empty string found for sampler name"),"get"+oa.charAt(0).toUpperCase()+oa.slice(1)}function Mu(oa){return Cr(typeof oa<"u"&&oa.length!==0,()=>"empty string found for sampler name"),"get"+oa.charAt(0).toUpperCase()+oa.slice(1)+"AtOutCoords"}function kr(oa,ba){let wa=JSON.parse(JSON.stringify(oa));return wa=ba,wa}function Br(oa,ba){return ba.map(wa=>oa[wa]).join(", ")}function Ke(oa){if(oa<=1)return"int";if(oa===2)return"ivec2";if(oa===3)return"ivec3";if(oa===4)return"ivec4";if(oa===5)return"ivec5";if(oa===6)return"ivec6";throw Error(`GPU for rank ${oa} is not yet supported`)}function St(oa=6){return["x","y","z","w","u","v"].slice(0,oa)}var Ft=L(()=>{fe()});function jd(oa,ba){return St(ba).map(wa=>`${oa}.${wa}`)}function Nr(oa,ba){return ba===1?[oa]:jd(oa,ba)}function $t(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var br=L(()=>{Ft()});function Xd(oa,ba,wa){if(oa===0)return"false";if(oa===1)return`rc > ${ba[0]}`;let xa="";for(let Sa=oa-2;Sa<oa;Sa++)xa+=`${wa[Sa]} >= ${ba[Sa-oa+2]}`,Sa<oa-1&&(xa+="||");return xa}function Kd(oa,ba){let wa=oa.length;if(wa===0)return"getA(), 0, 0, 0";if(wa===1)return`getA(rc),
            rc + 1 >= ${oa[0]} ? 0. : getA(rc + 1),
            0, 0`;let xa="r, c",Sa="r, cp1",va="rp1, c",Ea="rp1, cp1",La="";if(wa>2)for(let eu=0;eu<wa-2;++eu)La=La+`${ba[eu]},`;return`getA(${La}${xa}),
          rEdge ? 0. : getA(${La}${va}),
          cEdge ? 0. : getA(${La}${Sa}),
          rEdge || cEdge ? 0. : getA(${La}${Ea})`}function Jd(oa,ba,wa,xa){return oa===0||oa===1?"":`
    int r = ${ba[oa-2]};
    int c = ${ba[oa-1]};
    int rp1 = ${ba[oa-2]} + 1;
    int cp1 = ${ba[oa-1]} + 1;
    bool rEdge = rp1 >= ${xa};
    bool cEdge = cp1 >= ${wa};
    `}var Gu,Yd,Uu,zu=L(()=>{xe(),ae(),Ft(),br(),Gu={name:"pack",inputNames:["A"],inputTypes:[1]},Yd=(oa,ba)=>{let wa=q(oa.session.backend.glContext.version),xa=ba.dims,Sa=xa.length,va=ba.dims.length,Ea=Ke(va),La=Nr("rc",va),eu=Jd(va,La,xa[xa.length-2],xa[xa.length-1]),Ta;Sa===0?Ta=[1,1]:Sa===1?Ta=[xa[0],1]:Ta=[xa[va-1],xa[va-2]];let Aa=Xd(va,Ta,La),ka=Kd(xa,La),ru=`
        void main() {
          ${Ea} rc = getOutputCoords();

          if(${Aa}) {
            ${wa.output} = vec4(0);
          } else {
            ${eu}

            ${wa.output} = vec4(${ka});
          }
        }
      `;return{...Gu,hasMain:!0,output:{dims:ba.dims,type:ba.type,textureType:2},shaderSource:ru}},Uu=(oa,ba)=>({...Gu,get:()=>Yd(oa,ba)})});function yi(oa){if(oa.length===0)return[1,1,1];let ba=1;for(let wa=0;wa<oa.length-2;++wa)ba*=oa[wa];return[ba,oa.length>1?oa[oa.length-2]:1,oa[oa.length-1]]}function Wu(oa,ba){let wa=!1;return oa.length===0||ba.length===0?wa=!0:oa.length<2||ba.length<2?wa=oa[oa.length-1]===ba[ba.length-1]:wa=oa[oa.length-1]===ba[ba.length-1]&&oa[oa.length-2]===ba[ba.length-2],wa}function eh(oa){let ba=U.computeStrides(oa),wa=["b","r","c"],xa="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${ba.map((Sa,va)=>{let Ea=`int ${wa[va]} = ${xa} / ${Sa}`,La=va===ba.length-1?`int ${wa[va+1]} = ${xa} - ${wa[va]} * ${Sa}`:`index -= ${wa[va]} * ${Sa}`;return`${Ea}; ${La};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function th(oa){let ba=U.computeStrides(oa);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${ba[0]} + coords.z * ${ba[1]} + coords.y;
  }
`}var Zd,Qd,Vu,Hu=L(()=>{fe(),xe(),ae(),br(),Zd=oa=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${oa}`}),Qd=(oa,ba,wa,xa)=>{let Sa=ba.dims,va=xa,Ea="";for(let Ta=0;Ta<4;Ta++){let Aa="";switch(Ta){case 0:Aa="outputCoords = rc;";break;case 1:Aa="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:Aa="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:Aa="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}Ea+=`
        ${Aa}
        ${Ta>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${Ta}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${Ta>0?"}":""}
      `}let La=q(oa.session.backend.glContext.version),eu=`
      ${eh(Sa)}
      ${th(va)}
      ${$t()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${va[2]};
        int cols = ${va[1]};

        ${Ea}
        ${La.output} = result;
      }
    `;return{...wa,output:{dims:va,type:ba.type,textureType:2},shaderSource:eu,hasMain:!0}},Vu=(oa,ba,wa)=>{let xa=Zd(wa);return{...xa,get:()=>Qd(oa,ba,xa,wa)}}}),Ti,qu=L(()=>{xe(),ae(),Ti=(oa,ba)=>{let wa=ba.shape,xa=q(oa.session.backend.glContext.version),Sa=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${xa.texture2D}(X,TexCoords).r;
      ${xa.output} = encodeAsUint8(value);
    }`,va={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:wa,type:ba.tensor.type,textureType:3},shaderSource:Sa,hasMain:!0};return oa.executeProgram(va,[ba.tensor])}});function nh(oa,ba){if(oa===1)return"rc";let wa="";for(let xa=0;xa<oa;xa++)wa+=ba[xa],xa<oa-1&&(wa+=",");return wa}var ju,rh,Yu,Xu=L(()=>{xe(),ae(),Ft(),br(),ju={name:"unpack",inputNames:["A"],inputTypes:[2]},rh=(oa,ba)=>{let wa=ba.dims.length,xa=Nr("rc",wa),Sa=xa.slice(-2),va=Ke(wa),Ea=$t(),La=ba.dims.length===0?"":nh(wa,xa),eu=wa<=1?"rc":`vec2(${Sa.join(",")})`,Ta=q(oa.session.backend.glContext.version),Aa=`
    ${Ea}
    void main() {
      ${va} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${La});

       ${Ta.output} = vec4(getChannel(packedInput, ${eu}), 0, 0, 0);
     }
   `;return{...ju,hasMain:!0,output:{dims:ba.dims,type:ba.type,textureType:0},shaderSource:Aa}},Yu=(oa,ba)=>({...ju,get:()=>rh(oa,ba)})}),Jn,un,Zn,ln=L(()=>{ut(),Jn=class{constructor(oa,ba=1){if(ba===1)this.internalFormat=oa.R32F,this.format=oa.RED,this.textureType=oa.FLOAT,this.channelSize=ba;else if(ba===4)this.internalFormat=oa.RGBA32F,this.format=oa.RGBA,this.textureType=oa.FLOAT,this.channelSize=ba;else throw new Error(`Invalid number of channels: ${ba}`)}encode(oa,ba){let wa,xa;return oa.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),xa=new Float32Array(oa)),ba*this.channelSize>oa.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),xa=oa,wa=this.allocate(ba*this.channelSize),xa.forEach((Sa,va)=>wa[va]=Sa)):(xa=oa,wa=xa),wa}allocate(oa){return new Float32Array(oa*4)}decode(oa,ba){return this.channelSize===1?oa.filter((wa,xa)=>xa%4===0).subarray(0,ba):oa.subarray(0,ba)}},un=class{constructor(oa,ba=1,wa){if(ba!==1&&ba!==4)throw new Error(`Invalid number of channels: ${ba}`);this.internalFormat=oa.RGBA,this.format=oa.RGBA,this.channelSize=ba,this.textureType=wa||oa.FLOAT}encode(oa,ba){let wa=oa;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),wa=this.allocate(ba),oa.forEach((xa,Sa)=>wa[Sa*4]=xa)),wa}allocate(oa){return new Float32Array(oa*4)}decode(oa,ba){return this.channelSize===1?oa.filter((wa,xa)=>xa%4===0).subarray(0,ba):oa.subarray(0,ba)}},Zn=class{constructor(oa,ba=1){if(this.channelSize=4,ba===1)this.internalFormat=oa.ALPHA,this.format=oa.ALPHA,this.textureType=oa.UNSIGNED_BYTE,this.channelSize=ba;else if(ba===4)this.internalFormat=oa.RGBA,this.format=oa.RGBA,this.textureType=oa.UNSIGNED_BYTE,this.channelSize=ba;else throw new Error(`Invalid number of channels: ${ba}`)}encode(oa,ba){return new Uint8Array(oa.buffer,oa.byteOffset,oa.byteLength)}allocate(oa){return new Uint8Array(oa*this.channelSize)}decode(oa,ba){if(oa instanceof Uint8Array)return oa.subarray(0,ba);throw new Error(`Invalid array type: ${oa.constructor}`)}}}),fn,Ku,xi,Ju=L(()=>{fe(),ae(),fn=(oa,ba,wa)=>{let xa=wa===0||wa===1?1:4,Sa=wa===2,va=wa===1||wa===2,Ea=wa===4?ba.length-1:void 0,La=wa===4?ba.map((eu,Ta)=>Ta===ba.length-1?eu*4:eu):void 0;return xi(oa,ba,xa,La,{isPacked:Sa,reverseWH:va,breakAxis:Ea})},Ku=(oa,ba,wa)=>{let xa=fn(oa,ba,wa);return[xa.width,xa.height]},xi=(oa,ba,wa=1,xa,Sa)=>{let va=!!(Sa&&Sa.isPacked),[Ea,La]=oa.computeTextureWH(va&&xa||ba,Sa),eu=ba.length,Ta=ba.slice(0);if(eu===0&&(Ta=[1]),wa===1)xa=ba;else if(va){if(wa!==4)throw new Error("a packed texture must be 4-channel");xa=ba,eu>0&&(Ta[eu-1]=Math.ceil(Ta[eu-1]/2)),eu>1&&(Ta[eu-2]=Math.ceil(Ta[eu-2]/2))}else if(!xa)throw new Error("Unpacked shape is needed when using channels > 1");return{width:Ea,height:La,channels:wa,isPacked:va,shape:Ta,strides:U.computeStrides(Ta),unpackedShape:xa,reversedWH:Sa&&Sa.reverseWH}}}),ih,Qn,Qu=L(()=>{ut(),mr(),fe(),zu(),Hu(),qu(),Xu(),ln(),Ju(),ae(),ih=(oa,ba)=>{let wa=ba.map(Sa=>`${Sa.unpackedShape.join(",")};${Sa.width}x${Sa.height}`).join("_"),xa=oa.name;return oa.cacheHint&&(xa+="["+oa.cacheHint+"]"),xa+=":"+wa,xa},Qn=class{constructor(oa){this.session=oa,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(oa,ba){return Ku(this.session.layoutStrategy,oa,ba)}executeProgram(oa,ba){if(ba.length<oa.inputNames.length)throw new Error(`Input size mustn't be less than ${oa.inputNames.length}.`);if(oa.inputNames.length!==oa.inputTypes.length)throw new Error("input names size does not match input types");let wa=[];for(let eu=0;eu<oa.inputNames.length;++eu)wa[eu]=this.getOrCreateTextureData(ba[eu],oa.inputTypes[eu]);let xa=ih(oa,wa),Sa=this.session.programManager.getArtifact(xa),va=Sa?Sa.programInfo:typeof oa.get=="function"?oa.get():oa,Ea=fn(this.session.layoutStrategy,va.output.dims,va.output.textureType),La=this.createTextureData(Ea,va.output.type);return Sa||(Sa=this.session.programManager.build(va,wa,La),this.session.programManager.setArtifact(xa,Sa)),this.runProgram(Sa,wa,La),La}run(oa,ba){return this.executeProgram(oa,ba).tensor}runProgram(oa,ba,wa){for(let xa=0;xa<ba.length;++xa)if(!!ba[xa].isPacked!=(oa.programInfo.inputTypes[xa]===2))throw new Error(`input[${xa}] property packed inconsistent`);if(!!wa.isPacked!=(oa.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(oa,ba,wa)}getOrCreateTextureData(oa,ba){let wa=this.getTextureData(oa.dataId,ba===2);if(!wa&&(wa=this.getTextureData(oa.dataId,ba!==2),wa))return ba===2?this.pack(wa):this.unpack(wa);if(!wa){let xa=fn(this.session.layoutStrategy,oa.dims,ba);if(ba===4){let Sa=oa.dims;if(Sa.length===4){let va=[Sa[0],Math.ceil(Sa[1]*Sa[2]*Sa[3]/4)],Ea=fn(this.session.layoutStrategy,va,ba),La=oa.numberData;if(Sa[1]*Sa[2]*Sa[3]%4!==0){let eu=Sa[0],Ta=Sa[1]*Sa[2]*Sa[3],Aa=Math.ceil(Ta*1/4)*4,ka=eu*Aa;La=new Float32Array(ka);for(let ru=0;ru<eu;++ru){let nu=ru*Ta,su=ru*Aa+ru%1*Ta;La.set(oa.numberData.subarray(nu,nu+Ta),su)}}return this.createTextureData(Ea,oa.type,La,oa,1)}}if(ba===2){let Sa=xi(this.session.layoutStrategy,oa.dims,1,[],{reverseWH:!0}),va=this.createTextureData(Sa,oa.type,oa.numberData,oa,1);wa=this.pack(va)}else wa=this.createTextureData(xa,oa.type,oa.numberData,oa,1)}return wa}createTextureDataFromLayoutBindTensor(oa,ba,wa,xa){return this.createTextureData(oa,ba,wa,xa,1)}createTextureData(oa,ba,wa,xa,Sa){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(oa)}]`);let va=this.session.textureManager.createTextureFromLayout(ba,oa,wa,Sa);return this.createTextureDataFromTexture(oa,ba,va,xa)}reshapeUnpacked(oa,ba){let wa=this.getOrCreateTextureData(oa,0),xa={channels:wa.channels,height:wa.height,width:wa.width,shape:ba.length!==0?ba:[1],strides:U.computeStrides(ba),unpackedShape:ba};return this.createTextureDataFromTexture(xa,oa.type,wa.texture).tensor}reshapePacked(oa,ba){let wa=this.getOrCreateTextureData(oa,2);if(Wu(oa.dims,ba)){let La={channels:wa.channels,height:wa.height,width:wa.width,shape:ba.length!==0?ba:[1],strides:U.computeStrides(ba),unpackedShape:ba,isPacked:!0};return this.createTextureDataFromTexture(La,oa.type,wa.texture).tensor}let xa=yi(oa.dims),Sa=yi(ba),va=this.reshapePacked(oa,xa),Ea=this.run(Vu(this,va,Sa),[va]);return this.reshapePacked(Ea,ba)}cast(oa,ba){let wa=this.getOrCreateTextureData(oa,0);return this.createTextureDataFromTexture(wa,ba,wa.texture).tensor}createTextureDataFromTexture(oa,ba,wa,xa,Sa){let va={...oa,tensor:xa||new Fe(oa.unpackedShape,ba,Ea=>this.readTexture(va),async Ea=>this.readTextureAsync(va),void 0,Sa),texture:wa};return this.setTextureData(va.tensor.dataId,va,oa.isPacked),va}getTextureData(oa,ba=!1){return this.session.isInitializer(oa)?this.session.getTextureData(oa,ba):ba?this.packedTextureDataCache.get(oa):this.unpackedTextureDataCache.get(oa)}setTextureData(oa,ba,wa=!1){this.session.isInitializer(oa)?this.session.setTextureData(oa,ba,wa):(wa?this.packedTextureDataCache:this.unpackedTextureDataCache).set(oa,ba)}isTextureLayoutCached(oa,ba=!1){return!!this.getTextureData(oa.dataId,ba)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(oa=>this.session.textureManager.releaseTexture(oa)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(oa=>this.session.textureManager.releaseTexture(oa)),this.unpackedTextureDataCache=new Map}readTexture(oa){return oa.isPacked?this.readTexture(this.unpack(oa)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(oa,oa.tensor.type,oa.channels):this.session.textureManager.readUint8TextureAsFloat(Ti(this,oa))}async readTextureAsync(oa){return oa.isPacked?this.readTextureAsync(this.unpack(oa)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(oa,oa.tensor.type,oa.channels):this.session.textureManager.readUint8TextureAsFloat(Ti(this,oa))}pack(oa){return this.executeProgram(Uu(this,oa.tensor),[oa.tensor])}unpack(oa){return this.executeProgram(Yu(this,oa.tensor),[oa.tensor])}}}),vi,ee,Ge=L(()=>{vi=class{constructor(oa){Object.assign(this,oa)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(oa=>`${this[oa]}`).join(";")),this.key}},ee=oa=>new vi(oa)}),el,tl,rl,ah,sh,nl=L(()=>{Ge(),xe(),ae(),el={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},tl=(oa,ba,wa)=>(sh(ba),[oa.run({...el,cacheHint:wa.cacheKey,get:()=>ah(oa,ba,wa)},ba)]),rl=oa=>{let ba=oa.attributes.getFloat("epsilon",1e-5),wa=oa.attributes.getFloat("momentum",.9),xa=oa.attributes.getInt("spatial",1);return ee({epsilon:ba,momentum:wa,spatial:xa})},ah=(oa,ba,wa)=>{let xa=q(oa.session.backend.glContext.version),Sa=ba[0].dims.length,[va,Ea]=oa.calculateTextureWidthAndHeight(ba[1].dims,0),La=`
  float process(int[${Sa}] indices) {
    vec2 position = offsetToCoords(indices[1], ${va}, ${Ea});
    float scale = getColorAsFloat(${xa.texture2D}(Scale, position));
    float mean = getColorAsFloat(${xa.texture2D}(Mean, position));
    float variance = getColorAsFloat(${xa.texture2D}(Variance, position));
    float b = getColorAsFloat(${xa.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${wa.epsilon})) ) + b;
  }`;return{...el,output:{dims:ba[0].dims,type:ba[0].type,textureType:0},shaderSource:La}},sh=oa=>{if(!oa||oa.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let ba=oa[0],wa=oa[1],xa=oa[2],Sa=oa[3],va=oa[4];if(ba.dims.length<3||wa.dims.length!==1||xa.dims.length!==1||Sa.dims.length!==1||va.dims.length!==1)throw new Error("invalid input shape.");if(wa.dims[0]!==ba.dims[1]||xa.dims[0]!==ba.dims[1]||Sa.dims[0]!==ba.dims[1]||va.dims[0]!==ba.dims[1])throw new Error("invalid input shape.");if(ba.type!=="float32"&&ba.type!=="float64"||wa.type!=="float32"&&wa.type!=="float64"||xa.type!=="float32"&&xa.type!=="float64"||Sa.type!=="float32"&&Sa.type!=="float64"||va.type!=="float32"&&va.type!=="float64")throw new Error("invalid input tensor types.")}}),eo,pt,R,cn,to,Vt=L(()=>{eo=class{constructor(oa,ba,wa,xa){this.glContext=oa,this.programInfo=ba,this.inputTextureLayouts=wa,this.outputTextureLayout=xa}},pt=class{constructor(oa){this.context=oa}},R=class{constructor(oa,ba){this.routineBody=oa,this.dependencies=ba}},cn=class{constructor(oa,ba,wa){this.name=oa,wa?this.dependencies=wa:this.dependencies=[],ba&&(this.routineBody=ba)}addDependency(oa){oa&&this.dependencies.push(oa)}},to=class{static returnOrderedNodes(oa){if(!oa||oa.length===0)return[];if(oa.length===1)return oa;let ba=new Set,wa=new Set,xa=new Array;return this.createOrderedNodes(oa,ba,wa,xa),xa}static createOrderedNodes(oa,ba,wa,xa){for(let Sa=0;Sa<oa.length;++Sa)this.dfsTraverse(oa[Sa],ba,wa,xa)}static dfsTraverse(oa,ba,wa,xa){if(!oa||wa.has(oa.name))return;if(ba.has(oa.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");ba.add(oa.name);let Sa=oa.dependencies;if(Sa&&Sa.length>0)for(let va=0;va<Sa.length;++va)this.dfsTraverse(Sa[va],ba,wa,xa);xa.push(oa),wa.add(oa.name),ba.delete(oa.name)}}});function lh(){let oa="add_";return{body:`
  float ${oa}(float a, float b) {
    return a + b;
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:oa,type:0}}function fh(){let oa="div_";return{body:`
  float ${oa}(float a, float b) {
    return a / b;
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:oa,type:0}}function ch(){let oa="mul_";return{body:`
  float ${oa}(float a, float b) {
    return a * b;
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:oa,type:0}}function ph(){let oa="sub_";return{body:`
  float ${oa}(float a, float b) {
    return a - b;
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:oa,type:0}}function dh(){let oa="equal_";return{body:`
  float ${oa}(float a, float b) {
    return float(a == b);
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:oa,type:0}}function hh(){let oa="greater_";return{body:`
  float ${oa}(float a, float b) {
    return float(a > b);
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:oa,type:0}}function mh(){let oa="less_";return{body:`
  float ${oa}(float a, float b) {
    return float(a < b);
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:oa,type:0}}function bh(){let oa="and_";return{body:`
  float ${oa}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:oa,type:0}}function gh(){let oa="or_";return{body:`
  float ${oa}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:oa,type:0}}function yh(){let oa="xor_";return{body:`
  float ${oa}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:oa,type:0}}function Th(){return vh("pow")}function xh(){let oa="prelu_";return{body:`
  float ${oa}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${oa}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:oa,type:0}}function vh(oa){let ba=`${oa}_`;return{body:`
  float ${ba}(float a, float b) {
    return ${oa}(a, b);
  }
  vec4 ${ba}(vec4 v1, vec4 v2) {
    return ${oa}(v1, v2);
  }
  `,name:ba,type:0}}var dt,wh,ol,il,al,sl,ul,ll,fl,cl,pl,dl,hl,ml,bl=L(()=>{fe(),Vt(),xe(),ae(),dt=(oa,ba,wa,xa=ba[0].type,Sa)=>{let va=oa.session.pack?2:0;return{name:wa.name,inputNames:["A","B"],inputTypes:[va,va],cacheHint:Sa,get:()=>wh(oa,ba,wa,xa)}},wh=(oa,ba,wa,xa=ba[0].type)=>{let Sa=oa.session.pack?2:0,va=!U.areEqual(ba[0].dims,ba[1].dims),Ea=ba[0].dims,La=oa.session.pack;if(va){let Aa=Xe.calcShape(ba[0].dims,ba[1].dims,!1);if(!Aa)throw new Error("Can't perform binary op on the given tensors");Ea=Aa;let ka=Ea.length,ru=ba[0].dims.length!==0?ba[0].dims.length:1,nu=ba[1].dims.length!==0?ba[1].dims.length:1,su=ba[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",uu=ba[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",cu=q(oa.session.backend.glContext.version),gu=La?`
      ${wa.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${wa.name}(a, b);
        ${cu.output} = result;
      }`:`
      ${wa.body}
      float process(int indices[${ka}]) {
        int aindices[${ru}];
        int bindices[${nu}];
        ${su}
        ${uu}
        return ${wa.name}(_A(aindices), _B(bindices));
      }`;return{name:wa.name,inputNames:["A","B"],inputTypes:[Sa,Sa],output:{dims:Ea,type:xa,textureType:Sa},shaderSource:gu,hasMain:La}}let eu=q(oa.session.backend.glContext.version),Ta=`
    ${wa.body}
    void main() {
      vec4 v1 = ${eu.texture2D}(A, TexCoords);
      vec4 v2 = ${eu.texture2D}(B, TexCoords);
      vec4 result = ${wa.name}(v1, v2);
      ${eu.output} = result;
    }
    `;return{name:wa.name,inputNames:["A","B"],inputTypes:[Sa,Sa],output:{dims:ba[0].dims,type:xa,textureType:Sa},shaderSource:Ta,hasMain:!0}},ol=(oa,ba)=>[oa.run(dt(oa,ba,lh()),ba)],il=(oa,ba)=>[oa.run(dt(oa,ba,bh(),"bool"),ba)],al=(oa,ba)=>[oa.run(dt(oa,ba,fh()),ba)],sl=(oa,ba)=>[oa.run(dt(oa,ba,dh(),"bool"),ba)],ul=(oa,ba)=>[oa.run(dt(oa,ba,hh(),"bool"),ba)],ll=(oa,ba)=>[oa.run(dt(oa,ba,mh(),"bool"),ba)],fl=(oa,ba)=>[oa.run(dt(oa,ba,ch()),ba)],cl=(oa,ba)=>[oa.run(dt(oa,ba,gh(),"bool"),ba)],pl=(oa,ba)=>[oa.run(dt(oa,ba,Th()),ba)],dl=(oa,ba)=>[oa.run(dt(oa,ba,xh()),ba)],hl=(oa,ba)=>[oa.run(dt(oa,ba,ph()),ba)],ml=(oa,ba)=>[oa.run(dt(oa,ba,yh(),"bool"),ba)]}),gl,yl,Oh,Tl=L(()=>{fe(),gl=(oa,ba,wa)=>(Oh(ba),[oa.cast(ba[0],wa)]),yl=oa=>Ve.tensorDataTypeFromProto(oa.attributes.getInt("to")),Oh=oa=>{if(!oa||oa.length!==1)throw new Error("Cast requires 1 input.");if(oa[0].type==="string")throw new Error("Invalid input type.")}}),Ih,Sh,xl,ro,vl=L(()=>{xe(),ae(),Ft(),br(),Ih=(oa,ba)=>({name:"Concat (packed)",inputNames:Array.from({length:oa},(wa,xa)=>`X${xa}`),inputTypes:Array(oa).fill(2),cacheHint:ba}),Sh=(oa,ba,wa,xa)=>{let Sa=wa[0].dims.slice();if(xa>=Sa.length||xa<-1*Sa.length)throw new Error("axis specified for concat doesn't match input dimensionality");xa<0&&(xa=Sa.length+xa);let va=Sa.slice(0);for(let uh=1;uh<wa.length;uh++){let bd=wa[uh].dims.slice();for(let Fd=0;Fd<Sa.length;Fd++)if(Fd===xa)va[xa]+=bd[Fd];else if(Sa[Fd]!==bd[Fd])throw new Error("non concat dimensions must match")}let Ea=va.length,La=Nr("coords",Ea),eu=Ke(Ea),Ta=$t(),Aa=wa.map(uh=>uh.dims),ka=St(Ea),ru=new Array(Aa.length-1);ru[0]=Aa[0][xa];for(let uh=1;uh<ru.length;uh++)ru[uh]=ru[uh-1]+Aa[uh][xa];let nu=ka[xa],su=ka.slice(-2),uu=ka.join(),cu=`if (${nu} < ${ru[0]}) {
        return getChannel(
            getX0(${uu}), vec2(${su.join()}));
        }`;for(let uh=1;uh<ru.length;uh++){let bd=ru[uh-1];cu+=`
            if (${nu} < ${ru[uh]}  && ${nu} >= ${ru[uh-1]}) {
              return getChannel(
                getX${uh}(${ro(ka,nu,bd)}),
                vec2(${ro(su,nu,bd)}));
            }`}let gu=ru.length,hu=ru[ru.length-1];cu+=`
            return getChannel(
              getX${gu}(${ro(ka,nu,hu)}),
              vec2(${ro(su,nu,hu)}));`;let mu=q(oa.session.backend.glContext.version),Ou=`
          ${Ta}
          float getValue(${ka.map(uh=>"int "+uh)}) {
            ${cu}
          }

          void main() {
            ${eu} coords = getOutputCoords();
            int lastDim = coords.${ka[Ea-1]};
            coords.${ka[Ea-1]} = coords.${ka[Ea-2]};
            coords.${ka[Ea-2]} = lastDim;

            vec4 result = vec4(getValue(${La}), 0., 0., 0.);

            ${La[Ea-1]} = ${La[Ea-1]} + 1;
            if (${La[Ea-1]} < ${va[Ea-1]}) {
              result.g = getValue(${La});
            }

            ${La[Ea-2]} = ${La[Ea-2]} + 1;
            if (${La[Ea-2]} < ${va[Ea-2]}) {
              result.a = getValue(${La});
            }

            ${La[Ea-1]} = ${La[Ea-1]} - 1;
            if (${La[Ea-2]} < ${va[Ea-2]} &&
                ${La[Ea-1]} < ${va[Ea-1]}) {
              result.b = getValue(${La});
            }
            ${mu.output} = result;
          }
        `;return{...ba,output:{dims:va,type:wa[0].type,textureType:2},shaderSource:Ou,hasMain:!0}},xl=(oa,ba,wa)=>{let xa=Ih(ba.length,wa.cacheKey);return{...xa,get:()=>Sh(oa,xa,ba,wa.axis)}},ro=(oa,ba,wa)=>{let xa=oa.indexOf(ba);return oa.map((Sa,va)=>va===xa?`${Sa} - ${wa}`:Sa).join()}}),wl,Ah,Ph,Eh,_l,Dh,Lh,Fh,Ol,$h,Il=L(()=>{Ge(),ae(),vl(),wl=(oa,ba,wa)=>($h(ba),oa.session.pack&&ba[0].dims.length>1?[oa.run(xl(oa,ba,wa),ba)]:[oa.run(Eh(oa,ba,wa),ba)]),Ah=(oa,ba)=>({name:"Concat",inputNames:Array.from({length:oa},(wa,xa)=>`X${xa}`),inputTypes:Array(oa).fill(0),cacheHint:ba}),Ph=(oa,ba,wa,xa)=>{let Sa=wa[0].dims.slice();if(xa>=Sa.length||xa<-1*Sa.length)throw new Error("axis specified for concat doesn't match input dimensionality");xa<0&&(xa=Sa.length+xa);let va=Sa.slice(0);for(let nu=1;nu<wa.length;nu++){let su=wa[nu].dims.slice();for(let uu=0;uu<Sa.length;uu++)if(uu===xa)va[xa]+=su[uu];else if(Sa[uu]!==su[uu])throw new Error("non concat dimensions must match")}let Ea=va.length,La=new Array(wa.length),eu=0;for(let nu=0;nu<La.length;++nu)eu+=wa[nu].dims[xa],La[nu]=eu;let Ta="";wa.length<5?Ta=_l(La):Ta=Dh(La);let Aa=Lh(wa.length,Ea),ka=Fh(La),ru=`
        ${Aa}
        ${ka}
        ${Ta}
        float process(int indices[${Ea}]) {
          int textureIndex = getTextureWhereDataResides (indices[${xa}]);

          if(textureIndex != 0) {
            indices[${xa}] = indices[${xa}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...ba,output:{dims:va,type:wa[0].type,textureType:0},shaderSource:ru}},Eh=(oa,ba,wa)=>{let xa=Ah(ba.length,wa.cacheKey);return{...xa,get:()=>Ph(oa,xa,ba,wa.axis)}},_l=oa=>`int getTextureWhereDataResides(int index) {
      ${oa.map((ba,wa)=>`if(index<${ba}) {return ${wa};}
`).join("")}
    }`,Dh=oa=>_l(oa),Lh=(oa,ba)=>{let wa=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${ba}]) {`];for(let xa=0;xa<oa;++xa)xa===0?wa.push(`	if (textureIndex == ${xa}) { return _X${xa}(indices); }`):xa===oa-1?wa.push(`	else { return _X${xa}(indices); }`):wa.push(`	else if (textureIndex == ${xa}) { return _X${xa}(indices); }`);return wa.push("	}"),wa.join(`
`)},Fh=oa=>{let ba=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let wa=0;wa<oa.length;++wa)wa===0?ba.push(`	if (index == ${wa}) { return ${oa[wa]}; }`):wa===oa.length-1?ba.push(`	else { return ${oa[wa]}; }`):ba.push(`	else if (index == ${wa}) { return ${oa[wa]}; }`);return ba.push("	}"),ba.join(`
`)},Ol=oa=>ee({axis:oa.attributes.getInt("axis")}),$h=oa=>{if(!oa||oa.length<1)throw new Error("too few inputs");let ba=oa[0].type,wa=oa[0].dims.length;if(ba==="string")throw new Error("string tensor is not supported yet");for(let xa of oa){if(xa.type!==ba)throw new Error("input tensors should be one type");if(xa.dims.length!==wa)throw new Error("input tensors should have the same shape")}}});function Ch(){return ht("abs")}function kh(){return ht("acos")}function Bh(){return ht("asin")}function Nh(){return ht("atan")}function Rh(){return ht("ceil")}function Mh(){return ht("cos")}function Gh(oa){let ba="elu";return{body:`
  const float alpha = float(${oa});

  float ${ba}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${ba}_(vec4 v) {
    return vec4(${ba}_(v.x), ${ba}_(v.y), ${ba}_(v.z), ${ba}_(v.w));
  }
  `,name:ba,type:0}}function Uh(){return ht("exp")}function zh(){return ht("floor")}function wi(oa,ba){let wa="clip";return{body:`
  const float min = float(${oa});
  const float max = float(${ba});

  float ${wa}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${wa}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:wa,type:0}}function Vh(){let oa="indentity";return{body:`
  float ${oa}_(float a) {
    return a;
  }
  vec4 ${oa}_(vec4 v) {
    return v;
  }
  `,name:oa,type:0}}function Wh(oa){let ba="leakyRelu";return{body:`
  const float alpha = float(${oa});

  float ${ba}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${ba}_(vec4 v) {
    return vec4(${ba}_(v.x), ${ba}_(v.y), ${ba}_(v.z), ${ba}_(v.w));
  }
  `,name:ba,type:0}}function Hh(){return ht("log")}function qh(){let oa="neg";return{body:`
  float ${oa}_(float a) {
    return -a;
  }
  vec4 ${oa}_(vec4 v) {
    return -v;
  }
  `,name:oa,type:0}}function jh(){let oa="not";return{body:`
  float ${oa}_(float a) {
    return float( ! bool(a) );
  }
  bool ${oa}_(bool a) {
    return !a;
  }
  vec4 ${oa}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${oa}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:oa,type:0}}function Yh(){return ht("sin")}function _i(){let oa="relu";return{body:`
  float ${oa}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${oa}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:oa,type:0}}function Oi(){let oa="sigmoid";return{body:`
  float ${oa}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${oa}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:oa,type:0}}function Xh(){return ht("sqrt")}function Kh(){return ht("tan")}function Jh(){let oa="tanh";return{body:`
  float ${oa}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${oa}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:oa,type:0}}function ht(oa){return{body:`
  float ${oa}_(float a) {
    return ${oa}(a);
  }
  vec4 ${oa}_(vec4 v) {
    return ${oa}(v);
  }
  `,name:oa,type:0}}var Zh,Pe,Sl,Al,Pl,El,Ii,Dl,Ll,Qh,Fl,$l,Cl,kl,Bl,Nl,Si,Rl,Ml,Gl,Ul,zl,Vl,Wl,Hl,ql,jl,Yl,Ai=L(()=>{Ge(),fe(),Vt(),xe(),ae(),Zh=(oa,ba,wa,xa)=>{let Sa=oa.session.pack?2:0,va=q(oa.session.backend.glContext.version);return{...ba,output:{dims:wa.dims,type:wa.type,textureType:Sa},shaderSource:`
     ${xa.body}
     void main() {
       vec4 v = ${va.texture2D}(A, TexCoords);
       v = ${xa.name}_(v);
       ${va.output} = v;
     }
     `,hasMain:!0}},Pe=(oa,ba,wa,xa)=>{let Sa=oa.session.pack?2:0,va={name:wa.name,inputTypes:[Sa],inputNames:["A"],cacheHint:xa};return{...va,get:()=>Zh(oa,va,ba,wa)}},Sl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Ch()),ba)],Al=(oa,ba)=>[oa.run(Pe(oa,ba[0],kh()),ba)],Pl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Bh()),ba)],El=(oa,ba)=>[oa.run(Pe(oa,ba[0],Nh()),ba)],Ii=(oa,ba,wa)=>[oa.run(Pe(oa,ba[0],wi(wa.min,wa.max),wa.cacheKey),ba)],Dl=oa=>ee({min:oa.attributes.getFloat("min",dr),max:oa.attributes.getFloat("max",hr)}),Ll=(oa,ba)=>{let wa=Qh(oa,ba);return Ii(oa,[ba[0]],wa)},Qh=(oa,ba)=>{if(ba.length>=3&&(!oa.session.isInitializer(ba[1].dataId)||!oa.session.isInitializer(ba[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let wa=ba.length>=3?ba[1].numberData[0]:dr,xa=ba.length>=3?ba[2].numberData[0]:hr;return ee({min:wa,max:xa})},Fl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Rh()),ba)],$l=(oa,ba)=>[oa.run(Pe(oa,ba[0],Mh()),ba)],Cl=(oa,ba,wa)=>[oa.run(Pe(oa,ba[0],Gh(wa.alpha),wa.cacheKey),ba)],kl=oa=>ee({alpha:oa.attributes.getFloat("alpha",1)}),Bl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Uh()),ba)],Nl=(oa,ba)=>[oa.run(Pe(oa,ba[0],zh()),ba)],Si=(oa,ba)=>[oa.run(Pe(oa,ba[0],Vh()),ba)],Rl=(oa,ba,wa)=>[oa.run(Pe(oa,ba[0],Wh(wa.alpha),wa.cacheKey),ba)],Ml=oa=>ee({alpha:oa.attributes.getFloat("alpha",.01)}),Gl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Hh()),ba)],Ul=(oa,ba)=>[oa.run(Pe(oa,ba[0],qh()),ba)],zl=(oa,ba)=>[oa.run(Pe(oa,ba[0],jh()),ba)],Vl=(oa,ba)=>[oa.run(Pe(oa,ba[0],_i()),ba)],Wl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Oi()),ba)],Hl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Yh()),ba)],ql=(oa,ba)=>[oa.run(Pe(oa,ba[0],Xh()),ba)],jl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Kh()),ba)],Yl=(oa,ba)=>[oa.run(Pe(oa,ba[0],Jh()),ba)]});function Ct(oa){let ba;switch(oa.activation){case"Relu":ba=_i();break;case"Sigmoid":ba=Oi();break;case"Clip":ba=wi(oa.clipMin,oa.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let wa=ba.name,xa=ba.body,Sa=`value = ${wa}_(value);`;return{activationFunction:xa,applyActivation:Sa}}var Rr,gr=L(()=>{fe(),Ai(),Rr=oa=>{let ba=oa.getString("activation","");if(ba==="Clip"){let[wa,xa]=oa.getFloats("activation_params",[dr,hr]);return{activation:ba,clipMax:xa,clipMin:wa,activationCacheKey:`${ba}:${wa},${xa}`}}return{activation:ba,activationCacheKey:ba}}}),tm,rm,Xl,Kl=L(()=>{ut(),xe(),ae(),no(),gr(),tm=(oa,ba)=>({name:"GroupedConv",inputNames:oa?["X","W","Bias"]:["X","W"],inputTypes:oa?[0,0,0]:[0,0],cacheHint:ba}),rm=(oa,ba,wa,xa)=>{let Sa=ba.length>2?"value += getBias(output_channel);":"",va=ba[0].dims.slice(),Ea=ba[1].dims.slice(),La=Ea[0]/xa.group;ce.verbose("GroupedConv",`autpPad:${xa.autoPad}, dilations:${xa.dilations}, group:${xa.group}, kernelShape:${xa.kernelShape}, pads:${xa.pads}, strides:${xa.strides}`);let eu=Mr(va,Ea,xa.dilations,xa.pads,xa.strides),Ta=q(oa.session.backend.glContext.version),{activationFunction:Aa,applyActivation:ka}=Ct(xa),ru=`
  const ivec2 strides = ivec2(${xa.strides[0]}, ${xa.strides[1]});
  const ivec2 pads = ivec2(${xa.pads[0]}, ${xa.pads[1]});
  ${Aa}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${La};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${Ea[1]}; wInChannel++) {
      int input_channel = group_id * ${Ea[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${Ea[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${xa.dilations[0]};

        if (xHeight < 0 || xHeight >= ${va[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${Ea[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${xa.dilations[1]};
          if (xWidth < 0 || xWidth >= ${va[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${Sa}
    ${ka}
    ${Ta.output} = vec4(value, .0, .0, .0);
  }
`;return{...wa,output:{dims:eu,type:ba[0].type,textureType:0},shaderSource:ru,hasMain:!0}},Xl=(oa,ba,wa)=>{let xa=tm(ba.length>2,wa.cacheKey);return{...xa,get:()=>rm(oa,ba,xa,wa)}}}),nm,om,Jl,Zl=L(()=>{xe(),ae(),br(),nm=oa=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:oa}),om=(oa,ba,wa,xa,Sa,va)=>{let Ea=wa.dims,La=xa.dims,eu=2,Ta=3,Aa=Sa.length,ka=[La[1]*La[2]*La[3],Sa[2]*Sa[3]],ru=La[2]*La[3],nu=$t(),su=q(oa.session.backend.glContext.version),uu="";for(let gu=0;gu<=1;gu++)for(let hu=0;hu<=1;hu++)uu+=`
            blockIndex = rc.x + ${hu};
            pos = rc.y + ${gu};

            if(blockIndex < ${ka[1]} && pos < ${ka[0]}) {
              offsetY = int(blockIndex / (${Sa[Aa-1]})) * ${va.strides[0]} -
                ${va.pads[0]};
              d0 = offsetY + ${va.dilations[0]} * (imod(pos, ${ru}) / ${La[2]});

              if(d0 < ${Ea[eu]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${Sa[Aa-1]}) * ${va.strides[1]} -
                  ${va.pads[1]};
                d1 = offsetX + ${va.dilations[1]} * imod(imod(pos, ${ru}), ${La[2]});

                if(d1 < ${Ea[Ta]} && d1 >= 0) {

                  ch = int(float(pos)/ ${ru}.);
                    innerDims = vec2(d0, d1);
                    result[${gu*2+hu}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let cu=`
      ${nu}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${uu}
          ${su.output} = result;
      }
            `;return{...ba,output:{dims:ka,type:wa.type,textureType:2},shaderSource:cu,hasMain:!0}},Jl=(oa,ba,wa,xa,Sa)=>{let va=nm(Sa.cacheKey);return{...va,get:()=>om(oa,va,ba,wa,xa,Sa)}}});function am(oa,ba,wa){let xa=ba[0].dims,Sa=ba[1].dims,va=Xe.calcShape(xa,Sa,!0);if(!va)throw new Error("Can't use matmul on the given tensors");let Ea=Ke(va.length),La=St(),{activationFunction:eu,applyActivation:Ta}=Ct(wa),Aa=ba.length>2,ka=Aa?"value += getBiasForMatmul();":"",ru=Aa?`${Ei(Ea,La,ba[2].dims,va,!1)}`:"",nu=va.length,su=xa.length,uu=Sa.length,cu=xa[xa.length-1],gu=`
    ${eu}
    ${ru}
    float process(int indices[${nu}]) {
        int a[${su}];
        int b[${uu}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${cu}; ++k) {
            a[${su-1}] = k;
            b[${uu-2}] = k;
            value += _A(a) * _B(b);
        }
        ${ka}
        ${Ta}
        return value;
    }`;return{...oa,output:{dims:va,type:ba[0].type,textureType:0},shaderSource:gu}}function Pi(oa,ba){let wa=im(oa.length>2,ba.activationCacheKey);return{...wa,get:()=>am(wa,oa,ba)}}function Ei(oa,ba,wa,xa,Sa){let va="",Ea=wa.length,La=xa.length,eu=La-Ea;La<2&&Ea>0?va="coords":va=wa.map((ru,nu)=>`coords.${ba[nu+eu]}`).join(", ");let Ta=Xe.getBroadcastDims(wa,xa).map(ru=>`coords.${ba[ru+eu]} = 0;`).join(`
`),Aa=U.size(wa)===1,ka="vec4(outputValue.xx, outputValue.yy)";return Aa&&(ka="vec4(outputValue.x)"),Sa?`
vec4 getBiasForMatmul() {
  ${oa} coords = getOutputCoords();
  ${Ta}
  vec4 outputValue = getBias(${va});
  return ${ka};
}`:`
float getBiasForMatmul() {
  ${oa} coords = getOutputCoords();
  ${Ta}
  return getBias(coords.x);
}`}var Ql,ef,im,sm,oo=L(()=>{fe(),ae(),Ft(),gr(),Di(),Ql=(oa,ba,wa)=>(sm(ba),oa.session.pack?[oa.run(io(oa,ba,wa),ba)]:[oa.run(Pi(ba,wa),ba)]),ef=oa=>Rr(oa.attributes),im=(oa,ba)=>({name:"MatMul",inputNames:oa?["A","B","Bias"]:["A","B"],inputTypes:oa?[0,0,0]:[0,0],cacheHint:ba}),sm=oa=>{if(!oa||oa.length!==2)throw new Error("MatMul requires 2 inputs.");if(oa[0].dims[oa[0].dims.length-1]!==oa[1].dims[oa[1].dims.length-2])throw new Error("shared dimension does not match.");if(oa[0].type!=="float32"&&oa[0].type!=="float64"||oa[1].type!=="float32"&&oa[1].type!=="float64")throw new Error("inputs should be float type");if(oa[0].type!==oa[1].type)throw new Error("inputs types should match")}});function fm(oa,ba,wa,xa){let Sa=[],va=[],Ea=wa[0].dims,La=wa[1].dims,eu=Ea.length,Ta=La.length,Aa=xa.length,ka=Aa-eu,ru=Aa-Ta;Sa=Ea.map((hu,mu)=>`coords.${ba[mu+ka]}`),Sa[eu-1]="i*2",Sa.join(", "),va=La.map((hu,mu)=>`coords.${ba[mu+ru]}`),va[Ta-2]="i*2",va.join(", ");let nu=Xe.getBroadcastDims(Ea,xa),su=Xe.getBroadcastDims(La,xa),uu=nu.map(hu=>`coords.${ba[hu+ka]} = 0;`).join(`
`),cu=su.map(hu=>`coords.${ba[hu+ru]} = 0;`).join(`
`),gu=`int lastDim = coords.${ba[Aa-1]};
  coords.${ba[Aa-1]} = coords.${ba[Aa-2]};
  coords.${ba[Aa-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${oa} coords = getOutputCoords();
  ${gu}
  ${uu}
  vec4 outputValue = getA(${Sa});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${oa} coords = getOutputCoords();
  ${gu}
  ${cu}
  vec4 outputValue = getB(${va});
  return outputValue;
}`}function cm(oa,ba){let wa="";for(let xa=0;xa<ba-2;xa++)wa+=`rc.${oa[xa]}, `;return wa+=`rc.${oa[ba-2]}, i*2`,wa}function pm(oa,ba){let wa="";for(let xa=0;xa<ba-2;xa++)wa+=`rc.${oa[xa]}, `;return wa+=`i*2, rc.${oa[ba-1]}`,wa}var um,lm,io,Di=L(()=>{fe(),xe(),ae(),Ft(),gr(),oo(),um=(oa,ba)=>({name:"MatMul (packed)",inputNames:oa?["A","B","Bias"]:["A","B"],inputTypes:oa?[2,2,2]:[2,2],cacheHint:ba}),lm=(oa,ba,wa,xa)=>{let Sa=wa.length>2,va=Sa?"value += getBiasForMatmul();":"",Ea=wa[0].dims,La=wa[1].dims,eu=Xe.calcShape(Ea,La,!0),Ta=!U.areEqual(wa[0].dims,wa[1].dims);if(!eu)throw new Error("Can't use matmul on the given tensors");let Aa=Ea[Ea.length-1],ka=Math.ceil(Aa/2),ru=Ea.length,nu=La.length,su=q(oa.session.backend.glContext.version),uu=Ke(eu.length),cu=eu.length,gu=St(),{activationFunction:hu,applyActivation:mu}=Ct(xa),Ou=Sa?`${Ei(uu,gu,wa[2].dims,eu,!0)}`:"",uh=Ta?`${fm(uu,gu,wa,eu)}`:"",bd=Ta?"getAAtOutCoordsMatmul(i)":`getA(${cm(gu,ru)})`,Fd=Ta?"getBAtOutCoordsMatmul(i)":`getB(${pm(gu,nu)})`,_h=Ta?"":`${uu} rc =
          getOutputCoords(); int lastDim = rc.${gu[cu-1]}; rc.${gu[cu-1]} =
          rc.${gu[cu-2]}; rc.${gu[cu-2]} = lastDim;
      `,Lu=`
            ${uh}
            ${Ou}
            ${hu}
            void main() {
              ${_h}

              vec4 value = vec4(0);
              for (int i = 0; i < ${ka}; i++) {
                vec4 a = ${bd};
                vec4 b = ${Fd};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${va}
              ${mu}
              ${su.output} = value;
            }`;return{...ba,output:{dims:eu,type:wa[0].type,textureType:2},shaderSource:Lu,hasMain:!0}},io=(oa,ba,wa)=>{let xa=um(ba.length>2,wa.activationCacheKey);return{...xa,get:()=>lm(oa,xa,ba,wa)}}}),tf,rf=L(()=>{no(),Zl(),Di(),tf=(oa,ba,wa)=>{let xa=ba[0].dims,Sa=ba[1].dims,va=Mr(xa,Sa,wa.dilations,wa.pads,wa.strides),Ea=oa.run(Jl(oa,ba[0],ba[1],va,wa),[ba[0]]),La=oa.reshapePacked(ba[1],[Sa[0],Sa[1]*Sa[2]*Sa[3]]),eu=ba.length===3?[La,Ea,ba[2]]:[La,Ea],Ta=oa.run(io(oa,eu,wa),eu);return oa.reshapePacked(Ta,va)}}),dm,hm,nf,Li,Fi=L(()=>{ae(),dm=oa=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:oa}),hm=(oa,ba,wa,xa,Sa,va)=>{let Ea=wa.dims,La=xa.dims,eu=Sa.length,Ta=Li(Ea,La,Sa,4),Aa=`
        const int XC = ${Ea[1]};
        const int XH = ${Ea[2]};
        const int XW = ${Ea[3]};
        const int KH = ${va.kernelShape[0]};
        const int KW = ${va.kernelShape[1]};
        const int dilationH = ${va.dilations[0]};
        const int dilationW = ${va.dilations[1]};
        const int strideH = ${va.strides[0]};
        const int strideW = ${va.strides[1]};
        const int padH = ${va.pads[0]};
        const int padW = ${va.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${eu}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${Ea.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...ba,output:{dims:Ta,type:wa.type,textureType:4},shaderSource:Aa}},nf=(oa,ba,wa,xa,Sa)=>{let va=dm(Sa.cacheKey);return{...va,get:()=>hm(oa,va,ba,wa,xa,Sa)}},Li=(oa,ba,wa,xa=4)=>[wa[0],wa[2],wa[3],Math.ceil(oa[1]*ba[2]*ba[3]/xa)]}),mm,bm,of,af=L(()=>{fe(),xe(),ae(),gr(),Fi(),mm=(oa,ba)=>({name:"ConvDotProduct",inputNames:oa?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:oa?[0,4,0]:[0,4],cacheKey:ba.activationCacheKey}),bm=(oa,ba,wa,xa,Sa)=>{let va=wa[0].dims,Ea=wa[1].dims,La=[Ea[0],Math.ceil(va[1]*Ea[2]*Ea[3]/4)],eu=Li(va,Ea,xa),[Ta,Aa]=oa.calculateTextureWidthAndHeight(La,4),ka=U.computeStrides(eu),[ru,nu]=oa.calculateTextureWidthAndHeight(eu,4),su=xa.length,uu=wa.length<3?"0.0":"_B(b)",cu=Math.ceil(va[1]*Ea[2]*Ea[3]/4),{activationFunction:gu,applyActivation:hu}=Ct(Sa),mu=q(oa.session.backend.glContext.version),Ou=`
${gu}
float process(int indices[${su}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${ka[0]} + im2col[1] * ${ka[1]} + im2col[2] * ${ka[2]};
  int kernelOffset = indices[1] * ${La[1]};
  float value = ${uu};
  for (int i = 0; i < ${cu}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${ru}, ${nu});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${Ta}, ${Aa});
    value += dot(${mu.texture2D}(Im2Col, im2colCoords), ${mu.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${hu}
  return value;
}`;return{...ba,output:{dims:xa,type:wa[0].type,textureType:0},shaderSource:Ou}},of=(oa,ba,wa,xa)=>{let Sa=mm(ba.length>2,xa);return{...Sa,get:()=>bm(oa,Sa,ba,wa,xa)}}}),Mr,$i,gm,ym,Tm,xm,Ci,vm,no=L(()=>{Ge(),fe(),Kl(),rf(),af(),gr(),Fi(),oo(),Mr=(oa,ba,wa,xa,Sa)=>{let va=oa[0],Ea=oa.slice(2),La=Ea.length,eu=ba[0],Ta=ba.slice(2).map((ka,ru)=>ka+(ka-1)*(wa[ru]-1)),Aa=Ea.map((ka,ru)=>ka+xa[ru]+xa[ru+La]).map((ka,ru)=>Math.floor((ka-Ta[ru]+Sa[ru])/Sa[ru]));return[va,eu].concat(...Aa)},$i=(oa,ba,wa)=>(vm(ba,wa),gm(oa,ba,wa)),gm=(oa,ba,wa)=>{let xa=xm(wa,ba),Sa=oa.session.pack,va=xa.kernelShape[0]===1&&xa.kernelShape[1]===1;return xa.group>1?[oa.run(Xl(oa,ba,xa),ba)]:va&&Sa?[ym(oa,ba,xa)]:Sa&&ba[0].dims.length===4&&ba[0].dims[0]===1&&!va?[tf(oa,ba,xa)]:[Tm(oa,ba,xa)]},ym=(oa,ba,wa)=>{let xa=ba[0].dims,Sa=ba[1].dims,va=Mr(xa,Sa,wa.dilations,wa.pads,wa.strides),Ea=oa.reshapeUnpacked(ba[0],[xa[1],xa[2]*xa[3]]),La=oa.reshapeUnpacked(ba[1],[Sa[0],Sa[1]]),eu=ba.length>2?[La,Ea,ba[2]]:[La,Ea],Ta=oa.run(Pi(eu,wa),eu);return oa.reshapeUnpacked(Ta,va)},Tm=(oa,ba,wa)=>{let xa=ba[0].dims,Sa=ba[1].dims,va=Mr(xa,Sa,wa.dilations,wa.pads,wa.strides),Ea=oa.run(nf(oa,ba[0],ba[1],va,wa),[ba[0]]),La=ba.length===3?[Ea,ba[1],ba[2]]:[Ea,ba[1]];return oa.run(of(oa,ba,va,wa),La)},xm=(oa,ba)=>{let wa=oa.kernelShape.slice();if(oa.kernelShape.length===0)for(let va=2;va<ba[1].dims.length;++va)wa.push(ba[1].dims[va]);let xa=oa.pads.slice();pr.adjustPadsBasedOnAutoPad(ba[0].dims,oa.strides,oa.dilations,wa,xa,oa.autoPad);let Sa=Object.assign({},oa);return Object.assign(Sa,{kernelShape:wa,pads:xa,cacheKey:oa.cacheKey}),Sa},Ci=oa=>{let ba=oa.attributes,wa=Rr(ba),xa=ba.getString("auto_pad","NOTSET"),Sa=ba.getInts("dilations",[1,1]),va=ba.getInt("group",1),Ea=ba.getInts("kernel_shape",[]),La=ba.getInts("pads",[0,0,0,0]),eu=ba.getInts("strides",[1,1]);return ee({autoPad:xa,dilations:Sa,group:va,kernelShape:Ea,pads:La,strides:eu,...wa})},vm=(oa,ba)=>{if(!oa||oa.length!==2&&oa.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(oa[0].dims.length!==4||oa[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let wa=oa[0].dims[1],xa=oa[1].dims[1]*ba.group;if(wa!==xa)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(oa.length===3&&(oa[2].dims.length!==1||oa[1].dims[0]!==oa[2].dims[0]))throw new Error("invalid bias");let Sa=oa[0].dims.length-2;if(ba.dilations.length!==Sa)throw new Error(`dilations should be ${Sa}D`);if(ba.strides.length!==Sa)throw new Error(`strides should be ${Sa}D`);if(ba.pads.length!==Sa*2)throw new Error(`pads should be ${Sa*2}D`);if(ba.kernelShape.length!==0&&ba.kernelShape.length!==oa[1].dims.length-2)throw new Error("invalid kernel shape");if(oa[0].type!=="float32"||oa[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(oa.length===3&&oa[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),wm,_m,Om,sf,Im,Sm,Am,Pm,Em,Dm,uf,Lm,lf=L(()=>{Ge(),xe(),ae(),gr(),wm=(oa,ba,wa,xa,Sa,va)=>(oa-1)*ba+wa+(xa-1)*Sa+1-va,_m=(oa,ba,wa,xa,Sa)=>{let va=Math.floor(oa/2);ba==="SAME_UPPER"?(wa[xa]=va,wa[Sa]=oa-va):ba==="SAME_LOWER"&&(wa[xa]=oa-va,wa[Sa]=va)},Om=(oa,ba,wa,xa,Sa,va,Ea,La)=>{let eu=oa.length-2,Ta=La.length===0;for(let Aa=0;Aa<eu;++Aa){let ka=Ta?oa[Aa+2]*va[Aa]:La[Aa],ru=wm(oa[Aa+2],va[Aa],Sa[Aa],ba[Aa],wa[Aa],ka);_m(ru,xa,Sa,Aa,Aa+eu),Ta&&La.push(va[Aa]*(oa[Aa+2]-1)+Ea[Aa]+(ba[Aa]-1)*wa[Aa]+1-Sa[Aa]-Sa[Aa+eu])}},sf=(oa,ba,wa)=>(Lm(ba,wa),Im(oa,ba,wa)),Im=(oa,ba,wa)=>{let xa=Dm(wa,ba);return[Em(oa,ba,xa)]},Sm=(oa,ba)=>({name:"ConvTranspose",inputNames:oa?["X","W","B"]:["X","W"],inputTypes:oa?[0,0,0]:[0,0],cacheHint:ba}),Am=(oa,ba,wa,xa)=>{let Sa=ba.length>2?"getB(output_channel)":"0.0",va=ba[0].dims,Ea=ba[1].dims,La=Ea[1],eu=Ea[0]/xa.group,Ta=[ba[0].dims[0],ba[1].dims[1]*xa.group,...xa.outputShape],Aa=q(oa.session.backend.glContext.version),{activationFunction:ka,applyActivation:ru}=Ct(xa),nu=`
  const ivec2 strides = ivec2(${xa.strides[0]}, ${xa.strides[1]});
  const ivec2 pads = ivec2(${xa.pads[0]}, ${xa.pads[1]});
  ${ka}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${La};
    int wOutChannel = output_channel - group_id * ${La};

    float value = ${Sa};
    for (int inChannelOffset = 0; inChannelOffset < ${eu}; inChannelOffset++) {
      int input_channel = group_id * ${eu} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Ea[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Ea[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${xa.dilations[0]}, wHOff * ${xa.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${va[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${va[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${ru}
    ${Aa.output} = vec4(value, .0, .0, .0);
  }
`;return{...wa,output:{dims:Ta,type:ba[0].type,textureType:0},shaderSource:nu,hasMain:!0}},Pm=(oa,ba,wa)=>{let xa=Sm(ba.length>2,wa.cacheKey);return{...xa,get:()=>Am(oa,ba,xa,wa)}},Em=(oa,ba,wa)=>oa.run(Pm(oa,ba,wa),ba),Dm=(oa,ba)=>{let wa=oa.kernelShape.slice();if(oa.kernelShape.length===0)for(let La=2;La<ba[1].dims.length;++La)wa.push(ba[1].dims[La]);let xa=oa.pads.slice(),Sa=oa.outputShape.slice(),va=ba[0].dims;Om(va,wa,oa.dilations,oa.autoPad,xa,oa.strides,oa.outputPadding,Sa);let Ea=Object.assign({},oa);return Object.assign(Ea,{kernelShape:wa,pads:xa,outputShape:Sa,cacheKey:oa.cacheKey}),Ea},uf=oa=>{let ba=oa.attributes,wa=Rr(ba),xa=ba.getString("auto_pad","NOTSET"),Sa=ba.getInts("dilations",[1,1]),va=ba.getInt("group",1),Ea=ba.getInts("kernel_shape",[]),La=ba.getInts("output_padding",[0,0]),eu=ba.getInts("output_shape",[]),Ta=ba.getInts("pads",[0,0,0,0]),Aa=ba.getInts("strides",[1,1]);return ee({autoPad:xa,dilations:Sa,group:va,kernelShape:Ea,outputPadding:La,outputShape:eu,pads:Ta,strides:Aa,...wa})},Lm=(oa,ba)=>{if(!oa||oa.length!==2&&oa.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(oa[0].dims.length!==4||oa[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let wa=oa[0].dims[1],xa=oa[1].dims[0];if(wa!==xa)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let Sa=oa[1].dims[1]*ba.group;if(oa.length===3&&(oa[2].dims.length!==1||oa[2].dims[0]!==Sa))throw new Error("invalid bias");let va=oa[0].dims.length-2;if(ba.dilations.length!==va)throw new Error(`dilations should be ${va}D`);if(ba.strides.length!==va)throw new Error(`strides should be ${va}D`);if(ba.pads.length!==va*2)throw new Error(`pads should be ${va*2}D`);if(ba.outputPadding.length!==va)throw new Error(`output_padding should be ${va}D`);if(ba.kernelShape.length!==0&&ba.kernelShape.length!==oa[1].dims.length-2)throw new Error("invalid kernel shape");if(ba.outputShape.length!==0&&ba.outputShape.length!==oa[0].dims.length-2)throw new Error("invalid output shape");if(oa[0].type!=="float32"||oa[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(oa.length===3&&oa[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),ff,yr,cf,Fm,pf,$m,Cm,km,ao=L(()=>{Ge(),fe(),ae(),ff={name:"Transpose",inputNames:["A"],inputTypes:[0]},yr=(oa,ba,wa)=>(km(ba),[oa.run({...ff,cacheHint:wa.cacheKey,get:()=>Fm(oa,ba[0],wa.perm)},ba)]),cf=oa=>ee({perm:oa.attributes.getInts("perm",[])}),Fm=(oa,ba,wa)=>{let xa=ba.dims;wa=pf(xa,wa);let Sa=$m(xa,wa),va=xa.length,Ea=`
      ${Cm("perm",wa,va)}
      float process(int indices[${va}]) {
        int a[${va}];
        perm(a, indices);
        return _A(a);
      }`;return{...ff,output:{dims:Sa,type:ba.type,textureType:0},shaderSource:Ea}},pf=(oa,ba)=>(ba&&ba.length!==oa.length&&(ba=[...oa.keys()].reverse()),ba),$m=(oa,ba)=>(ba=pf(oa,ba),U.sortBasedOnPerm(oa,ba)),Cm=(oa,ba,wa)=>{let xa=[];xa.push(`void ${oa}(out int a[${wa}], int src[${wa}]) {`);for(let Sa=0;Sa<wa;++Sa)xa.push(`	a[${ba[Sa]}]=src[${Sa}];`);return xa.push("	}"),xa.join(`
`)},km=oa=>{if(!oa||oa.length!==1)throw new Error("Transpose requires 1 input.");if(oa[0].type!=="float32"&&oa[0].type!=="float64")throw new Error("input should be float tensor")}}),df,hf,Bm,mf=L(()=>{ao(),df=(oa,ba,wa)=>{Bm(ba);let xa=wa.blocksize,Sa=xa*xa,va=wa.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],Ea=wa.mode==="DCR"?[ba[0].dims[0],xa,xa,ba[0].dims[1]/Sa,ba[0].dims[2],ba[0].dims[3]]:[ba[0].dims[0],ba[0].dims[1]/Sa,xa,xa,ba[0].dims[2],ba[0].dims[3]],La=oa.reshapeUnpacked(ba[0],Ea),eu={perm:va,cacheKey:`${va}`},[Ta]=yr(oa,[La],eu),Aa=[ba[0].dims[0],ba[0].dims[1]/Sa,ba[0].dims[2]*xa,ba[0].dims[3]*xa];return[oa.reshapeUnpacked(Ta,Aa)]},hf=oa=>{let ba=oa.attributes.getInt("blocksize");if(ba<1)throw new Error(`blocksize must be >= 1, but got : ${ba} for DepthToSpace`);let wa=oa.attributes.getString("mode","DCR");if(wa!=="DCR"&&wa!=="CRD")throw new Error(`unrecognized mode: ${wa} for DepthToSpace`);return{mode:wa,blocksize:ba}},Bm=oa=>{if(oa.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${oa.length}`);if(oa[0].type==="string"||oa[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),bf,gf,Nm,yf=L(()=>{fe(),bf=(oa,ba,wa)=>{Nm(ba,wa);let xa=U.flattenShape(ba[0].dims,wa);return[oa.reshapeUnpacked(ba[0],xa)]},gf=oa=>oa.attributes.getInt("axis",1),Nm=(oa,ba)=>{if(!oa||oa.length!==1)throw new Error("Flatten requires 1 input.");let wa=oa[0].dims.length;if(wa===0)throw new Error("scalar tensor is not supported.");if(ba<-wa||ba>wa)throw new Error("Invalid axis");if(oa[0].type==="string")throw new Error("string tensor is not supported.")}}),Jt,pn=L(()=>{Jt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),Tf,xf,Rm,Mm,Gm,Um,vf=L(()=>{Ge(),pn(),fe(),ae(),Tf=(oa,ba,wa)=>(Um(ba,wa.axis),[oa.run(Gm(oa,ba,wa),ba)]),xf=oa=>ee({axis:oa.attributes.getInt("axis",0)}),Rm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Mm=(oa,ba,wa,xa)=>{let Sa=wa[0].dims.slice(),va=wa[1].dims.slice(),Ea=new Array(Sa.length+va.length-1);xa=U.normalizeAxis(xa,Sa.length);let La=[];for(let ru=0;ru<Ea.length;ru++)ru<xa?(Ea[ru]=Sa[ru],La.push(`inputIdx[${ru}] = outputIdx[${ru}];`)):ru<xa+va.length?(Ea[ru]=va[ru-xa],La.push(`indexDataIdx[${ru-xa}] = outputIdx[${ru}];`)):(Ea[ru]=Sa[ru-va.length+1],La.push(`inputIdx[${ru-va.length+1}] = outputIdx[${ru}];`));let eu=Ea.length||1,Ta=Sa.length,Aa=va.length||1,ka=`
      float process(int outputIdx[${eu}]) {
        int inputIdx[${Ta}];
        int indexDataIdx[${Aa}];
        indexDataIdx[0] = 0;
        ${La.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${xa}] = idx < 0 ? idx + ${Sa[xa]} : idx;
        return _A(inputIdx);
      }`;return{...ba,output:{dims:Ea,type:wa[0].type,textureType:0},shaderSource:ka}},Gm=(oa,ba,wa)=>{let xa={...Rm,cacheHint:wa.cacheKey};return{...xa,get:()=>Mm(oa,xa,ba,wa.axis)}},Um=(oa,ba)=>{if(!oa||oa.length!==2)throw new Error("Gather requires 2 inputs.");let wa=oa[0].dims.length;if(wa<1)throw new Error("Invalid input shape.");if(ba<-wa||ba>wa-1)throw new Error("Invalid axis.");if(Jt.indexOf(oa[0].type)===-1)throw new Error("Invaid input type.");if(oa[1].type!=="int32"&&oa[1].type!=="int16")throw new Error("Invaid input type.")}}),ki,wf,_f,Of,zm,Vm,Wm,If=L(()=>{Ge(),fe(),ae(),ki=(oa,ba,wa)=>(Wm(ba,wa),[oa.run(zm(ba,wa),ba)]),wf=(oa,ba)=>{let wa=oa.attributes.getInt("transA",0)!==0,xa=oa.attributes.getInt("transB",0)!==0,Sa=oa.attributes.getFloat("alpha",1),va=oa.attributes.getFloat("beta",1);return ee({transA:wa,transB:xa,alpha:Sa,beta:va,isOptionalC:ba})},_f=oa=>wf(oa,!1),Of=oa=>wf(oa,!0),zm=(oa,ba)=>{let wa={name:"Gemm",inputNames:oa.length===3?["A","B","C"]:["A","B"],inputTypes:oa.length===3?[0,0,0]:[0,0],key:ba.cacheKey};return{...wa,get:()=>Vm(wa,oa,ba)}},Vm=(oa,ba,wa)=>{let xa=ba[0].dims.slice(),Sa=ba[1].dims.slice(),[va,Ea]=Xn.getShapeOfGemmResult(xa,wa.transA,Sa,wa.transB,ba.length===3?ba[2].dims:void 0),La=[va,Ea];if(!La)throw new Error("Can't use gemm on the given tensors");let eu=xa[xa.length-1],Ta="";wa.transA&&(eu=xa[0]),wa.transA&&wa.transB?Ta="value += _A_T(a) * _B_T(b);":wa.transA&&!wa.transB?Ta="value += _A_T(a) * _B(b);":!wa.transA&&wa.transB?Ta="value += _A(a) * _B_T(b);":!wa.transA&&!wa.transB&&(Ta="value += _A(a) * _B(b);");let Aa=La.length,ka=ba.length===3?`int c[${ba[2].dims.length}];`:"",ru=ba.length===3?"bcastIndices_C(indices, c);":"",nu=ba.length===3?"value += beta * _C(c);":"",su=`
      float process(int indices[${Aa}]) {
          int a[${Aa}];
          int b[${Aa}];
          ${ka}

          copyVec(indices, a);
          copyVec(indices, b);
          ${ru}

          float value = 0.0;
          for (int k=0; k<${eu}; ++k) {
              a[${Aa-1}] = k;
              b[${Aa-2}] = k;
              ${Ta}
          }

          value = value * alpha;
          ${nu}
          return value;
      }`;return{...oa,output:{dims:La,type:ba[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:wa.alpha},{name:"beta",type:"float",data:wa.beta}],shaderSource:su}},Wm=(oa,ba)=>{if(!oa)throw new Error("Input is missing");if(ba.isOptionalC&&(oa.length<2||oa.length>3))throw new Error("Invaid input shape.");if(!ba.isOptionalC&&oa.length!==3)throw new Error("Gemm requires 3 inputs");if(oa.length===3&&oa[2].dims.length!==1&&oa[2].dims.length!==2)throw new Error("Invalid input shape of C");if(oa[0].type!=="float32"&&oa[0].type!=="float64"||oa[1].type!=="float32"&&oa[1].type!=="float64"||oa.length===3&&oa[2].type!=="float32"&&oa[2].type!=="float64")throw new Error("Invalid input type.");if(oa[0].type!==oa[1].type||oa.length===3&&oa[0].type!==oa[2].type)throw new Error("Input types are mismatched")}}),Sf,Af,Hm,qm,jm,Ym,Xm,Pf=L(()=>{Ge(),ae(),Sf=(oa,ba,wa)=>(Xm(ba),[oa.run(jm(oa,ba,wa),ba)]),Af=oa=>{let ba=oa.attributes.getFloat("scale"),wa=oa.attributes.getFloats("bias");return ee({scale:ba,bias:wa})},Hm={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},qm=(oa,ba,wa,xa)=>{let Sa=wa[0].dims.slice(),va=Sa.length,Ea=`
      ${Ym(xa.bias.length)}
      float process(int indices[${va}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...ba,output:{dims:Sa,type:wa[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:xa.bias.length,data:xa.bias},{name:"scale",type:"float",data:xa.scale}],shaderSource:Ea}},jm=(oa,ba,wa)=>{let xa={...Hm,cacheHint:wa.cacheKey};return{...xa,get:()=>qm(oa,xa,ba,wa)}},Ym=oa=>{let ba=[`float getBias(float bias[${oa}], int channel) {`];for(let wa=0;wa<oa;++wa)wa===0?ba.push(`	if (channel == ${wa}) { return bias[${wa}]; }`):wa===oa-1?ba.push(`	else { return bias[${wa}]; }`):ba.push(`	else if (channel == ${wa}) { return bias[${wa}]; }`);return ba.push("	}"),ba.join(`
`)},Xm=oa=>{if(!oa||oa.length!==1)throw new Error("ImageScaler requires 1 input.");if(oa[0].dims.length!==4)throw new Error("Invalid input shape.");if(oa[0].type!=="float32"&&oa[0].type!=="float64")throw new Error("Invalid input type.")}}),Df,Lf,Ef,Km,Jm,Zm,Qm,eb,tb,Ff=L(()=>{xe(),ae(),Df=(oa,ba,wa)=>{tb(ba);let xa=oa.run(Jm(ba[0]),ba);return[oa.run(eb(oa,ba[0],wa,xa.dims),[ba[0],xa,ba[1],ba[2]])]},Lf=oa=>oa.attributes.getFloat("epsilon",1e-5),Ef={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Km=(oa,ba)=>{let wa=ba.dims.slice(),xa=wa[1],Sa=wa[2]*wa[3],va=[wa[0],xa],Ea=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${wa[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${wa[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${Sa});
        temp = 0.0;
        for(int a2=0; a2<${wa[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${wa[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${Sa});

        return v;
      }`;return{...oa,output:{dims:va,type:ba.type,textureType:4},shaderSource:Ea}},Jm=oa=>({...Ef,get:()=>Km(Ef,oa)}),Zm={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},Qm=(oa,ba,wa,xa,Sa)=>{let va=q(oa.session.backend.glContext.version),[Ea,La]=oa.calculateTextureWidthAndHeight(Sa,4),[eu,Ta]=[Ea/4,La],Aa=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${eu}, ${Ta});
        return ${va.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...ba,output:{dims:wa.dims,type:wa.type,textureType:0},variables:[{name:"epsilon",type:"float",data:xa}],shaderSource:Aa}},eb=(oa,ba,wa,xa)=>{let Sa={...Zm,cacheHint:`${wa}`};return{...Sa,get:()=>Qm(oa,Sa,ba,wa,xa)}},tb=oa=>{if(!oa||oa.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let ba=oa[0],wa=oa[1],xa=oa[2];if(ba.dims.length<3||wa.dims.length!==1||xa.dims.length!==1)throw new Error("Invalid input shape.");if(wa.dims[0]!==ba.dims[1]||xa.dims[0]!==ba.dims[1])throw new Error("Input shapes are mismatched.");if(ba.type!=="float32"&&ba.type!=="float64"||wa.type!=="float32"&&wa.type!=="float64"||xa.type!=="float32"&&xa.type!=="float64")throw new Error("Invalid input type.");if(oa[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function rb(oa,ba){let wa=oa[0].dims[1],xa=oa[0].dims.length,Sa=-Math.floor((ba.size-1)/2),va=Math.ceil((ba.size-1)/2),Ea=`float(${ba.alpha}) / float(${ba.size})`,La=`float(${ba.bias})`,eu=`float(${ba.beta})`,Ta=`
    float process(int indices[${xa}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${Sa}; i <= ${va}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${wa}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${La} + ${Ea} * square_sum, ${eu});
    }`;return{...kf,cacheHint:ba.cacheKey,output:{dims:oa[0].dims,type:oa[0].type,textureType:0},shaderSource:Ta}}function nb(oa,ba){return{...kf,cacheHint:ba.cacheKey,get:()=>rb(oa,ba)}}var $f,Cf,kf,ob,Bf=L(()=>{Ge(),ae(),$f=(oa,ba,wa)=>(ob(ba),[oa.run(nb(ba,wa),ba)]),Cf=oa=>{let ba=oa.attributes.getFloat("alpha",1e-4),wa=oa.attributes.getFloat("beta",.75),xa=oa.attributes.getFloat("bias",1),Sa=oa.attributes.getInt("size");return ee({alpha:ba,beta:wa,bias:xa,size:Sa})},kf={name:"LRN",inputNames:["X"],inputTypes:[0]},ob=oa=>{if(!oa||oa.length!==1)throw new Error("LRN requires 1 input.");if(oa[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(oa[0].type!=="float32")throw new Error("input should be float type")}}),ib,Bi,Nf,Rf,Mf,ab,sb,ub,lb,fb,cb,pb,db,Gf=L(()=>{Ge(),fe(),xe(),ae(),ib={name:"Pad",inputNames:["A"],inputTypes:[0]},Bi=(oa,ba,wa)=>(ub(ba),[oa.run({...ib,cacheHint:wa.cacheKey,get:()=>sb(oa,ba[0],wa)},ba)]),Nf=oa=>{let ba=oa.attributes.getString("mode","constant"),wa=oa.attributes.getFloat("value",0),xa=oa.attributes.getInts("pads");return ee({mode:ba,value:wa,pads:xa})},Rf=(oa,ba,wa)=>{lb(ba);let xa=ab(oa,ba,wa);return Bi(oa,[ba[0]],xa)},Mf=oa=>oa.attributes.getString("mode","constant"),ab=(oa,ba,wa)=>{if(!oa.session.isInitializer(ba[1].dataId)||ba.length>=3&&!oa.session.isInitializer(ba[2].dataId))throw new Error("dynamic pad attributes are not allowed");let xa=Array.from(ba[1].integerData),Sa=ba.length>=3?ba[2].floatData[0]:0;return ee({mode:wa,pads:xa,value:Sa})},sb=(oa,ba,wa)=>{let xa=U.padShape(ba.dims.slice(),wa.pads),Sa=xa.length,va=`
      ${fb(oa,ba,wa)}
      float process(int[${Sa}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:xa,type:ba.type,textureType:0},shaderSource:va}},ub=oa=>{if(!oa||oa.length!==1)throw new Error("Pad requires 1 input");if(oa[0].type!=="float32"&&oa[0].type!=="float64")throw new Error("Invalid input type.")},lb=oa=>{if(!oa||oa.length!==2&&oa.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(oa[1].type!=="int32")throw new Error("Invalid input type.");if(oa.length>=3&&oa[2].type==="string")throw new Error("Invalid input type.")},fb=(oa,ba,wa)=>{let xa=q(oa.session.backend.glContext.version),[Sa,va]=oa.calculateTextureWidthAndHeight(ba.dims,0),Ea=U.computeStrides(ba.dims);switch(wa.mode){case"constant":return cb(xa,ba.dims,Ea,Sa,va,wa.pads,wa.value);case"reflect":return pb(xa,ba.dims,Ea,Sa,va,wa.pads);case"edge":return db(xa,ba.dims,Ea,Sa,va,wa.pads);default:throw new Error("Invalid mode")}},cb=(oa,ba,wa,xa,Sa,va,Ea)=>{let La=ba.length,eu="";for(let Ta=La-1;Ta>=0;--Ta)eu+=`
        k = m[${Ta}] - ${va[Ta]};
        if (k < 0)  return constant;
        if (k >= ${ba[Ta]}) return constant;
        offset += k * ${wa[Ta]};
        `;return`
      float padA(int m[${La}]) {
        const float constant = float(${Ea});
        int offset = 0;
        int k = 0;
        ${eu}
        vec2 coords = offsetToCoords(offset, ${xa}, ${Sa});
        float value = getColorAsFloat(${oa.texture2D}(A, coords));
        return value;
      }
      `},pb=(oa,ba,wa,xa,Sa,va)=>{let Ea=ba.length,La="";for(let eu=Ea-1;eu>=0;--eu)La+=`
        k = m[${eu}] - ${va[eu]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(ba[eu]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${ba[eu]}) { k = _2n_1 - k; }
        }
        offset += k * ${wa[eu]};
        `;return`
      float padA(int m[${Ea}]) {
        int offset = 0;
        int k = 0;
        ${La}
        vec2 coords = offsetToCoords(offset, ${xa}, ${Sa});
        float value = getColorAsFloat(${oa.texture2D}(A, coords));
        return value;
      }
      `},db=(oa,ba,wa,xa,Sa,va)=>{let Ea=ba.length,La="";for(let eu=Ea-1;eu>=0;--eu)La+=`
        k = m[${eu}] - ${va[eu]};
        if (k < 0)  k = 0;
        if (k >= ${ba[eu]}) k = ${ba[eu]-1};
        offset += k * ${wa[eu]};
      `;return`
      float padA(int m[${Ea}]) {
        int offset = 0;
        int k = 0;
        ${La}
        vec2 coords = offsetToCoords(offset, ${xa}, ${Sa});
        float value = getColorAsFloat(${oa.texture2D}(A, coords));
        return value;
      }
      `}}),zf,Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,hb,Uf,Jf,uo,Zf,so,mb,Qf=L(()=>{Ge(),fe(),ae(),zf=(oa,ba,wa)=>{uo(ba);let xa={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:wa.cacheKey};return[oa.run({...xa,get:()=>Wf(ba,xa,!1,wa)},ba)]},Vf=oa=>{let ba=oa.attributes.getString("auto_pad","NOTSET"),wa=oa.attributes.getInt("ceil_mode",0),xa=oa.attributes.getInt("count_include_pad",0)!==0,Sa=oa.attributes.getInts("kernel_shape"),va=oa.attributes.getInts("strides",[]),Ea=oa.attributes.getInts("pads",[]);if(wa!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return ee({autoPad:ba,ceilMode:wa,countIncludePad:xa,kernelShape:Sa,strides:va,pads:Ea})},Wf=(oa,ba,wa,xa)=>{let[Sa,va]=Kf(oa,xa,wa),Ea=U.size(Sa.kernelShape),La="value += _X(x);",eu="";Sa.countIncludePad?eu+=`value /= float(${Ea});`:eu+=`value /= float(${Ea} - pad);`;let Ta=`
        ${Zf(oa[0].dims,Sa,La,eu,"0.0")}
      `;return{...ba,output:{dims:va,type:oa[0].type,textureType:0},shaderSource:Ta}},Hf=(oa,ba,wa)=>{uo(ba);let xa={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${wa.countIncludePad}`};return[oa.run({...xa,get:()=>Wf(ba,xa,!0,wa)},ba)]},qf=oa=>{let ba=oa.attributes.getInt("count_include_pad",0)!==0;return ee({autoPad:"",ceilMode:0,countIncludePad:ba,kernelShape:[],strides:[],pads:[]})},jf=(oa,ba,wa)=>{uo(ba);let xa={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:wa.cacheKey};return[oa.run({...xa,get:()=>Xf(ba,xa,!1,wa)},ba)]},Yf=oa=>{let ba=oa.attributes.getString("auto_pad","NOTSET"),wa=oa.attributes.getInt("ceil_mode",0),xa=oa.attributes.getInts("kernel_shape"),Sa=oa.attributes.getInts("strides",[]),va=oa.attributes.getInts("pads",[]),Ea=oa.attributes.getInt("storage_order",0),La=oa.attributes.getInts("dilations",[]);if(Ea!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(wa!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return ee({autoPad:ba,ceilMode:wa,countIncludePad:!1,kernelShape:xa,strides:Sa,pads:va,storageOrder:Ea,dilations:La})},Xf=(oa,ba,wa,xa)=>{let[Sa,va]=Kf(oa,xa,wa),Ea=`
      value = max(_X(x), value);
    `,La="",eu=`
      ${Zf(oa[0].dims,Sa,Ea,La,"-1e5")}
    `;return{...ba,output:{dims:va,type:oa[0].type,textureType:0},shaderSource:eu}},Kf=(oa,ba,wa)=>{let xa=oa[0].dims.slice(),Sa=Object.hasOwnProperty.call(ba,"dilations"),va=ba.kernelShape.slice(),Ea=ba.strides.slice(),La=Sa?ba.dilations.slice():[],eu=ba.pads.slice();pr.adjustPoolAttributes(wa,xa,va,Ea,La,eu);let Ta=pr.computePoolOutputShape(wa,xa,Ea,La,va,eu,ba.autoPad),Aa=Object.assign({},ba);return Sa?Object.assign(Aa,{kernelShape:va,strides:Ea,pads:eu,dilations:La,cacheKey:ba.cacheKey}):Object.assign(Aa,{kernelShape:va,strides:Ea,pads:eu,cacheKey:ba.cacheKey}),[Aa,Ta]},hb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Uf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Jf=(oa,ba)=>(uo(ba),[oa.run({...Uf,get:()=>Xf(ba,Uf,!0,hb)},ba)]),uo=oa=>{if(!oa||oa.length!==1)throw new Error("Pool ops requires 1 input.");if(oa[0].type!=="float32"&&oa[0].type!=="float64")throw new Error("Invalid input type.")},Zf=(oa,ba,wa,xa,Sa)=>{let va=oa.length;if(ba.kernelShape.length<=2){let Ea=ba.kernelShape[ba.kernelShape.length-1],La=ba.strides[ba.strides.length-1],eu=ba.pads[ba.pads.length/2-1],Ta=ba.pads[ba.pads.length-1],Aa=oa[va-1],ka="",ru="",nu="";if(eu+Ta!==0?ka=`
          for (int i = 0; i < ${Ea}; i++) {
            x[${va} - 1] = indices[${va} - 1] * ${La} - ${eu} + i;
            if (x[${va} - 1] < 0 || x[${va} - 1] >= ${Aa}) {
              pad++;
              continue;
            }
            ${wa}
          }`:ka=`
          for (int i = 0; i < ${Ea}; i++) {
            x[${va} - 1] = indices[${va} - 1] * ${La} - ${eu} + i;
            ${wa}
          }`,ba.kernelShape.length===2){let su=ba.kernelShape[ba.kernelShape.length-2],uu=ba.strides[ba.strides.length-2],cu=ba.pads[ba.pads.length/2-2],gu=ba.pads[ba.pads.length-2],hu=oa[va-2];cu+gu!==0?ru=`
            for (int j = 0; j < ${su}; j++) {
              x[${va} - 2] = indices[${va} - 2] * ${uu} - ${cu} + j;
              if (x[${va} - 2] < 0 || x[${va} - 2] >= ${hu}) {
                pad+= ${Ea};
                continue;
              }
          `:ru=`
            for (int j = 0; j < ${su}; j++) {
              x[${va} - 2] = indices[${va} - 2] * ${uu} - ${cu} + j;
            `,nu=`
          }
        `}return`
        float process(int indices[${va}]) {
          int x[${va}];
          copyVec(indices, x);

          float value = ${Sa};
          int pad = 0;
          ${ru}
          ${ka}
          ${nu}
          ${xa}
          return value;
        }
      `}else{let Ea=U.size(ba.kernelShape),La=U.computeStrides(ba.kernelShape),eu=La.length,Ta=ba.pads.length,Aa=mb(eu),ka=so(oa,"inputDims"),ru=so(ba.pads,"pads"),nu=so(La,"kernelStrides"),su=so(ba.strides,"strides"),uu=ba.pads.reduce((gu,hu)=>gu+hu),cu="";return uu?cu=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${wa}
          }`:cu=`
          }
          ${wa}
        `,`
        ${Aa}
        float process(int indices[${va}]) {
          int x[${va}];
          copyVec(indices, x);
          int offset[${eu}];
          int pads[${Ta}];
          int inputDims[${va}];
          int kernelStrides[${eu}];
          int strides[${eu}];
          ${ru}
          ${ka}
          ${su}
          ${nu}

          float value = ${Sa};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${Ea}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${va} - ${eu}; j < ${va}; j++) {
              x[j] = indices[j] * strides[j - ${va} + ${eu}]
                + offset[j - ${va} + ${eu}] - pads[j - 2];
              ${cu}
          }
          ${xa}

          return value;
        }
      `}},so=(oa,ba)=>{let wa="";for(let xa=0;xa<oa.length;xa++)wa+=`
      ${ba}[${xa}] = ${oa[xa]};
    `;return wa},mb=oa=>`
  void offsetToIndices(int offset, int[${oa}] strides, out int[${oa}] indices) {
    if (${oa} == 0) {
      return;
    }
    for (int i = 0; i < ${oa} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${oa} - 1] = offset;
  }`}),Tr,Zt,bb,gb,ec,tc,rc,nc,oc,ic,ac,sc=L(()=>{Ge(),pn(),fe(),ae(),Tr=(oa,ba,wa,xa,Sa)=>{gb(ba);let va={name:xa,inputNames:["A"],inputTypes:[0]};return[oa.run({...va,cacheHint:wa.cacheKey,get:()=>bb(oa,ba,wa,xa,Sa,va)},ba)]},Zt=oa=>{let ba=oa.attributes.getInts("axes",[]),wa=oa.attributes.getInt("keepdims",1)===1;return ee({axes:ba,keepDims:wa})},bb=(oa,ba,wa,xa,Sa,va)=>{let Ea=[],La=ba[0].dims.length||1,eu=[],Ta=U.normalizeAxes(wa.axes,ba[0].dims.length),Aa=Sa(ba,Ta),ka=Aa[1];for(let nu=0;nu<ba[0].dims.length;nu++)Ta.indexOf(nu)>=0||Ta.length===0?(wa.keepDims&&Ea.push(1),ka=`
          for(int j${nu} = 0; j${nu} < ${ba[0].dims[nu]}; j${nu}++) {
            inputIdx[${nu}] = j${nu};
            ${ka}
          }`):(eu.push(`inputIdx[${nu}] = outputIdx[${Ea.length}];`),Ea.push(ba[0].dims[nu]));let ru=`
      float process(int outputIdx[${Ea.length||1}]) {
        float value;                 // final result
        int inputIdx[${La}];      // addressing input data
        ${eu.join(`
`)}
        ${Aa[0]}       // init ops for reduce max/min
        ${ka}
        ${Aa[2]}       // final computation for reduce mean
        return value;
      }`;return{...va,output:{dims:Ea,type:ba[0].type,textureType:0},shaderSource:ru}},gb=oa=>{if(!oa||oa.length!==1)throw new Error("Reduce op requires 1 input.");if(Jt.indexOf(oa[0].type)===-1)throw new Error("Invalid input type.")},ec=(oa,ba,wa)=>Tr(oa,ba,wa,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),tc=(oa,ba,wa)=>Tr(oa,ba,wa,"ReduceMean",(xa,Sa)=>{let va=1;for(let Ea=0;Ea<xa[0].dims.length;Ea++)(Sa.indexOf(Ea)>=0||Sa.length===0)&&(va*=xa[0].dims[Ea]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${va}.;`]}),rc=(oa,ba,wa)=>Tr(oa,ba,wa,"ReduceMax",(xa,Sa)=>{let va=[];for(let Ea=0;Ea<xa[0].dims.length;Ea++)(Sa.indexOf(Ea)>=0||Sa.length===0)&&va.push(`inputIdx[${Ea}] = 0;`);return[`${va.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),nc=(oa,ba,wa)=>Tr(oa,ba,wa,"ReduceMin",(xa,Sa)=>{let va=[];for(let Ea=0;Ea<xa[0].dims.length;Ea++)(Sa.indexOf(Ea)>=0||Sa.length===0)&&va.push(`inputIdx[${Ea}] = 0;`);return[`${va.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),oc=(oa,ba,wa)=>Tr(oa,ba,wa,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ic=(oa,ba,wa)=>Tr(oa,ba,wa,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),ac=(oa,ba,wa)=>Tr(oa,ba,wa,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),uc,lc=L(()=>{fe(),uc=(oa,ba)=>{let wa=U.calculateReshapedDims(ba[0].dims,ba[1].integerData);return oa.session.pack?[oa.reshapePacked(ba[0],wa)]:[oa.reshapeUnpacked(ba[0],wa)]}}),fc,Ni,cc,pc,dn,yb,Ri,lo,Mi=L(()=>{Ge(),xe(),ae(),fc={name:"Upsample",inputNames:["X"],inputTypes:[0]},Ni=(oa,ba,wa)=>(Ri(ba,wa),[oa.run({...fc,cacheHint:wa.cacheKey,get:()=>yb(oa,ba,wa)},ba)]),cc=oa=>dn(oa,7),pc=oa=>dn(oa,9),dn=(oa,ba)=>{let wa=ba>=10,xa=oa.attributes.getString("mode","nearest");if(xa!=="nearest"&&xa!=="linear"&&(ba<11||xa!=="cubic"))throw new Error(`unrecognized mode: ${xa}`);let Sa=[];ba<9&&(Sa=oa.attributes.getFloats("scales"),lo(Sa,xa,wa));let va=oa.attributes.getFloat("extrapolation_value",0),Ea=ba>10?oa.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(Ea)===-1)throw new Error(`coordinate_transform_mode '${Ea}' is not supported`);let La=Ea==="tf_crop_and_resize",eu=La,Ta=xa==="nearest"&&ba>=11?oa.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(Ta)===-1)throw new Error(`nearest_mode '${Ta}' is not supported`);let Aa=oa.attributes.getFloat("cubic_coeff_a",-.75),ka=oa.attributes.getInt("exclude_outside",0)!==0;if(ka&&xa!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let ru=ba<11?!0:xa==="nearest"&&Ea==="asymmetric"&&Ta==="floor",nu=0,su=0,uu=0;return ba>10?oa.inputs.length>2?(nu=1,su=2,uu=3):(su=1,uu=2):ba===9&&(su=1),ee({opset:ba,isResize:wa,mode:xa,scales:Sa,extrapolationValue:va,coordinateTransformMode:Ea,useExtrapolation:eu,needRoiInput:La,nearestMode:Ta,cubicCoefficientA:Aa,excludeOutside:ka,useNearest2xOptimization:ru,roiInputIdx:nu,scalesInputIdx:su,sizesInputIdx:uu})},yb=(oa,ba,wa)=>{let xa=q(oa.session.backend.glContext.version),[Sa,va]=oa.calculateTextureWidthAndHeight(ba[0].dims,0),Ea=ba[0].dims.map((uu,cu)=>Math.floor(uu*wa.scales[cu])),[La,eu]=oa.calculateTextureWidthAndHeight(Ea,0),Ta=Ea.length,Aa=new Array(Ta),ka=new Array(Ta),ru=`
      int output_pitches[${Ta}];
      int input_pitches[${Ta}];
      `;for(let uu=Ta-1;uu>=0;uu--)Aa[uu]=uu===Ta-1?1:Aa[uu+1]*Ea[uu+1],ka[uu]=uu===Ta-1?1:ka[uu+1]*ba[0].dims[uu+1],ru+=`
        output_pitches[${uu}] = ${Aa[uu]};
        input_pitches[${uu}] = ${ka[uu]};
        `;let nu=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${Sa}, ${va});
        float value = getColorAsFloat(${xa.texture2D}(X, coords));
        return value;
      }
      `,su=wa.mode==="nearest"?`
    ${nu}
    float process(int indices[${Ta}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${La}, ${eu});

      ${ru}

      int d, m;
      for (int dim = 0; dim < ${Ta}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:Ta===4?`
    ${nu}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${La}, ${eu});

      ${ru}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${ba[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${nu}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${La}, ${eu});

      ${ru}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${ba[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...fc,output:{dims:Ea,type:ba[0].type,textureType:0},shaderSource:su,variables:[{name:"scales",type:"int",arrayLength:wa.scales.length,data:wa.scales.map(uu=>Math.ceil(uu))}]}},Ri=(oa,ba)=>{if(!oa||ba.opset<9&&oa.length!==1||ba.opset>=9&&ba.opset<11&&oa.length!==2||ba.opset>=11&&oa.length<2)throw new Error("invalid inputs.");if(ba.scales.length>0&&oa[0].dims.length!==ba.scales.length)throw new Error("Invalid input shape.");if(oa[0].type==="string")throw new Error("Invalid input tensor types.")},lo=(oa,ba,wa)=>{if(wa){for(let xa of oa)if(xa<=0)throw new Error("Scale value should be greater than 0.")}else for(let xa of oa)if(xa<1)throw new Error("Scale value should be greater than or equal to 1.");if((ba==="linear"||ba==="cubic")&&oa.length!==2&&(oa.length!==4||oa[0]!==1||oa[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${wa?"Resize":"Upsample"} opeartor.`)}}),Gi,Ui,dc,hc,Tb,xb,vb,wb,mc=L(()=>{xe(),ae(),Ft(),br(),Mi(),Gi={name:"Resize",inputNames:["A"],inputTypes:[2]},Ui=(oa,ba,wa)=>(Ri(ba,wa),[oa.run({...Gi,cacheHint:wa.cacheKey,get:()=>Tb(oa,ba,wa)},ba)]),dc=oa=>dn(oa,10),hc=oa=>dn(oa,11),Tb=(oa,ba,wa)=>{let xa=q(oa.session.backend.glContext.version),[Sa,va]=xb(ba,wa);if(Sa.every(hu=>hu===1)&&wa.coordinateTransformMode!=="tf_crop_and_resize")return{...Gi,output:{dims:va,type:ba[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${xa.texture2D}(X, TexCoords);
                    ${xa.output} = v;
                }`};let Ea=va.length;if(Ea<2)throw new Error(`output dimension should be at least 2, but got ${Ea}`);let La=va[Ea-2],eu=va[Ea-1],Ta=ba[0].dims;if(Ea!==Ta.length)throw new Error(`output dimension should match input ${Ta.length}, but got ${Ea}`);let Aa=Ta[Ea-2],ka=Ta[Ea-1],ru=Sa[Ea-2],nu=Sa[Ea-1],su="";if(wa.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${wa.mode}'`);switch(wa.coordinateTransformMode){case"asymmetric":su=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":su=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":su=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${eu}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${La}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${eu}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${La}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":su=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${eu}.0 - 1.0, ${La}.0 - 1.0, ${eu}.0 - 1.0,
                            ${La}.0 - 1.0);
                        vec4 original = vec4(${ka}.0 - 1.0, ${Aa}.0 - 1.0, ${ka}.0 - 1.0,
                            ${Aa}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${wa.coordinateTransformMode}'`)}let uu=Ke(Ea),cu=$t(),gu=`
            const vec2 inputWH = vec2(${Aa}.0, ${ka}.0);
            const vec4 scaleWHWH = vec4(float(${ru}), float(${nu}), float(${ru}), float(${nu}));
            ${cu}
            ${su}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${uu} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${La-1};
                bool hasNextCol = rc.z < ${eu-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${xa.output} = vec4(newValue);
            }
        `;return{...Gi,output:{dims:va,type:ba[0].type,textureType:2},hasMain:!0,shaderSource:gu}},xb=(oa,ba)=>{let wa=oa[0].dims,xa=ba.scales,Sa;if(xa.length===0){let Ea=oa[ba.scalesInputIdx];if(Ea&&Ea.size!==0){if(oa[ba.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");xa=vb(Ea,ba.mode,ba.isResize)}else{let La=oa[ba.sizesInputIdx];if(!La||La.size===0)throw new Error("Either scales or sizes MUST be provided as input.");Sa=Array.from(La.integerData),xa=wb(Sa,wa,ba.mode,ba.isResize)}}else if(oa[ba.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let va=Sa||wa.map((Ea,La)=>Math.floor(Ea*xa[La]));return[xa,va]},vb=(oa,ba,wa)=>{let xa=Array.from(oa.floatData);return lo(xa,ba,wa),xa},wb=(oa,ba,wa,xa)=>{let Sa=ba.length,va=new Array(Sa);for(let Ea=0,La=Sa;Ea<La;Ea++)if(ba[Ea]===0){if(oa[Ea]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");va[Ea]=1}else va[Ea]=oa[Ea]/ba[Ea];return lo(va,wa,xa),va}}),bc,_b,gc=L(()=>{mr(),bc=(oa,ba)=>(_b(ba),[new Fe([ba[0].dims.length],"int32",void 0,void 0,new Int32Array(ba[0].dims))]),_b=oa=>{if(!oa||oa.length!==1)throw new Error("Shape requires 1 input.")}}),zi,yc,Tc,xc,Ob,vc,Ib,Sb,wc=L(()=>{Ge(),pn(),fe(),ae(),zi={name:"Slice",inputNames:["A"],inputTypes:[0]},yc=(oa,ba,wa)=>(Ob(ba),[oa.run({...zi,cacheHint:wa.cacheKey,get:()=>xc(oa,ba[0],wa)},ba)]),Tc=oa=>{let ba=oa.attributes.getInts("starts"),wa=oa.attributes.getInts("ends"),xa=oa.attributes.getInts("axes",[]);return ee({starts:ba,ends:wa,axes:xa})},xc=(oa,ba,wa)=>{let xa=wa.axes.length===0?ba.dims.slice(0).map((Aa,ka)=>ka):wa.axes,Sa=U.normalizeAxes(xa,ba.dims.length),va=wa.starts.map((Aa,ka)=>Aa>ba.dims[Sa[ka]]-1?ba.dims[Sa[ka]]:U.normalizeAxis(Aa,ba.dims[Sa[ka]])),Ea=wa.ends.map((Aa,ka)=>Aa>ba.dims[Sa[ka]]-1?ba.dims[Sa[ka]]:U.normalizeAxis(Aa,ba.dims[Sa[ka]])),La=ba.dims.slice(),eu=[];for(let Aa=0;Aa<Sa.length;Aa++)La[Sa[Aa]]=Ea[Aa]-va[Aa],va[Aa]>0&&eu.push(`outputIdx[${Sa[Aa]}] += ${va[Aa]};`);let Ta=`
      float process(int outputIdx[${La.length}]) {
        ${eu.join(`
      `)}
        return _A(outputIdx);
      }`;return{...zi,output:{dims:La,type:ba.type,textureType:0},shaderSource:Ta}},Ob=oa=>{if(!oa||oa.length!==1)throw new Error("Slice requires 1 input.");if(Jt.indexOf(oa[0].type)===-1)throw new Error("Invalid input type.")},vc=(oa,ba)=>{Sb(ba);let wa=Ib(oa,ba);return[oa.run({...zi,cacheHint:wa.cacheKey,get:()=>xc(oa,ba[0],wa)},[ba[0]])]},Ib=(oa,ba)=>{if(!oa.session.isInitializer(ba[1].dataId)||!oa.session.isInitializer(ba[2].dataId)||ba.length>=4&&!oa.session.isInitializer(ba[3].dataId)||ba.length>=5&&!oa.session.isInitializer(ba[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(ba.length>=5&&ba[4].integerData.some(Ea=>Ea!==1))throw new Error("currently non-1 steps is not supported for Slice");let wa=Array.from(ba[1].integerData),xa=Array.from(ba[2].integerData),Sa=ba.length>=4?Array.from(ba[3].integerData):[],va=`${Sa};${wa};${xa}`;return{starts:wa,ends:xa,axes:Sa,cacheKey:va}},Sb=oa=>{if(!oa||oa.length<3||oa.length>5)throw new Error("Invalid input number.");if(oa[1].type!=="int32"||oa[1].dims.length!==1)throw new Error("Invalid input type.");if(oa[2].type!=="int32"||oa[2].dims.length!==1)throw new Error("Invalid input type.");if(oa.length>=4&&(oa[3].type!=="int32"||oa[3].dims.length!==1))throw new Error("Invalid input type.");if(oa.length>=5&&(oa[4].type!=="int32"||oa[4].dims.length!==1))throw new Error("Invalid input type.")}}),_c,Oc,Ic,Sc,Ac,Pc,Ec,Dc,Ab,Pb,Eb,Lc,Fc=L(()=>{Ge(),fe(),xe(),ae(),ao(),_c={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Oc={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Ic={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Sc=(oa,ba,wa)=>{Lc(ba);let xa=ba[0].dims.slice(),Sa=U.normalizeAxis(wa.axis,xa.length),va=U.sizeToDimension(xa,Sa),Ea=U.sizeFromDimension(xa,Sa);return Dc(oa,ba,wa,va,Ea)},Ac=oa=>ee({axis:oa.attributes.getInt("axis",1)}),Pc=oa=>ee({axis:oa.attributes.getInt("axis",-1)}),Ec=(oa,ba,wa)=>{Lc(ba);let xa=ba[0].dims.slice(),Sa=U.normalizeAxis(wa.axis,xa.length),va=xa.length,Ea=Sa!==va-1,La=[],eu=[],Ta=[],Aa;Ea&&(eu=Array.from({length:va}).map((su,uu)=>uu),eu[Sa]=va-1,eu[va-1]=Sa,eu.map(su=>La.push(xa[su])),Aa=ee({perm:eu}),Ta=yr(oa,ba,Aa));let ka=Ea?U.sizeToDimension(La,va-1):U.sizeToDimension(xa,va-1),ru=Ea?U.sizeFromDimension(La,va-1):U.sizeFromDimension(xa,va-1),nu=Dc(oa,Ea?Ta:ba,wa,ka,ru);return Ea?yr(oa,nu,Aa):nu},Dc=(oa,ba,wa,xa,Sa)=>{let va=Ab(oa,ba[0],xa,Sa,[xa]),Ea=oa.run({..._c,cacheHint:wa.cacheKey,get:()=>va},ba),La=Pb(oa,ba[0],xa,Sa,va.output.dims,[xa]),eu=oa.run({...Oc,cacheHint:wa.cacheKey,get:()=>La},[ba[0],Ea]),Ta=Eb(oa,ba[0],xa,Sa,va.output.dims,La.output.dims);return[oa.run({...Ic,cacheHint:wa.cacheKey,get:()=>Ta},[ba[0],Ea,eu])]},Ab=(oa,ba,wa,xa,Sa)=>{let[va,Ea]=oa.calculateTextureWidthAndHeight(ba.dims,0),La=Sa.length;if(wa<1||xa<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Sa.length!==1)throw new Error("Dimensionality of the output should be 1");if(Sa[0]!==wa)throw new Error("Shape of the output should be equal to logical row count");let eu=q(oa.session.backend.glContext.version),Ta=`
      float process(int[${La}] indices) {
        int logical_row_start_offset = indices[0] * ${xa};

        float max = getColorAsFloat(${eu.texture2D}(A, offsetToCoords(logical_row_start_offset, ${va},
        ${Ea} )));
        for(int i=1; i<${xa}; ++i)
        {
          float current = getColorAsFloat(${eu.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${va}, ${Ea})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{..._c,output:{dims:Sa,type:ba.type,textureType:0},shaderSource:Ta}},Pb=(oa,ba,wa,xa,Sa,va)=>{let[Ea,La]=oa.calculateTextureWidthAndHeight(ba.dims,0),eu=va.length;if(wa<1||xa<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(va.length!==1)throw new Error("Dimensionality of the output should be 1");if(va[0]!==wa)throw new Error("Shape of the output should be equal to logical row count");if(Sa.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Sa[0]!==wa)throw new Error("Shape of the intermediate results should be equal to logical row count");let Ta=q(oa.session.backend.glContext.version),Aa=`
      float process(int[${eu}] indices) {
        int logical_row_start_offset = indices[0] * ${xa};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${xa}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${Ta.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Ea}, ${La}))) - max);
        }

        return norm_factor;
      }`;return{...Oc,output:{dims:va,type:ba.type,textureType:0},shaderSource:Aa}},Eb=(oa,ba,wa,xa,Sa,va)=>{let[Ea,La]=oa.calculateTextureWidthAndHeight(ba.dims,0),eu=ba.dims.length;if(wa<1||xa<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Sa.length!==1||va.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Sa[0]!==wa||va[0]!==wa)throw new Error("Shape of the intermediate results should be equal to logical row count");let Ta=`
      float process(int[${eu}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${Ea}, ${La});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${xa};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Ic,output:{dims:ba.dims,type:ba.type,textureType:0},shaderSource:Ta}},Lc=oa=>{if(!oa||oa.length!==1)throw new Error("Softmax requires 1 input.");if(oa[0].type!=="float32"&&oa[0].type!=="float64")throw new Error("Invalid input type")}}),$c,Cc,kc,Db,Lb,Fb,Bc=L(()=>{Ge(),fe(),ae(),$c={name:"Split",inputNames:["A"],inputTypes:[0]},Cc=(oa,ba,wa)=>{Fb(ba);let xa=U.normalizeAxis(wa.axis,ba[0].dims.length),Sa=Db(oa,ba,xa,wa),va=[];for(let Ea=0;Ea<Sa;++Ea)va.push(oa.run({...$c,cacheHint:`${wa.cacheKey};${Ea}`,get:()=>Lb(oa,ba[0],wa,xa,Ea)},ba));return va},kc=oa=>{let ba=oa.attributes.getInt("axis",0),wa=oa.attributes.getInts("split",[]),xa=oa.outputs.length;return ee({axis:ba,split:wa,numOutputs:xa})},Db=(oa,ba,wa,xa)=>{let[,Sa]=an.splitShape(ba[0].dims,wa,xa.split,xa.numOutputs);return Sa.length},Lb=(oa,ba,wa,xa,Sa)=>{let[va,Ea]=an.splitShape(ba.dims,xa,wa.split,wa.numOutputs),La=Ea[Sa],eu=va[Sa],Ta=`
      float process(int indices[${eu.length}]) {
        indices[${xa}] += ${La};
        return _A(indices);
      }
    `;return{...$c,cacheHint:`${wa.cacheKey}:${Sa}`,output:{dims:eu,type:ba.type,textureType:0},shaderSource:Ta}},Fb=oa=>{if(!oa||oa.length!==1)throw new Error("Split requires one input.");if(oa[0].type!=="int8"&&oa[0].type!=="uint8"&&oa[0].type!=="int16"&&oa[0].type!=="uint16"&&oa[0].type!=="int32"&&oa[0].type!=="uint32"&&oa[0].type!=="float32"&&oa[0].type!=="float64"&&oa[0].type!=="bool")throw new Error("Invalid input type.")}}),Vi,Nc,Rc,$b,Cb,Mc=L(()=>{fe(),Vi=(oa,ba,wa)=>{$b(ba);let xa=U.squeezeShape(ba[0].dims,wa);return[oa.reshapeUnpacked(ba[0],xa)]},Nc=(oa,ba)=>(Cb(ba),Vi(oa,[ba[0]],Array.from(ba[1].integerData))),Rc=oa=>oa.attributes.getInts("axes"),$b=oa=>{if(!oa||oa.length!==1)throw new Error("Squeeze requires 1 input.");if(oa[0].type==="string")throw new Error("invalid input tensor types.")},Cb=oa=>{if(!oa||oa.length!==2)throw new Error("Squeeze requires 2 inputs.");if(oa[1].type!=="int32")throw new Error("Invalid input type.")}}),Gc,kb,Bb,Uc=L(()=>{xe(),ae(),Gc=(oa,ba)=>{Bb(ba);let wa={name:"Sum",inputNames:ba.map((xa,Sa)=>`X${Sa}`),inputTypes:new Array(ba.length).fill(0)};return[oa.run({...wa,get:()=>kb(oa,ba,wa)},ba)]},kb=(oa,ba,wa)=>{let xa=q(oa.session.backend.glContext.version),Sa=ba[0].dims.slice(),va=`
      void main() {
        vec4 result = ${ba.map((Ea,La)=>`${xa.texture2D}(X${La},TexCoords)`).join(" + ")};
        ${xa.output} = result;
      }
    `;return{...wa,output:{dims:Sa,type:ba[0].type,textureType:0},hasMain:!0,shaderSource:va}},Bb=oa=>{if(!oa||oa.length===0)throw new Error("Sum requires inputs.");let ba=oa[0].dims.length;for(let wa=1;wa<oa.length;wa++){if(ba!==oa[wa].dims.length)throw new Error("Input shapes are mismatched.");for(let xa=0;xa<ba;xa++)if(oa[0].dims[xa]!==oa[wa].dims[xa])throw new Error("Input shapes are not matched.")}if(oa[0].type!=="float32"&&oa[0].type!=="float64")throw new Error("Invalid input type.");for(let wa=1;wa<oa.length;wa++)if(oa[0].type!==oa[wa].type)throw new Error("Input types are not matched.")}}),zc,Nb,Rb,Vc=L(()=>{pn(),ae(),zc=(oa,ba)=>{Rb(ba);let wa={name:"Tile",inputNames:["A"],inputTypes:[0]};return[oa.run({...wa,get:()=>Nb(oa,ba,wa)},ba)]},Nb=(oa,ba,wa)=>{let xa=ba[0].dims.slice(),Sa=new Array(xa.length),va=[];for(let eu=0;eu<xa.length;eu++)Sa[eu]=xa[eu]*ba[1].numberData[eu],va.push(`inputIdx[${eu}] = int(mod(float(outputIdx[${eu}]), ${xa[eu]}.));`);let Ea=Sa.length,La=`
      float process(int outputIdx[${Ea}]) {
        int inputIdx[${Ea}];
        ${va.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...wa,output:{dims:Sa,type:ba[0].type,textureType:0},shaderSource:La}},Rb=oa=>{if(!oa||oa.length!==2)throw new Error("Tile requires 2 input.");if(oa[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(oa[1].dims[0]!==oa[0].dims.length)throw new Error("Invalid input shape.");if(Jt.indexOf(oa[0].type)===-1)throw new Error("Invalid input type.");if(oa[1].type!=="int32"&&oa[1].type!=="int16")throw new Error("Invalid repeat type.")}}),Wi,Wc,Hc,Mb,Gb,qc=L(()=>{fe(),Wi=(oa,ba,wa)=>{Mb(ba);let xa=U.unsqueezeShape(ba[0].dims,wa);return[oa.reshapeUnpacked(ba[0],xa)]},Wc=(oa,ba)=>(Gb(ba),Wi(oa,[ba[0]],Array.from(ba[1].integerData))),Hc=oa=>oa.attributes.getInts("axes"),Mb=oa=>{if(!oa||oa.length!==1)throw new Error("Unsqueeze requires 1 input.");if(oa[0].type==="string")throw new Error("invalid input tensor types.")},Gb=oa=>{if(!oa||oa.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(oa[1].type!=="int32")throw new Error("Invalid input type.")}}),jc,Yc=L(()=>{nl(),bl(),Tl(),Il(),no(),lf(),mf(),yf(),vf(),If(),Pf(),Ff(),Bf(),oo(),Gf(),Qf(),sc(),lc(),mc(),gc(),wc(),Fc(),Bc(),Mc(),Uc(),Vc(),ao(),Ai(),qc(),Mi(),jc=[["Abs","","6+",Sl],["Acos","","7+",Al],["Add","","7+",ol],["And","","7+",il],["Asin","","7+",Pl],["Atan","","7+",El],["AveragePool","","7+",zf,Vf],["BatchNormalization","","7+",tl,rl],["Cast","","6+",gl,yl],["Ceil","","6+",Fl],["Clip","","6-10",Ii,Dl],["Clip","","11+",Ll],["Concat","","4+",wl,Ol],["Conv","","1+",$i,Ci],["ConvTranspose","","1+",sf,uf],["Cos","","7+",$l],["Div","","7+",al],["Dropout","","7+",Si],["DepthToSpace","","1+",df,hf],["Equal","","7+",sl],["Elu","","6+",Cl,kl],["Exp","","6+",Bl],["Flatten","","1+",bf,gf],["Floor","","6+",Nl],["FusedConv","com.microsoft","1+",$i,Ci],["Gather","","1+",Tf,xf],["Gemm","","7-10",ki,_f],["Gemm","","11+",ki,Of],["GlobalAveragePool","","1+",Hf,qf],["GlobalMaxPool","","1+",Jf],["Greater","","7+",ul],["Identity","","1+",Si],["ImageScaler","","1+",Sf,Af],["InstanceNormalization","","6+",Df,Lf],["LeakyRelu","","6+",Rl,Ml],["Less","","7+",ll],["LRN","","1+",$f,Cf],["Log","","6+",Gl],["MatMul","","1+",Ql,ef],["MaxPool","","1+",jf,Yf],["Mul","","7+",fl],["Neg","","6+",Ul],["Not","","1+",zl],["Or","","7+",cl],["Pad","","2-10",Bi,Nf],["Pad","","11+",Rf,Mf],["Pow","","7+",pl],["PRelu","","7+",dl],["ReduceLogSum","","1+",ic,Zt],["ReduceMax","","1+",rc,Zt],["ReduceMean","","1+",tc,Zt],["ReduceMin","","1+",nc,Zt],["ReduceProd","","1+",oc,Zt],["ReduceSum","","1-12",ec,Zt],["ReduceSumSquare","","1+",ac,Zt],["Relu","","6+",Vl],["Reshape","","5+",uc],["Resize","","10",Ui,dc],["Resize","","11+",Ui,hc],["Shape","","1+",bc],["Sigmoid","","6+",Wl],["Sin","","7+",Hl],["Slice","","10+",vc],["Slice","","1-9",yc,Tc],["Softmax","","1-12",Sc,Ac],["Softmax","","13+",Ec,Pc],["Split","","2-12",Cc,kc],["Sqrt","","6+",ql],["Squeeze","","1-12",Vi,Rc],["Squeeze","","13+",Nc],["Sub","","7+",hl],["Sum","","6+",Gc],["Tan","","7+",jl],["Tanh","","6+",Yl],["Tile","","6+",zc],["Transpose","","1+",yr,cf],["Upsample","","7-8",Ni,cc],["Upsample","","9",Ni,pc],["Unsqueeze","","1-12",Wi,Hc],["Unsqueeze","","13+",Wc],["Xor","","7+",ml]]});function Kc(oa){let ba={},wa;for(;(wa=Xc.exec(oa))!==null;){let xa=wa[3].split(",").map(Sa=>{let va=Sa.trim().split(" ");return va&&va.length===2?{type:va[0],name:va[1]}:null}).filter(Sa=>Sa!==null);ba[wa[2]]={params:xa,body:wa[4]}}for(let xa in ba){let Sa=Ub.replace("__FUNC__",xa),va=new RegExp(Sa,"gm");for(;(wa=va.exec(oa))!==null;){let Ea=wa[1],La=wa[2],eu=wa[3].split(","),Ta=Ea?`${Ea} ${La};`:"",Aa=ba[xa].body,ka="";ba[xa].params.forEach((nu,su)=>{nu&&(ka+=`${nu.type} ${nu.name} = ${eu[su]};
`)}),Aa=`${ka}
 ${Aa}`,Aa=Aa.replace("return",`${La} = `);let ru=`
      ${Ta}
      {
        ${Aa}
      }
      `;oa=oa.replace(wa[0],ru)}}return oa=oa.replace(Xc,""),oa}var Xc,Ub,Jc=L(()=>{Xc=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Ub="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Gr(oa,ba){let wa=[],xa=[];for(let Sa=0;Sa<oa.length;++Sa)oa[Sa]!==1&&(wa.push(oa[Sa]),xa.push(Sa));return{newShape:wa,keptDims:xa}}function Wb(oa){if(oa.length===0)return 1;let ba=oa[0];for(let wa=1;wa<oa.length;wa++)ba*=oa[wa];return ba}function Zc(oa){let ba=Math.ceil(Math.sqrt(oa));return[ba,Math.ceil(oa/ba)]}var fo,Hi=L(()=>{ut(),fe(),fo=class{constructor(oa){this.maxTextureSize=oa}computeTextureWH(oa,ba){let wa=this.computeTexture(oa,ba);return ba&&ba.isPacked&&(wa[0]/=2,wa[1]/=2),ba&&ba.reverseWH?[wa[1],wa[0]]:wa}computeTexture(oa,ba){let wa=ba&&ba.isPacked;if(oa.length===0)return wa?[2,2]:[1,1];let xa=this.maxTextureSize;if(ba&&ba.breakAxis!==void 0){let Ea=ba.breakAxis>=oa.length?1:oa.slice(ba.breakAxis).reduce((eu,Ta)=>eu*Ta),La=ba.breakAxis<=0?1:oa.slice(0,ba.breakAxis).reduce((eu,Ta)=>eu*Ta);if(Ea>xa||La>xa)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${oa}, breakAxis:${ba.breakAxis}`);else return[Ea,La]}let Sa=oa.slice(0);wa&&(xa=xa*2,Sa=Sa.map((Ea,La)=>La>=Sa.length-2?Sa[La]%2===0?Sa[La]:Sa[La]+1:Sa[La]),Sa.length===1&&(Sa=[2,Sa[0]])),Sa.length!==2&&(Sa=Gr(Sa).newShape);let va=Wb(Sa);return Sa.length<=1&&va<=xa?[1,va]:Sa.length===2&&Sa[0]<=xa&&Sa[1]<=xa?Sa:Sa.length===3&&Sa[0]*Sa[1]<=xa&&Sa[2]<=xa?[Sa[0]*Sa[1],Sa[2]]:Sa.length===3&&Sa[0]<=xa&&Sa[1]*Sa[2]<=xa?[Sa[0],Sa[1]*Sa[2]]:Sa.length===4&&Sa[0]*Sa[1]*Sa[2]<=xa&&Sa[3]<=xa?[Sa[0]*Sa[1]*Sa[2],Sa[3]]:Sa.length===4&&Sa[0]<=xa&&Sa[1]*Sa[2]*Sa[3]<=xa?[Sa[0],Sa[1]*Sa[2]*Sa[3]]:wa?Zc(va/4).map(Ea=>Ea*2):Zc(va)}}}),co,Qc=L(()=>{fe(),Vt(),xe(),Hi(),Ft(),co=class extends pt{constructor(oa){super(oa)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let oa="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${oa}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let oa="coordsToOffset";return{coordsToOffset:new R(`
      int ${oa}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let oa=this.context.outputTextureLayout;return oa.isPacked?this.getPackedOutputSamplingSnippet(oa):this.getUnpackedOutputSamplingSnippet(oa)}getPackedOutputSamplingSnippet(oa){let ba=oa.unpackedShape,wa=[oa.width,oa.height],xa={},Sa="getOutputCoords";switch(ba.length){case 0:xa[Sa]=this.getOutputScalarCoords();break;case 1:xa[Sa]=this.getOutputPacked1DCoords(ba,wa);break;case 2:xa[Sa]=this.getOutputPacked2DCoords(ba,wa);break;case 3:xa[Sa]=this.getOutputPacked3DCoords(ba,wa);break;default:xa[Sa]=this.getOutputPackedNDCoords(ba,wa)}let va=`
      void setOutput(vec4 val) {
        ${q(this.context.glContext.version).output} = val;
      }
    `,Ea="floatTextureSetRGBA";return xa[Ea]=new R(va),xa}getUnpackedOutputSamplingSnippet(oa){let ba=oa.unpackedShape,wa=[oa.width,oa.height],xa={},Sa="getOutputCoords";switch(ba.length){case 0:xa[Sa]=this.getOutputScalarCoords();break;case 1:xa[Sa]=this.getOutputUnpacked1DCoords(ba,wa);break;case 2:xa[Sa]=this.getOutputUnpacked2DCoords(ba,wa);break;case 3:xa[Sa]=this.getOutputUnpacked3DCoords(ba,wa);break;case 4:xa[Sa]=this.getOutputUnpacked4DCoords(ba,wa);break;case 5:xa[Sa]=this.getOutputUnpacked5DCoords(ba,wa);break;case 6:xa[Sa]=this.getOutputUnpacked6DCoords(ba,wa);break;default:throw new Error(`Unsupported output dimensionality: ${ba.length}`)}let va=`
        void setOutput(float val) {
          ${q(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,Ea="floatTextureSetR";return xa[Ea]=new R(va),xa}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(oa,ba){let wa=ba,xa="";return wa[0]===1?(xa=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${wa[1]}.0);
          }
        `,new R(xa)):wa[1]===1?(xa=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${wa[0]}.0);
          }
        `,new R(xa)):(xa=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${wa[0]}, ${wa[1]}));
          return 2 * (resTexRC.y * ${wa[0]} + resTexRC.x);
        }
      `,new R(xa))}getOutputPacked2DCoords(oa,ba){let wa="";if(cr.arraysEqual(oa,ba))return wa=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${ba[0]}, ${ba[1]}));
        }
      `,new R(wa);let xa=ba,Sa=Math.ceil(oa[1]/2);return wa=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${xa[0]}, ${xa[1]}));

          int index = resTexRC.y * ${xa[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${Sa}) * 2;
          int c = 2 * (index / ${Sa});

          return ivec2(r, c);
        }
      `,new R(wa)}getOutputPacked3DCoords(oa,ba){let wa=[ba[0],ba[1]],xa=Math.ceil(oa[2]/2),Sa=xa*Math.ceil(oa[1]/2),va=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${wa[0]}, ${wa[1]}));
          int index = resTexRC.y * ${wa[0]} + resTexRC.x;

          int b = index / ${Sa};
          index -= b * ${Sa};

          // reverse r and c order for packed texture
          int r = imod(index, ${xa}) * 2;
          int c = 2 * (index / ${xa});

          return ivec3(b, r, c);
        }
      `;return new R(va)}getOutputPackedNDCoords(oa,ba){let wa=[ba[0],ba[1]],xa=Math.ceil(oa[oa.length-1]/2),Sa=xa*Math.ceil(oa[oa.length-2]/2),va=Sa,Ea="",La="b, r, c";for(let Ta=2;Ta<oa.length-1;Ta++)va*=oa[oa.length-Ta-1],Ea=`
      int b${Ta} = index / ${va};
      index -= b${Ta} * ${va};
    `+Ea,La=`b${Ta}, `+La;let eu=`
      ivec${oa.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${wa[0]}, ${wa[1]}));
        int index = resTexRC.y * ${wa[0]} + resTexRC.x;

        ${Ea}

        int b = index / ${Sa};
        index -= b * ${Sa};

        // reverse r and c order for packed texture
        int r = imod(index, ${xa}) * 2;
        int c = 2 * (index / ${xa});

        return ivec${oa.length}(${La});
      }
    `;return new R(eu)}getOutputUnpacked1DCoords(oa,ba){let wa=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ba[0]}, ${ba[1]}));
          return resTexRC.y * ${ba[0]} + resTexRC.x;
        }
      `;return new R(wa)}getOutputUnpacked2DCoords(oa,ba){let wa=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ba[0]}, ${ba[1]}));
          int index = resTexRC.y * ${ba[0]} + resTexRC.x;
          int r = index / ${oa[1]};
          int c = index - r * ${oa[1]};
          return ivec2(r, c);
        }
      `;return new R(wa)}getOutputUnpacked3DCoords(oa,ba){let wa="",xa=oa.length,Sa=null;xa<2&&(Sa=[]),Sa=new Array(xa-1),Sa[xa-2]=oa[xa-1];for(let La=xa-3;La>=0;--La)Sa[La]=Sa[La+1]*oa[La+1];let va=["r","c","d"],Ea=Sa.map((La,eu)=>{let Ta=`int ${va[eu]} = index / ${La}`,Aa=eu===Sa.length-1?`int ${va[eu+1]} = index - ${va[eu]} * ${La}`:`index -= ${va[eu]} * ${La}`;return`${Ta}; ${Aa};`}).join("");return wa=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ba[0]}, ${ba[1]}));
          int index = resTexRC.y * ${ba[0]} + resTexRC.x;
          ${Ea}
          return ivec3(r, c, d);
        }
      `,new R(wa)}getOutputUnpacked4DCoords(oa,ba){let wa="",xa=oa.length,Sa=null;xa<2&&(Sa=[]),Sa=new Array(xa-1),Sa[xa-2]=oa[xa-1];for(let La=xa-3;La>=0;--La)Sa[La]=Sa[La+1]*oa[La+1];let va=["r","c","d","d2"],Ea=Sa.map((La,eu)=>{let Ta=`int ${va[eu]} = index / ${La}`,Aa=eu===Sa.length-1?`int ${va[eu+1]} = index - ${va[eu]} * ${La}`:`index -= ${va[eu]} * ${La}`;return`${Ta}; ${Aa};`}).join("");return wa=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ba[0]}, ${ba[1]}));
          int index = resTexRC.y * ${ba[0]} + resTexRC.x;
          ${Ea}
          return ivec4(r, c, d, d2);
        }
      `,new R(wa)}getOutputUnpacked5DCoords(oa,ba){let wa="",xa=oa.length,Sa=null;xa<2&&(Sa=[]),Sa=new Array(xa-1),Sa[xa-2]=oa[xa-1];for(let La=xa-3;La>=0;--La)Sa[La]=Sa[La+1]*oa[La+1];let va=["r","c","d","d2","d3"],Ea=Sa.map((La,eu)=>{let Ta=`int ${va[eu]} = index / ${La}`,Aa=eu===Sa.length-1?`int ${va[eu+1]} = index - ${va[eu]} * ${La}`:`index -= ${va[eu]} * ${La}`;return`${Ta}; ${Aa};`}).join("");return wa=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ba[0]}, ${ba[1]}));
          int index = resTexRC.y * ${ba[0]} + resTexRC.x;
          ${Ea}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(wa)}getOutputUnpacked6DCoords(oa,ba){let wa="",xa=oa.length,Sa=null;xa<2&&(Sa=[]),Sa=new Array(xa-1),Sa[xa-2]=oa[xa-1];for(let La=xa-3;La>=0;--La)Sa[La]=Sa[La+1]*oa[La+1];let va=["r","c","d","d2","d3","d4"],Ea=Sa.map((La,eu)=>{let Ta=`int ${va[eu]} = index / ${La}`,Aa=eu===Sa.length-1?`int ${va[eu+1]} = index - ${va[eu]} * ${La}`:`index -= ${va[eu]} * ${La}`;return`${Ta}; ${Aa};`}).join("");return wa=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${ba[0]}, ${ba[1]}));
         int index = resTexRC.y * ${ba[0]} + resTexRC.x;
         ${Ea}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(wa)}getCommonUtilFuncs(){let oa={},ba="uvFromFlat";oa[ba]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),ba="packedUVfrom1D",oa[ba]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ba="packedUVfrom2D",oa[ba]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ba="packedUVfrom3D",oa[ba]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ba="sampleTexture";let wa=q(this.context.glContext.version);return oa[ba]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${wa.texture2D}(textureSampler, uv).r;
        }`),oa}getInputsSamplingSnippets(){let oa={},ba=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((wa,xa)=>{let Sa=this.context.inputTextureLayouts[xa],va=Kn(wa);Sa.isPacked?oa[va]=this.getPackedSamplerFromInput(va,wa,Sa):oa[va]=this.getUnpackedSamplerFromInput(va,wa,Sa);let Ea=Mu(wa);Sa.unpackedShape.length<=ba.unpackedShape.length&&(Sa.isPacked?oa[Ea]=this.getPackedSamplerAtOutputCoords(Ea,Sa,ba,wa):oa[Ea]=this.getUnpackedSamplerAtOutputCoords(Ea,Sa,ba,wa))}),oa}getPackedSamplerAtOutputCoords(oa,ba,wa,xa){let Sa=ba.unpackedShape,va=wa.unpackedShape,Ea=Kn(xa),La=Sa.length,eu=va.length,Ta=Xe.getBroadcastDims(Sa,va),Aa=Ke(eu),ka=eu-La,ru,nu=St();La===0?ru="":eu<2&&Ta.length>=1?ru="coords = 0;":ru=Ta.map(Ou=>`coords.${nu[Ou+ka]} = 0;`).join(`
`);let su="";eu<2&&La>0?su="coords":su=Sa.map((Ou,uh)=>`coords.${nu[uh+ka]}`).join(", ");let uu="return outputValue;",cu=U.size(Sa)===1,gu=U.size(va)===1;if(La===1&&!cu&&!gu)uu=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(cu&&!gu)eu===1?uu=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:uu=`
          return vec4(outputValue.x);
        `;else if(Ta.length){let Ou=La-2,uh=La-1;Ta.indexOf(Ou)>-1&&Ta.indexOf(uh)>-1?uu="return vec4(outputValue.x);":Ta.indexOf(Ou)>-1?uu="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Ta.indexOf(uh)>-1&&(uu="return vec4(outputValue.xx, outputValue.zz);")}let hu=`
        int lastDim = coords.${nu[eu-1]};
        coords.${nu[eu-1]} = coords.${nu[eu-2]};
        coords.${nu[eu-2]} = lastDim;
      `,mu=`
      vec4 ${oa}() {
        ${Aa} coords = getOutputCoords();
        ${hu}
        ${ru}
        vec4 outputValue = ${Ea}(${su});
        ${uu}
      }
    `;return new R(mu,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(oa,ba,wa,xa){let Sa=[wa.width,wa.height],va=[ba.width,ba.height],Ea=ba.unpackedShape.length,La=wa.unpackedShape.length,eu=ba.unpackedShape,Ta=wa.unpackedShape,Aa=Kn(xa);if(Ea===La&&cr.arraysEqual(va,Sa)){let hu=`
          float ${oa}() {
            return sampleTexture(${xa}, TexCoords);
          }
        `;return new R(hu,["coordinates.sampleTexture"])}let ka=Ke(La),ru=Xe.getBroadcastDims(eu,Ta),nu=La-Ea,su,uu=St();Ea===0?su="":La<2&&ru.length>=1?su="coords = 0;":su=ru.map(hu=>`coords.${uu[hu+nu]} = 0;`).join(`
`);let cu="";La<2&&Ea>0?cu="coords":cu=ba.unpackedShape.map((hu,mu)=>`coords.${uu[mu+nu]}`).join(", ");let gu=`
        float ${oa}() {
          ${ka} coords = getOutputCoords();
          ${su}
          return ${Aa}(${cu});
        }
      `;return new R(gu,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(oa,ba,wa){switch(wa.unpackedShape.length){case 0:return this.getPackedSamplerScalar(oa,ba);case 1:return this.getPackedSampler1D(oa,ba,wa);case 2:return this.getPackedSampler2D(oa,ba,wa);case 3:return this.getPackedSampler3D(oa,ba,wa);default:return this.getPackedSamplerND(oa,ba,wa)}}getUnpackedSamplerFromInput(oa,ba,wa){let xa=wa.unpackedShape;switch(xa.length){case 0:return this.getUnpackedSamplerScalar(oa,ba,wa);case 1:return this.getUnpackedSampler1D(oa,ba,wa);case 2:return this.getUnpackedSampler2D(oa,ba,wa);case 3:return this.getUnpackedSampler3D(oa,ba,wa);case 4:return this.getUnpackedSampler4D(oa,ba,wa);case 5:return this.getUnpackedSampler5D(oa,ba,wa);case 6:return this.getUnpackedSampler6D(oa,ba,wa);default:throw new Error(`Unsupported dimension ${xa.length}-D`)}}getPackedSamplerScalar(oa,ba){let wa=q(this.context.glContext.version),xa=`
          vec4 ${oa}() {
            return ${wa.texture2D}(${ba}, halfCR);
          }
        `;return new R(xa)}getPackedSampler1D(oa,ba,wa){let xa=[wa.width,wa.height],Sa=[xa[1],xa[0]],va=q(this.context.glContext.version),Ea=`vec4 ${oa}(int index) {
      vec2 uv = packedUVfrom1D(
      ${Sa[0]}, ${Sa[1]}, index);
      return ${va.texture2D}(${ba}, uv);
    }`;return new R(Ea,["coordinates.packedUVfrom1D"])}getPackedSampler2D(oa,ba,wa){let xa=wa.unpackedShape,Sa=[wa.width,wa.height],va=q(this.context.glContext.version),Ea=Sa[0],La=Sa[1];if(Sa!=null&&cr.arraysEqual(xa,Sa)){let ka=`vec4 ${oa}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${La}.0, ${Ea}.0);
        return ${va.texture2D}(${ba}, uv);
      }`;return new R(ka)}let eu=Sa,Ta=Math.ceil(xa[1]/2),Aa=`vec4 ${oa}(int row, int col) {
      vec2 uv = packedUVfrom2D(${eu[1]}, ${eu[0]}, ${Ta}, row, col);
      return ${va.texture2D}(${ba}, uv);
    }`;return new R(Aa,["coordinates.packedUVfrom2D"])}getPackedSampler3D(oa,ba,wa){let xa=wa.unpackedShape,Sa=[wa.width,wa.height],va=[Sa[0],Sa[1]],Ea=q(this.context.glContext.version);if(xa[0]===1){let ru=xa.slice(1),nu=[1,2],su=kr(xa,ru),uu=["b","row","col"],cu=JSON.parse(JSON.stringify(wa));cu.unpackedShape=su;let gu=this.getPackedSamplerFromInput(oa,ba,cu),hu=`${gu.routineBody}
      vec4 ${oa}(int b, int row, int col) {
        return ${oa}(${Br(uu,nu)});
      } `;return new R(hu,gu.dependencies)}let La=va[0],eu=va[1],Ta=Math.ceil(xa[2]/2),Aa=Ta*Math.ceil(xa[1]/2),ka=`vec4 ${oa}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${eu}, ${La}, ${Aa}, ${Ta}, b, row, col);
      return ${Ea.texture2D}(${ba}, uv);}`;return new R(ka,["coordinates.packedUVfrom3D"])}getPackedSamplerND(oa,ba,wa){let xa=wa.unpackedShape,Sa=xa.length,va=[wa.width,wa.height],Ea=q(this.context.glContext.version),La=[va[0],va[1]],eu=La[1],Ta=La[0],Aa=Math.ceil(xa[Sa-1]/2),ka=Aa*Math.ceil(xa[Sa-2]/2),ru="int b, int row, int col",nu=`b * ${ka} + (row / 2) * ${Aa} + (col / 2)`;for(let uu=2;uu<Sa-1;uu++)ru=`int b${uu}, `+ru,ka*=xa[Sa-uu-1],nu=`b${uu} * ${ka} + `+nu;let su=`vec4 ${oa}(${ru}) {
      int index = ${nu};
      int texR = index / ${Ta};
      int texC = index - texR * ${Ta};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${Ta}, ${eu});
      return ${Ea.texture2D}(${ba}, uv);
    }`;return new R(su)}getUnpackedSamplerScalar(oa,ba,wa){let[xa,Sa]=[wa.width,wa.height];if(xa===1&&Sa===1){let Ea=`
          float ${oa}() {
            return sampleTexture(${ba}, halfCR);
          }
        `;return new R(Ea,["coordinates.sampleTexture"])}let va=`
        float ${oa}() {
          int offset_${ba} = coordsToOffset(TexCoords, ${xa}, ${Sa});
          vec2 uv = uvFromFlat(${xa}, ${Sa}, offset_${ba});
          return sampleTexture(${ba}, uv);
        }
      `;return new R(va,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(oa,ba,wa){let xa=wa.width,Sa=wa.height;if(Sa===1&&xa===1){let Ea=`
        float ${oa}(int index) {
          return sampleTexture(${ba}, halfCR);
        }
      `;return new R(Ea,["coordinates.sampleTexture"])}if(Sa===1){let Ea=`
          float ${oa}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${xa}.0, 0.5);
            return sampleTexture(${ba}, uv);
          }
        `;return new R(Ea,["coordinates.sampleTexture"])}if(xa===1){let Ea=`
          float ${oa}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${Sa}.0);
            return sampleTexture(${ba}, uv);
          }
        `;return new R(Ea,["coordinates.sampleTexture"])}let va=`
        float ${oa}(int index) {
          vec2 uv = uvFromFlat(${xa}, ${Sa}, index);
          return sampleTexture(${ba}, uv);
        }
      `;return new R(va,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(oa,ba,wa){let xa=wa.unpackedShape,Sa=[wa.height,wa.width];if(Sa!=null&&cr.arraysEqual(xa,Sa)){let ka=Sa[1],ru=Sa[0],nu=`
          float ${oa}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${ka}.0, ${ru}.0);
            return sampleTexture(${ba}, uv);
          }
        `;return new R(nu,["coordinates.sampleTexture"])}let{newShape:va,keptDims:Ea}=Gr(xa),La=va;if(La.length<xa.length){let ka=kr(xa,La),ru=JSON.parse(JSON.stringify(wa));ru.unpackedShape=ka;let nu=["col","row"],su=`
          ${this.getUnpackedSamplerFromInput(oa,ba,ru).routineBody}
          float ${oa}(int row, int col) {
            return ${oa}(${Br(nu,Ea)});
          }
        `;return new R(su,["coordinates.sampleTexture"])}let eu=Sa[1],Ta=Sa[0];if(Ta===1){let ka=`
          float ${oa}(int row, int col) {
            int offset_${ba} = coordsToOffset(TexCoords, ${eu}, ${Ta});
            float index = dot(vec3(row, col, offset_${ba}), vec3(${xa[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${eu}.0);
            return sampleTexture(${ba}, uv);
          }
        `;return new R(ka,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(eu===1){let ka=`
          float ${oa}(int row, int col) {
            int offset_${ba} = coordsToOffset(TexCoords, ${eu}, ${Ta});
            float index = dot(vec3(row, col, offset_${ba}), vec3(${xa[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${Ta}.0, 0.5);
            return sampleTexture(${ba}, uv);
          }
        `;return new R(ka,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let Aa=`
        float ${oa}(int row, int col) {
          int index = col * ${xa[1]} + row;
          vec2 uv = uvFromFlat(${eu}, ${Ta}, index);
          return sampleTexture(${ba}, uv);
        }
      `;return new R(Aa,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(oa,ba,wa){let xa=wa.unpackedShape,Sa=xa[1]*xa[2],va=xa[2],{newShape:Ea,keptDims:La}=Gr(xa),eu=Ea;if(eu.length<xa.length){let ru=kr(xa,eu),nu=["batch","col","row"],su=JSON.parse(JSON.stringify(wa));su.unpackedShape=ru;let uu=this.getUnpackedSamplerFromInput(oa,ba,su),cu=La.reverse(),gu=`
          ${uu.routineBody}
          float ${oa}(int batch, int row, int col) {
            return ${oa}(${Br(nu,cu)});
          }
        `;return new R(gu,uu.dependencies)}let Ta=wa.width,Aa=wa.height,ka=`
          float ${oa}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${Sa} + col * ${va} + row;
            vec2 uv = uvFromFlat(${Ta}, ${Aa}, index);
            return sampleTexture(${ba}, uv);
          }
      `;return new R(ka,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(oa,ba,wa){let xa=wa.unpackedShape,Sa=xa[3],va=xa[2]*Sa,Ea=xa[1]*va,La=wa.width,eu=wa.height,Ta=`
        float ${oa}(int row, int col, int depth, int depth2) {
          int index = row * ${Ea} + col * ${va} +
              depth2 * ${Sa} + depth;
          vec2 uv = uvFromFlat(${La}, ${eu}, index);
          return sampleTexture(${ba}, uv);
        }
      `;return new R(Ta,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(oa,ba,wa){let xa=wa.unpackedShape,Sa=xa[4],va=xa[3]*Sa,Ea=xa[2]*va,La=xa[1]*Ea,{newShape:eu,keptDims:Ta}=Gr(xa);if(eu.length<xa.length){let nu=kr(xa,eu),su=["row","col","depth","depth2","depth3"],uu=JSON.parse(JSON.stringify(wa));uu.unpackedShape=nu;let cu=`
          ${this.getUnpackedSamplerFromInput(oa,ba,uu).routineBody}
          float ${oa}(int row, int col, int depth, int depth2, int depth3) {
            return ${oa}(${Br(su,Ta)});
          }
        `;return new R(cu,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let Aa=wa.width,ka=wa.height,ru=`
        float ${oa}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${La} + col * ${Ea} + depth * ${va} +
          depth3 * ${Sa} + depth2;
          vec2 uv = uvFromFlat(${Aa}, ${ka}, index);
          return sampleTexture(${ba}, uv);
        }
      `;return new R(ru,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(oa,ba,wa){let xa=wa.unpackedShape,Sa=xa[5],va=xa[4]*Sa,Ea=xa[3]*va,La=xa[2]*Ea,eu=xa[1]*La,{newShape:Ta,keptDims:Aa}=Gr(xa);if(Ta.length<xa.length){let su=kr(xa,Ta),uu=["row","col","depth","depth2","depth3","depth4"],cu=JSON.parse(JSON.stringify(wa));cu.unpackedShape=su;let gu=`
            ${this.getUnpackedSamplerFromInput(oa,ba,cu).routineBody}
            float ${oa}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${oa}(${Br(uu,Aa)});
            }
          `;return new R(gu,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let ka=wa.width,ru=wa.height,nu=`
          float ${oa}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${eu} + col * ${La} + depth * ${Ea} +
            depth2 * ${va} + depth3 * ${Sa} + depth4;
            vec2 uv = uvFromFlat(${ka}, ${ru}, index);
            return sampleTexture(${ba}, uv);
          }
        `;return new R(nu,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let oa=this.context.outputTextureLayout,ba=oa.shape.length,wa=oa.strides,xa=oa.width,Sa=oa.height,va=[];for(let La=0;La<ba-1;++La)va.push(`
        c[${La}] = offset / ${wa[La]};`),va.push(`
        offset -= c[${La}] * ${wa[La]};`);va.push(`
        c[${ba-1}] = offset;`);let Ea=`
      void toVec(vec2 texCoords, out int c[${ba}]) {
        int offset = coordsToOffset(texCoords, ${xa}, ${Sa});
        ${va.join("")}
      }
      void toVec(int offset, out int c[${ba}]) {
        ${va.join("")}
      }
    `;return{toVec:new R(Ea,["coordinates.coordsToOffset"])}}valueFrom(){let oa={};return this.context.programInfo.inputNames.forEach((ba,wa)=>{let xa=this.context.inputTextureLayouts[wa],Sa=(xa.unpackedShape.length>0?xa.unpackedShape:xa.shape).length,va=`_${ba}`;oa[va]=new R(this.getValueFromSingle(ba,Sa,xa.width,xa.height,!1),[`shapeUtils.indicesToOffset${va}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),va=va+"_T",oa[va]=new R(this.getValueFromSingle(ba,Sa,xa.width,xa.height,!0),[`shapeUtils.indicesToOffset${va}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),oa}getValueFromSingle(oa,ba,wa,xa,Sa){let va=`_${oa}`;Sa&&(va=va+"_T");let Ea=q(this.context.glContext.version);return`
        float ${va}(int m[${ba}]) {
          int offset = indicesToOffset${va}(m);
          vec2 coords = offsetToCoords(offset, ${wa}, ${xa});
          float value = getColorAsFloat(${Ea.texture2D}(${oa}, coords));
          return value;
        }
        `}getPackedValueFrom(oa,ba,wa,xa,Sa){let va=`_${oa}_Pack`;Sa&&(va=va+"_T");let Ea=q(this.context.glContext.version);return`
        vec4 ${va}(int m[${ba}]) {
          int offset = indicesToOffset_${oa}(m);
          vec2 coords = offsetToCoords(offset, ${wa}, ${xa});
          return ${Ea.texture2D}(${oa}, coords);
        }
        `}}}),po,ep=L(()=>{Vt(),po=class Cg extends pt{constructor(ba){super(ba)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let ba=Cg.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${ba}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let ba=Cg.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${ba}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let ba=new ArrayBuffer(4),wa=new Uint32Array(ba),xa=new Uint8Array(ba);if(wa[0]=3735928559,xa[0]===239)return!0;if(xa[0]===222)return!1;throw new Error("unknown endianness")}}}),ho,tp=L(()=>{Vt(),xe(),ho=class extends pt{constructor(oa){super(oa)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let oa=q(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${oa.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),mo,rp=L(()=>{Vt(),mo=class Y1 extends pt{constructor(ba){super(ba)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let ba=this.context.outputTextureLayout.shape.length,wa={};return this.context.programInfo.inputNames.forEach((xa,Sa)=>{let va=this.context.inputTextureLayouts[Sa].unpackedShape;if(va.length<=ba){let Ea=va.length,La=ba-Ea,eu=`bcastIndices_${xa}`,Ta="";for(let ka=0;ka<Ea;++ka)Ta+=`
          realIndices[${ka}] = int( mod(float(bcastedIndices[${La+ka}]), ${va[ka]}.0) );
          `;let Aa=`
        void ${eu} (int bcastedIndices[${ba}], out int realIndices[${Ea}]) {
          ${Ta}
        }
        `;wa[eu]=new R(Aa)}}),wa}bcastMatmulIndex(){let ba=this.context.outputTextureLayout.shape.length,wa={};return this.context.programInfo.inputNames.forEach((xa,Sa)=>{let va=this.context.inputTextureLayouts[Sa].shape;if(!(va.length<2||va.length>ba)){let Ea=va.length,La=ba-Ea,eu=`bcastMatmulIndices_${xa}`,Ta="";for(let ka=0;ka<Ea-2;++ka)Ta+=`
          realIndices[${ka}] = int( mod(float(bcastedIndices[${La+ka}]), ${va[ka]}.0) );
          `;let Aa=`
        void ${eu}(int bcastedIndices[${ba}], out int realIndices[${Ea}]) {
          ${Ta}
          realIndices[${Ea-1}] = bcastedIndices[${ba-1}];
          realIndices[${Ea-2}] = bcastedIndices[${ba-2}];
        }
        `;wa[eu]=new R(Aa)}}),wa}indicesToOffset(){let ba={};return this.context.programInfo.inputNames.forEach((wa,xa)=>{let Sa=this.context.inputTextureLayouts[xa].shape,va=this.context.inputTextureLayouts[xa].strides,Ea=Sa.length,La=`indicesToOffset_${wa}`;ba[La]=new R(Y1.indexToOffsetSingle(La,Ea,va)),La=`indicesToOffset_${wa}_T`,ba[La]=new R(Y1.indexToOffsetSingle(La,Ea,va.slice().reverse()))}),ba}static indexToOffsetSingle(ba,wa,xa){let Sa="";for(let va=wa-1;va>=0;--va)Sa+=`
        offset += indices[${va}] * ${xa[va]};
        `;return`
      int ${ba}(int indices[${wa}]) {
        int offset = 0;
        ${Sa}
        return offset;
      }
      `}offsetToIndices(){let ba={};return this.context.programInfo.inputNames.forEach((wa,xa)=>{let Sa=this.context.inputTextureLayouts[xa].shape,va=this.context.inputTextureLayouts[xa].strides,Ea=Sa.length,La=`offsetToIndices_${wa}`;ba[La]=new R(Y1.offsetToIndicesSingle(La,Ea,va)),La=`offsetToIndices_${wa}_T`,ba[La]=new R(Y1.offsetToIndicesSingle(La,Ea,va.slice().reverse()))}),ba}static offsetToIndicesSingle(ba,wa,xa){let Sa=[];for(let va=0;va<wa-1;++va)Sa.push(`
      indices[${va}] = offset / ${xa[va]};`),Sa.push(`
        offset -= indices[${va}] * ${xa[va]};`);return Sa.push(`
      indices[${wa-1}] = offset;`),`
      void ${ba}(int offset, out int indices[${wa}]) {
        ${Sa.join("")}
      }
      `}incrementIndices(){let ba={};return this.context.programInfo.inputNames.forEach((wa,xa)=>{let Sa=this.context.inputTextureLayouts[xa].shape,va=Sa.length,Ea=`incrementIndices_${wa}`,La="";for(let Ta=0;Ta<va;++Ta)La+=`
        shape[${Ta}] = ${Sa[Ta]};`;let eu=`
        void ${Ea}(int axis, out int indices[${va}]) {
          int shape[${va}];
          ${La};
          for(int i = ${va} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;ba[Ea]=new R(eu)}),ba}}}),bo,np=L(()=>{Vt(),bo=class extends pt{constructor(oa){super(oa)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let oa=this.context.outputTextureLayout.shape.length,ba={add:"+=",sub:"-=",mul:"*=",div:"/="},wa={};for(let xa in ba){let Sa=`${xa}Vec`,va="";for(let La=0;La<oa;++La)va+=`
          dest[${La}] ${ba[xa]} src[${La}];
          `;let Ea=`
        void ${Sa}(int src[${oa}], out int dest[${oa}]) {
          ${va}
        }
        `;wa[Sa]=new R(Ea)}return wa}copyVec(){let oa=this.context.outputTextureLayout.shape.length,ba="";for(let xa=0;xa<oa;++xa)ba+=`
        dest[${xa}] = src[${xa}];
        `;let wa=`
      void copyVec(int src[${oa}], out int dest[${oa}]) {
        ${ba}
      }
      `;return{copyVec:new R(wa)}}setVecItem(){let oa=this.context.outputTextureLayout.shape.length,ba=`
        if(index < 0)
            index =${oa} + index;
        if (index == 0)
            m[0] = value;
        `;for(let xa=1;xa<oa-1;++xa)ba+=`
        else if (index == ${xa})
            m[${xa}] = value;
            `;ba+=`
        else
            m[${oa-1}] = value;
        `;let wa=`
      void setVecItem(out int m[${oa}], int index, int value) {
        ${ba}
      }
        `;return{setVecItem:new R(wa)}}getVecItem(){let oa=this.context.outputTextureLayout.shape.length,ba=`
        if(index < 0)
            index = ${oa} + index;
        if (index == 0)
            return m[0];
      `;for(let xa=1;xa<oa-1;++xa)ba+=`
        else if (index == ${xa})
            return m[${xa}];
      `;ba+=`
        else
            return m[${oa-1}];
        `;let wa=`
      int getVecItem(int m[${oa}], int index) {
        ${ba}
      }
    `;return{getVecItem:new R(wa)}}}}),qi,op=L(()=>{Qc(),ep(),tp(),rp(),np(),qi={encoding:po,fragcolor:ho,vec:bo,shapeUtils:mo,coordinates:co}}),go,ip=L(()=>{Vt(),Jc(),op(),xe(),go=class{constructor(oa,ba,wa,xa){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new eo(oa,ba,wa,xa),Object.keys(qi).forEach(va=>{let Ea=new qi[va](this.context);this.libs[va]=Ea});let Sa=this.glslLibRoutineDependencyGraph;for(let va in this.libs){let Ea=this.libs[va].getFunctions();for(let La in Ea){let eu=va+"."+La,Ta;Sa[eu]?(Ta=Sa[eu],Ta.routineBody=Ea[La].routineBody):(Ta=new cn(eu,Ea[La].routineBody),Sa[eu]=Ta);let Aa=Ea[La].dependencies;if(Aa)for(let ka=0;ka<Aa.length;++ka)if(Sa[Aa[ka]])Ta.addDependency(Sa[Aa[ka]]);else{let ru=new cn(Aa[ka]);Sa[Aa[ka]]=ru,Ta.addDependency(ru)}}}}preprocess(){let oa=this.context.programInfo,ba=oa.shaderSource;return this.context.programInfo.hasMain||(ba=`${ba}
      ${Ru(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),ba=Kc(ba),`${Nu(this.context.glContext.version)}
    ${this.getUniforms(oa.inputNames,oa.variables)}
    ${this.getImports(ba)}
    ${ba}`}getImports(oa){let ba=this.selectGlslLibRoutinesToBeIncluded(oa);if(ba.length===0)return"";let wa="";for(let xa=0;xa<ba.length;++xa)if(ba[xa].routineBody)wa+=ba[xa].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${ba[xa].name}`);return wa}selectGlslLibRoutinesToBeIncluded(oa){let ba=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(wa=>{let xa=wa.split(".")[1];oa.indexOf(xa)!==-1&&ba.push(this.glslLibRoutineDependencyGraph[wa])}),to.returnOrderedNodes(ba)}getUniforms(oa,ba){let wa=[];if(oa)for(let xa of oa)wa.push(`uniform sampler2D ${xa};`);if(ba)for(let xa of ba)wa.push(`uniform ${xa.type} ${xa.name}${xa.arrayLength?`[${xa.arrayLength}]`:""};`);return wa.join(`
`)}}}),yo,ap=L(()=>{vt(),ut(),ip(),xe(),yo=class{constructor(oa,ba,wa){this.profiler=oa,this.glContext=ba,this.textureLayoutStrategy=wa,this.repo=new Map,this.attributesBound=!1}getArtifact(oa){return this.repo.get(oa)}setArtifact(oa,ba){this.repo.set(oa,ba)}run(oa,ba,wa){this.profiler.event("op",`ProgramManager.run ${oa.programInfo.name??"unknown kernel"}`,()=>{let xa=this.glContext.gl,Sa=oa.program;xa.useProgram(Sa);try{this.bindOutput(wa),this.attributesBound||this.bindAttributes(oa.attribLocations),this.bindUniforms(oa.uniformLocations,oa.programInfo.variables??[],ba)}catch(va){throw ce.error("ProgramManager",oa.programInfo.shaderSource),va}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(oa=>this.glContext.deleteProgram(oa.program))}build(oa,ba,wa){return this.profiler.event("backend","ProgramManager.build",()=>{let xa=new go(this.glContext,oa,ba,wa),Sa=xa.preprocess(),va=this.compile(Sa);return{programInfo:oa,program:va,uniformLocations:this.getUniformLocations(va,xa.context.programInfo.inputNames,xa.context.programInfo.variables),attribLocations:this.getAttribLocations(va)}})}compile(oa){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let xa=Bu(this.glContext.version);this.vertexShader=this.glContext.compileShader(xa,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${oa}
`);let ba=this.glContext.compileShader(oa,this.glContext.gl.FRAGMENT_SHADER),wa=this.glContext.createProgram(this.vertexShader,ba);return this.glContext.deleteShader(ba),wa}bindOutput(oa){let ba=oa.width,wa=oa.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${ba}/${wa}, shape=${oa.shape}, type=${oa.tensor.type}`),this.glContext.attachFramebuffer(oa.texture,ba,wa)}bindAttributes(oa){let ba=oa.position,wa=oa.textureCoord;this.glContext.setVertexAttributes(ba,wa),this.attributesBound=!0}bindUniforms(oa,ba,wa){var va;let xa=this.glContext.gl,Sa=0;for(let{name:Ea,type:La,location:eu,arrayLength:Ta}of oa){let Aa=(va=ba.find(ka=>ka.name===Ea))==null?void 0:va.data;if(La!=="sampler2D"&&!Aa)throw new Error(`variable '${Ea}' does not have data defined in program info`);switch(La){case"sampler2D":this.bindTexture(wa[Sa],eu,Sa),Sa++;break;case"float":Ta?xa.uniform1fv(eu,Aa):xa.uniform1f(eu,Aa);break;case"int":Ta?xa.uniform1iv(eu,Aa):xa.uniform1i(eu,Aa);break;default:throw new Error(`Uniform not implemented: ${La}`)}}}bindTexture(oa,ba,wa){this.glContext.bindTextureToUniform(oa.texture,wa,ba)}getAttribLocations(oa){return{position:this.getAttribLocation(oa,"position"),textureCoord:this.getAttribLocation(oa,"textureCoord")}}getUniformLocations(oa,ba,wa){let xa=[];if(ba)for(let Sa of ba)xa.push({name:Sa,type:"sampler2D",location:this.getUniformLocation(oa,Sa)});if(wa)for(let Sa of wa)xa.push({...Sa,location:this.getUniformLocation(oa,Sa.name)});return xa}getUniformLocation(oa,ba){let wa=this.glContext.gl.getUniformLocation(oa,ba);if(wa===null)throw new Error(`Uniform ${ba} not found.`);return wa}getAttribLocation(oa,ba){return this.glContext.gl.getAttribLocation(oa,ba)}}}),To,sp=L(()=>{ut(),ln(),To=class{constructor(oa,ba,wa,xa){this.glContext=oa,this.layoutStrategy=ba,this.profiler=wa,this.config=xa,this.pendingRead=new Map,xa.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(oa,ba,wa,xa){let Sa=this.toEncoderType(oa),va=this.glContext.getEncoder(Sa,ba.channels||1,xa);if(ba.isPacked&&xa===1)throw new Error("not implemented");let Ea=ba.width,La=ba.height,eu,Ta;if(this.config.reuseTextures){eu=`${Ea}x${La}_${va.format}_${va.internalFormat}_${va.textureType}`,Ta=this.inUseTextures.get(eu),Ta||(Ta=[],this.inUseTextures.set(eu,Ta));let ka=this.idleTextures.get(eu);if(ka&&ka.length>0){let ru=ka.pop();return Ta.push(ru),xa===1&&this.glContext.updateTexture(ru,Ea,La,va,this.toTextureData(oa,wa)),ru}}ce.verbose("TextureManager",`Creating new texture of size ${ba.width}x${ba.height}`);let Aa=this.glContext.allocateTexture(Ea,La,va,this.toTextureData(oa,wa));return this.config.reuseTextures&&(Ta.push(Aa),this.textureLookup.set(Aa,eu)),Aa}readTexture(oa,ba,wa){return wa||(wa=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let xa=oa.shape.reduce((va,Ea)=>va*Ea)*wa,Sa=this.glContext.readTexture(oa.texture,oa.width,oa.height,xa,this.toEncoderType(ba),wa);return this.toTensorData(ba,Sa)})}async readTextureAsync(oa,ba,wa){let xa=oa.tensor.dataId;if(wa||(wa=1),this.pendingRead.has(xa)){let Sa=this.pendingRead.get(xa);return new Promise(va=>Sa==null?void 0:Sa.push(va))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(xa,[]);let Sa=oa.shape.reduce((eu,Ta)=>eu*Ta)*wa;await this.glContext.createAndWaitForFence();let va=this.glContext.readTexture(oa.texture,oa.width,oa.height,Sa,this.toEncoderType(ba),wa),Ea=this.toTensorData(ba,va),La=this.pendingRead.get(xa);return this.pendingRead.delete(xa),La==null||La.forEach(eu=>eu(Ea)),Ea})}readUint8TextureAsFloat(oa){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let ba=oa.shape.reduce((xa,Sa)=>xa*Sa),wa=this.glContext.readTexture(oa.texture,oa.width,oa.height,ba*4,"byte",4);return new Float32Array(wa.buffer,wa.byteOffset,ba)})}releaseTexture(oa,ba){let wa;if(this.config.reuseTextures&&(wa=this.textureLookup.get(oa.texture),wa)){ba&&this.textureLookup.delete(wa);let xa=this.inUseTextures.get(wa);if(xa){let Sa=xa.indexOf(oa.texture);if(Sa!==-1){xa.splice(Sa,1);let va=this.idleTextures.get(wa);va||(va=[],this.idleTextures.set(wa,va)),va.push(oa.texture)}}}(!wa||ba)&&(ce.verbose("TextureManager",`Deleting texture of size ${oa.width}x${oa.height}`),this.glContext.deleteTexture(oa.texture))}toTensorData(oa,ba){switch(oa){case"int16":return ba instanceof Int16Array?ba:Int16Array.from(ba);case"int32":return ba instanceof Int32Array?ba:Int32Array.from(ba);case"int8":return ba instanceof Int8Array?ba:Int8Array.from(ba);case"uint16":return ba instanceof Uint16Array?ba:Uint16Array.from(ba);case"uint32":return ba instanceof Uint32Array?ba:Uint32Array.from(ba);case"uint8":case"bool":return ba instanceof Uint8Array?ba:Uint8Array.from(ba);case"float32":return ba instanceof Float32Array?ba:Float32Array.from(ba);case"float64":return ba instanceof Float64Array?ba:Float64Array.from(ba);default:throw new Error(`TensorData type ${oa} is not supported`)}}toTextureData(oa,ba){if(ba)return ba instanceof Float32Array?ba:new Float32Array(ba)}toEncoderType(oa){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),xo,up=L(()=>{ut(),ws(),Qu(),Yc(),ap(),Hi(),sp(),xo=class{constructor(oa,ba){this.backend=oa,this.context=ba,this.layoutStrategy=new fo(oa.glContext.maxTextureSize),this.programManager=new yo(this.context.profiler,oa.glContext,this.layoutStrategy),this.textureManager=new To(oa.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:oa.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=oa.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Qn(this)}onGraphInitialized(oa){let ba=oa.getValues().filter(wa=>wa.from===-1&&wa.tensor).map(wa=>wa.tensor.dataId);this.initializers=new Set(ba)}isInitializer(oa){return this.initializers?this.initializers.has(oa):!1}addInitializer(oa){this.initializers.add(oa)}getTextureData(oa,ba){return ba?this.packedTextureDataCache.get(oa):this.unpackedTextureDataCache.get(oa)}setTextureData(oa,ba,wa=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),wa?this.packedTextureDataCache.set(oa,ba):this.unpackedTextureDataCache.set(oa,ba)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(oa=>this.textureManager.releaseTexture(oa,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(oa=>this.textureManager.releaseTexture(oa,!0)),this.unpackedTextureDataCache=new Map}resolve(oa,ba,wa){let xa=vs(oa,ba,jc);return{impl:xa.opImpl,context:xa.opInit?xa.opInit(oa,wa):oa}}}});function Hb(oa){let ba=0;for(;ba<oa.length&&oa[ba]();++ba);return ba-1}var hn,lp=L(()=>{vt(),ln(),ln(),Ft(),hn=class{constructor(oa,ba){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=oa,this.version=ba,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(oa,ba,wa,xa){let Sa=this.gl,va=Sa.createTexture();Sa.bindTexture(Sa.TEXTURE_2D,va),Sa.texParameteri(Sa.TEXTURE_2D,Sa.TEXTURE_MIN_FILTER,Sa.NEAREST),Sa.texParameteri(Sa.TEXTURE_2D,Sa.TEXTURE_MAG_FILTER,Sa.NEAREST),Sa.texParameteri(Sa.TEXTURE_2D,Sa.TEXTURE_WRAP_S,Sa.CLAMP_TO_EDGE),Sa.texParameteri(Sa.TEXTURE_2D,Sa.TEXTURE_WRAP_T,Sa.CLAMP_TO_EDGE);let Ea=xa?wa.encode(xa,oa*ba):null;return Sa.texImage2D(Sa.TEXTURE_2D,0,wa.internalFormat,oa,ba,0,wa.format,wa.textureType,Ea),this.checkError(),va}updateTexture(oa,ba,wa,xa,Sa){let va=this.gl;va.bindTexture(va.TEXTURE_2D,oa);let Ea=xa.encode(Sa,ba*wa);va.texSubImage2D(va.TEXTURE_2D,0,0,0,ba,wa,xa.format,xa.textureType,Ea),this.checkError()}attachFramebuffer(oa,ba,wa){let xa=this.gl;xa.bindTexture(xa.TEXTURE_2D,oa),xa.bindFramebuffer(xa.FRAMEBUFFER,this.framebuffer),xa.framebufferTexture2D(xa.FRAMEBUFFER,xa.COLOR_ATTACHMENT0,xa.TEXTURE_2D,oa,0),this.checkError(),xa.viewport(0,0,ba,wa),xa.scissor(0,0,ba,wa)}readTexture(oa,ba,wa,xa,Sa,va){let Ea=this.gl;va||(va=1),this.frameBufferBound||this.attachFramebuffer(oa,ba,wa);let La=this.getEncoder(Sa,va),eu=La.allocate(ba*wa);return Ea.bindTexture(Ea.TEXTURE_2D,oa),Ea.framebufferTexture2D(Ea.FRAMEBUFFER,Ea.COLOR_ATTACHMENT0,Ea.TEXTURE_2D,oa,0),Ea.readPixels(0,0,ba,wa,Ea.RGBA,La.textureType,eu),this.checkError(),La.decode(eu,xa)}isFramebufferReady(){return!0}getActiveTexture(){let oa=this.gl;return`TEXTURE${oa.getParameter(this.gl.ACTIVE_TEXTURE)-oa.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(oa,ba){let wa=this.gl;wa.vertexAttribPointer(oa,3,wa.FLOAT,!1,20,0),wa.enableVertexAttribArray(oa),ba!==-1&&(wa.vertexAttribPointer(ba,2,wa.FLOAT,!1,20,12),wa.enableVertexAttribArray(ba)),this.checkError()}createProgram(oa,ba){let wa=this.gl,xa=wa.createProgram();return wa.attachShader(xa,oa),wa.attachShader(xa,ba),wa.linkProgram(xa),xa}compileShader(oa,ba){let wa=this.gl,xa=wa.createShader(ba);if(!xa)throw new Error(`createShader() returned null with type ${ba}`);if(wa.shaderSource(xa,oa),wa.compileShader(xa),wa.getShaderParameter(xa,wa.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${wa.getShaderInfoLog(xa)}
Shader source:
${oa}`);return xa}deleteShader(oa){this.gl.deleteShader(oa)}bindTextureToUniform(oa,ba,wa){let xa=this.gl;xa.activeTexture(xa.TEXTURE0+ba),this.checkError(),xa.bindTexture(xa.TEXTURE_2D,oa),this.checkError(),xa.uniform1i(wa,ba),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let oa=this.gl,ba=oa.getError(),wa="";switch(ba){case oa.NO_ERROR:return;case oa.INVALID_ENUM:wa="INVALID_ENUM";break;case oa.INVALID_VALUE:wa="INVALID_VALUE";break;case oa.INVALID_OPERATION:wa="INVALID_OPERATION";break;case oa.INVALID_FRAMEBUFFER_OPERATION:wa="INVALID_FRAMEBUFFER_OPERATION";break;case oa.OUT_OF_MEMORY:wa="OUT_OF_MEMORY";break;case oa.CONTEXT_LOST_WEBGL:wa="CONTEXT_LOST_WEBGL";break;default:wa=`Unknown WebGL Error: ${ba.toString(16)}`}throw new Error(wa)}}deleteTexture(oa){this.gl.deleteTexture(oa)}deleteProgram(oa){this.gl.deleteProgram(oa)}getEncoder(oa,ba,wa=0){if(this.version===2)return new Jn(this.gl,ba);switch(oa){case"float":return wa===1||this.isRenderFloat32Supported?new un(this.gl,ba):new un(this.gl,ba,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Zn(this.gl,ba);default:throw new Error(`Invalid dataType: ${oa}`)}}clearActiveTextures(){let oa=this.gl;for(let ba=0;ba<this.maxTextureImageUnits;++ba)oa.activeTexture(oa.TEXTURE0+ba),oa.bindTexture(oa.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let oa=this.gl;oa.bindFramebuffer(oa.FRAMEBUFFER,null),oa.deleteFramebuffer(this.framebuffer),oa.bindBuffer(oa.ARRAY_BUFFER,null),oa.deleteBuffer(this.vertexbuffer),oa.bindBuffer(oa.ELEMENT_ARRAY_BUFFER,null),oa.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let oa=this.gl,ba=oa.createBuffer();if(!ba)throw new Error("createBuffer() returned null");let wa=this.createDefaultGeometry();return oa.bindBuffer(oa.ARRAY_BUFFER,ba),oa.bufferData(oa.ARRAY_BUFFER,wa,oa.STATIC_DRAW),this.checkError(),ba}createFramebuffer(){let oa=this.gl.createFramebuffer();if(!oa)throw new Error("createFramebuffer returned null");return oa}queryVitalParameters(){let oa=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=oa.getParameter(oa.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=oa.getParameter(oa.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let oa=this.gl,ba=oa.createTexture();oa.bindTexture(oa.TEXTURE_2D,ba);let wa=this.version===2?oa.RGBA32F:oa.RGBA;oa.texImage2D(oa.TEXTURE_2D,0,wa,1,1,0,oa.RGBA,oa.FLOAT,null);let xa=oa.createFramebuffer();oa.bindFramebuffer(oa.FRAMEBUFFER,xa),oa.framebufferTexture2D(oa.FRAMEBUFFER,oa.COLOR_ATTACHMENT0,oa.TEXTURE_2D,ba,0);let Sa=oa.checkFramebufferStatus(oa.FRAMEBUFFER)===oa.FRAMEBUFFER_COMPLETE;return oa.bindTexture(oa.TEXTURE_2D,null),oa.bindFramebuffer(oa.FRAMEBUFFER,null),oa.deleteTexture(ba),oa.deleteFramebuffer(xa),Sa}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let oa=this.gl,ba,wa,xa,Sa,va;try{ba=oa.createTexture(),wa=oa.createFramebuffer(),oa.bindTexture(oa.TEXTURE_2D,ba);let Ea=this.version===2?oa.RGBA32F:oa.RGBA;return oa.texImage2D(oa.TEXTURE_2D,0,Ea,1,1,0,oa.RGBA,oa.FLOAT,null),oa.bindFramebuffer(oa.FRAMEBUFFER,wa),oa.framebufferTexture2D(oa.FRAMEBUFFER,oa.COLOR_ATTACHMENT0,oa.TEXTURE_2D,ba,0),oa.enable(oa.BLEND),xa=oa.createShader(oa.VERTEX_SHADER),!xa||(oa.shaderSource(xa,"void main(){}"),oa.compileShader(xa),Sa=oa.createShader(oa.FRAGMENT_SHADER),!Sa)||(oa.shaderSource(Sa,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),oa.compileShader(Sa),va=oa.createProgram(),!va)?!1:(oa.attachShader(va,xa),oa.attachShader(va,Sa),oa.linkProgram(va),oa.useProgram(va),oa.drawArrays(oa.POINTS,0,1),oa.getError()===oa.NO_ERROR)}finally{oa.disable(oa.BLEND),va&&oa.deleteProgram(va),xa&&oa.deleteShader(xa),Sa&&oa.deleteShader(Sa),wa&&(oa.bindFramebuffer(oa.FRAMEBUFFER,null),oa.deleteFramebuffer(wa)),ba&&(oa.bindTexture(oa.TEXTURE_2D,null),oa.deleteTexture(ba))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let oa=this.gl,ba=this.disjointTimerQueryWebgl2Extension,wa=oa.createQuery();return oa.beginQuery(ba.TIME_ELAPSED_EXT,wa),wa}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let oa=this.gl,ba=this.disjointTimerQueryWebgl2Extension;oa.endQuery(ba.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(oa){let ba=!1,wa=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let xa=this.gl,Sa=this.disjointTimerQueryWebgl2Extension;ba=xa.getQueryParameter(oa,xa.QUERY_RESULT_AVAILABLE),wa=xa.getParameter(Sa.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return ba&&!wa}getTimerResult(oa){let ba=0;if(this.version===2){let wa=this.gl;ba=wa.getQueryParameter(oa,wa.QUERY_RESULT),wa.deleteQuery(oa)}else throw new Error("WebGL1 profiling currently not supported");return ba/1e6}async waitForQueryAndGetTime(oa){return await gi(()=>this.isTimerResultAvailable(oa)),this.getTimerResult(oa)}async createAndWaitForFence(){let oa=this.createFence(this.gl);return this.pollFence(oa)}createFence(oa){let ba,wa=oa,xa=wa.fenceSync(wa.SYNC_GPU_COMMANDS_COMPLETE,0);return oa.flush(),xa===null?ba=()=>!0:ba=()=>{let Sa=wa.clientWaitSync(xa,0,0);return Sa===wa.ALREADY_SIGNALED||Sa===wa.CONDITION_SATISFIED},{query:xa,isFencePassed:ba}}async pollFence(oa){return new Promise(ba=>{this.addItemToPoll(()=>oa.isFencePassed(),()=>ba())})}pollItems(){let oa=Hb(this.itemsToPoll.map(ba=>ba.isDoneFn));for(let ba=0;ba<=oa;++ba){let{resolveFn:wa}=this.itemsToPoll[ba];wa()}this.itemsToPoll=this.itemsToPoll.slice(oa+1)}async addItemToPoll(oa,ba){this.itemsToPoll.push({isDoneFn:oa,resolveFn:ba}),!(this.itemsToPoll.length>1)&&await gi(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function ji(oa){let ba;if((!oa||oa==="webgl2")&&"webgl2"in Ur?ba=Ur.webgl2:(!oa||oa==="webgl")&&"webgl"in Ur&&(ba=Ur.webgl),!ba)try{let xa=jb();ba=fp(xa,oa)}catch{let xa=qb();ba=fp(xa,oa)}oa=oa||ba.version===1?"webgl":"webgl2";let wa=ba.gl;return Ur[oa]=ba,wa.isContextLost()?(delete Ur[oa],ji(oa)):(wa.disable(wa.DEPTH_TEST),wa.disable(wa.STENCIL_TEST),wa.disable(wa.BLEND),wa.disable(wa.DITHER),wa.disable(wa.POLYGON_OFFSET_FILL),wa.disable(wa.SAMPLE_COVERAGE),wa.enable(wa.SCISSOR_TEST),wa.enable(wa.CULL_FACE),wa.cullFace(wa.BACK),ba)}function fp(oa,ba){let wa={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},xa,Sa=wa;if((!ba||ba==="webgl2")&&(xa=oa.getContext("webgl2",Sa),xa))try{return new hn(xa,2)}catch(va){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${va}`)}if((!ba||ba==="webgl")&&(xa=oa.getContext("webgl",Sa)||oa.getContext("experimental-webgl",Sa),xa))try{return new hn(xa,1)}catch(va){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${va}`)}throw new Error("WebGL is not supported")}function qb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let oa=document.createElement("canvas");return oa.width=1,oa.height=1,oa}function jb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Ur,cp=L(()=>{ut(),lp(),Ur={}}),vo,pp=L(()=>{vt(),ut(),up(),cp(),vo=class{get contextId(){return Z.webgl.contextId}set contextId(oa){Z.webgl.contextId=oa}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(oa){Z.webgl.matmulMaxBatchSize=oa}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(oa){Z.webgl.textureCacheMode=oa}get pack(){return Z.webgl.pack}set pack(oa){Z.webgl.pack=oa}get async(){return Z.webgl.async}set async(oa){Z.webgl.async=oa}initialize(){try{return this.glContext=ji(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(oa){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${oa}`),!1}}createSessionHandler(oa){return new xo(this,oa)}dispose(){this.glContext.dispose()}}});async function Yi(oa){if(oa){let ba=typeof oa=="string"?[oa]:oa;for(let wa of ba){let xa=dp.get(wa);if(xa)return xa;let Sa=await Xb(wa);if(Sa)return Sa}}else return Yi(["webgl"]);throw new Error("no available backend to use")}async function Xb(oa){let ba=Yb;if(typeof ba[oa]<"u"&&Kb(ba[oa])){let wa=ba[oa],xa=wa.initialize();if(typeof xa=="object"&&"then"in xa&&(xa=await xa),xa)return dp.set(oa,wa),wa}}function Kb(oa){let ba=oa;return"initialize"in ba&&typeof ba.initialize=="function"&&"createSessionHandler"in ba&&typeof ba.createSessionHandler=="function"&&"dispose"in ba&&typeof ba.dispose=="function"}var dp,Yb,hp=L(()=>{pp(),dp=new Map,Yb={webgl:new vo}}),Xi,wo,mp=L(()=>{ut(),Xi=class{constructor(oa,ba){this.op=oa,this.node=ba}},wo=class{constructor(oa,ba,wa){this.graph=oa,this.profiler=wa,this.initialize(ba)}initialize(oa){this.profiler.event("session","ExecutionPlan.initialize",()=>{let ba=this.graph.getNodes();if(ba.length!==oa.length)throw new Error("The size of nodes and OPs do not match.");this._ops=oa.map((wa,xa)=>new Xi(wa,ba[xa])),this.reset(),this._starter=[],this._ops.forEach((wa,xa)=>{let Sa=!0;for(let va of wa.node.inputs)if(!this._values[va]&&this.graph.getInputIndices().indexOf(va)===-1){Sa=!1;break}Sa&&this._starter.push(xa)})})}reset(){this._values=this.graph.getValues().map(oa=>oa.tensor)}async execute(oa,ba){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let wa=oa.createInferenceHandler(),xa=this.graph.getInputIndices();if(ba.length!==xa.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${ba.length} expected: ${xa.length}`);ba.forEach((Ta,Aa)=>{let ka=xa[Aa];this._values[ka]=Ta});let Sa=this._starter.slice(0),va=this.graph.getValues(),Ea=this.graph.getNodes(),La=0;for(;La<Sa.length;){let Ta=Sa[La++],Aa=this._ops[Ta],ka=Aa.node.inputs.map(uu=>this._values[uu]);if(ka.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${Aa.node}`);let ru=ka;ce.verbose("ExecPlan",`Runing op:${Aa.node.name} (${ru.map((uu,cu)=>`'${Aa.node.inputs[cu]}': ${uu.type}[${uu.dims.join(",")}]`).join(", ")})`);let nu=await this.profiler.event("node",Aa.node.name,async()=>Aa.op.impl(wa,ru,Aa.op.context));if(nu.length!==Aa.node.outputs.length)throw new Error("the size of output does not match model definition.");nu.forEach((uu,cu)=>{let gu=Aa.node.outputs[cu];if(this._values[gu])throw new Error(`output [${gu}] already has value: op:${Aa.node.name}`);this._values[gu]=uu});let su=new Set;nu.forEach((uu,cu)=>{let gu=Aa.node.outputs[cu];for(let hu of va[gu].to){let mu=Ea[hu],Ou=!0;for(let uh of mu.inputs)if(!this._values[uh]){Ou=!1;break}Ou&&su.add(hu)}}),Sa.push(...su)}let eu=[];for(let Ta=0;Ta<this.graph.getOutputIndices().length;Ta++){let Aa=this.graph.getOutputIndices()[Ta],ka=this._values[Aa];if(ka===void 0)throw new Error(`required output [${Aa}] does not have value`);Aa===0?await ka.getData():ka.data,eu.push(ka)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),wa.dispose(),eu})}}}),oe,mt,mn,bp=L(()=>{tn(),oe=Er($r()),mr(),fe(),mt=W.experimental.fbs,mn=class X1{constructor(ba){if(this._attributes=new Map,ba!=null){for(let wa of ba)wa instanceof oe.onnx.AttributeProto?this._attributes.set(wa.name,[X1.getValue(wa),X1.getType(wa)]):wa instanceof mt.Attribute&&this._attributes.set(wa.name(),[X1.getValue(wa),X1.getType(wa)]);if(this._attributes.size<ba.length)throw new Error("duplicated attribute names")}}set(ba,wa,xa){this._attributes.set(ba,[xa,wa])}delete(ba){this._attributes.delete(ba)}getFloat(ba,wa){return this.get(ba,"float",wa)}getInt(ba,wa){return this.get(ba,"int",wa)}getString(ba,wa){return this.get(ba,"string",wa)}getTensor(ba,wa){return this.get(ba,"tensor",wa)}getFloats(ba,wa){return this.get(ba,"floats",wa)}getInts(ba,wa){return this.get(ba,"ints",wa)}getStrings(ba,wa){return this.get(ba,"strings",wa)}getTensors(ba,wa){return this.get(ba,"tensors",wa)}get(ba,wa,xa){let Sa=this._attributes.get(ba);if(Sa===void 0){if(xa!==void 0)return xa;throw new Error(`required attribute not found: ${ba}`)}if(Sa[1]!==wa)throw new Error(`type mismatch: expected ${wa} but got ${Sa[1]}`);return Sa[0]}static getType(ba){let wa=ba instanceof oe.onnx.AttributeProto?ba.type:ba.type();switch(wa){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[wa]}`)}}static getValue(ba){let wa=ba instanceof oe.onnx.AttributeProto?ba.type:ba.type();if(wa===oe.onnx.AttributeProto.AttributeType.GRAPH||wa===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let xa=this.getValueNoCheck(ba);if(wa===oe.onnx.AttributeProto.AttributeType.INT&&nt.isLong(xa))return nt.longToNumber(xa);if(wa===oe.onnx.AttributeProto.AttributeType.INTS){let Sa=xa,va=new Array(Sa.length);for(let Ea=0;Ea<Sa.length;Ea++){let La=Sa[Ea];va[Ea]=nt.longToNumber(La)}return va}if(wa===oe.onnx.AttributeProto.AttributeType.TENSOR)return ba instanceof oe.onnx.AttributeProto?Fe.fromProto(xa):Fe.fromOrtTensor(xa);if(wa===oe.onnx.AttributeProto.AttributeType.TENSORS){if(ba instanceof oe.onnx.AttributeProto)return xa.map(Sa=>Fe.fromProto(Sa));if(ba instanceof mt.Attribute)return xa.map(Sa=>Fe.fromOrtTensor(Sa))}return wa===oe.onnx.AttributeProto.AttributeType.STRING&&ba instanceof oe.onnx.AttributeProto?sn(xa):wa===oe.onnx.AttributeProto.AttributeType.STRINGS&&ba instanceof oe.onnx.AttributeProto?xa.map(sn):xa}static getValueNoCheck(ba){return ba instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(ba):this.getValueNoCheckFromOrtFormat(ba)}static getValueNoCheckFromOnnxFormat(ba){switch(ba.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return ba.f;case oe.onnx.AttributeProto.AttributeType.INT:return ba.i;case oe.onnx.AttributeProto.AttributeType.STRING:return ba.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return ba.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return ba.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return ba.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return ba.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return ba.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return ba.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return ba.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[ba.type]}`)}}static getValueNoCheckFromOrtFormat(ba){switch(ba.type()){case mt.AttributeType.FLOAT:return ba.f();case mt.AttributeType.INT:return ba.i();case mt.AttributeType.STRING:return ba.s();case mt.AttributeType.TENSOR:return ba.t();case mt.AttributeType.GRAPH:return ba.g();case mt.AttributeType.FLOATS:return ba.floatsArray();case mt.AttributeType.INTS:{let wa=[];for(let xa=0;xa<ba.intsLength();xa++)wa.push(ba.ints(xa));return wa}case mt.AttributeType.STRINGS:{let wa=[];for(let xa=0;xa<ba.stringsLength();xa++)wa.push(ba.strings(xa));return wa}case mt.AttributeType.TENSORS:{let wa=[];for(let xa=0;xa<ba.tensorsLength();xa++)wa.push(ba.tensors(xa));return wa}default:throw new Error(`unsupported attribute type: ${mt.AttributeType[ba.type()]}`)}}}}),Ji,_o,Zi,kt,Oo,Ki,gp=L(()=>{bp(),tn(),Ji=Er($r()),mr(),fe(),_o=W.experimental.fbs,Zi={from:(oa,ba)=>new Ki(oa,ba)},kt=class{constructor(oa){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,oa&&(this.type=Ve.tensorValueTypeFromProto(oa.type.tensorType))}get from(){return this._from}get to(){return this._to}},Oo=class{constructor(oa,ba){oa instanceof Ji.onnx.NodeProto?(this.name=oa.name,this.opType=oa.opType,this.attributes=new mn(oa.attribute)):oa instanceof _o.Node&&(this.name=ba??oa.name(),this.opType=oa.opType(),this.attributes=new mn(Ve.tensorAttributesFromORTFormat(oa))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Ki=class{constructor(oa,ba){if(!oa)throw new TypeError("graph is empty");this.buildGraph(oa),this.transformGraph(ba),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(oa){if(oa instanceof Ji.onnx.GraphProto)this.buildGraphFromOnnxFormat(oa);else if(oa instanceof _o.Graph)this.buildGraphFromOrtFormat(oa);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(oa){let ba=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let wa=new Map;if(!oa.input)throw new Error("missing information in graph: input");let xa=[];for(let Sa of oa.input){if(ba.has(Sa.name))throw new Error(`duplicated input name: ${Sa.name}`);let va=this._allData.push(new kt(Sa))-1;ba.set(Sa.name,va),xa.push(Sa.name)}if(!oa.initializer)throw new Error("missing information in graph: initializer");for(let Sa of oa.initializer){let va=ba.get(Sa.name);if(va===void 0){let Ea=new kt;Ea.type={shape:{dims:Ve.tensorDimsFromProto(Sa.dims)},tensorType:Ve.tensorDataTypeFromProto(Sa.dataType)},va=this._allData.push(Ea)-1,ba.set(Sa.name,va)}this._allData[va]._from=-1,this._allData[va].tensor=Fe.fromProto(Sa)}for(let Sa=0;Sa<this._allData.length;Sa++)this._allData[Sa].tensor||(this._allInputIndices.push(Sa),this._allInputNames.push(xa[Sa]));if(!oa.output)throw new Error("missing information in graph: output");for(let Sa of oa.output){if(ba.has(Sa.name))throw new Error(`duplicated output name: ${Sa.name}`);let va=this._allData.push(new kt(Sa))-1;ba.set(Sa.name,va),this._allOutputIndices.push(va),this._allOutputNames.push(Sa.name)}if(!oa.node)throw new Error("missing information in graph: node");for(let Sa of oa.node){if(!Sa.name)for(let Ea=0;;Ea++){let La=`unnamed_${Sa.opType}_${Ea}`;if(!wa.has(La)){Sa.name=La;break}}if(wa.has(Sa.name))throw new Error(`duplicated node name: ${Sa.name}`);let va=this._nodes.push(new Oo(Sa))-1;wa.set(Sa.name,va)}for(let Sa=0;Sa<this._nodes.length;Sa++){let va=this._nodes[Sa],Ea=oa.node[Sa];if(!Ea.output)throw new Error(`missing output for node: ${Ea.name}`);for(let La of Ea.output){let eu=ba.get(La);if(typeof eu>"u"&&(eu=this._allData.push(new kt)-1,ba.set(La,eu)),va.outputs.push(eu),this._allData[eu]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${eu}`);if(this._allData[eu]._from=Sa,Ea.opType==="Constant"){if(!Ea.attribute||Ea.attribute.length!==1||!Ea.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!Ea.output||Ea.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");va.outputs.pop(),va.executeNode=!1,this._allData[eu]._from=-1,this._allData[eu].tensor=Fe.fromProto(Ea.attribute[0].t)}}}for(let Sa=0;Sa<this._nodes.length;Sa++){let va=this._nodes[Sa],Ea=oa.node[Sa];if(!Ea.input)throw new Error(`missing input for node: ${Ea.name}`);for(let La of Ea.input){let eu=ba.get(La);if(typeof eu>"u"){if(La===""&&(Ea.input.length===3||Ea.input.length===4)&&Ea.opType==="Resize")continue;throw new Error(`unrecognized input '${La}' for node: ${Ea.name}`)}va.inputs.push(eu),this._allData[eu]._to.push(Sa)}}return!0}buildGraphFromOrtFormat(oa){var Sa,va,Ea;let ba=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let wa=new Map,xa=[];for(let La=0;La<oa.inputsLength();La++){let eu=oa.inputs(La);if(ba.has(eu))throw new Error(`duplicated input name: ${eu}`);for(let Ta=0;Ta<oa.nodeArgsLength();Ta++)if(((Sa=oa.nodeArgs(Ta))==null?void 0:Sa.name())===eu){let Aa=new kt;if(((Ea=(va=oa.nodeArgs(Ta))==null?void 0:va.type())==null?void 0:Ea.valueType())!==_o.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let ka=oa.nodeArgs(Ta).type().value(new _o.TensorTypeAndShape),ru=Ve.tensorDataTypeFromProto(ka.elemType()),nu=ka.shape(),su=[];for(let cu=0;cu<nu.dimLength();cu++)su.push(nt.longToNumber(nu.dim(cu).value().dimValue()));Aa.type={shape:{dims:su},tensorType:ru};let uu=this._allData.push(Aa)-1;ba.set(eu,uu),xa.push(eu)}}for(let La=0;La<oa.initializersLength();La++){let eu=oa.initializers(La),Ta=ba.get(eu.name());if(Ta===void 0){let Aa=new kt,ka=Ve.tensorDimsFromORTFormat(eu),ru=Ve.tensorDataTypeFromProto(eu.dataType());Aa.type={shape:{dims:ka},tensorType:ru},Ta=this._allData.push(Aa)-1,ba.set(eu.name(),Ta)}this._allData[Ta]._from=-1,this._allData[Ta].tensor=Fe.fromOrtTensor(eu)}for(let La=0;La<this._allData.length;La++)this._allData[La].tensor||(this._allInputIndices.push(La),this._allInputNames.push(xa[La]));for(let La=0;La<oa.outputsLength();La++){let eu=oa.outputs(La);if(ba.has(eu))throw new Error(`duplicated output name: ${eu}`);let Ta=this._allData.push(new kt)-1;ba.set(eu,Ta),this._allOutputIndices.push(Ta),this._allOutputNames.push(eu)}if(!oa.nodes)throw new Error("missing information in graph: node");for(let La=0;La<oa.nodesLength();La++){let eu=oa.nodes(La),Ta=eu.name();if(!Ta)for(let ka=0;Ta=`unnamed_${eu.opType()}_${ka}`,!!wa.has(Ta);ka++);if(wa.has(Ta))throw new Error(`duplicated node name: ${Ta}`);let Aa=this._nodes.push(new Oo(eu,Ta))-1;wa.set(Ta,Aa)}for(let La=0;La<this._nodes.length;La++){let eu=this._nodes[La],Ta=oa.nodes(La);if(Ta==null)throw new Error(`No node exists at index ${La}`);if((Ta==null?void 0:Ta.outputsLength())===0)throw new Error(`missing output for node: ${Ta.name}`);for(let Aa=0;Aa<(Ta==null?void 0:Ta.outputsLength());Aa++){let ka=Ta==null?void 0:Ta.outputs(Aa),ru=ba.get(ka);if(typeof ru>"u"&&(ru=this._allData.push(new kt)-1,ba.set(ka,ru)),eu.outputs.push(ru),this._allData[ru]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${ru}`);if(this._allData[ru]._from=La,Ta.opType()==="Constant"){if(Ta.attributesLength()!==1||!Ta.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(Ta.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");eu.outputs.pop(),eu.executeNode=!1,this._allData[ru]._from=-1,this._allData[ru].tensor=Fe.fromOrtTensor(Ta.attributes(0).t())}}}for(let La=0;La<this._nodes.length;La++){let eu=this._nodes[La],Ta=oa.nodes(La);if(Ta.inputsLength()===0)throw new Error(`missing input for node: ${Ta.name}`);for(let Aa=0;Aa<Ta.inputsLength();Aa++){let ka=Ta.inputs(Aa),ru=ba.get(ka);if(typeof ru>"u")throw new Error(`unrecognized input '${ka}' for node: ${Ta.name()}`);eu.inputs.push(ru),this._allData[ru]._to.push(La)}}}checkIsAcyclic(){let oa=new Set;this._allInputIndices.forEach(xa=>{this._allData[xa]._to.forEach(Sa=>{oa.add(Sa)})});let ba=Array.from(oa),wa=new Array(this._nodes.length).fill("white");for(;ba.length>0;){let xa=ba.pop();wa[xa]==="gray"?wa[xa]="black":(ba.push(xa),wa[xa]="gray",this._nodes[xa].outputs.forEach(Sa=>{let va=this._allData[Sa];if(typeof va.tensor<"u")throw new Error("node outputs should not be initialized");if(va._from!==xa)throw new Error("from property of the Value object doesn't match index of Node being processed");va._to.forEach(Ea=>{if(wa[Ea]==="gray")throw new Error("model graph is cyclic");wa[Ea]==="white"&&ba.push(Ea)})}))}}transformGraph(oa){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),oa&&oa.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let oa=0,ba=new Array(this._nodes.length,0),wa=0;for(let xa=0;xa<this._nodes.length;xa++)ba[xa]=wa,this._nodes[xa].executeNode?(wa!==xa&&(this._nodes[wa]=this._nodes[xa]),wa++):this._nodes[xa].outputs.forEach(Sa=>{this._allData[Sa]._from=-2});this._nodes.splice(wa,this._nodes.length-wa);for(let xa=0;xa<this._allData.length;xa++){let Sa=this._allData[xa];Sa._from!==void 0&&Sa._from!==-1&&Sa._from!==-2&&(Sa._from=ba[Sa._from]);for(let va=0;va<Sa._to.length;va++)if(Sa._to[va]>=0)Sa._to[va]=ba[Sa._to[va]];else throw new Error("Trying to update a removed node")}oa=0;for(let xa=0;xa<this._allData.length;xa++){if(this._allData[xa].from===-2&&this._allOutputIndices.indexOf(xa+oa)===-1){oa++,this._allData.splice(xa,1),xa--;continue}if(oa>0){let Sa=-1;this._allData[xa].from!==void 0&&this._allData[xa].from!==-1?(Sa=this._nodes[this._allData[xa].from].outputs.indexOf(xa+oa),Sa!==-1&&(this._nodes[this._allData[xa].from].outputs[Sa]=xa)):(Sa=this._allInputIndices.indexOf(xa+oa),Sa!==-1&&(this._allInputIndices[Sa]=xa)),this._allData[xa].to.forEach(va=>{Sa=this._nodes[va].inputs.indexOf(xa+oa),Sa!==-1&&(this._nodes[va].inputs[Sa]=xa)}),this._allData[xa].to.length===0&&(Sa=this._allOutputIndices.indexOf(xa+oa),Sa!==-1&&(this._allOutputIndices[Sa]=xa))}}}deleteNode(oa){let ba=this._nodes[oa];if(ba.outputs.length>1){for(let Ea=1;Ea<ba.outputs.length;Ea++)if(this._allData[ba.outputs[Ea]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}ba.executeNode=!1;let wa=ba.inputs[0],xa=ba.outputs[0],Sa=this._allData[xa].to;for(let Ea=0;Ea<ba.inputs.length;Ea++){let La=this._allData[ba.inputs[Ea]].to.indexOf(oa);if(La===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[ba.inputs[Ea]].to.splice(La,1)}this._allData[xa]._to=[];let va=this._allOutputIndices.indexOf(xa);if(va!==-1&&(this._allOutputIndices[va]=wa),Sa&&Sa.length>0)for(let Ea of Sa){let La=this._nodes[Ea].inputs.indexOf(xa);if(La===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[Ea].inputs[La]=wa,this._allData[wa].to.push(Ea)}}removeAllDropoutNodes(){let oa=0;for(let ba of this._nodes){if(ba.opType==="Dropout"){if(ba.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(ba.outputs.length!==1&&ba.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(ba.outputs.length===2&&this._allData[ba.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(oa)}oa++}}removeAllIdentityNodes(){let oa=0;for(let ba of this._nodes)ba.opType==="Identity"&&this.deleteNode(oa),oa++}isActivation(oa){switch(oa.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let oa of this._nodes)if(oa.opType==="Conv"){let ba=this._allData[oa.outputs[0]]._to;if(ba.length===1&&this.isActivation(this._nodes[ba[0]])){let wa=this._nodes[ba[0]];if(wa.opType==="Clip")if(wa.inputs.length===1)try{oa.attributes.set("activation_params","floats",[wa.attributes.getFloat("min"),wa.attributes.getFloat("max")])}catch{oa.attributes.set("activation_params","floats",[dr,hr])}else if(wa.inputs.length>=3&&this._allData[wa.inputs[1]].tensor!==void 0&&this._allData[wa.inputs[2]].tensor!==void 0)oa.attributes.set("activation_params","floats",[this._allData[wa.inputs[1]].tensor.floatData[0],this._allData[wa.inputs[2]].tensor.floatData[0]]);else continue;oa.attributes.set("activation","string",wa.opType),this.deleteNode(ba[0])}}}}}),yp,Jb,Io,Tp=L(()=>{Wn(),gp(),tn(),yp=Er($r()),fe(),Jb=W.experimental.fbs,Io=class{constructor(){}load(oa,ba,wa){if(!wa)try{this.loadFromOnnxFormat(oa,ba);return}catch(xa){if(wa!==void 0)throw xa}this.loadFromOrtFormat(oa,ba)}loadFromOnnxFormat(oa,ba){let wa=yp.onnx.ModelProto.decode(oa);if(nt.longToNumber(wa.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=wa.opsetImport.map(xa=>({domain:xa.domain,version:nt.longToNumber(xa.version)})),this._graph=Zi.from(wa.graph,ba)}loadFromOrtFormat(oa,ba){let wa=new _.ByteBuffer(oa),xa=Jb.InferenceSession.getRootAsInferenceSession(wa).model();if(nt.longToNumber(xa.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let Sa=0;Sa<xa.opsetImportLength();Sa++){let va=xa.opsetImport(Sa);this._opsets.push({domain:va==null?void 0:va.domain(),version:nt.longToNumber(va.version())})}this._graph=Zi.from(xa.graph(),ba)}get graph(){return this._graph}get opsets(){return this._opsets}}}),So,xp=L(()=>{hp(),mp(),ut(),Tp(),So=class{constructor(oa={}){this._initialized=!1,this.backendHint=oa.backendHint,this.profiler=zn.create(oa.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(oa,ba,wa){await this.profiler.event("session","Session.loadModel",async()=>{let xa=await Yi(this.backendHint);if(this.sessionHandler=xa.createSessionHandler(this.context),this._model=new Io,typeof oa=="string"){let Sa=oa.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let va=await(void 0)(oa);this.initialize(va,Sa)}else{let va=await(await fetch(oa)).arrayBuffer();this.initialize(new Uint8Array(va),Sa)}}else if(ArrayBuffer.isView(oa))this.initialize(oa);else{let Sa=new Uint8Array(oa,ba||0,wa||oa.byteLength);this.initialize(Sa)}})}initialize(oa,ba){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let wa=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(oa,wa,ba),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new wo(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(oa){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let ba=this.normalizeAndValidateInputs(oa),wa=await this._executionPlan.execute(this.sessionHandler,ba);return this.createOutput(wa)})}normalizeAndValidateInputs(oa){let ba=this._model.graph.getInputNames();if(Array.isArray(oa)){if(oa.length!==ba.length)throw new Error(`incorrect input array length: expected ${ba.length} but got ${oa.length}`)}else{if(oa.size!==ba.length)throw new Error(`incorrect input map size: expected ${ba.length} but got ${oa.size}`);let wa=new Array(oa.size),xa=0;for(let Sa=0;Sa<ba.length;++Sa){let va=oa.get(ba[Sa]);if(!va)throw new Error(`missing input tensor for: '${name}'`);wa[xa++]=va}oa=wa}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let wa=this._model.graph.getInputIndices(),xa=this._model.graph.getValues(),Sa=new Array(wa.length);for(let va=0;va<wa.length;++va){let Ea=xa[wa[va]];Sa[va]=Ea.type.shape.dims,this.context.graphInputTypes.push(Ea.type.tensorType),this.context.graphInputDims.push(oa[va].dims)}this.validateInputTensorDims(Sa,oa,!0)}else this.validateInputTensorDims(this.context.graphInputDims,oa,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,oa),oa}validateInputTensorTypes(oa,ba){for(let wa=0;wa<ba.length;wa++){let xa=oa[wa],Sa=ba[wa].type;if(xa!==Sa)throw new Error(`input tensor[${wa}] check failed: expected type '${xa}' but got ${Sa}`)}}validateInputTensorDims(oa,ba,wa){for(let xa=0;xa<ba.length;xa++){let Sa=oa[xa],va=ba[xa].dims;if(!this.compareTensorDims(Sa,va,wa))throw new Error(`input tensor[${xa}] check failed: expected shape '[${Sa.join(",")}]' but got [${va.join(",")}]`)}}compareTensorDims(oa,ba,wa){if(oa.length!==ba.length)return!1;for(let xa=0;xa<oa.length;++xa)if(oa[xa]!==ba[xa]&&(!wa||oa[xa]!==0))return!1;return!0}createOutput(oa){let ba=this._model.graph.getOutputNames();if(oa.length!==ba.length)throw new Error("expected number of outputs do not match number of generated outputs");let wa=new Map;for(let xa=0;xa<ba.length;++xa)wa.set(ba[xa],oa[xa]);return wa}initializeOps(oa){let ba=oa.getNodes();this._ops=new Array(ba.length);for(let wa=0;wa<ba.length;wa++)this._ops[wa]=this.sessionHandler.resolve(ba[wa],this._model.opsets,oa)}}}),Ao,vp=L(()=>{vt(),mr(),Ao=class{constructor(oa){this.session=oa,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(oa,ba,wa){let xa=new Map;for(let Ea in oa)if(Object.hasOwnProperty.call(oa,Ea)){let La=oa[Ea];xa.set(Ea,new Fe(La.dims,La.type,void 0,void 0,La.data))}let Sa=await this.session.run(xa),va={};return Sa.forEach((Ea,La)=>{va[La]=new Re(Ea.type,Ea.data,Ea.dims)}),va}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),wp={};Pr(wp,{onnxjsBackend:()=>Qb});var Qi,Qb,_p=L(()=>{xp(),vp(),Qi=class{async init(){}async createInferenceSessionHandler(oa,ba){let wa=new So(ba);return typeof oa=="string"?await wa.loadModel(oa):await wa.loadModel(oa),new Ao(wa)}},Qb=new Qi}),ea={};Pr(ea,{createReadStream:()=>Op,readFile:()=>eg,readFileSync:()=>tg});var eg,tg,Op,ta=L(()=>{eg=void 0,tg=void 0,Op=void 0}),ra={};Pr(ra,{join:()=>rg});var rg,na=L(()=>{rg=void 0}),Ap=me((oa,ba)=>{var wa=(()=>{var xa=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(xa=xa||__filename),function(Sa={}){var va=Sa,Ea,La;va.ready=new Promise((au,pu)=>{Ea=au,La=pu});var eu=Object.assign({},va),Ta="./this.program",Aa=typeof window=="object",ka=typeof importScripts=="function",ru=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",nu="",su,uu,cu;if(ru){var gu=(ta(),rr(ea)),hu=(na(),rr(ra));nu=ka?hu.dirname(nu)+"/":__dirname+"/",su=(au,pu)=>(au=r1(au)?new URL(au):hu.normalize(au),gu.readFileSync(au,pu?void 0:"utf8")),cu=au=>(au=su(au,!0),au.buffer||(au=new Uint8Array(au)),au),uu=(au,pu,du,xu=!0)=>{au=r1(au)?new URL(au):hu.normalize(au),gu.readFile(au,xu?void 0:"utf8",(Au,$p)=>{Au?du(Au):pu(xu?$p.buffer:$p)})},!va.thisProgram&&1<process.argv.length&&(Ta=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),va.inspect=()=>"[Emscripten Module object]"}else(Aa||ka)&&(ka?nu=self.location.href:typeof document<"u"&&document.currentScript&&(nu=document.currentScript.src),xa&&(nu=xa),nu.indexOf("blob:")!==0?nu=nu.substr(0,nu.replace(/[?#].*/,"").lastIndexOf("/")+1):nu="",su=au=>{var pu=new XMLHttpRequest;return pu.open("GET",au,!1),pu.send(null),pu.responseText},ka&&(cu=au=>{var pu=new XMLHttpRequest;return pu.open("GET",au,!1),pu.responseType="arraybuffer",pu.send(null),new Uint8Array(pu.response)}),uu=(au,pu,du)=>{var xu=new XMLHttpRequest;xu.open("GET",au,!0),xu.responseType="arraybuffer",xu.onload=()=>{xu.status==200||xu.status==0&&xu.response?pu(xu.response):du()},xu.onerror=du,xu.send(null)});var mu=console.log.bind(console),Ou=console.error.bind(console);Object.assign(va,eu),eu=null,typeof WebAssembly!="object"&&o1("no native wasm support detected");var uh,bd=!1,Fd,_h,Lu,Td,S1;function $1(){var au=uh.buffer;va.HEAP8=Fd=new Int8Array(au),va.HEAP16=new Int16Array(au),va.HEAPU8=_h=new Uint8Array(au),va.HEAPU16=new Uint16Array(au),va.HEAP32=Lu=new Int32Array(au),va.HEAPU32=Td=new Uint32Array(au),va.HEAPF32=new Float32Array(au),va.HEAPF64=S1=new Float64Array(au)}var l1=[],Fp=[],Nd=[],p1=0,t1=null;function o1(au){throw au="Aborted("+au+")",Ou(au),bd=!0,au=new WebAssembly.RuntimeError(au+". Build with -sASSERTIONS for more info."),La(au),au}var Md=au=>au.startsWith("data:application/octet-stream;base64,"),r1=au=>au.startsWith("file://"),s1;if(s1="ort-wasm.wasm",!Md(s1)){var w1=s1;s1=va.locateFile?va.locateFile(w1,nu):nu+w1}function v1(au){if(cu)return cu(au);throw"both async and sync fetching of the wasm failed"}function c1(au){if(Aa||ka){if(typeof fetch=="function"&&!r1(au))return fetch(au,{credentials:"same-origin"}).then(pu=>{if(!pu.ok)throw"failed to load wasm binary file at '"+au+"'";return pu.arrayBuffer()}).catch(()=>v1(au));if(uu)return new Promise((pu,du)=>{uu(au,xu=>pu(new Uint8Array(xu)),du)})}return Promise.resolve().then(()=>v1(au))}function h1(au,pu,du){return c1(au).then(xu=>WebAssembly.instantiate(xu,pu)).then(xu=>xu).then(du,xu=>{Ou(`failed to asynchronously prepare wasm: ${xu}`),o1(xu)})}function f1(au,pu){var du=s1;return typeof WebAssembly.instantiateStreaming!="function"||Md(du)||r1(du)||ru||typeof fetch!="function"?h1(du,au,pu):fetch(du,{credentials:"same-origin"}).then(xu=>WebAssembly.instantiateStreaming(xu,au).then(pu,function(Au){return Ou(`wasm streaming compile failed: ${Au}`),Ou("falling back to ArrayBuffer instantiation"),h1(du,au,pu)}))}var a1,zd={919248:(au,pu,du,xu)=>{if(typeof va>"u"||!va.za)return 1;if(au=A1(au>>>0),au.startsWith("./")&&(au=au.substring(2)),au=va.za.get(au),!au)return 2;if(pu>>>=0,du>>>=0,pu+du>au.byteLength)return 3;try{return _h.set(au.subarray(pu,pu+du),xu>>>0>>>0),0}catch{return 4}}};function kd(au){this.xa=au-24,this.Ha=function(pu){Td[this.xa+4>>>2>>>0]=pu},this.Ga=function(pu){Td[this.xa+8>>>2>>>0]=pu},this.Aa=function(pu,du){this.Fa(),this.Ha(pu),this.Ga(du)},this.Fa=function(){Td[this.xa+16>>>2>>>0]=0}}var u1=0,_1=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,T1=(au,pu,du)=>{pu>>>=0;var xu=pu+du;for(du=pu;au[du]&&!(du>=xu);)++du;if(16<du-pu&&au.buffer&&_1)return _1.decode(au.subarray(pu,du));for(xu="";pu<du;){var Au=au[pu++];if(Au&128){var $p=au[pu++]&63;if((Au&224)==192)xu+=String.fromCharCode((Au&31)<<6|$p);else{var gd=au[pu++]&63;Au=(Au&240)==224?(Au&15)<<12|$p<<6|gd:(Au&7)<<18|$p<<12|gd<<6|au[pu++]&63,65536>Au?xu+=String.fromCharCode(Au):(Au-=65536,xu+=String.fromCharCode(55296|Au>>10,56320|Au&1023))}}else xu+=String.fromCharCode(Au)}return xu},A1=(au,pu)=>(au>>>=0)?T1(_h,au,pu):"",x1=au=>{for(var pu=0,du=0;du<au.length;++du){var xu=au.charCodeAt(du);127>=xu?pu++:2047>=xu?pu+=2:55296<=xu&&57343>=xu?(pu+=4,++du):pu+=3}return pu},y1=(au,pu,du,xu)=>{if(du>>>=0,!(0<xu))return 0;var Au=du;xu=du+xu-1;for(var $p=0;$p<au.length;++$p){var gd=au.charCodeAt($p);if(55296<=gd&&57343>=gd){var Bd=au.charCodeAt(++$p);gd=65536+((gd&1023)<<10)|Bd&1023}if(127>=gd){if(du>=xu)break;pu[du++>>>0]=gd}else{if(2047>=gd){if(du+1>=xu)break;pu[du++>>>0]=192|gd>>6}else{if(65535>=gd){if(du+2>=xu)break;pu[du++>>>0]=224|gd>>12}else{if(du+3>=xu)break;pu[du++>>>0]=240|gd>>18,pu[du++>>>0]=128|gd>>12&63}pu[du++>>>0]=128|gd>>6&63}pu[du++>>>0]=128|gd&63}}return pu[du>>>0]=0,du-Au},b1=au=>au%4===0&&(au%100!==0||au%400===0),Z1=[0,31,60,91,121,152,182,213,244,274,305,335],B1=[0,31,59,90,120,151,181,212,243,273,304,334],K1=au=>{var pu=x1(au)+1,du=C1(pu);return du&&y1(au,_h,du,pu),du},d1=[],L1={},I1=()=>{if(!P1){var au={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Ta||"./this.program"},pu;for(pu in L1)L1[pu]===void 0?delete au[pu]:au[pu]=L1[pu];var du=[];for(pu in au)du.push(`${pu}=${au[pu]}`);P1=du}return P1},P1,J1=[null,[],[]],O1=[31,29,31,30,31,30,31,31,30,31,30,31],U1=[31,28,31,30,31,30,31,31,30,31,30,31];function Q1(au){var pu=Array(x1(au)+1);return y1(au,pu,0,pu.length),pu}function D1(au,pu,du,xu){function Au(bu,md,xd){for(bu=typeof bu=="number"?bu.toString():bu||"";bu.length<md;)bu=xd[0]+bu;return bu}function $p(bu,md){return Au(bu,md,"0")}function gd(bu,md){function xd(G1){return 0>G1?-1:0<G1?1:0}var g1;return(g1=xd(bu.getFullYear()-md.getFullYear()))===0&&(g1=xd(bu.getMonth()-md.getMonth()))===0&&(g1=xd(bu.getDate()-md.getDate())),g1}function Bd(bu){switch(bu.getDay()){case 0:return new Date(bu.getFullYear()-1,11,29);case 1:return bu;case 2:return new Date(bu.getFullYear(),0,3);case 3:return new Date(bu.getFullYear(),0,2);case 4:return new Date(bu.getFullYear(),0,1);case 5:return new Date(bu.getFullYear()-1,11,31);case 6:return new Date(bu.getFullYear()-1,11,30)}}function n1(bu){var md=bu.ta;for(bu=new Date(new Date(bu.ua+1900,0,1).getTime());0<md;){var xd=bu.getMonth(),g1=(b1(bu.getFullYear())?O1:U1)[xd];if(md>g1-bu.getDate())md-=g1-bu.getDate()+1,bu.setDate(1),11>xd?bu.setMonth(xd+1):(bu.setMonth(0),bu.setFullYear(bu.getFullYear()+1));else{bu.setDate(bu.getDate()+md);break}}return xd=new Date(bu.getFullYear()+1,0,4),md=Bd(new Date(bu.getFullYear(),0,4)),xd=Bd(xd),0>=gd(md,bu)?0>=gd(xd,bu)?bu.getFullYear()+1:bu.getFullYear():bu.getFullYear()-1}au>>>=0,pu>>>=0,du>>>=0,xu>>>=0;var Gd=Td[xu+40>>>2>>>0];xu={Da:Lu[xu>>>2>>>0],Ca:Lu[xu+4>>>2>>>0],va:Lu[xu+8>>>2>>>0],ya:Lu[xu+12>>>2>>>0],wa:Lu[xu+16>>>2>>>0],ua:Lu[xu+20>>>2>>>0],oa:Lu[xu+24>>>2>>>0],ta:Lu[xu+28>>>2>>>0],Ia:Lu[xu+32>>>2>>>0],Ba:Lu[xu+36>>>2>>>0],Ea:Gd?A1(Gd):""},du=A1(du),Gd={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var e1 in Gd)du=du.replace(new RegExp(e1,"g"),Gd[e1]);var z1="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),H1="January February March April May June July August September October November December".split(" ");Gd={"%a":bu=>z1[bu.oa].substring(0,3),"%A":bu=>z1[bu.oa],"%b":bu=>H1[bu.wa].substring(0,3),"%B":bu=>H1[bu.wa],"%C":bu=>$p((bu.ua+1900)/100|0,2),"%d":bu=>$p(bu.ya,2),"%e":bu=>Au(bu.ya,2," "),"%g":bu=>n1(bu).toString().substring(2),"%G":bu=>n1(bu),"%H":bu=>$p(bu.va,2),"%I":bu=>(bu=bu.va,bu==0?bu=12:12<bu&&(bu-=12),$p(bu,2)),"%j":bu=>{for(var md=0,xd=0;xd<=bu.wa-1;md+=(b1(bu.ua+1900)?O1:U1)[xd++]);return $p(bu.ya+md,3)},"%m":bu=>$p(bu.wa+1,2),"%M":bu=>$p(bu.Ca,2),"%n":()=>`
`,"%p":bu=>0<=bu.va&&12>bu.va?"AM":"PM","%S":bu=>$p(bu.Da,2),"%t":()=>"	","%u":bu=>bu.oa||7,"%U":bu=>$p(Math.floor((bu.ta+7-bu.oa)/7),2),"%V":bu=>{var md=Math.floor((bu.ta+7-(bu.oa+6)%7)/7);if(2>=(bu.oa+371-bu.ta-2)%7&&md++,md)md==53&&(xd=(bu.oa+371-bu.ta)%7,xd==4||xd==3&&b1(bu.ua)||(md=1));else{md=52;var xd=(bu.oa+7-bu.ta-1)%7;(xd==4||xd==5&&b1(bu.ua%400-1))&&md++}return $p(md,2)},"%w":bu=>bu.oa,"%W":bu=>$p(Math.floor((bu.ta+7-(bu.oa+6)%7)/7),2),"%y":bu=>(bu.ua+1900).toString().substring(2),"%Y":bu=>bu.ua+1900,"%z":bu=>{bu=bu.Ba;var md=0<=bu;return bu=Math.abs(bu)/60,(md?"+":"-")+("0000"+(bu/60*100+bu%60)).slice(-4)},"%Z":bu=>bu.Ea,"%%":()=>"%"},du=du.replace(/%%/g,"\0\0");for(e1 in Gd)du.includes(e1)&&(du=du.replace(new RegExp(e1,"g"),Gd[e1](xu)));return du=du.replace(/\0\0/g,"%"),e1=Q1(du),e1.length>pu?0:(Fd.set(e1,au>>>0),e1.length-1)}var Og={a:function(au,pu,du){throw au>>>=0,new kd(au).Aa(pu>>>0,du>>>0),u1=au,u1},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(au,pu,du){au=pu+2097152>>>0<4194305-!!au?(au>>>0)+4294967296*pu:NaN,du>>>=0,au=new Date(1e3*au),Lu[du>>>2>>>0]=au.getUTCSeconds(),Lu[du+4>>>2>>>0]=au.getUTCMinutes(),Lu[du+8>>>2>>>0]=au.getUTCHours(),Lu[du+12>>>2>>>0]=au.getUTCDate(),Lu[du+16>>>2>>>0]=au.getUTCMonth(),Lu[du+20>>>2>>>0]=au.getUTCFullYear()-1900,Lu[du+24>>>2>>>0]=au.getUTCDay(),Lu[du+28>>>2>>>0]=(au.getTime()-Date.UTC(au.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(au,pu,du){au=pu+2097152>>>0<4194305-!!au?(au>>>0)+4294967296*pu:NaN,du>>>=0,au=new Date(1e3*au),Lu[du>>>2>>>0]=au.getSeconds(),Lu[du+4>>>2>>>0]=au.getMinutes(),Lu[du+8>>>2>>>0]=au.getHours(),Lu[du+12>>>2>>>0]=au.getDate(),Lu[du+16>>>2>>>0]=au.getMonth(),Lu[du+20>>>2>>>0]=au.getFullYear()-1900,Lu[du+24>>>2>>>0]=au.getDay(),Lu[du+28>>>2>>>0]=(b1(au.getFullYear())?Z1:B1)[au.getMonth()]+au.getDate()-1|0,Lu[du+36>>>2>>>0]=-(60*au.getTimezoneOffset()),pu=new Date(au.getFullYear(),6,1).getTimezoneOffset();var xu=new Date(au.getFullYear(),0,1).getTimezoneOffset();Lu[du+32>>>2>>>0]=(pu!=xu&&au.getTimezoneOffset()==Math.min(xu,pu))|0},p:function(au){au>>>=0;var pu=new Date(Lu[au+20>>>2>>>0]+1900,Lu[au+16>>>2>>>0],Lu[au+12>>>2>>>0],Lu[au+8>>>2>>>0],Lu[au+4>>>2>>>0],Lu[au>>>2>>>0],0),du=Lu[au+32>>>2>>>0],xu=pu.getTimezoneOffset(),Au=new Date(pu.getFullYear(),6,1).getTimezoneOffset(),$p=new Date(pu.getFullYear(),0,1).getTimezoneOffset(),gd=Math.min($p,Au);return 0>du?Lu[au+32>>>2>>>0]=+(Au!=$p&&gd==xu):0<du!=(gd==xu)&&(Au=Math.max($p,Au),pu.setTime(pu.getTime()+6e4*((0<du?gd:Au)-xu))),Lu[au+24>>>2>>>0]=pu.getDay(),Lu[au+28>>>2>>>0]=(b1(pu.getFullYear())?Z1:B1)[pu.getMonth()]+pu.getDate()-1|0,Lu[au>>>2>>>0]=pu.getSeconds(),Lu[au+4>>>2>>>0]=pu.getMinutes(),Lu[au+8>>>2>>>0]=pu.getHours(),Lu[au+12>>>2>>>0]=pu.getDate(),Lu[au+16>>>2>>>0]=pu.getMonth(),Lu[au+20>>>2>>>0]=pu.getYear(),au=pu.getTime(),isNaN(au)?(Lu[j1()>>>2>>>0]=61,au=-1):au/=1e3,og((a1=au,1<=+Math.abs(a1)?0<a1?+Math.floor(a1/4294967296)>>>0:~~+Math.ceil((a1-+(~~a1>>>0))/4294967296)>>>0:0)),au>>>0},l:function(){return-52},m:function(){},t:function(au,pu,du){function xu(n1){return(n1=n1.toTimeString().match(/\(([A-Za-z ]+)\)$/))?n1[1]:"GMT"}du>>>=0;var Au=new Date().getFullYear(),$p=new Date(Au,0,1),gd=new Date(Au,6,1);Au=$p.getTimezoneOffset();var Bd=gd.getTimezoneOffset();Td[au>>>0>>>2>>>0]=60*Math.max(Au,Bd),Lu[pu>>>0>>>2>>>0]=+(Au!=Bd),au=xu($p),pu=xu(gd),au=K1(au),pu=K1(pu),Bd<Au?(Td[du>>>2>>>0]=au,Td[du+4>>>2>>>0]=pu):(Td[du>>>2>>>0]=pu,Td[du+4>>>2>>>0]=au)},d:()=>{o1("")},B:function(au,pu,du){au>>>=0,pu>>>=0,du>>>=0,d1.length=0;for(var xu;xu=_h[pu++>>>0];){var Au=xu!=105;Au&=xu!=112,du+=Au&&du%8?4:0,d1.push(xu==112?Td[du>>>2>>>0]:xu==105?Lu[du>>>2>>>0]:S1[du>>>3>>>0]),du+=Au?8:4}return zd[au].apply(null,d1)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(au,pu,du){return pu>>>=0,_h.copyWithin(au>>>0>>>0,pu>>>0,pu+(du>>>0)>>>0)},s:function(au){au>>>=0;var pu=_h.length;if(4294901760<au)return!1;for(var du=1;4>=du;du*=2){var xu=pu*(1+.2/du);xu=Math.min(xu,au+100663296);var Au=Math;xu=Math.max(au,xu);e:{Au=(Au.min.call(Au,4294901760,xu+(65536-xu%65536)%65536)-uh.buffer.byteLength+65535)/65536;try{uh.grow(Au),$1();var $p=1;break e}catch{}$p=void 0}if($p)return!0}return!1},C:function(au,pu){au>>>=0,pu>>>=0;var du=0;return I1().forEach((xu,Au)=>{var $p=pu+du;for(Au=Td[au+4*Au>>>2>>>0]=$p,$p=0;$p<xu.length;++$p)Fd[Au++>>>0>>>0]=xu.charCodeAt($p);Fd[Au>>>0>>>0]=0,du+=xu.length+1}),0},D:function(au,pu){au>>>=0,pu>>>=0;var du=I1();Td[au>>>2>>>0]=du.length;var xu=0;return du.forEach(Au=>xu+=Au.length+1),Td[pu>>>2>>>0]=xu,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(au,pu,du,xu){pu>>>=0,du>>>=0,xu>>>=0;for(var Au=0,$p=0;$p<du;$p++){var gd=Td[pu>>>2>>>0],Bd=Td[pu+4>>>2>>>0];pu+=8;for(var n1=0;n1<Bd;n1++){var Gd=_h[gd+n1>>>0],e1=J1[au];Gd===0||Gd===10?((au===1?mu:Ou)(T1(e1,0)),e1.length=0):e1.push(Gd)}Au+=Bd}return Td[xu>>>2>>>0]=Au,0},r:D1,c:function(au,pu,du,xu){return D1(au>>>0,pu>>>0,du>>>0,xu>>>0)}},Zu=(function(){function au(du){return Zu=du.exports,Zu=R1(),uh=Zu.K,$1(),Fp.unshift(Zu.L),p1--,p1==0&&t1&&(du=t1,t1=null,du()),Zu}var pu={a:Og};if(p1++,va.instantiateWasm)try{return va.instantiateWasm(pu,au)}catch(du){Ou(`Module.instantiateWasm callback failed with error: ${du}`),La(du)}return f1(pu,function(du){au(du.instance)}).catch(La),{}})();va._OrtInit=(au,pu)=>(va._OrtInit=Zu.M)(au,pu),va._OrtGetLastError=(au,pu)=>(va._OrtGetLastError=Zu.N)(au,pu),va._OrtCreateSessionOptions=(au,pu,du,xu,Au,$p,gd,Bd,n1,Gd)=>(va._OrtCreateSessionOptions=Zu.O)(au,pu,du,xu,Au,$p,gd,Bd,n1,Gd),va._OrtAppendExecutionProvider=(au,pu)=>(va._OrtAppendExecutionProvider=Zu.P)(au,pu),va._OrtAddFreeDimensionOverride=(au,pu,du)=>(va._OrtAddFreeDimensionOverride=Zu.Q)(au,pu,du),va._OrtAddSessionConfigEntry=(au,pu,du)=>(va._OrtAddSessionConfigEntry=Zu.R)(au,pu,du),va._OrtReleaseSessionOptions=au=>(va._OrtReleaseSessionOptions=Zu.S)(au),va._OrtCreateSession=(au,pu,du)=>(va._OrtCreateSession=Zu.T)(au,pu,du),va._OrtReleaseSession=au=>(va._OrtReleaseSession=Zu.U)(au),va._OrtGetInputOutputCount=(au,pu,du)=>(va._OrtGetInputOutputCount=Zu.V)(au,pu,du),va._OrtGetInputName=(au,pu)=>(va._OrtGetInputName=Zu.W)(au,pu),va._OrtGetOutputName=(au,pu)=>(va._OrtGetOutputName=Zu.X)(au,pu),va._OrtFree=au=>(va._OrtFree=Zu.Y)(au),va._OrtCreateTensor=(au,pu,du,xu,Au,$p)=>(va._OrtCreateTensor=Zu.Z)(au,pu,du,xu,Au,$p),va._OrtGetTensorData=(au,pu,du,xu,Au)=>(va._OrtGetTensorData=Zu._)(au,pu,du,xu,Au),va._OrtReleaseTensor=au=>(va._OrtReleaseTensor=Zu.$)(au),va._OrtCreateRunOptions=(au,pu,du,xu)=>(va._OrtCreateRunOptions=Zu.aa)(au,pu,du,xu),va._OrtAddRunConfigEntry=(au,pu,du)=>(va._OrtAddRunConfigEntry=Zu.ba)(au,pu,du),va._OrtReleaseRunOptions=au=>(va._OrtReleaseRunOptions=Zu.ca)(au),va._OrtCreateBinding=au=>(va._OrtCreateBinding=Zu.da)(au),va._OrtBindInput=(au,pu,du)=>(va._OrtBindInput=Zu.ea)(au,pu,du),va._OrtBindOutput=(au,pu,du,xu)=>(va._OrtBindOutput=Zu.fa)(au,pu,du,xu),va._OrtClearBoundOutputs=au=>(va._OrtClearBoundOutputs=Zu.ga)(au),va._OrtReleaseBinding=au=>(va._OrtReleaseBinding=Zu.ha)(au),va._OrtRunWithBinding=(au,pu,du,xu,Au)=>(va._OrtRunWithBinding=Zu.ia)(au,pu,du,xu,Au),va._OrtRun=(au,pu,du,xu,Au,$p,gd,Bd)=>(va._OrtRun=Zu.ja)(au,pu,du,xu,Au,$p,gd,Bd),va._OrtEndProfiling=au=>(va._OrtEndProfiling=Zu.ka)(au);var j1=()=>(j1=Zu.la)(),C1=va._malloc=au=>(C1=va._malloc=Zu.ma)(au);va._free=au=>(va._free=Zu.na)(au);var og=au=>(og=Zu.pa)(au),V1=()=>(V1=Zu.qa)(),mg=au=>(mg=Zu.ra)(au),Ip=au=>(Ip=Zu.sa)(au);function R1(){var au=Zu;au=Object.assign({},au);var pu=xu=>()=>xu()>>>0,du=xu=>Au=>xu(Au)>>>0;return au.la=pu(au.la),au.ma=du(au.ma),au.qa=pu(au.qa),au.sa=du(au.sa),au}va.stackAlloc=Ip,va.stackSave=V1,va.stackRestore=mg,va.UTF8ToString=A1,va.stringToUTF8=(au,pu,du)=>y1(au,_h,pu,du),va.lengthBytesUTF8=x1;var F1;t1=function au(){F1||N1(),F1||(t1=au)};function N1(){if(!(0<p1)){if(va.preRun)for(typeof va.preRun=="function"&&(va.preRun=[va.preRun]);va.preRun.length;){var au=va.preRun.shift();l1.unshift(au)}for(;0<l1.length;)l1.shift()(va);if(!(0<p1||F1||(F1=!0,va.calledRun=!0,bd))){for(;0<Fp.length;)Fp.shift()(va);for(Ea(va);0<Nd.length;)Nd.shift()(va)}}}return N1(),Sa.ready}})();typeof oa=="object"&&typeof ba=="object"?ba.exports=wa:typeof define=="function"&&define.amd&&define([],()=>wa)}),Pp=me(()=>{}),Ep=me(()=>{}),Dp={};Pr(Dp,{cpus:()=>ng});var ng,Lp=L(()=>{ng=void 0}),Cp=me((oa,ba)=>{var wa=(()=>{var xa=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(xa=xa||__filename),function(Sa={}){function va(){return Nd.buffer!=Md.buffer&&c1(),Md}function Ea(){return Nd.buffer!=Md.buffer&&c1(),r1}function La(){return Nd.buffer!=Md.buffer&&c1(),s1}function eu(){return Nd.buffer!=Md.buffer&&c1(),w1}function Ta(){return Nd.buffer!=Md.buffer&&c1(),v1}var Aa=Sa,ka,ru;Aa.ready=new Promise((iu,ou)=>{ka=iu,ru=ou});var nu=Object.assign({},Aa),su="./this.program",uu=(iu,ou)=>{throw ou},cu=typeof window=="object",gu=typeof importScripts=="function",hu=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",mu=Aa.ENVIRONMENT_IS_PTHREAD||!1,Ou="";function uh(iu){return Aa.locateFile?Aa.locateFile(iu,Ou):Ou+iu}var bd,Fd,_h;if(hu){var Lu=(ta(),rr(ea)),Td=(na(),rr(ra));Ou=gu?Td.dirname(Ou)+"/":__dirname+"/",bd=(ou,lu)=>(ou=x1(ou)?new URL(ou):Td.normalize(ou),Lu.readFileSync(ou,lu?void 0:"utf8")),_h=ou=>(ou=bd(ou,!0),ou.buffer||(ou=new Uint8Array(ou)),ou),Fd=(ou,lu,yu,Eu=!0)=>{ou=x1(ou)?new URL(ou):Td.normalize(ou),Lu.readFile(ou,Eu?void 0:"utf8",(Su,oh)=>{Su?yu(Su):lu(Eu?oh.buffer:oh)})},!Aa.thisProgram&&1<process.argv.length&&(su=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),uu=(ou,lu)=>{throw process.exitCode=ou,lu},Aa.inspect=()=>"[Emscripten Module object]";let iu;try{iu=Pp()}catch(ou){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ou}global.Worker=iu.Worker}else(cu||gu)&&(gu?Ou=self.location.href:typeof document<"u"&&document.currentScript&&(Ou=document.currentScript.src),typeof xa<"u"&&xa&&(Ou=xa),Ou.indexOf("blob:")!==0?Ou=Ou.substr(0,Ou.replace(/[?#].*/,"").lastIndexOf("/")+1):Ou="",hu||(bd=iu=>{var ou=new XMLHttpRequest;return ou.open("GET",iu,!1),ou.send(null),ou.responseText},gu&&(_h=iu=>{var ou=new XMLHttpRequest;return ou.open("GET",iu,!1),ou.responseType="arraybuffer",ou.send(null),new Uint8Array(ou.response)}),Fd=(iu,ou,lu)=>{var yu=new XMLHttpRequest;yu.open("GET",iu,!0),yu.responseType="arraybuffer",yu.onload=()=>{yu.status==200||yu.status==0&&yu.response?ou(yu.response):lu()},yu.onerror=lu,yu.send(null)}));hu&&typeof performance>"u"&&(global.performance=Ep().performance);var S1=console.log.bind(console),$1=console.error.bind(console);hu&&(S1=(...iu)=>Lu.writeSync(1,iu.join(" ")+`
`),$1=(...iu)=>Lu.writeSync(2,iu.join(" ")+`
`));var l1=S1,Fp=$1;Object.assign(Aa,nu),nu=null,typeof WebAssembly!="object"&&T1("no native wasm support detected");var Nd,p1,t1=!1,o1,Md,r1,s1,w1,v1;function c1(){var iu=Nd.buffer;Aa.HEAP8=Md=new Int8Array(iu),Aa.HEAP16=new Int16Array(iu),Aa.HEAPU8=r1=new Uint8Array(iu),Aa.HEAPU16=new Uint16Array(iu),Aa.HEAP32=s1=new Int32Array(iu),Aa.HEAPU32=w1=new Uint32Array(iu),Aa.HEAPF32=new Float32Array(iu),Aa.HEAPF64=v1=new Float64Array(iu)}var h1=16777216;if(mu)Nd=Aa.wasmMemory;else if(Aa.wasmMemory)Nd=Aa.wasmMemory;else if(Nd=new WebAssembly.Memory({initial:h1/65536,maximum:65536,shared:!0}),!(Nd.buffer instanceof SharedArrayBuffer))throw Fp("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),hu&&Fp("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");c1(),h1=Nd.buffer.byteLength;var f1=[],a1=[],zd=[],kd=0,u1=null;function _1(){if(kd--,kd==0&&u1){var iu=u1;u1=null,iu()}}function T1(iu){throw iu="Aborted("+iu+")",Fp(iu),t1=!0,o1=1,iu=new WebAssembly.RuntimeError(iu+". Build with -sASSERTIONS for more info."),ru(iu),iu}var A1=iu=>iu.startsWith("data:application/octet-stream;base64,"),x1=iu=>iu.startsWith("file://"),y1;y1="ort-wasm-threaded.wasm",A1(y1)||(y1=uh(y1));function b1(iu){if(_h)return _h(iu);throw"both async and sync fetching of the wasm failed"}function Z1(iu){if(cu||gu){if(typeof fetch=="function"&&!x1(iu))return fetch(iu,{credentials:"same-origin"}).then(ou=>{if(!ou.ok)throw"failed to load wasm binary file at '"+iu+"'";return ou.arrayBuffer()}).catch(()=>b1(iu));if(Fd)return new Promise((ou,lu)=>{Fd(iu,yu=>ou(new Uint8Array(yu)),lu)})}return Promise.resolve().then(()=>b1(iu))}function B1(iu,ou,lu){return Z1(iu).then(yu=>WebAssembly.instantiate(yu,ou)).then(yu=>yu).then(lu,yu=>{Fp(`failed to asynchronously prepare wasm: ${yu}`),T1(yu)})}function K1(iu,ou){var lu=y1;return typeof WebAssembly.instantiateStreaming!="function"||A1(lu)||x1(lu)||hu||typeof fetch!="function"?B1(lu,iu,ou):fetch(lu,{credentials:"same-origin"}).then(yu=>WebAssembly.instantiateStreaming(yu,iu).then(ou,function(Eu){return Fp(`wasm streaming compile failed: ${Eu}`),Fp("falling back to ArrayBuffer instantiation"),B1(lu,iu,ou)}))}var d1,L1={920636:(iu,ou,lu,yu)=>{if(typeof Aa>"u"||!Aa.cb)return 1;if(iu=D1(iu>>>0),iu.startsWith("./")&&(iu=iu.substring(2)),iu=Aa.cb.get(iu),!iu)return 2;if(ou>>>=0,lu>>>=0,yu>>>=0,ou+lu>iu.byteLength)return 3;try{return Ea().set(iu.subarray(ou,ou+lu),yu>>>0),0}catch{return 4}}};function I1(iu){this.name="ExitStatus",this.message=`Program terminated with exit(${iu})`,this.status=iu}var P1=iu=>{iu.terminate(),iu.onmessage=()=>{}},J1=iu=>{Ip.Pa.length==0&&(V1(),Ip.Ya(Ip.Pa[0]));var ou=Ip.Pa.pop();if(!ou)return 6;Ip.Qa.push(ou),Ip.Ma[iu.Oa]=ou,ou.Oa=iu.Oa;var lu={cmd:"run",start_routine:iu.kb,arg:iu.hb,pthread_ptr:iu.Oa};return hu&&ou.unref(),ou.postMessage(lu,iu.qb),0},O1=0,U1=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Q1=(iu,ou,lu)=>{ou>>>=0;var yu=ou+lu;for(lu=ou;iu[lu]&&!(lu>=yu);)++lu;if(16<lu-ou&&iu.buffer&&U1)return U1.decode(iu.buffer instanceof SharedArrayBuffer?iu.slice(ou,lu):iu.subarray(ou,lu));for(yu="";ou<lu;){var Eu=iu[ou++];if(Eu&128){var Su=iu[ou++]&63;if((Eu&224)==192)yu+=String.fromCharCode((Eu&31)<<6|Su);else{var oh=iu[ou++]&63;Eu=(Eu&240)==224?(Eu&15)<<12|Su<<6|oh:(Eu&7)<<18|Su<<12|oh<<6|iu[ou++]&63,65536>Eu?yu+=String.fromCharCode(Eu):(Eu-=65536,yu+=String.fromCharCode(55296|Eu>>10,56320|Eu&1023))}}else yu+=String.fromCharCode(Eu)}return yu},D1=(iu,ou)=>(iu>>>=0)?Q1(Ea(),iu,ou):"",Og=iu=>{var ou=Ng();return iu=iu(),wg(ou),iu};function Zu(iu,ou){var lu=arguments.length-2,yu=arguments;return Og(()=>{for(var Eu=kg(8*lu),Su=Eu>>>3,oh=0;oh<lu;oh++){var Cd=yu[2+oh];Ta()[Su+oh>>>0]=Cd}return i0(iu,lu,Eu,ou)})}function j1(iu){var ou;if(mu)return Zu(0,1,iu);o1=iu,0<O1||(Ip.lb(),(ou=Aa.onExit)==null||ou.call(Aa,iu),t1=!0),uu(iu,new I1(iu))}var C1=iu=>{if(o1=iu,mu)throw F1(iu),"unwind";j1(iu)};function og(){for(var iu=Aa.numThreads;iu--;)V1();f1.unshift(()=>{kd++,mg(()=>_1())})}function V1(){var iu=uh("ort-wasm-threaded.worker.js");iu=new Worker(iu),Ip.Pa.push(iu)}function mg(iu){mu?iu():Promise.all(Ip.Pa.map(Ip.Ya)).then(iu)}var Ip={Pa:[],Qa:[],bb:[],Ma:{},Wa(){mu?(Ip.receiveObjectTransfer=Ip.jb,Ip.threadInitTLS=Ip.ab,Ip.setExitStatus=Ip.$a):og()},$a:iu=>o1=iu,tb:["$terminateWorker"],lb:()=>{for(var iu of Ip.Qa)P1(iu);for(iu of Ip.Pa)P1(iu);Ip.Pa=[],Ip.Qa=[],Ip.Ma=[]},Za:iu=>{var ou=iu.Oa;delete Ip.Ma[ou],Ip.Pa.push(iu),Ip.Qa.splice(Ip.Qa.indexOf(iu),1),iu.Oa=0,Dg(ou)},jb(){},ab(){Ip.bb.forEach(iu=>iu())},Ya:iu=>new Promise(ou=>{iu.onmessage=Su=>{Su=Su.data;var oh=Su.cmd;if(Su.targetThread&&Su.targetThread!=$g()){var Cd=Ip.Ma[Su.targetThread];Cd?Cd.postMessage(Su,Su.transferList):Fp(`Internal error! Worker sent a message "${oh}" to target pthread ${Su.targetThread}, but that thread no longer exists!`)}else oh==="checkMailbox"?bg():oh==="spawnThread"?J1(Su):oh==="cleanupThread"?Ip.Za(Ip.Ma[Su.thread]):oh==="killThread"?(Su=Su.thread,oh=Ip.Ma[Su],delete Ip.Ma[Su],P1(oh),Dg(Su),Ip.Qa.splice(Ip.Qa.indexOf(oh),1),oh.Oa=0):oh==="cancelThread"?Ip.Ma[Su.thread].postMessage({cmd:"cancel"}):oh==="loaded"?(iu.loaded=!0,hu&&!iu.Oa&&iu.unref(),ou(iu)):oh==="alert"?alert(`Thread ${Su.threadId}: ${Su.text}`):Su.target==="setimmediate"?iu.postMessage(Su):oh==="callHandler"?Aa[Su.handler](...Su.args):oh&&Fp(`worker sent an unknown command ${oh}`)},iu.onerror=Su=>{throw Fp(`worker sent an error! ${Su.filename}:${Su.lineno}: ${Su.message}`),Su},hu&&(iu.on("message",Su=>iu.onmessage({data:Su})),iu.on("error",Su=>iu.onerror(Su)));var lu=[],yu=["onExit"],Eu;for(Eu of yu)Aa.hasOwnProperty(Eu)&&lu.push(Eu);iu.postMessage({cmd:"load",handlers:lu,urlOrBlob:Aa.mainScriptUrlOrBlob||xa,wasmMemory:Nd,wasmModule:p1})})};Aa.PThread=Ip;var R1=iu=>{for(;0<iu.length;)iu.shift()(Aa)};Aa.establishStackSpace=()=>{var iu=$g(),ou=eu()[iu+52>>>2>>>0];iu=eu()[iu+56>>>2>>>0],a0(ou,ou-iu),wg(ou)};function F1(iu){if(mu)return Zu(1,0,iu);C1(iu)}var N1=[],au;Aa.invokeEntryPoint=(iu,ou)=>{var lu=N1[iu];lu||(iu>=N1.length&&(N1.length=iu+1),N1[iu]=lu=au.get(iu)),iu=lu(ou),0<O1?Ip.$a(iu):Fg(iu)};function pu(iu){this.Va=iu-24,this.gb=function(ou){eu()[this.Va+4>>>2>>>0]=ou},this.fb=function(ou){eu()[this.Va+8>>>2>>>0]=ou},this.Wa=function(ou,lu){this.eb(),this.gb(ou),this.fb(lu)},this.eb=function(){eu()[this.Va+16>>>2>>>0]=0}}var du=0;function xu(iu,ou,lu,yu){return mu?Zu(2,1,iu,ou,lu,yu):Au(iu,ou,lu,yu)}function Au(iu,ou,lu,yu){if(iu>>>=0,ou>>>=0,lu>>>=0,yu>>>=0,typeof SharedArrayBuffer>"u")return Fp("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Eu=[];return mu&&Eu.length===0?xu(iu,ou,lu,yu):(iu={kb:lu,Oa:iu,hb:yu,qb:Eu},mu?(iu.sb="spawnThread",postMessage(iu,Eu),0):J1(iu))}function $p(iu,ou,lu){return mu?Zu(3,1,iu,ou,lu):0}function gd(iu,ou){if(mu)return Zu(4,1,iu,ou)}var Bd=iu=>{for(var ou=0,lu=0;lu<iu.length;++lu){var yu=iu.charCodeAt(lu);127>=yu?ou++:2047>=yu?ou+=2:55296<=yu&&57343>=yu?(ou+=4,++lu):ou+=3}return ou},n1=(iu,ou,lu,yu)=>{if(lu>>>=0,!(0<yu))return 0;var Eu=lu;yu=lu+yu-1;for(var Su=0;Su<iu.length;++Su){var oh=iu.charCodeAt(Su);if(55296<=oh&&57343>=oh){var Cd=iu.charCodeAt(++Su);oh=65536+((oh&1023)<<10)|Cd&1023}if(127>=oh){if(lu>=yu)break;ou[lu++>>>0]=oh}else{if(2047>=oh){if(lu+1>=yu)break;ou[lu++>>>0]=192|oh>>6}else{if(65535>=oh){if(lu+2>=yu)break;ou[lu++>>>0]=224|oh>>12}else{if(lu+3>=yu)break;ou[lu++>>>0]=240|oh>>18,ou[lu++>>>0]=128|oh>>12&63}ou[lu++>>>0]=128|oh>>6&63}ou[lu++>>>0]=128|oh&63}}return ou[lu>>>0]=0,lu-Eu},Gd=(iu,ou,lu)=>n1(iu,Ea(),ou,lu);function e1(iu,ou){if(mu)return Zu(5,1,iu,ou)}function z1(iu,ou,lu){if(mu)return Zu(6,1,iu,ou,lu)}function H1(iu,ou,lu){return mu?Zu(7,1,iu,ou,lu):0}function bu(iu,ou){if(mu)return Zu(8,1,iu,ou)}function md(iu,ou,lu){if(mu)return Zu(9,1,iu,ou,lu)}function xd(iu,ou,lu,yu){if(mu)return Zu(10,1,iu,ou,lu,yu)}function g1(iu,ou,lu,yu){if(mu)return Zu(11,1,iu,ou,lu,yu)}function G1(iu,ou,lu,yu){if(mu)return Zu(12,1,iu,ou,lu,yu)}function Rg(iu){if(mu)return Zu(13,1,iu)}function Mg(iu,ou){if(mu)return Zu(14,1,iu,ou)}function Bg(iu,ou,lu){if(mu)return Zu(15,1,iu,ou,lu)}function Eg(iu){iu>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(La(),iu>>>2,iu).value.then(bg),iu+=128,Atomics.store(La(),iu>>>2,1))}Aa.__emscripten_thread_mailbox_await=Eg;var bg=()=>{var iu=$g();if(iu&&(Eg(iu),iu=o0,!t1))try{if(iu(),!(0<O1))try{mu?Fg(o1):C1(o1)}catch(ou){ou instanceof I1||ou=="unwind"||uu(1,ou)}}catch(ou){ou instanceof I1||ou=="unwind"||uu(1,ou)}};Aa.checkMailbox=bg;var Sg=[],M1=iu=>iu%4===0&&(iu%100!==0||iu%400===0),Ug=[0,31,60,91,121,152,182,213,244,274,305,335],jg=[0,31,59,90,120,151,181,212,243,273,304,334];function Vg(iu,ou,lu,yu,Eu,Su,oh,Cd){return mu?Zu(16,1,iu,ou,lu,yu,Eu,Su,oh,Cd):-52}function zg(iu,ou,lu,yu,Eu,Su,oh){if(mu)return Zu(17,1,iu,ou,lu,yu,Eu,Su,oh)}var Hg=iu=>{var ou=Bd(iu)+1,lu=r0(ou);return lu&&Gd(iu,lu,ou),lu},Ag=[],Ig={},Gg=()=>{if(!Pg){var iu={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:su||"./this.program"},ou;for(ou in Ig)Ig[ou]===void 0?delete iu[ou]:iu[ou]=Ig[ou];var lu=[];for(ou in iu)lu.push(`${ou}=${iu[ou]}`);Pg=lu}return Pg},Pg;function Wg(iu,ou){if(mu)return Zu(18,1,iu,ou);iu>>>=0,ou>>>=0;var lu=0;return Gg().forEach((yu,Eu)=>{var Su=ou+lu;for(Eu=eu()[iu+4*Eu>>>2>>>0]=Su,Su=0;Su<yu.length;++Su)va()[Eu++>>>0>>>0]=yu.charCodeAt(Su);va()[Eu>>>0>>>0]=0,lu+=yu.length+1}),0}function qg(iu,ou){if(mu)return Zu(19,1,iu,ou);iu>>>=0,ou>>>=0;var lu=Gg();eu()[iu>>>2>>>0]=lu.length;var yu=0;return lu.forEach(Eu=>yu+=Eu.length+1),eu()[ou>>>2>>>0]=yu,0}function Yg(iu){return mu?Zu(20,1,iu):52}function Xg(iu,ou,lu,yu){return mu?Zu(21,1,iu,ou,lu,yu):52}function Zg(iu,ou,lu,yu,Eu){return mu?Zu(22,1,iu,ou,lu,yu,Eu):70}var g0=[null,[],[]];function Kg(iu,ou,lu,yu){if(mu)return Zu(23,1,iu,ou,lu,yu);ou>>>=0,lu>>>=0,yu>>>=0;for(var Eu=0,Su=0;Su<lu;Su++){var oh=eu()[ou>>>2>>>0],Cd=eu()[ou+4>>>2>>>0];ou+=8;for(var m1=0;m1<Cd;m1++){var Ud=Ea()[oh+m1>>>0],i1=g0[iu];Ud===0||Ud===10?((iu===1?l1:Fp)(Q1(i1,0)),i1.length=0):i1.push(Ud)}Eu+=Cd}return eu()[yu>>>2>>>0]=Eu,0}var Jg=[31,29,31,30,31,30,31,31,30,31,30,31],Qg=[31,28,31,30,31,30,31,31,30,31,30,31];function m0(iu){var ou=Array(Bd(iu)+1);return n1(iu,ou,0,ou.length),ou}var y0=(iu,ou)=>{va().set(iu,ou>>>0)};function e0(iu,ou,lu,yu){function Eu(wu,yd,Rd){for(wu=typeof wu=="number"?wu.toString():wu||"";wu.length<yd;)wu=Rd[0]+wu;return wu}function Su(wu,yd){return Eu(wu,yd,"0")}function oh(wu,yd){function Rd(h0){return 0>h0?-1:0<h0?1:0}var k1;return(k1=Rd(wu.getFullYear()-yd.getFullYear()))===0&&(k1=Rd(wu.getMonth()-yd.getMonth()))===0&&(k1=Rd(wu.getDate()-yd.getDate())),k1}function Cd(wu){switch(wu.getDay()){case 0:return new Date(wu.getFullYear()-1,11,29);case 1:return wu;case 2:return new Date(wu.getFullYear(),0,3);case 3:return new Date(wu.getFullYear(),0,2);case 4:return new Date(wu.getFullYear(),0,1);case 5:return new Date(wu.getFullYear()-1,11,31);case 6:return new Date(wu.getFullYear()-1,11,30)}}function m1(wu){var yd=wu.Ra;for(wu=new Date(new Date(wu.Sa+1900,0,1).getTime());0<yd;){var Rd=wu.getMonth(),k1=(M1(wu.getFullYear())?Jg:Qg)[Rd];if(yd>k1-wu.getDate())yd-=k1-wu.getDate()+1,wu.setDate(1),11>Rd?wu.setMonth(Rd+1):(wu.setMonth(0),wu.setFullYear(wu.getFullYear()+1));else{wu.setDate(wu.getDate()+yd);break}}return Rd=new Date(wu.getFullYear()+1,0,4),yd=Cd(new Date(wu.getFullYear(),0,4)),Rd=Cd(Rd),0>=oh(yd,wu)?0>=oh(Rd,wu)?wu.getFullYear()+1:wu.getFullYear():wu.getFullYear()-1}iu>>>=0,ou>>>=0,lu>>>=0,yu>>>=0;var Ud=eu()[yu+40>>>2>>>0];yu={ob:La()[yu>>>2>>>0],nb:La()[yu+4>>>2>>>0],Ta:La()[yu+8>>>2>>>0],Xa:La()[yu+12>>>2>>>0],Ua:La()[yu+16>>>2>>>0],Sa:La()[yu+20>>>2>>>0],Na:La()[yu+24>>>2>>>0],Ra:La()[yu+28>>>2>>>0],ub:La()[yu+32>>>2>>>0],mb:La()[yu+36>>>2>>>0],pb:Ud?D1(Ud):""},lu=D1(lu),Ud={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var i1 in Ud)lu=lu.replace(new RegExp(i1,"g"),Ud[i1]);var l0="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c0="January February March April May June July August September October November December".split(" ");Ud={"%a":wu=>l0[wu.Na].substring(0,3),"%A":wu=>l0[wu.Na],"%b":wu=>c0[wu.Ua].substring(0,3),"%B":wu=>c0[wu.Ua],"%C":wu=>Su((wu.Sa+1900)/100|0,2),"%d":wu=>Su(wu.Xa,2),"%e":wu=>Eu(wu.Xa,2," "),"%g":wu=>m1(wu).toString().substring(2),"%G":wu=>m1(wu),"%H":wu=>Su(wu.Ta,2),"%I":wu=>(wu=wu.Ta,wu==0?wu=12:12<wu&&(wu-=12),Su(wu,2)),"%j":wu=>{for(var yd=0,Rd=0;Rd<=wu.Ua-1;yd+=(M1(wu.Sa+1900)?Jg:Qg)[Rd++]);return Su(wu.Xa+yd,3)},"%m":wu=>Su(wu.Ua+1,2),"%M":wu=>Su(wu.nb,2),"%n":()=>`
`,"%p":wu=>0<=wu.Ta&&12>wu.Ta?"AM":"PM","%S":wu=>Su(wu.ob,2),"%t":()=>"	","%u":wu=>wu.Na||7,"%U":wu=>Su(Math.floor((wu.Ra+7-wu.Na)/7),2),"%V":wu=>{var yd=Math.floor((wu.Ra+7-(wu.Na+6)%7)/7);if(2>=(wu.Na+371-wu.Ra-2)%7&&yd++,yd)yd==53&&(Rd=(wu.Na+371-wu.Ra)%7,Rd==4||Rd==3&&M1(wu.Sa)||(yd=1));else{yd=52;var Rd=(wu.Na+7-wu.Ra-1)%7;(Rd==4||Rd==5&&M1(wu.Sa%400-1))&&yd++}return Su(yd,2)},"%w":wu=>wu.Na,"%W":wu=>Su(Math.floor((wu.Ra+7-(wu.Na+6)%7)/7),2),"%y":wu=>(wu.Sa+1900).toString().substring(2),"%Y":wu=>wu.Sa+1900,"%z":wu=>{wu=wu.mb;var yd=0<=wu;return wu=Math.abs(wu)/60,(yd?"+":"-")+("0000"+(wu/60*100+wu%60)).slice(-4)},"%Z":wu=>wu.pb,"%%":()=>"%"},lu=lu.replace(/%%/g,"\0\0");for(i1 in Ud)lu.includes(i1)&&(lu=lu.replace(new RegExp(i1,"g"),Ud[i1](yu)));return lu=lu.replace(/\0\0/g,"%"),i1=m0(lu),i1.length>ou?0:(y0(i1,iu),i1.length-1)}Ip.Wa();var b0=[j1,F1,xu,$p,gd,e1,z1,H1,bu,md,xd,g1,G1,Rg,Mg,Bg,Vg,zg,Wg,qg,Yg,Xg,Zg,Kg],$0={b:function(iu,ou,lu){throw iu>>>=0,new pu(iu).Wa(ou>>>0,lu>>>0),du=iu,du},L:function(iu){n0(iu>>>0,!gu,1,!cu,131072,!1),Ip.ab()},j:function(iu){iu>>>=0,mu?postMessage({cmd:"cleanupThread",thread:iu}):Ip.Za(Ip.Ma[iu])},H:Au,h:$p,S:gd,D:e1,F:z1,T:H1,Q:bu,J:md,P:xd,n:g1,E:G1,B:Rg,R:Mg,C:Bg,p:()=>1,z:function(iu,ou){iu>>>=0,iu==ou>>>0?setTimeout(()=>bg()):mu?postMessage({targetThread:iu,cmd:"checkMailbox"}):(iu=Ip.Ma[iu])&&iu.postMessage({cmd:"checkMailbox"})},I:function(iu,ou,lu,yu){ou>>>=0,Sg.length=lu,yu=yu>>>0>>>3;for(var Eu=0;Eu<lu;Eu++)Sg[Eu]=Ta()[yu+Eu>>>0];return iu=0>iu?L1[-iu-1]:b0[iu],Ip.ib=ou,ou=iu.apply(null,Sg),Ip.ib=0,ou},K:Eg,o:function(iu){hu&&Ip.Ma[iu>>>0].ref()},s:function(iu,ou,lu){iu=ou+2097152>>>0<4194305-!!iu?(iu>>>0)+4294967296*ou:NaN,lu>>>=0,iu=new Date(1e3*iu),La()[lu>>>2>>>0]=iu.getUTCSeconds(),La()[lu+4>>>2>>>0]=iu.getUTCMinutes(),La()[lu+8>>>2>>>0]=iu.getUTCHours(),La()[lu+12>>>2>>>0]=iu.getUTCDate(),La()[lu+16>>>2>>>0]=iu.getUTCMonth(),La()[lu+20>>>2>>>0]=iu.getUTCFullYear()-1900,La()[lu+24>>>2>>>0]=iu.getUTCDay(),iu=(iu.getTime()-Date.UTC(iu.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,La()[lu+28>>>2>>>0]=iu},t:function(iu,ou,lu){iu=ou+2097152>>>0<4194305-!!iu?(iu>>>0)+4294967296*ou:NaN,lu>>>=0,iu=new Date(1e3*iu),La()[lu>>>2>>>0]=iu.getSeconds(),La()[lu+4>>>2>>>0]=iu.getMinutes(),La()[lu+8>>>2>>>0]=iu.getHours(),La()[lu+12>>>2>>>0]=iu.getDate(),La()[lu+16>>>2>>>0]=iu.getMonth(),La()[lu+20>>>2>>>0]=iu.getFullYear()-1900,La()[lu+24>>>2>>>0]=iu.getDay(),ou=(M1(iu.getFullYear())?Ug:jg)[iu.getMonth()]+iu.getDate()-1|0,La()[lu+28>>>2>>>0]=ou,La()[lu+36>>>2>>>0]=-(60*iu.getTimezoneOffset()),ou=new Date(iu.getFullYear(),6,1).getTimezoneOffset();var yu=new Date(iu.getFullYear(),0,1).getTimezoneOffset();iu=(ou!=yu&&iu.getTimezoneOffset()==Math.min(yu,ou))|0,La()[lu+32>>>2>>>0]=iu},u:function(iu){iu>>>=0;var ou=new Date(La()[iu+20>>>2>>>0]+1900,La()[iu+16>>>2>>>0],La()[iu+12>>>2>>>0],La()[iu+8>>>2>>>0],La()[iu+4>>>2>>>0],La()[iu>>>2>>>0],0),lu=La()[iu+32>>>2>>>0],yu=ou.getTimezoneOffset(),Eu=new Date(ou.getFullYear(),6,1).getTimezoneOffset(),Su=new Date(ou.getFullYear(),0,1).getTimezoneOffset(),oh=Math.min(Su,Eu);return 0>lu?La()[iu+32>>>2>>>0]=+(Eu!=Su&&oh==yu):0<lu!=(oh==yu)&&(Eu=Math.max(Su,Eu),ou.setTime(ou.getTime()+6e4*((0<lu?oh:Eu)-yu))),La()[iu+24>>>2>>>0]=ou.getDay(),lu=(M1(ou.getFullYear())?Ug:jg)[ou.getMonth()]+ou.getDate()-1|0,La()[iu+28>>>2>>>0]=lu,La()[iu>>>2>>>0]=ou.getSeconds(),La()[iu+4>>>2>>>0]=ou.getMinutes(),La()[iu+8>>>2>>>0]=ou.getHours(),La()[iu+12>>>2>>>0]=ou.getDate(),La()[iu+16>>>2>>>0]=ou.getMonth(),La()[iu+20>>>2>>>0]=ou.getYear(),iu=ou.getTime(),isNaN(iu)?(La()[t0()>>>2>>>0]=61,iu=-1):iu/=1e3,s0((d1=iu,1<=+Math.abs(d1)?0<d1?+Math.floor(d1/4294967296)>>>0:~~+Math.ceil((d1-+(~~d1>>>0))/4294967296)>>>0:0)),iu>>>0},q:Vg,r:zg,y:function(iu,ou,lu){function yu(Ud){return(Ud=Ud.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ud[1]:"GMT"}iu>>>=0,ou>>>=0,lu>>>=0;var Eu=new Date().getFullYear(),Su=new Date(Eu,0,1),oh=new Date(Eu,6,1);Eu=Su.getTimezoneOffset();var Cd=oh.getTimezoneOffset(),m1=Math.max(Eu,Cd);eu()[iu>>>2>>>0]=60*m1,La()[ou>>>2>>>0]=+(Eu!=Cd),iu=yu(Su),ou=yu(oh),iu=Hg(iu),ou=Hg(ou),Cd<Eu?(eu()[lu>>>2>>>0]=iu,eu()[lu+4>>>2>>>0]=ou):(eu()[lu>>>2>>>0]=ou,eu()[lu+4>>>2>>>0]=iu)},c:()=>{T1("")},O:function(iu,ou,lu){iu>>>=0,ou>>>=0,lu>>>=0,Ag.length=0;for(var yu;yu=Ea()[ou++>>>0];){var Eu=yu!=105;Eu&=yu!=112,lu+=Eu&&lu%8?4:0,Ag.push(yu==112?eu()[lu>>>2>>>0]:yu==105?La()[lu>>>2>>>0]:Ta()[lu>>>3>>>0]),lu+=Eu?8:4}return L1[iu].apply(null,Ag)},k:()=>{},i:()=>Date.now(),U:()=>{throw O1+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>hu?(Lp(),rr(Dp)).cpus().length:navigator.hardwareConcurrency,x:function(iu){iu>>>=0;var ou=Ea().length;if(iu<=ou||4294901760<iu)return!1;for(var lu=1;4>=lu;lu*=2){var yu=ou*(1+.2/lu);yu=Math.min(yu,iu+100663296);var Eu=Math;yu=Math.max(iu,yu);e:{Eu=(Eu.min.call(Eu,4294901760,yu+(65536-yu%65536)%65536)-Nd.buffer.byteLength+65535)/65536;try{Nd.grow(Eu),c1();var Su=1;break e}catch{}Su=void 0}if(Su)return!0}return!1},M:Wg,N:qg,G:C1,g:Yg,m:Xg,v:Zg,l:Kg,a:Nd||Aa.wasmMemory,w:e0,d:function(iu,ou,lu,yu){return e0(iu>>>0,ou>>>0,lu>>>0,yu>>>0)}},Sp=(function(){function iu(lu,yu){return Sp=lu.exports,Sp=w0(),Ip.bb.push(Sp.za),au=Sp.Aa,a1.unshift(Sp.V),p1=yu,_1(),Sp}var ou={a:$0};if(kd++,Aa.instantiateWasm)try{return Aa.instantiateWasm(ou,iu)}catch(lu){Fp(`Module.instantiateWasm callback failed with error: ${lu}`),ru(lu)}return K1(ou,function(lu){iu(lu.instance,lu.module)}).catch(ru),{}})();Aa._OrtInit=(iu,ou)=>(Aa._OrtInit=Sp.W)(iu,ou),Aa._OrtGetLastError=(iu,ou)=>(Aa._OrtGetLastError=Sp.X)(iu,ou),Aa._OrtCreateSessionOptions=(iu,ou,lu,yu,Eu,Su,oh,Cd,m1,Ud)=>(Aa._OrtCreateSessionOptions=Sp.Y)(iu,ou,lu,yu,Eu,Su,oh,Cd,m1,Ud),Aa._OrtAppendExecutionProvider=(iu,ou)=>(Aa._OrtAppendExecutionProvider=Sp.Z)(iu,ou),Aa._OrtAddFreeDimensionOverride=(iu,ou,lu)=>(Aa._OrtAddFreeDimensionOverride=Sp._)(iu,ou,lu),Aa._OrtAddSessionConfigEntry=(iu,ou,lu)=>(Aa._OrtAddSessionConfigEntry=Sp.$)(iu,ou,lu),Aa._OrtReleaseSessionOptions=iu=>(Aa._OrtReleaseSessionOptions=Sp.aa)(iu),Aa._OrtCreateSession=(iu,ou,lu)=>(Aa._OrtCreateSession=Sp.ba)(iu,ou,lu),Aa._OrtReleaseSession=iu=>(Aa._OrtReleaseSession=Sp.ca)(iu),Aa._OrtGetInputOutputCount=(iu,ou,lu)=>(Aa._OrtGetInputOutputCount=Sp.da)(iu,ou,lu),Aa._OrtGetInputName=(iu,ou)=>(Aa._OrtGetInputName=Sp.ea)(iu,ou),Aa._OrtGetOutputName=(iu,ou)=>(Aa._OrtGetOutputName=Sp.fa)(iu,ou),Aa._OrtFree=iu=>(Aa._OrtFree=Sp.ga)(iu),Aa._OrtCreateTensor=(iu,ou,lu,yu,Eu,Su)=>(Aa._OrtCreateTensor=Sp.ha)(iu,ou,lu,yu,Eu,Su),Aa._OrtGetTensorData=(iu,ou,lu,yu,Eu)=>(Aa._OrtGetTensorData=Sp.ia)(iu,ou,lu,yu,Eu),Aa._OrtReleaseTensor=iu=>(Aa._OrtReleaseTensor=Sp.ja)(iu),Aa._OrtCreateRunOptions=(iu,ou,lu,yu)=>(Aa._OrtCreateRunOptions=Sp.ka)(iu,ou,lu,yu),Aa._OrtAddRunConfigEntry=(iu,ou,lu)=>(Aa._OrtAddRunConfigEntry=Sp.la)(iu,ou,lu),Aa._OrtReleaseRunOptions=iu=>(Aa._OrtReleaseRunOptions=Sp.ma)(iu),Aa._OrtCreateBinding=iu=>(Aa._OrtCreateBinding=Sp.na)(iu),Aa._OrtBindInput=(iu,ou,lu)=>(Aa._OrtBindInput=Sp.oa)(iu,ou,lu),Aa._OrtBindOutput=(iu,ou,lu,yu)=>(Aa._OrtBindOutput=Sp.pa)(iu,ou,lu,yu),Aa._OrtClearBoundOutputs=iu=>(Aa._OrtClearBoundOutputs=Sp.qa)(iu),Aa._OrtReleaseBinding=iu=>(Aa._OrtReleaseBinding=Sp.ra)(iu),Aa._OrtRunWithBinding=(iu,ou,lu,yu,Eu)=>(Aa._OrtRunWithBinding=Sp.sa)(iu,ou,lu,yu,Eu),Aa._OrtRun=(iu,ou,lu,yu,Eu,Su,oh,Cd)=>(Aa._OrtRun=Sp.ta)(iu,ou,lu,yu,Eu,Su,oh,Cd),Aa._OrtEndProfiling=iu=>(Aa._OrtEndProfiling=Sp.ua)(iu);var t0=()=>(t0=Sp.va)(),$g=Aa._pthread_self=()=>($g=Aa._pthread_self=Sp.wa)(),r0=Aa._malloc=iu=>(r0=Aa._malloc=Sp.xa)(iu);Aa._free=iu=>(Aa._free=Sp.ya)(iu),Aa.__emscripten_tls_init=()=>(Aa.__emscripten_tls_init=Sp.za)();var n0=Aa.__emscripten_thread_init=(iu,ou,lu,yu,Eu,Su)=>(n0=Aa.__emscripten_thread_init=Sp.Ba)(iu,ou,lu,yu,Eu,Su);Aa.__emscripten_thread_crashed=()=>(Aa.__emscripten_thread_crashed=Sp.Ca)();var i0=(iu,ou,lu,yu)=>(i0=Sp.Da)(iu,ou,lu,yu),Dg=iu=>(Dg=Sp.Ea)(iu),Fg=Aa.__emscripten_thread_exit=iu=>(Fg=Aa.__emscripten_thread_exit=Sp.Fa)(iu),o0=()=>(o0=Sp.Ga)(),s0=iu=>(s0=Sp.Ha)(iu),a0=(iu,ou)=>(a0=Sp.Ia)(iu,ou),Ng=()=>(Ng=Sp.Ja)(),wg=iu=>(wg=Sp.Ka)(iu),kg=iu=>(kg=Sp.La)(iu);function w0(){var iu=Sp;iu=Object.assign({},iu);var ou=yu=>()=>yu()>>>0,lu=yu=>Eu=>yu(Eu)>>>0;return iu.va=ou(iu.va),iu.wa=ou(iu.wa),iu.xa=lu(iu.xa),iu.emscripten_main_runtime_thread_id=ou(iu.emscripten_main_runtime_thread_id),iu.Ja=ou(iu.Ja),iu.La=lu(iu.La),iu}Aa.wasmMemory=Nd,Aa.stackAlloc=kg,Aa.stackSave=Ng,Aa.stackRestore=wg,Aa.keepRuntimeAlive=()=>0<O1,Aa.UTF8ToString=D1,Aa.stringToUTF8=Gd,Aa.lengthBytesUTF8=Bd,Aa.ExitStatus=I1,Aa.PThread=Ip;var vg;u1=function iu(){vg||u0(),vg||(u1=iu)};function u0(){if(!(0<kd))if(mu)ka(Aa),mu||R1(a1),startWorker(Aa);else{if(Aa.preRun)for(typeof Aa.preRun=="function"&&(Aa.preRun=[Aa.preRun]);Aa.preRun.length;)f1.unshift(Aa.preRun.shift());R1(f1),0<kd||vg||(vg=!0,Aa.calledRun=!0,t1||(mu||R1(a1),ka(Aa),mu||R1(zd)))}}return u0(),Sa.ready}})();typeof oa=="object"&&typeof ba=="object"?ba.exports=wa:typeof define=="function"&&define.amd&&define([],()=>wa)}),kp=me((oa,ba)=>{ba.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'}),Np,ig,aa,sa,Po,Bp,ag,sg,ug,Rp,Ee,zr=L(()=>{Np=Ap(),ig=Cp(),sa=!1,Po=!1,Bp=!1,ag=oa=>{if(oa===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+oa+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+oa+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},ug=(oa,ba)=>oa?ba?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":ba?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Rp=async oa=>{if(sa)return Promise.resolve();if(Po)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Bp)throw new Error("previous call to 'initializeWebAssembly()' failed.");Po=!0;let ba=oa.initTimeout,wa=oa.numThreads,xa=oa.simd,Sa=ag(wa),va=xa&&sg(),Ea=oa.wasmPaths,La=typeof Ea=="string"?Ea:void 0,eu=ug(va,Sa),Ta=typeof Ea=="object"?Ea[eu]:void 0,Aa=!1,ka=[];if(ba>0&&ka.push(new Promise(ru=>{setTimeout(()=>{Aa=!0,ru()},ba)})),ka.push(new Promise((ru,nu)=>{let su=Sa?ig:Np,uu={locateFile:(cu,gu)=>Sa&&cu.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([kp()],{type:"text/javascript"})):cu.endsWith(".wasm")?Ta||(La??gu)+eu:gu+cu};if(Sa)if(uu.numThreads=wa,typeof Blob>"u")uu.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let cu=`var ortWasmThreaded=${su.toString()};`;uu.mainScriptUrlOrBlob=new Blob([cu],{type:"text/javascript"})}su(uu).then(cu=>{Po=!1,sa=!0,aa=cu,ru()},cu=>{Po=!1,Bp=!0,nu(cu)})})),await Promise.race(ka),Aa)throw new Error(`WebAssembly backend initializing failed due to timeout: ${ba}ms`)},Ee=()=>{if(sa&&aa)return aa;throw new Error("WebAssembly is not initialized yet.")}}),De,bn,Oe,Eo=L(()=>{zr(),De=(oa,ba)=>{let wa=Ee(),xa=wa.lengthBytesUTF8(oa)+1,Sa=wa._malloc(xa);return wa.stringToUTF8(oa,Sa,xa),ba.push(Sa),Sa},bn=(oa,ba,wa,xa)=>{if(typeof oa=="object"&&oa!==null){if(wa.has(oa))throw new Error("Circular reference in options");wa.add(oa)}Object.entries(oa).forEach(([Sa,va])=>{let Ea=ba?ba+Sa:Sa;if(typeof va=="object")bn(va,Ea+".",wa,xa);else if(typeof va=="string"||typeof va=="number")xa(Ea,va.toString());else if(typeof va=="boolean")xa(Ea,va?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof va}`)})},Oe=oa=>{let ba=Ee(),wa=ba.stackSave();try{let xa=ba.stackAlloc(8);ba._OrtGetLastError(xa,xa+4);let Sa=ba.HEAP32[xa/4],va=ba.HEAPU32[xa/4+1],Ea=va?ba.UTF8ToString(va):"";throw new Error(`${oa} ERROR_CODE: ${Sa}, ERROR_MESSAGE: ${Ea}`)}finally{ba.stackRestore(wa)}}}),Mp,Gp=L(()=>{zr(),Eo(),Mp=oa=>{let ba=Ee(),wa=0,xa=[],Sa=oa||{};try{if((oa==null?void 0:oa.logSeverityLevel)===void 0)Sa.logSeverityLevel=2;else if(typeof oa.logSeverityLevel!="number"||!Number.isInteger(oa.logSeverityLevel)||oa.logSeverityLevel<0||oa.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${oa.logSeverityLevel}`);if((oa==null?void 0:oa.logVerbosityLevel)===void 0)Sa.logVerbosityLevel=0;else if(typeof oa.logVerbosityLevel!="number"||!Number.isInteger(oa.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${oa.logVerbosityLevel}`);(oa==null?void 0:oa.terminate)===void 0&&(Sa.terminate=!1);let va=0;return(oa==null?void 0:oa.tag)!==void 0&&(va=De(oa.tag,xa)),wa=ba._OrtCreateRunOptions(Sa.logSeverityLevel,Sa.logVerbosityLevel,!!Sa.terminate,va),wa===0&&Oe("Can't create run options."),(oa==null?void 0:oa.extra)!==void 0&&bn(oa.extra,"",new WeakSet,(Ea,La)=>{let eu=De(Ea,xa),Ta=De(La,xa);ba._OrtAddRunConfigEntry(wa,eu,Ta)!==0&&Oe(`Can't set a run config entry: ${Ea} - ${La}.`)}),[wa,xa]}catch(va){throw wa!==0&&ba._OrtReleaseRunOptions(wa),xa.forEach(Ea=>ba._free(Ea)),va}}}),lg,fg,cg,pg,Up,zp=L(()=>{zr(),Eo(),lg=oa=>{switch(oa){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${oa}`)}},fg=oa=>{switch(oa){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${oa}`)}},cg=oa=>{oa.extra||(oa.extra={}),oa.extra.session||(oa.extra.session={});let ba=oa.extra.session;ba.use_ort_model_bytes_directly||(ba.use_ort_model_bytes_directly="1"),oa.executionProviders&&oa.executionProviders.some(wa=>(typeof wa=="string"?wa:wa.name)==="webgpu")&&(oa.enableMemPattern=!1)},pg=(oa,ba,wa)=>{for(let xa of ba){let Sa=typeof xa=="string"?xa:xa.name;switch(Sa){case"webnn":if(Sa="WEBNN",typeof xa!="string"){let Ea=xa;if(Ea!=null&&Ea.deviceType){let La=De("deviceType",wa),eu=De(Ea.deviceType,wa);Ee()._OrtAddSessionConfigEntry(oa,La,eu)!==0&&Oe(`Can't set a session config entry: 'deviceType' - ${Ea.deviceType}.`)}if(Ea!=null&&Ea.numThreads){let La=Ea.numThreads;(typeof La!="number"||!Number.isInteger(La)||La<0)&&(La=0);let eu=De("numThreads",wa),Ta=De(La.toString(),wa);Ee()._OrtAddSessionConfigEntry(oa,eu,Ta)!==0&&Oe(`Can't set a session config entry: 'numThreads' - ${Ea.numThreads}.`)}if(Ea!=null&&Ea.powerPreference){let La=De("powerPreference",wa),eu=De(Ea.powerPreference,wa);Ee()._OrtAddSessionConfigEntry(oa,La,eu)!==0&&Oe(`Can't set a session config entry: 'powerPreference' - ${Ea.powerPreference}.`)}}break;case"webgpu":if(Sa="JS",typeof xa!="string"){let Ea=xa;if(Ea!=null&&Ea.preferredLayout){if(Ea.preferredLayout!=="NCHW"&&Ea.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${Ea.preferredLayout}`);let La=De("preferredLayout",wa),eu=De(Ea.preferredLayout,wa);Ee()._OrtAddSessionConfigEntry(oa,La,eu)!==0&&Oe(`Can't set a session config entry: 'preferredLayout' - ${Ea.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${Sa}`)}let va=De(Sa,wa);Ee()._OrtAppendExecutionProvider(oa,va)!==0&&Oe(`Can't append execution provider: ${Sa}.`)}},Up=oa=>{let ba=Ee(),wa=0,xa=[],Sa=oa||{};cg(Sa);try{let va=lg(Sa.graphOptimizationLevel??"all"),Ea=fg(Sa.executionMode??"sequential"),La=typeof Sa.logId=="string"?De(Sa.logId,xa):0,eu=Sa.logSeverityLevel??2;if(!Number.isInteger(eu)||eu<0||eu>4)throw new Error(`log serverity level is not valid: ${eu}`);let Ta=Sa.logVerbosityLevel??0;if(!Number.isInteger(Ta)||Ta<0||Ta>4)throw new Error(`log verbosity level is not valid: ${Ta}`);let Aa=typeof Sa.optimizedModelFilePath=="string"?De(Sa.optimizedModelFilePath,xa):0;if(wa=ba._OrtCreateSessionOptions(va,!!Sa.enableCpuMemArena,!!Sa.enableMemPattern,Ea,!!Sa.enableProfiling,0,La,eu,Ta,Aa),wa===0&&Oe("Can't create session options."),Sa.executionProviders&&pg(wa,Sa.executionProviders,xa),Sa.freeDimensionOverrides)for(let[ka,ru]of Object.entries(Sa.freeDimensionOverrides)){if(typeof ka!="string")throw new Error(`free dimension override name must be a string: ${ka}`);if(typeof ru!="number"||!Number.isInteger(ru)||ru<0)throw new Error(`free dimension override value must be a non-negative integer: ${ru}`);let nu=De(ka,xa);ba._OrtAddFreeDimensionOverride(wa,nu,ru)!==0&&Oe(`Can't set a free dimension override: ${ka} - ${ru}.`)}return Sa.extra!==void 0&&bn(Sa.extra,"",new WeakSet,(ka,ru)=>{let nu=De(ka,xa),su=De(ru,xa);ba._OrtAddSessionConfigEntry(wa,nu,su)!==0&&Oe(`Can't set a session config entry: ${ka} - ${ru}.`)}),[wa,xa]}catch(va){throw wa!==0&&ba._OrtReleaseSessionOptions(wa),xa.forEach(Ea=>ba._free(Ea)),va}}}),ua,Vp,la,Wp,Hp,Do,qp,fa=L(()=>{ua=oa=>{switch(oa){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${oa}`)}},Vp=oa=>{switch(oa){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${oa}`)}},la=oa=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][oa],Wp=oa=>{switch(oa){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${oa}`)}},Hp=oa=>{switch(oa){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${oa}`)}},Do=oa=>oa==="float32"||oa==="int32"||oa==="int64"||oa==="bool"||oa==="float16"||oa==="uint32",qp=oa=>{switch(oa){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${oa}`)}}}),gn,ca=L(()=>{gn=async oa=>{if(typeof oa=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(oa))}catch(ba){if(ba.code==="ERR_FS_FILE_TOO_LARGE"){let wa=(void 0)(oa),xa=[];for await(let Sa of wa)xa.push(Sa);return new Uint8Array(Buffer.concat(xa))}throw ba}else{let ba=await fetch(oa);if(!ba.ok)throw new Error(`failed to load external data file: ${oa}`);let wa=ba.headers.get("Content-Length"),xa=wa?parseInt(wa,10):0;if(xa<1073741824)return new Uint8Array(await ba.arrayBuffer());{if(!ba.body)throw new Error(`failed to load external data file: ${oa}, no response body.`);let Sa=ba.body.getReader(),va;try{va=new ArrayBuffer(xa)}catch(La){if(La instanceof RangeError){let eu=Math.ceil(xa/65536);va=new WebAssembly.Memory({initial:eu,maximum:eu}).buffer}else throw La}let Ea=0;for(;;){let{done:La,value:eu}=await Sa.read();if(La)break;let Ta=eu.byteLength;new Uint8Array(va,Ea,Ta).set(eu),Ea+=Ta}return new Uint8Array(va,0,xa)}}else return oa instanceof Blob?new Uint8Array(await oa.arrayBuffer()):oa instanceof Uint8Array?oa:new Uint8Array(oa)}}),dg,Yp,Xp,yn,hg,pa,Kp,Jp,jp,Zp,Qp,ed,td=L(()=>{Gp(),zp(),fa(),zr(),Eo(),ca(),dg=(oa,ba)=>{Ee()._OrtInit(oa,ba)!==0&&Oe("Can't initialize onnxruntime.")},Yp=async oa=>{dg(oa.wasm.numThreads,Hp(oa.logLevel))},Xp=async(oa,ba)=>{},yn=new Map,hg=oa=>{let ba=Ee(),wa=ba.stackSave();try{let xa=ba.stackAlloc(8);return ba._OrtGetInputOutputCount(oa,xa,xa+4)!==0&&Oe("Can't get session input/output count."),[ba.HEAP32[xa/4],ba.HEAP32[xa/4+1]]}finally{ba.stackRestore(wa)}},pa=oa=>{let ba=Ee(),wa=ba._malloc(oa.byteLength);if(wa===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${oa.byteLength}.`);return ba.HEAPU8.set(oa,wa),[wa,oa.byteLength]},Kp=async(oa,ba)=>{var Aa;let wa,xa,Sa=Ee();Array.isArray(oa)?[wa,xa]=oa:oa.buffer===Sa.HEAPU8.buffer?[wa,xa]=[oa.byteOffset,oa.byteLength]:[wa,xa]=pa(oa);let va=0,Ea=0,La=[],eu=[],Ta=[];try{if([Ea,La]=Up(ba),(ba==null?void 0:ba.externalData)&&Sa.mountExternalData){let gu=[];for(let hu of ba.externalData){let mu=typeof hu=="string"?hu:hu.path;gu.push(gn(typeof hu=="string"?hu:hu.data).then(Ou=>{Sa.mountExternalData(mu,Ou)}))}await Promise.all(gu)}va=Sa._OrtCreateSession(wa,xa,Ea),va===0&&Oe("Can't create a session.");let[ka,ru]=hg(va),nu=[],su=[],uu=[];for(let gu=0;gu<ka;gu++){let hu=Sa._OrtGetInputName(va,gu);hu===0&&Oe("Can't get an input name."),eu.push(hu),nu.push(Sa.UTF8ToString(hu))}for(let gu=0;gu<ru;gu++){let hu=Sa._OrtGetOutputName(va,gu);hu===0&&Oe("Can't get an output name."),Ta.push(hu);let mu=Sa.UTF8ToString(hu);su.push(mu)}return yn.set(va,[va,eu,Ta,null]),[va,nu,su]}catch(ka){throw eu.forEach(ru=>Sa._OrtFree(ru)),Ta.forEach(ru=>Sa._OrtFree(ru)),va!==0&&Sa._OrtReleaseSession(va),ka}finally{Sa._free(wa),Ea!==0&&Sa._OrtReleaseSessionOptions(Ea),La.forEach(ka=>Sa._free(ka)),(Aa=Sa.unmountExternalData)==null||Aa.call(Sa)}},Jp=oa=>{var La;let ba=Ee(),wa=yn.get(oa);if(!wa)throw new Error(`cannot release session. invalid session id: ${oa}`);let[xa,Sa,va,Ea]=wa;Ea&&ba._OrtReleaseBinding(Ea.handle),(La=ba.jsepUnregisterBuffers)==null||La.call(ba,oa),Sa.forEach(eu=>ba._OrtFree(eu)),va.forEach(eu=>ba._OrtFree(eu)),ba._OrtReleaseSession(xa),yn.delete(oa)},jp=(oa,ba,wa,xa,Sa)=>{if(!oa){ba.push(0);return}let va=Ee(),Ea=oa[0],La=oa[1],eu=oa[3],Ta,Aa;if(Ea==="string"&&eu==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(eu==="gpu-buffer"){let nu=oa[2].gpuBuffer,su=la(ua(Ea));Aa=La.reduce((uu,cu)=>uu*cu,1)*su,Ta=va.jsepRegisterBuffer(xa,Sa,nu,Aa)}else{let nu=oa[2];if(Array.isArray(nu)){Aa=4*nu.length,Ta=va._malloc(Aa),wa.push(Ta);let su=Ta/4;for(let uu=0;uu<nu.length;uu++){if(typeof nu[uu]!="string")throw new TypeError(`tensor data at index ${uu} is not a string`);va.HEAPU32[su++]=De(nu[uu],wa)}}else Aa=nu.byteLength,Ta=va._malloc(Aa),wa.push(Ta),va.HEAPU8.set(new Uint8Array(nu.buffer,nu.byteOffset,Aa),Ta)}let ka=va.stackSave(),ru=va.stackAlloc(4*La.length);try{let nu=ru/4;La.forEach(uu=>va.HEAP32[nu++]=uu);let su=va._OrtCreateTensor(ua(Ea),Ta,Aa,ru,La.length,qp(eu));su===0&&Oe(`Can't create tensor for input/output. session=${xa}, index=${Sa}.`),ba.push(su)}finally{va.stackRestore(ka)}},Zp=async(oa,ba,wa,xa,Sa,va)=>{let Ea=Ee(),La=yn.get(oa);if(!La)throw new Error(`cannot run inference. invalid session id: ${oa}`);let[eu,Ta,Aa,ka]=La,ru=ba.length,nu=xa.length,su=0,uu=[],cu=[],gu=[],hu=[],mu=Ea.stackSave(),Ou=Ea.stackAlloc(ru*4),uh=Ea.stackAlloc(ru*4),bd=Ea.stackAlloc(nu*4),Fd=Ea.stackAlloc(nu*4);try{[su,uu]=Mp(va);for(let Fp=0;Fp<ru;Fp++)jp(wa[Fp],cu,hu,oa,ba[Fp]);for(let Fp=0;Fp<nu;Fp++)jp(Sa[Fp],gu,hu,oa,ru+xa[Fp]);let _h=Ou/4,Lu=uh/4,Td=bd/4,S1=Fd/4;for(let Fp=0;Fp<ru;Fp++)Ea.HEAPU32[_h++]=cu[Fp],Ea.HEAPU32[Lu++]=Ta[ba[Fp]];for(let Fp=0;Fp<nu;Fp++)Ea.HEAPU32[Td++]=gu[Fp],Ea.HEAPU32[S1++]=Aa[xa[Fp]];let $1;$1=await Ea._OrtRun(eu,uh,Ou,ru,Fd,nu,bd,su),$1!==0&&Oe("failed to call OrtRun().");let l1=[];for(let Fp=0;Fp<nu;Fp++){let Nd=Ea.HEAPU32[bd/4+Fp];if(Nd===gu[Fp]){l1.push(Sa[Fp]);continue}let p1=Ea.stackSave(),t1=Ea.stackAlloc(16),o1=!1,Md,r1=0;try{Ea._OrtGetTensorData(Nd,t1,t1+4,t1+8,t1+12)!==0&&Oe(`Can't access output tensor data on index ${Fp}.`);let s1=t1/4,w1=Ea.HEAPU32[s1++];r1=Ea.HEAPU32[s1++];let v1=Ea.HEAPU32[s1++],c1=Ea.HEAPU32[s1++],h1=[];for(let zd=0;zd<c1;zd++)h1.push(Ea.HEAPU32[v1/4+zd]);Ea._OrtFree(v1);let f1=h1.reduce((zd,kd)=>zd*kd,1);Md=Vp(w1);let a1=ka==null?void 0:ka.outputPreferredLocations[xa[Fp]];if(Md==="string"){if(a1==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let zd=[],kd=r1/4;for(let u1=0;u1<f1;u1++){let _1=Ea.HEAPU32[kd++],T1=u1===f1-1?void 0:Ea.HEAPU32[kd]-_1;zd.push(Ea.UTF8ToString(_1,T1))}l1.push([Md,h1,zd,"cpu"])}else if(a1==="gpu-buffer"&&f1>0){let zd=Ea.jsepGetBuffer(r1),kd=la(w1);if(kd===void 0||!Do(Md))throw new Error(`Unsupported data type: ${Md}`);o1=!0,l1.push([Md,h1,{gpuBuffer:zd,download:Ea.jsepCreateDownloader(zd,f1*kd,Md),dispose:()=>{Ea._OrtReleaseTensor(Nd)}},"gpu-buffer"])}else{let zd=Wp(Md),kd=new zd(f1);new Uint8Array(kd.buffer,kd.byteOffset,kd.byteLength).set(Ea.HEAPU8.subarray(r1,r1+kd.byteLength)),l1.push([Md,h1,kd,"cpu"])}}finally{Ea.stackRestore(p1),Md==="string"&&r1&&Ea._free(r1),o1||Ea._OrtReleaseTensor(Nd)}}return ka&&Ea._OrtClearBoundOutputs(ka.handle),l1}finally{Ea.stackRestore(mu),cu.forEach(_h=>Ea._OrtReleaseTensor(_h)),gu.forEach(_h=>Ea._OrtReleaseTensor(_h)),hu.forEach(_h=>Ea._free(_h)),su!==0&&Ea._OrtReleaseRunOptions(su),uu.forEach(_h=>Ea._free(_h))}},Qp=oa=>{let ba=Ee(),wa=yn.get(oa);if(!wa)throw new Error("invalid session id");let xa=wa[0],Sa=ba._OrtEndProfiling(xa);Sa===0&&Oe("Can't get an profile file name."),ba._OrtFree(Sa)},ed=oa=>{let ba=[];for(let wa of oa){let xa=wa[2];!Array.isArray(xa)&&"buffer"in xa&&ba.push(xa.buffer)}return ba}}),rd=me((oa,ba)=>{ba.exports='/*!\n * ONNX Runtime Web v1.17.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Et=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var St=(u,d)=>()=>(u&&(d=u(u=0)),d);var et=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Tt=(u,d)=>{for(var a in d)Et(u,a,{get:d[a],enumerable:!0})},Zr=(u,d,a,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let l of Xr(d))!Qr.call(u,l)&&l!==a&&Et(u,l,{get:()=>d[l],enumerable:!(h=Jr(d,l))||h.enumerable});return u};var tt=u=>Zr(Et({},"__esModule",{value:!0}),u);var At={};Tt(At,{createReadStream:()=>dr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,dr,Mt=St(()=>{Kr=void 0,en=void 0,dr=void 0});var Ct={};Tt(Ct,{join:()=>tn});var tn,Dt=St(()=>{tn=void 0});var gr=et((mr,xt)=>{"use strict";var pr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){var a=d,h,l;a.ready=new Promise((r,o)=>{h=r,l=o});var w=Object.assign({},a),g="./this.program",i=typeof window=="object",A=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I="",B,F,U;if(D){var k=(Mt(),tt(At)),L=(Dt(),tt(Ct));I=A?L.dirname(I)+"/":__dirname+"/",B=(r,o)=>(r=ye(r)?new URL(r):L.normalize(r),k.readFileSync(r,o?void 0:"utf8")),U=r=>(r=B(r,!0),r.buffer||(r=new Uint8Array(r)),r),F=(r,o,s,m=!0)=>{r=ye(r)?new URL(r):L.normalize(r),k.readFile(r,m?void 0:"utf8",(O,S)=>{O?s(O):o(m?S.buffer:S)})},!a.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(i||A)&&(A?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),u&&(I=u),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",B=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},A&&(U=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),F=(r,o,s)=>{var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):s()},m.onerror=s,m.send(null)});var _=console.log.bind(console),x=console.error.bind(console);Object.assign(a,w),w=null,typeof WebAssembly!="object"&&de("no native wasm support detected");var N,he=!1,ie,ae,E,Y,ue;function Re(){var r=N.buffer;a.HEAP8=ie=new Int8Array(r),a.HEAP16=new Int16Array(r),a.HEAPU8=ae=new Uint8Array(r),a.HEAPU16=new Uint16Array(r),a.HEAP32=E=new Int32Array(r),a.HEAPU32=Y=new Uint32Array(r),a.HEAPF32=new Float32Array(r),a.HEAPF64=ue=new Float64Array(r)}var Ie=[],ee=[],j=[],ce=0,P=null,te=null;function de(r){throw r="Aborted("+r+")",x(r),he=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),l(r),r}var ge=r=>r.startsWith("data:application/octet-stream;base64,"),ye=r=>r.startsWith("file://"),J;if(J="ort-wasm.wasm",!ge(J)){var fe=J;J=a.locateFile?a.locateFile(fe,I):I+fe}function we(r){if(U)return U(r);throw"both async and sync fetching of the wasm failed"}function Ae(r){if(i||A){if(typeof fetch=="function"&&!ye(r))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+r+"\'";return o.arrayBuffer()}).catch(()=>we(r));if(F)return new Promise((o,s)=>{F(r,m=>o(new Uint8Array(m)),s)})}return Promise.resolve().then(()=>we(r))}function Me(r,o,s){return Ae(r).then(m=>WebAssembly.instantiate(m,o)).then(m=>m).then(s,m=>{x(`failed to asynchronously prepare wasm: ${m}`),de(m)})}function Fe(r,o){var s=J;return typeof WebAssembly.instantiateStreaming!="function"||ge(s)||ye(s)||D||typeof fetch!="function"?Me(s,r,o):fetch(s,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,r).then(o,function(O){return x(`wasm streaming compile failed: ${O}`),x("falling back to ArrayBuffer instantiation"),Me(s,r,o)}))}var Ee,pe={919248:(r,o,s,m)=>{if(typeof a>"u"||!a.za)return 1;if(r=be(r>>>0),r.startsWith("./")&&(r=r.substring(2)),r=a.za.get(r),!r)return 2;if(o>>>=0,s>>>=0,o+s>r.byteLength)return 3;try{return ae.set(r.subarray(o,o+s),m>>>0>>>0),0}catch{return 4}}};function Oe(r){this.xa=r-24,this.Ha=function(o){Y[this.xa+4>>>2>>>0]=o},this.Ga=function(o){Y[this.xa+8>>>2>>>0]=o},this.Aa=function(o,s){this.Fa(),this.Ha(o),this.Ga(s)},this.Fa=function(){Y[this.xa+16>>>2>>>0]=0}}var ve=0,re=0,Z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ce=(r,o,s)=>{o>>>=0;var m=o+s;for(s=o;r[s]&&!(s>=m);)++s;if(16<s-o&&r.buffer&&Z)return Z.decode(r.subarray(o,s));for(m="";o<s;){var O=r[o++];if(O&128){var S=r[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|S);else{var R=r[o++]&63;O=(O&240)==224?(O&15)<<12|S<<6|R:(O&7)<<18|S<<12|R<<6|r[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},be=(r,o)=>(r>>>=0)?Ce(ae,r,o):"",_e=r=>{for(var o=0,s=0;s<r.length;++s){var m=r.charCodeAt(s);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++s):o+=3}return o},ke=(r,o,s,m)=>{if(s>>>=0,!(0<m))return 0;var O=s;m=s+m-1;for(var S=0;S<r.length;++S){var R=r.charCodeAt(S);if(55296<=R&&57343>=R){var K=r.charCodeAt(++S);R=65536+((R&1023)<<10)|K&1023}if(127>=R){if(s>=m)break;o[s++>>>0]=R}else{if(2047>=R){if(s+1>=m)break;o[s++>>>0]=192|R>>6}else{if(65535>=R){if(s+2>=m)break;o[s++>>>0]=224|R>>12}else{if(s+3>=m)break;o[s++>>>0]=240|R>>18,o[s++>>>0]=128|R>>12&63}o[s++>>>0]=128|R>>6&63}o[s++>>>0]=128|R&63}}return o[s>>>0]=0,s-O},Ue=r=>r%4===0&&(r%100!==0||r%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],De=r=>{var o=_e(r)+1,s=st(o);return s&&ke(r,ae,s,o),s},Ne=[],Pe={},He=()=>{if(!$e){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Pe)Pe[o]===void 0?delete r[o]:r[o]=Pe[o];var s=[];for(o in r)s.push(`${o}=${r[o]}`);$e=s}return $e},$e,Le=[null,[],[]],qe=[31,29,31,30,31,30,31,31,30,31,30,31],Ve=[31,28,31,30,31,30,31,31,30,31,30,31];function Ge(r){var o=Array(_e(r)+1);return ke(r,o,0,o.length),o}function ot(r,o,s,m){function O(c,W,G){for(c=typeof c=="number"?c.toString():c||"";c.length<W;)c=G[0]+c;return c}function S(c,W){return O(c,W,"0")}function R(c,W){function G(Ke){return 0>Ke?-1:0<Ke?1:0}var Se;return(Se=G(c.getFullYear()-W.getFullYear()))===0&&(Se=G(c.getMonth()-W.getMonth()))===0&&(Se=G(c.getDate()-W.getDate())),Se}function K(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function le(c){var W=c.ta;for(c=new Date(new Date(c.ua+1900,0,1).getTime());0<W;){var G=c.getMonth(),Se=(Ue(c.getFullYear())?qe:Ve)[G];if(W>Se-c.getDate())W-=Se-c.getDate()+1,c.setDate(1),11>G?c.setMonth(G+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else{c.setDate(c.getDate()+W);break}}return G=new Date(c.getFullYear()+1,0,4),W=K(new Date(c.getFullYear(),0,4)),G=K(G),0>=R(W,c)?0>=R(G,c)?c.getFullYear()+1:c.getFullYear():c.getFullYear()-1}r>>>=0,o>>>=0,s>>>=0,m>>>=0;var oe=Y[m+40>>>2>>>0];m={Da:E[m>>>2>>>0],Ca:E[m+4>>>2>>>0],va:E[m+8>>>2>>>0],ya:E[m+12>>>2>>>0],wa:E[m+16>>>2>>>0],ua:E[m+20>>>2>>>0],oa:E[m+24>>>2>>>0],ta:E[m+28>>>2>>>0],Ia:E[m+32>>>2>>>0],Ba:E[m+36>>>2>>>0],Ea:oe?be(oe):""},s=be(s),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)s=s.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ze="January February March April May June July August September October November December".split(" ");oe={"%a":c=>Qe[c.oa].substring(0,3),"%A":c=>Qe[c.oa],"%b":c=>Ze[c.wa].substring(0,3),"%B":c=>Ze[c.wa],"%C":c=>S((c.ua+1900)/100|0,2),"%d":c=>S(c.ya,2),"%e":c=>O(c.ya,2," "),"%g":c=>le(c).toString().substring(2),"%G":c=>le(c),"%H":c=>S(c.va,2),"%I":c=>(c=c.va,c==0?c=12:12<c&&(c-=12),S(c,2)),"%j":c=>{for(var W=0,G=0;G<=c.wa-1;W+=(Ue(c.ua+1900)?qe:Ve)[G++]);return S(c.ya+W,3)},"%m":c=>S(c.wa+1,2),"%M":c=>S(c.Ca,2),"%n":()=>`\n`,"%p":c=>0<=c.va&&12>c.va?"AM":"PM","%S":c=>S(c.Da,2),"%t":()=>"	","%u":c=>c.oa||7,"%U":c=>S(Math.floor((c.ta+7-c.oa)/7),2),"%V":c=>{var W=Math.floor((c.ta+7-(c.oa+6)%7)/7);if(2>=(c.oa+371-c.ta-2)%7&&W++,W)W==53&&(G=(c.oa+371-c.ta)%7,G==4||G==3&&Ue(c.ua)||(W=1));else{W=52;var G=(c.oa+7-c.ta-1)%7;(G==4||G==5&&Ue(c.ua%400-1))&&W++}return S(W,2)},"%w":c=>c.oa,"%W":c=>S(Math.floor((c.ta+7-(c.oa+6)%7)/7),2),"%y":c=>(c.ua+1900).toString().substring(2),"%Y":c=>c.ua+1900,"%z":c=>{c=c.Ba;var W=0<=c;return c=Math.abs(c)/60,(W?"+":"-")+("0000"+(c/60*100+c%60)).slice(-4)},"%Z":c=>c.Ea,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(se in oe)s.includes(se)&&(s=s.replace(new RegExp(se,"g"),oe[se](m)));return s=s.replace(/\\0\\0/g,"%"),se=Ge(s),se.length>o?0:(ie.set(se,r>>>0),se.length-1)}var $={a:function(r,o,s){throw r>>>=0,new Oe(r).Aa(o>>>0,s>>>0),ve=r,re++,ve},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getUTCSeconds(),E[s+4>>>2>>>0]=r.getUTCMinutes(),E[s+8>>>2>>>0]=r.getUTCHours(),E[s+12>>>2>>>0]=r.getUTCDate(),E[s+16>>>2>>>0]=r.getUTCMonth(),E[s+20>>>2>>>0]=r.getUTCFullYear()-1900,E[s+24>>>2>>>0]=r.getUTCDay(),E[s+28>>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getSeconds(),E[s+4>>>2>>>0]=r.getMinutes(),E[s+8>>>2>>>0]=r.getHours(),E[s+12>>>2>>>0]=r.getDate(),E[s+16>>>2>>>0]=r.getMonth(),E[s+20>>>2>>>0]=r.getFullYear()-1900,E[s+24>>>2>>>0]=r.getDay(),E[s+28>>>2>>>0]=(Ue(r.getFullYear())?ze:at)[r.getMonth()]+r.getDate()-1|0,E[s+36>>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var m=new Date(r.getFullYear(),0,1).getTimezoneOffset();E[s+32>>>2>>>0]=(o!=m&&r.getTimezoneOffset()==Math.min(m,o))|0},p:function(r){r>>>=0;var o=new Date(E[r+20>>>2>>>0]+1900,E[r+16>>>2>>>0],E[r+12>>>2>>>0],E[r+8>>>2>>>0],E[r+4>>>2>>>0],E[r>>>2>>>0],0),s=E[r+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),R=Math.min(S,O);return 0>s?E[r+32>>>2>>>0]=+(O!=S&&R==m):0<s!=(R==m)&&(O=Math.max(S,O),o.setTime(o.getTime()+6e4*((0<s?R:O)-m))),E[r+24>>>2>>>0]=o.getDay(),E[r+28>>>2>>>0]=(Ue(o.getFullYear())?ze:at)[o.getMonth()]+o.getDate()-1|0,E[r>>>2>>>0]=o.getSeconds(),E[r+4>>>2>>>0]=o.getMinutes(),E[r+8>>>2>>>0]=o.getHours(),E[r+12>>>2>>>0]=o.getDate(),E[r+16>>>2>>>0]=o.getMonth(),E[r+20>>>2>>>0]=o.getYear(),r=o.getTime(),isNaN(r)?(E[Ye()>>>2>>>0]=61,r=-1):r/=1e3,Je((Ee=r,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)),r>>>0},l:function(){return-52},m:function(){},t:function(r,o,s){function m(le){return(le=le.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?le[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),S=new Date(O,0,1),R=new Date(O,6,1);O=S.getTimezoneOffset();var K=R.getTimezoneOffset();Y[r>>>0>>>2>>>0]=60*Math.max(O,K),E[o>>>0>>>2>>>0]=+(O!=K),r=m(S),o=m(R),r=De(r),o=De(o),K<O?(Y[s>>>2>>>0]=r,Y[s+4>>>2>>>0]=o):(Y[s>>>2>>>0]=o,Y[s+4>>>2>>>0]=r)},d:()=>{de("")},B:function(r,o,s){r>>>=0,o>>>=0,s>>>=0,Ne.length=0;for(var m;m=ae[o++>>>0];){var O=m!=105;O&=m!=112,s+=O&&s%8?4:0,Ne.push(m==112?Y[s>>>2>>>0]:m==105?E[s>>>2>>>0]:ue[s>>>3>>>0]),s+=O?8:4}return pe[r].apply(null,Ne)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,s){return o>>>=0,ae.copyWithin(r>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(r){r>>>=0;var o=ae.length;if(4294901760<r)return!1;for(var s=1;4>=s;s*=2){var m=o*(1+.2/s);m=Math.min(m,r+100663296);var O=Math;m=Math.max(r,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-N.buffer.byteLength+65535)/65536;try{N.grow(O),Re();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var s=0;return He().forEach((m,O)=>{var S=o+s;for(O=Y[r+4*O>>>2>>>0]=S,S=0;S<m.length;++S)ie[O++>>>0>>>0]=m.charCodeAt(S);ie[O>>>0>>>0]=0,s+=m.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var s=He();Y[r>>>2>>>0]=s.length;var m=0;return s.forEach(O=>m+=O.length+1),Y[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(r,o,s,m){o>>>=0,s>>>=0,m>>>=0;for(var O=0,S=0;S<s;S++){var R=Y[o>>>2>>>0],K=Y[o+4>>>2>>>0];o+=8;for(var le=0;le<K;le++){var oe=ae[R+le>>>0],se=Le[r];oe===0||oe===10?((r===1?_:x)(Ce(se,0)),se.length=0):se.push(oe)}O+=K}return Y[m>>>2>>>0]=O,0},r:ot,c:function(r,o,s,m){return ot(r>>>0,o>>>0,s>>>0,m>>>0)}},C=function(){function r(s){return C=s.exports,C=ut(),N=C.K,Re(),ee.unshift(C.L),ce--,ce==0&&(P!==null&&(clearInterval(P),P=null),te&&(s=te,te=null,s())),C}var o={a:$};if(ce++,a.instantiateWasm)try{return a.instantiateWasm(o,r)}catch(s){x(`Module.instantiateWasm callback failed with error: ${s}`),l(s)}return Fe(o,function(s){r(s.instance)}).catch(l),{}}();a._OrtInit=(r,o)=>(a._OrtInit=C.M)(r,o),a._OrtGetLastError=(r,o)=>(a._OrtGetLastError=C.N)(r,o),a._OrtCreateSessionOptions=(r,o,s,m,O,S,R,K,le,oe)=>(a._OrtCreateSessionOptions=C.O)(r,o,s,m,O,S,R,K,le,oe),a._OrtAppendExecutionProvider=(r,o)=>(a._OrtAppendExecutionProvider=C.P)(r,o),a._OrtAddFreeDimensionOverride=(r,o,s)=>(a._OrtAddFreeDimensionOverride=C.Q)(r,o,s),a._OrtAddSessionConfigEntry=(r,o,s)=>(a._OrtAddSessionConfigEntry=C.R)(r,o,s),a._OrtReleaseSessionOptions=r=>(a._OrtReleaseSessionOptions=C.S)(r),a._OrtCreateSession=(r,o,s)=>(a._OrtCreateSession=C.T)(r,o,s),a._OrtReleaseSession=r=>(a._OrtReleaseSession=C.U)(r),a._OrtGetInputOutputCount=(r,o,s)=>(a._OrtGetInputOutputCount=C.V)(r,o,s),a._OrtGetInputName=(r,o)=>(a._OrtGetInputName=C.W)(r,o),a._OrtGetOutputName=(r,o)=>(a._OrtGetOutputName=C.X)(r,o),a._OrtFree=r=>(a._OrtFree=C.Y)(r),a._OrtCreateTensor=(r,o,s,m,O,S)=>(a._OrtCreateTensor=C.Z)(r,o,s,m,O,S),a._OrtGetTensorData=(r,o,s,m,O)=>(a._OrtGetTensorData=C._)(r,o,s,m,O),a._OrtReleaseTensor=r=>(a._OrtReleaseTensor=C.$)(r),a._OrtCreateRunOptions=(r,o,s,m)=>(a._OrtCreateRunOptions=C.aa)(r,o,s,m),a._OrtAddRunConfigEntry=(r,o,s)=>(a._OrtAddRunConfigEntry=C.ba)(r,o,s),a._OrtReleaseRunOptions=r=>(a._OrtReleaseRunOptions=C.ca)(r),a._OrtCreateBinding=r=>(a._OrtCreateBinding=C.da)(r),a._OrtBindInput=(r,o,s)=>(a._OrtBindInput=C.ea)(r,o,s),a._OrtBindOutput=(r,o,s,m)=>(a._OrtBindOutput=C.fa)(r,o,s,m),a._OrtClearBoundOutputs=r=>(a._OrtClearBoundOutputs=C.ga)(r),a._OrtReleaseBinding=r=>(a._OrtReleaseBinding=C.ha)(r),a._OrtRunWithBinding=(r,o,s,m,O)=>(a._OrtRunWithBinding=C.ia)(r,o,s,m,O),a._OrtRun=(r,o,s,m,O,S,R,K)=>(a._OrtRun=C.ja)(r,o,s,m,O,S,R,K),a._OrtEndProfiling=r=>(a._OrtEndProfiling=C.ka)(r);var Ye=()=>(Ye=C.la)(),st=a._malloc=r=>(st=a._malloc=C.ma)(r);a._free=r=>(a._free=C.na)(r);var Je=r=>(Je=C.pa)(r),it=()=>(it=C.qa)(),M=r=>(M=C.ra)(r),Be=r=>(Be=C.sa)(r);function ut(){var r=C;r=Object.assign({},r);var o=m=>()=>m()>>>0,s=m=>O=>m(O)>>>0;return r.la=o(r.la),r.ma=s(r.ma),r.qa=o(r.qa),r.sa=s(r.sa),r}a.stackAlloc=Be,a.stackSave=it,a.stackRestore=M,a.UTF8ToString=be,a.stringToUTF8=(r,o,s)=>ke(r,ae,o,s),a.lengthBytesUTF8=_e;var xe;te=function r(){xe||Xe(),xe||(te=r)};function Xe(){if(!(0<ce)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var r=a.preRun.shift();Ie.unshift(r)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<ce||xe||(xe=!0,a.calledRun=!0,he))){for(;0<ee.length;)ee.shift()(a);for(h(a);0<j.length;)j.shift()(a)}}}return Xe(),d.ready}})();typeof mr=="object"&&typeof xt=="object"?xt.exports=pr:typeof define=="function"&&define.amd&&define([],()=>pr)});var hr=et(()=>{});var yr=et(()=>{});var br={};Tt(br,{cpus:()=>rn});var rn,wr=St(()=>{rn=void 0});var _r=et((vr,Ft)=>{"use strict";var Or=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){function a(){return j.buffer!=de.buffer&&we(),de}function h(){return j.buffer!=de.buffer&&we(),ge}function l(){return j.buffer!=de.buffer&&we(),ye}function w(){return j.buffer!=de.buffer&&we(),J}function g(){return j.buffer!=de.buffer&&we(),fe}var i=d,A,D;i.ready=new Promise((e,t)=>{A=e,D=t});var I=Object.assign({},i),B="./this.program",F=(e,t)=>{throw t},U=typeof window=="object",k=typeof importScripts=="function",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=i.ENVIRONMENT_IS_PTHREAD||!1,x="";function N(e){return i.locateFile?i.locateFile(e,x):x+e}var he,ie,ae;if(L){var E=(Mt(),tt(At)),Y=(Dt(),tt(Ct));x=k?Y.dirname(x)+"/":__dirname+"/",he=(t,n)=>(t=be(t)?new URL(t):Y.normalize(t),E.readFileSync(t,n?void 0:"utf8")),ae=t=>(t=he(t,!0),t.buffer||(t=new Uint8Array(t)),t),ie=(t,n,f,y=!0)=>{t=be(t)?new URL(t):Y.normalize(t),E.readFile(t,y?void 0:"utf8",(b,v)=>{b?f(b):n(y?v.buffer:v)})},!i.thisProgram&&1<process.argv.length&&(B=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),F=(t,n)=>{throw process.exitCode=t,n},i.inspect=()=>"[Emscripten Module object]";let e;try{e=hr()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(U||k)&&(k?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof u<"u"&&u&&(x=u),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",L||(he=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(ae=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ie=(e,t,n)=>{var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?t(f.response):n()},f.onerror=n,f.send(null)}));L&&typeof performance>"u"&&(global.performance=yr().performance);var ue=console.log.bind(console),Re=console.error.bind(console);L&&(ue=(...e)=>E.writeSync(1,e.join(" ")+`\n`),Re=(...e)=>E.writeSync(2,e.join(" ")+`\n`));var Ie=ue,ee=Re;Object.assign(i,I),I=null,typeof WebAssembly!="object"&&Z("no native wasm support detected");var j,ce,P=!1,te,de,ge,ye,J,fe;function we(){var e=j.buffer;i.HEAP8=de=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=ge=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=ye=new Int32Array(e),i.HEAPU32=J=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=fe=new Float64Array(e)}var Ae=16777216;if(_)j=i.wasmMemory;else if(i.wasmMemory)j=i.wasmMemory;else if(j=new WebAssembly.Memory({initial:Ae/65536,maximum:65536,shared:!0}),!(j.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),L&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");we(),Ae=j.buffer.byteLength;var Me=[],Fe=[],Ee=[],pe=0,Oe=null,ve=null;function re(){if(pe--,pe==0&&(Oe!==null&&(clearInterval(Oe),Oe=null),ve)){var e=ve;ve=null,e()}}function Z(e){throw e="Aborted("+e+")",ee(e),P=!0,te=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),D(e),e}var Ce=e=>e.startsWith("data:application/octet-stream;base64,"),be=e=>e.startsWith("file://"),_e;_e="ort-wasm-threaded.wasm",Ce(_e)||(_e=N(_e));function ke(e){if(ae)return ae(e);throw"both async and sync fetching of the wasm failed"}function Ue(e){if(U||k){if(typeof fetch=="function"&&!be(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>ke(e));if(ie)return new Promise((t,n)=>{ie(e,f=>t(new Uint8Array(f)),n)})}return Promise.resolve().then(()=>ke(e))}function ze(e,t,n){return Ue(e).then(f=>WebAssembly.instantiate(f,t)).then(f=>f).then(n,f=>{ee(`failed to asynchronously prepare wasm: ${f}`),Z(f)})}function at(e,t){var n=_e;return typeof WebAssembly.instantiateStreaming!="function"||Ce(n)||be(n)||L||typeof fetch!="function"?ze(n,e,t):fetch(n,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,e).then(t,function(y){return ee(`wasm streaming compile failed: ${y}`),ee("falling back to ArrayBuffer instantiation"),ze(n,e,t)}))}var De,Ne={920636:(e,t,n,f)=>{if(typeof i>"u"||!i.cb)return 1;if(e=Ge(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=i.cb.get(e),!e)return 2;if(t>>>=0,n>>>=0,f>>>=0,t+n>e.byteLength)return 3;try{return h().set(e.subarray(t,t+n),f>>>0),0}catch{return 4}}};function Pe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var He=e=>{e.terminate(),e.onmessage=()=>{}},$e=e=>{M.Pa.length==0&&(Je(),M.Ya(M.Pa[0]));var t=M.Pa.pop();if(!t)return 6;M.Qa.push(t),M.Ma[e.Oa]=t,t.Oa=e.Oa;var n={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return L&&t.unref(),t.postMessage(n,e.qb),0},Le=0,qe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ve=(e,t,n)=>{t>>>=0;var f=t+n;for(n=t;e[n]&&!(n>=f);)++n;if(16<n-t&&e.buffer&&qe)return qe.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(f="";t<n;){var y=e[t++];if(y&128){var b=e[t++]&63;if((y&224)==192)f+=String.fromCharCode((y&31)<<6|b);else{var v=e[t++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[t++]&63,65536>y?f+=String.fromCharCode(y):(y-=65536,f+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else f+=String.fromCharCode(y)}return f},Ge=(e,t)=>(e>>>=0)?Ve(h(),e,t):"",ot=e=>{var t=vt();return e=e(),ct(t),e};function $(e,t){var n=arguments.length-2,f=arguments;return ot(()=>{for(var y=_t(8*n),b=y>>>3,v=0;v<n;v++){var z=f[2+v];g()[b+v>>>0]=z}return ar(e,n,y,t)})}function C(e){if(_)return $(0,1,e);te=e,0<Le||(M.lb(),i.onExit?.(e),P=!0),F(e,new Pe(e))}var Ye=e=>{if(te=e,_)throw ut(e),"unwind";C(e)};function st(){for(var e=i.numThreads;e--;)Je();Me.unshift(()=>{pe++,it(()=>re())})}function Je(){var e=N("ort-wasm-threaded.worker.js");e=new Worker(e),M.Pa.push(e)}function it(e){_?e():Promise.all(M.Pa.map(M.Ya)).then(e)}var M={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(M.receiveObjectTransfer=M.jb,M.threadInitTLS=M.ab,M.setExitStatus=M.$a):st()},$a:e=>te=e,tb:["$terminateWorker"],lb:()=>{for(var e of M.Qa)He(e);for(e of M.Pa)He(e);M.Pa=[],M.Qa=[],M.Ma=[]},Za:e=>{var t=e.Oa;delete M.Ma[t],M.Pa.push(e),M.Qa.splice(M.Qa.indexOf(e),1),e.Oa=0,wt(t)},jb(){},ab(){M.bb.forEach(e=>e())},Ya:e=>new Promise(t=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=lt()){var z=M.Ma[b.targetThread];z?z.postMessage(b,b.transferList):ee(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?ft():v==="spawnThread"?$e(b):v==="cleanupThread"?M.Za(M.Ma[b.thread]):v==="killThread"?(b=b.thread,v=M.Ma[b],delete M.Ma[b],He(v),wt(b),M.Qa.splice(M.Qa.indexOf(v),1),v.Oa=0):v==="cancelThread"?M.Ma[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,L&&!e.Oa&&e.unref(),t(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?i[b.handler](...b.args):v&&ee(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ee(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},L&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],f=["onExit"],y;for(y of f)i.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:j,wasmModule:ce})})};i.PThread=M;var Be=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=()=>{var e=lt(),t=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],ir(t,t-e),ct(t)};function ut(e){if(_)return $(1,0,e);Ye(e)}var xe=[],Xe;i.invokeEntryPoint=(e,t)=>{var n=xe[e];n||(e>=xe.length&&(xe.length=e+1),xe[e]=n=Xe.get(e)),e=n(t),0<Le?M.$a(e):Ot(e)};function r(e){this.Va=e-24,this.gb=function(t){w()[this.Va+4>>>2>>>0]=t},this.fb=function(t){w()[this.Va+8>>>2>>>0]=t},this.Wa=function(t,n){this.eb(),this.gb(t),this.fb(n)},this.eb=function(){w()[this.Va+16>>>2>>>0]=0}}var o=0,s=0;function m(e,t,n,f){return _?$(2,1,e,t,n,f):O(e,t,n,f)}function O(e,t,n,f){if(e>>>=0,t>>>=0,n>>>=0,f>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return _&&y.length===0?m(e,t,n,f):(e={kb:n,Oa:e,hb:f,qb:y},_?(e.sb="spawnThread",postMessage(e,y),0):$e(e))}function S(e,t,n){return _?$(3,1,e,t,n):0}function R(e,t){if(_)return $(4,1,e,t)}var K=e=>{for(var t=0,n=0;n<e.length;++n){var f=e.charCodeAt(n);127>=f?t++:2047>=f?t+=2:55296<=f&&57343>=f?(t+=4,++n):t+=3}return t},le=(e,t,n,f)=>{if(n>>>=0,!(0<f))return 0;var y=n;f=n+f-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=f)break;t[n++>>>0]=v}else{if(2047>=v){if(n+1>=f)break;t[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=f)break;t[n++>>>0]=224|v>>12}else{if(n+3>=f)break;t[n++>>>0]=240|v>>18,t[n++>>>0]=128|v>>12&63}t[n++>>>0]=128|v>>6&63}t[n++>>>0]=128|v&63}}return t[n>>>0]=0,n-y},oe=(e,t,n)=>le(e,h(),t,n);function se(e,t){if(_)return $(5,1,e,t)}function Qe(e,t,n){if(_)return $(6,1,e,t,n)}function Ze(e,t,n){return _?$(7,1,e,t,n):0}function c(e,t){if(_)return $(8,1,e,t)}function W(e,t,n){if(_)return $(9,1,e,t,n)}function G(e,t,n,f){if(_)return $(10,1,e,t,n,f)}function Se(e,t,n,f){if(_)return $(11,1,e,t,n,f)}function Ke(e,t,n,f){if(_)return $(12,1,e,t,n,f)}function Bt(e){if(_)return $(13,1,e)}function Wt(e,t){if(_)return $(14,1,e,t)}function kt(e,t,n){if(_)return $(15,1,e,t,n)}function mt(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(l(),e>>>2,e).value.then(ft),e+=128,Atomics.store(l(),e>>>2,1))}i.__emscripten_thread_mailbox_await=mt;var ft=()=>{var e=lt();if(e&&(mt(e),e=or,!P))try{if(e(),!(0<Le))try{_?Ot(te):Ye(te)}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}};i.checkMailbox=ft;var gt=[],je=e=>e%4===0&&(e%100!==0||e%400===0),Nt=[0,31,60,91,121,152,182,213,244,274,305,335],Ht=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,t,n,f,y,b,v,z){return _?$(16,1,e,t,n,f,y,b,v,z):-52}function Gt(e,t,n,f,y,b,v){if(_)return $(17,1,e,t,n,f,y,b,v)}var Yt=e=>{var t=K(e)+1,n=rr(t);return n&&oe(e,n,t),n},ht=[],yt={},jt=()=>{if(!bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:B||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);bt=n}return bt},bt;function zt(e,t){if(_)return $(18,1,e,t);e>>>=0,t>>>=0;var n=0;return jt().forEach((f,y)=>{var b=t+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<f.length;++b)a()[y++>>>0>>>0]=f.charCodeAt(b);a()[y>>>0>>>0]=0,n+=f.length+1}),0}function qt(e,t){if(_)return $(19,1,e,t);e>>>=0,t>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var f=0;return n.forEach(y=>f+=y.length+1),w()[t>>>2>>>0]=f,0}function Vt(e){return _?$(20,1,e):52}function Jt(e,t,n,f){return _?$(21,1,e,t,n,f):52}function Xt(e,t,n,f,y){return _?$(22,1,e,t,n,f,y):70}var Gr=[null,[],[]];function Qt(e,t,n,f){if(_)return $(23,1,e,t,n,f);t>>>=0,n>>>=0,f>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[t>>>2>>>0],z=w()[t+4>>>2>>>0];t+=8;for(var Te=0;Te<z;Te++){var ne=h()[v+Te>>>0],me=Gr[e];ne===0||ne===10?((e===1?Ie:ee)(Ve(me,0)),me.length=0):me.push(ne)}y+=z}return w()[f>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Yr(e){var t=Array(K(e)+1);return le(e,t,0,t.length),t}var jr=(e,t)=>{a().set(e,t>>>0)};function er(e,t,n,f){function y(p,H,q){for(p=typeof p=="number"?p.toString():p||"";p.length<H;)p=q[0]+p;return p}function b(p,H){return y(p,H,"0")}function v(p,H){function q(cr){return 0>cr?-1:0<cr?1:0}var We;return(We=q(p.getFullYear()-H.getFullYear()))===0&&(We=q(p.getMonth()-H.getMonth()))===0&&(We=q(p.getDate()-H.getDate())),We}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Te(p){var H=p.Ra;for(p=new Date(new Date(p.Sa+1900,0,1).getTime());0<H;){var q=p.getMonth(),We=(je(p.getFullYear())?Zt:Kt)[q];if(H>We-p.getDate())H-=We-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+H);break}}return q=new Date(p.getFullYear()+1,0,4),H=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(H,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,f>>>=0;var ne=w()[f+40>>>2>>>0];f={ob:l()[f>>>2>>>0],nb:l()[f+4>>>2>>>0],Ta:l()[f+8>>>2>>>0],Xa:l()[f+12>>>2>>>0],Ua:l()[f+16>>>2>>>0],Sa:l()[f+20>>>2>>>0],Na:l()[f+24>>>2>>>0],Ra:l()[f+28>>>2>>>0],ub:l()[f+32>>>2>>>0],mb:l()[f+36>>>2>>>0],pb:ne?Ge(ne):""},n=Ge(n),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var me in ne)n=n.replace(new RegExp(me,"g"),ne[me]);var fr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lr="January February March April May June July August September October November December".split(" ");ne={"%a":p=>fr[p.Na].substring(0,3),"%A":p=>fr[p.Na],"%b":p=>lr[p.Ua].substring(0,3),"%B":p=>lr[p.Ua],"%C":p=>b((p.Sa+1900)/100|0,2),"%d":p=>b(p.Xa,2),"%e":p=>y(p.Xa,2," "),"%g":p=>Te(p).toString().substring(2),"%G":p=>Te(p),"%H":p=>b(p.Ta,2),"%I":p=>(p=p.Ta,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var H=0,q=0;q<=p.Ua-1;H+=(je(p.Sa+1900)?Zt:Kt)[q++]);return b(p.Xa+H,3)},"%m":p=>b(p.Ua+1,2),"%M":p=>b(p.nb,2),"%n":()=>`\n`,"%p":p=>0<=p.Ta&&12>p.Ta?"AM":"PM","%S":p=>b(p.ob,2),"%t":()=>"	","%u":p=>p.Na||7,"%U":p=>b(Math.floor((p.Ra+7-p.Na)/7),2),"%V":p=>{var H=Math.floor((p.Ra+7-(p.Na+6)%7)/7);if(2>=(p.Na+371-p.Ra-2)%7&&H++,H)H==53&&(q=(p.Na+371-p.Ra)%7,q==4||q==3&&je(p.Sa)||(H=1));else{H=52;var q=(p.Na+7-p.Ra-1)%7;(q==4||q==5&&je(p.Sa%400-1))&&H++}return b(H,2)},"%w":p=>p.Na,"%W":p=>b(Math.floor((p.Ra+7-(p.Na+6)%7)/7),2),"%y":p=>(p.Sa+1900).toString().substring(2),"%Y":p=>p.Sa+1900,"%z":p=>{p=p.mb;var H=0<=p;return p=Math.abs(p)/60,(H?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.pb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(me in ne)n.includes(me)&&(n=n.replace(new RegExp(me,"g"),ne[me](f)));return n=n.replace(/\\0\\0/g,"%"),me=Yr(n),me.length>t?0:(jr(me,e),me.length-1)}M.Wa();var zr=[C,ut,m,S,R,se,Qe,Ze,c,W,G,Se,Ke,Bt,Wt,kt,$t,Gt,zt,qt,Vt,Jt,Xt,Qt],qr={b:function(e,t,n){throw e>>>=0,new r(e).Wa(t>>>0,n>>>0),o=e,s++,o},L:function(e){nr(e>>>0,!k,1,!U,131072,!1),M.ab()},j:function(e){e>>>=0,_?postMessage({cmd:"cleanupThread",thread:e}):M.Za(M.Ma[e])},H:O,h:S,S:R,D:se,F:Qe,T:Ze,Q:c,J:W,P:G,n:Se,E:Ke,B:Bt,R:Wt,C:kt,p:()=>1,z:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>ft()):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,n,f){t>>>=0,gt.length=n,f=f>>>0>>>3;for(var y=0;y<n;y++)gt[y]=g()[f+y>>>0];return e=0>e?Ne[-e-1]:zr[e],M.ib=t,t=e.apply(null,gt),M.ib=0,t},K:mt,o:function(e){L&&M.Ma[e>>>0].ref()},s:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getUTCSeconds(),l()[n+4>>>2>>>0]=e.getUTCMinutes(),l()[n+8>>>2>>>0]=e.getUTCHours(),l()[n+12>>>2>>>0]=e.getUTCDate(),l()[n+16>>>2>>>0]=e.getUTCMonth(),l()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,l()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,l()[n+28>>>2>>>0]=e},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getSeconds(),l()[n+4>>>2>>>0]=e.getMinutes(),l()[n+8>>>2>>>0]=e.getHours(),l()[n+12>>>2>>>0]=e.getDate(),l()[n+16>>>2>>>0]=e.getMonth(),l()[n+20>>>2>>>0]=e.getFullYear()-1900,l()[n+24>>>2>>>0]=e.getDay(),t=(je(e.getFullYear())?Nt:Ht)[e.getMonth()]+e.getDate()-1|0,l()[n+28>>>2>>>0]=t,l()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var f=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=f&&e.getTimezoneOffset()==Math.min(f,t))|0,l()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(l()[e+20>>>2>>>0]+1900,l()[e+16>>>2>>>0],l()[e+12>>>2>>>0],l()[e+8>>>2>>>0],l()[e+4>>>2>>>0],l()[e>>>2>>>0],0),n=l()[e+32>>>2>>>0],f=t.getTimezoneOffset(),y=new Date(t.getFullYear(),6,1).getTimezoneOffset(),b=new Date(t.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?l()[e+32>>>2>>>0]=+(y!=b&&v==f):0<n!=(v==f)&&(y=Math.max(b,y),t.setTime(t.getTime()+6e4*((0<n?v:y)-f))),l()[e+24>>>2>>>0]=t.getDay(),n=(je(t.getFullYear())?Nt:Ht)[t.getMonth()]+t.getDate()-1|0,l()[e+28>>>2>>>0]=n,l()[e>>>2>>>0]=t.getSeconds(),l()[e+4>>>2>>>0]=t.getMinutes(),l()[e+8>>>2>>>0]=t.getHours(),l()[e+12>>>2>>>0]=t.getDate(),l()[e+16>>>2>>>0]=t.getMonth(),l()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(l()[tr()>>>2>>>0]=61,e=-1):e/=1e3,sr((De=e,1<=+Math.abs(De)?0<De?+Math.floor(De/4294967296)>>>0:~~+Math.ceil((De-+(~~De>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Gt,y:function(e,t,n){function f(ne){return(ne=ne.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ne[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Te=Math.max(y,z);w()[e>>>2>>>0]=60*Te,l()[t>>>2>>>0]=+(y!=z),e=f(b),t=f(v),e=Yt(e),t=Yt(t),z<y?(w()[n>>>2>>>0]=e,w()[n+4>>>2>>>0]=t):(w()[n>>>2>>>0]=t,w()[n+4>>>2>>>0]=e)},c:()=>{Z("")},O:function(e,t,n){e>>>=0,t>>>=0,n>>>=0,ht.length=0;for(var f;f=h()[t++>>>0];){var y=f!=105;y&=f!=112,n+=y&&n%8?4:0,ht.push(f==112?w()[n>>>2>>>0]:f==105?l()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ne[e].apply(null,ht)},k:()=>{},i:()=>Date.now(),U:()=>{throw Le+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>L?(wr(),tt(br)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=h().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var f=t*(1+.2/n);f=Math.min(f,e+100663296);var y=Math;f=Math.max(e,f);e:{y=(y.min.call(y,4294901760,f+(65536-f%65536)%65536)-j.buffer.byteLength+65535)/65536;try{j.grow(y),we();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ye,g:Vt,m:Jt,v:Xt,l:Qt,a:j||i.wasmMemory,w:er,d:function(e,t,n,f){return er(e>>>0,t>>>0,n>>>0,f>>>0)}},T=function(){function e(n,f){return T=n.exports,T=Vr(),M.bb.push(T.za),Xe=T.Aa,Fe.unshift(T.V),ce=f,re(),T}var t={a:qr};if(pe++,i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(n){ee(`Module.instantiateWasm callback failed with error: ${n}`),D(n)}return at(t,function(n){e(n.instance,n.module)}).catch(D),{}}();i._OrtInit=(e,t)=>(i._OrtInit=T.W)(e,t),i._OrtGetLastError=(e,t)=>(i._OrtGetLastError=T.X)(e,t),i._OrtCreateSessionOptions=(e,t,n,f,y,b,v,z,Te,ne)=>(i._OrtCreateSessionOptions=T.Y)(e,t,n,f,y,b,v,z,Te,ne),i._OrtAppendExecutionProvider=(e,t)=>(i._OrtAppendExecutionProvider=T.Z)(e,t),i._OrtAddFreeDimensionOverride=(e,t,n)=>(i._OrtAddFreeDimensionOverride=T._)(e,t,n),i._OrtAddSessionConfigEntry=(e,t,n)=>(i._OrtAddSessionConfigEntry=T.$)(e,t,n),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=T.aa)(e),i._OrtCreateSession=(e,t,n)=>(i._OrtCreateSession=T.ba)(e,t,n),i._OrtReleaseSession=e=>(i._OrtReleaseSession=T.ca)(e),i._OrtGetInputOutputCount=(e,t,n)=>(i._OrtGetInputOutputCount=T.da)(e,t,n),i._OrtGetInputName=(e,t)=>(i._OrtGetInputName=T.ea)(e,t),i._OrtGetOutputName=(e,t)=>(i._OrtGetOutputName=T.fa)(e,t),i._OrtFree=e=>(i._OrtFree=T.ga)(e),i._OrtCreateTensor=(e,t,n,f,y,b)=>(i._OrtCreateTensor=T.ha)(e,t,n,f,y,b),i._OrtGetTensorData=(e,t,n,f,y)=>(i._OrtGetTensorData=T.ia)(e,t,n,f,y),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=T.ja)(e),i._OrtCreateRunOptions=(e,t,n,f)=>(i._OrtCreateRunOptions=T.ka)(e,t,n,f),i._OrtAddRunConfigEntry=(e,t,n)=>(i._OrtAddRunConfigEntry=T.la)(e,t,n),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=T.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=T.na)(e),i._OrtBindInput=(e,t,n)=>(i._OrtBindInput=T.oa)(e,t,n),i._OrtBindOutput=(e,t,n,f)=>(i._OrtBindOutput=T.pa)(e,t,n,f),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=T.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=T.ra)(e),i._OrtRunWithBinding=(e,t,n,f,y)=>(i._OrtRunWithBinding=T.sa)(e,t,n,f,y),i._OrtRun=(e,t,n,f,y,b,v,z)=>(i._OrtRun=T.ta)(e,t,n,f,y,b,v,z),i._OrtEndProfiling=e=>(i._OrtEndProfiling=T.ua)(e);var tr=()=>(tr=T.va)(),lt=i._pthread_self=()=>(lt=i._pthread_self=T.wa)(),rr=i._malloc=e=>(rr=i._malloc=T.xa)(e);i._free=e=>(i._free=T.ya)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=T.za)();var nr=i.__emscripten_thread_init=(e,t,n,f,y,b)=>(nr=i.__emscripten_thread_init=T.Ba)(e,t,n,f,y,b);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=T.Ca)();var ar=(e,t,n,f)=>(ar=T.Da)(e,t,n,f),wt=e=>(wt=T.Ea)(e),Ot=i.__emscripten_thread_exit=e=>(Ot=i.__emscripten_thread_exit=T.Fa)(e),or=()=>(or=T.Ga)(),sr=e=>(sr=T.Ha)(e),ir=(e,t)=>(ir=T.Ia)(e,t),vt=()=>(vt=T.Ja)(),ct=e=>(ct=T.Ka)(e),_t=e=>(_t=T.La)(e);function Vr(){var e=T;e=Object.assign({},e);var t=f=>()=>f()>>>0,n=f=>y=>f(y)>>>0;return e.va=t(e.va),e.wa=t(e.wa),e.xa=n(e.xa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ja=t(e.Ja),e.La=n(e.La),e}i.wasmMemory=j,i.stackAlloc=_t,i.stackSave=vt,i.stackRestore=ct,i.keepRuntimeAlive=()=>0<Le,i.UTF8ToString=Ge,i.stringToUTF8=oe,i.lengthBytesUTF8=K,i.ExitStatus=Pe,i.PThread=M;var dt;ve=function e(){dt||ur(),dt||(ve=e)};function ur(){if(!(0<pe))if(_)A(i),_||Be(Fe),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Me.unshift(i.preRun.shift());Be(Me),0<pe||dt||(dt=!0,i.calledRun=!0,P||(_||Be(Fe),A(i),_||Be(Ee)))}}return ur(),d.ready}})();typeof vr=="object"&&typeof Ft=="object"?Ft.exports=Or:typeof define=="function"&&define.amd&&define([],()=>Or)});var Er=et((On,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Tr;Tr=gr();var an=_r(),Ut,Pt=!1,pt=!1,Sr=!1,on=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(u,d)=>u?d?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ar=async u=>{if(Pt)return Promise.resolve();if(pt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Sr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");pt=!0;let d=u.initTimeout,a=u.numThreads,h=u.simd,l=on(a),w=h&&sn(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,A=un(w,l),D=typeof g=="object"?g[A]:void 0,I=!1,B=[];if(d>0&&B.push(new Promise(F=>{setTimeout(()=>{I=!0,F()},d)})),B.push(new Promise((F,U)=>{let k=l?an:Tr,L={locateFile:(_,x)=>l&&_.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Er()],{type:"text/javascript"})):_.endsWith(".wasm")?D||(i??x)+A:x+_};if(l)if(L.numThreads=a,typeof Blob>"u")L.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let _=`var ortWasmThreaded=${k.toString()};`;L.mainScriptUrlOrBlob=new Blob([_],{type:"text/javascript"})}k(L).then(_=>{pt=!1,Pt=!0,Ut=_,F()},_=>{pt=!1,Sr=!0,U(_)})})),await Promise.race(B),I)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},X=()=>{if(Pt&&Ut)return Ut;throw new Error("WebAssembly is not initialized yet.")};var Q=(u,d)=>{let a=X(),h=a.lengthBytesUTF8(u)+1,l=a._malloc(h);return a.stringToUTF8(u,l,h),d.push(l),l},rt=(u,d,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([l,w])=>{let g=d?d+l:l;if(typeof w=="object")rt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},V=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let l=d.HEAP32[h/4],w=d.HEAPU32[h/4+1],g=w?d.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${l}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(a)}};var Mr=u=>{let d=X(),a=0,h=[],l=u||{};try{if(u?.logSeverityLevel===void 0)l.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)l.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(l.terminate=!1);let w=0;return u?.tag!==void 0&&(w=Q(u.tag,h)),a=d._OrtCreateRunOptions(l.logSeverityLevel,l.logVerbosityLevel,!!l.terminate,w),a===0&&V("Can\'t create run options."),u?.extra!==void 0&&rt(u.extra,"",new WeakSet,(g,i)=>{let A=Q(g,h),D=Q(i,h);d._OrtAddRunConfigEntry(a,A,D)!==0&&V(`Can\'t set a run config entry: ${g} - ${i}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseRunOptions(a),h.forEach(g=>d._free(g)),w}};var fn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},ln=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},cn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},dn=(u,d,a)=>{for(let h of d){let l=typeof h=="string"?h:h.name;switch(l){case"webnn":if(l="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let i=Q("deviceType",a),A=Q(g.deviceType,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let A=Q("numThreads",a),D=Q(i.toString(),a);X()._OrtAddSessionConfigEntry(u,A,D)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=Q("powerPreference",a),A=Q(g.powerPreference,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(l="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=Q("preferredLayout",a),A=Q(g.preferredLayout,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${l}`)}let w=Q(l,a);X()._OrtAppendExecutionProvider(u,w)!==0&&V(`Can\'t append execution provider: ${l}.`)}},Cr=u=>{let d=X(),a=0,h=[],l=u||{};cn(l);try{let w=fn(l.graphOptimizationLevel??"all"),g=ln(l.executionMode??"sequential"),i=typeof l.logId=="string"?Q(l.logId,h):0,A=l.logSeverityLevel??2;if(!Number.isInteger(A)||A<0||A>4)throw new Error(`log serverity level is not valid: ${A}`);let D=l.logVerbosityLevel??0;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log verbosity level is not valid: ${D}`);let I=typeof l.optimizedModelFilePath=="string"?Q(l.optimizedModelFilePath,h):0;if(a=d._OrtCreateSessionOptions(w,!!l.enableCpuMemArena,!!l.enableMemPattern,g,!!l.enableProfiling,0,i,A,D,I),a===0&&V("Can\'t create session options."),l.executionProviders&&dn(a,l.executionProviders,h),l.freeDimensionOverrides)for(let[B,F]of Object.entries(l.freeDimensionOverrides)){if(typeof B!="string")throw new Error(`free dimension override name must be a string: ${B}`);if(typeof F!="number"||!Number.isInteger(F)||F<0)throw new Error(`free dimension override value must be a non-negative integer: ${F}`);let U=Q(B,h);d._OrtAddFreeDimensionOverride(a,U,F)!==0&&V(`Can\'t set a free dimension override: ${B} - ${F}.`)}return l.extra!==void 0&&rt(l.extra,"",new WeakSet,(B,F)=>{let U=Q(B,h),k=Q(F,h);d._OrtAddSessionConfigEntry(a,U,k)!==0&&V(`Can\'t set a session config entry: ${B} - ${F}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(g=>d._free(g)),w}};var Rt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Dr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},It=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],xr=u=>{switch(u){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Fr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Ur=u=>u==="float32"||u==="int32"||u==="int64"||u==="bool"||u==="float16"||u==="uint32",Pr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Rr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let l of a)h.push(l);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let a=d.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let l=d.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(i){if(i instanceof RangeError){let A=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:A,maximum:A}).buffer}else throw i}let g=0;for(;;){let{done:i,value:A}=await l.read();if(i)break;let D=A.byteLength;new Uint8Array(w,g,D).set(A),g+=D}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var pn=(u,d)=>{X()._OrtInit(u,d)!==0&&V("Can\'t initialize onnxruntime.")},Lr=async u=>{pn(u.wasm.numThreads,Fr(u.logLevel))},Br=async(u,d)=>{},nt=new Map,mn=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&V("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(a)}},Lt=u=>{let d=X(),a=d._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,a),[a,u.byteLength]},Wr=async(u,d)=>{let a,h,l=X();Array.isArray(u)?[a,h]=u:u.buffer===l.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=Lt(u);let w=0,g=0,i=0,A=[],D=[],I=[];try{if([g,A]=Cr(d),d?.externalData&&l.mountExternalData){let x=[];for(let N of d.externalData){let he=typeof N=="string"?N:N.path;x.push(Rr(typeof N=="string"?N:N.data).then(ie=>{l.mountExternalData(he,ie)}))}await Promise.all(x)}w=l._OrtCreateSession(a,h,g),w===0&&V("Can\'t create a session.");let[B,F]=mn(w),U=[],k=[],L=[];for(let x=0;x<B;x++){let N=l._OrtGetInputName(w,x);N===0&&V("Can\'t get an input name."),D.push(N),U.push(l.UTF8ToString(N))}for(let x=0;x<F;x++){let N=l._OrtGetOutputName(w,x);N===0&&V("Can\'t get an output name."),I.push(N);let he=l.UTF8ToString(N);k.push(he)}let _=null;return nt.set(w,[w,D,I,_]),[w,U,k]}catch(B){throw D.forEach(F=>l._OrtFree(F)),I.forEach(F=>l._OrtFree(F)),i!==0&&l._OrtReleaseBinding(i),w!==0&&l._OrtReleaseSession(w),B}finally{l._free(a),g!==0&&l._OrtReleaseSessionOptions(g),A.forEach(B=>l._free(B)),l.unmountExternalData?.()}},kr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,l,w,g]=a;g&&d._OrtReleaseBinding(g.handle),d.jsepUnregisterBuffers?.(u),l.forEach(i=>d._OrtFree(i)),w.forEach(i=>d._OrtFree(i)),d._OrtReleaseSession(h),nt.delete(u)},Ir=(u,d,a,h,l)=>{if(!u){d.push(0);return}let w=X(),g=u[0],i=u[1],A=u[3],D,I;if(g==="string"&&A==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(A==="gpu-buffer"){let U=u[2].gpuBuffer,k=It(Rt(g));I=i.reduce((L,_)=>L*_,1)*k,D=w.jsepRegisterBuffer(h,l,U,I)}else{let U=u[2];if(Array.isArray(U)){I=4*U.length,D=w._malloc(I),a.push(D);let k=D/4;for(let L=0;L<U.length;L++){if(typeof U[L]!="string")throw new TypeError(`tensor data at index ${L} is not a string`);w.HEAPU32[k++]=Q(U[L],a)}}else I=U.byteLength,D=w._malloc(I),a.push(D),w.HEAPU8.set(new Uint8Array(U.buffer,U.byteOffset,I),D)}let B=w.stackSave(),F=w.stackAlloc(4*i.length);try{let U=F/4;i.forEach(L=>w.HEAP32[U++]=L);let k=w._OrtCreateTensor(Rt(g),D,I,F,i.length,Pr(A));k===0&&V(`Can\'t create tensor for input/output. session=${h}, index=${l}.`),d.push(k)}finally{w.stackRestore(B)}},Nr=async(u,d,a,h,l,w)=>{let g=X(),i=nt.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let[A,D,I,B]=i,F=d.length,U=h.length,k=0,L=[],_=[],x=[],N=[],he=g.stackSave(),ie=g.stackAlloc(F*4),ae=g.stackAlloc(F*4),E=g.stackAlloc(U*4),Y=g.stackAlloc(U*4);try{[k,L]=Mr(w);for(let P=0;P<F;P++)Ir(a[P],_,N,u,d[P]);for(let P=0;P<U;P++)Ir(l[P],x,N,u,F+h[P]);let ue=ie/4,Re=ae/4,Ie=E/4,ee=Y/4;for(let P=0;P<F;P++)g.HEAPU32[ue++]=_[P],g.HEAPU32[Re++]=D[d[P]];for(let P=0;P<U;P++)g.HEAPU32[Ie++]=x[P],g.HEAPU32[ee++]=I[h[P]];let j;j=await g._OrtRun(A,ae,ie,F,Y,U,E,k),j!==0&&V("failed to call OrtRun().");let ce=[];for(let P=0;P<U;P++){let te=g.HEAPU32[E/4+P];if(te===x[P]){ce.push(l[P]);continue}let de=g.stackSave(),ge=g.stackAlloc(4*4),ye=!1,J,fe=0;try{g._OrtGetTensorData(te,ge,ge+4,ge+8,ge+12)!==0&&V(`Can\'t access output tensor data on index ${P}.`);let Ae=ge/4,Me=g.HEAPU32[Ae++];fe=g.HEAPU32[Ae++];let Fe=g.HEAPU32[Ae++],Ee=g.HEAPU32[Ae++],pe=[];for(let re=0;re<Ee;re++)pe.push(g.HEAPU32[Fe/4+re]);g._OrtFree(Fe);let Oe=pe.reduce((re,Z)=>re*Z,1);J=Dr(Me);let ve=B?.outputPreferredLocations[h[P]];if(J==="string"){if(ve==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let re=[],Z=fe/4;for(let Ce=0;Ce<Oe;Ce++){let be=g.HEAPU32[Z++],_e=Ce===Oe-1?void 0:g.HEAPU32[Z]-be;re.push(g.UTF8ToString(be,_e))}ce.push([J,pe,re,"cpu"])}else if(ve==="gpu-buffer"&&Oe>0){let re=g.jsepGetBuffer(fe),Z=It(Me);if(Z===void 0||!Ur(J))throw new Error(`Unsupported data type: ${J}`);ye=!0,ce.push([J,pe,{gpuBuffer:re,download:g.jsepCreateDownloader(re,Oe*Z,J),dispose:()=>{g._OrtReleaseTensor(te)}},"gpu-buffer"])}else{let re=xr(J),Z=new re(Oe);new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength).set(g.HEAPU8.subarray(fe,fe+Z.byteLength)),ce.push([J,pe,Z,"cpu"])}}finally{g.stackRestore(de),J==="string"&&fe&&g._free(fe),ye||g._OrtReleaseTensor(te)}}return B&&g._OrtClearBoundOutputs(B.handle),ce}finally{g.stackRestore(he),_.forEach(ue=>g._OrtReleaseTensor(ue)),x.forEach(ue=>g._OrtReleaseTensor(ue)),N.forEach(ue=>g._free(ue)),k!==0&&g._OrtReleaseRunOptions(k),L.forEach(ue=>g._free(ue))}},Hr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error("invalid session id");let h=a[0],l=d._OrtEndProfiling(h);l===0&&V("Can\'t get an profile file name."),d._OrtFree(l)},$r=u=>{let d=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:a}=u.data;try{switch(d){case"init-wasm":Ar(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:l}=a;Br(l,h).then(()=>{postMessage({type:d})},w=>{postMessage({type:d,err:w})});break}case"copy-from":{let{buffer:h}=a,l=Lt(h);postMessage({type:d,out:l});break}case"create":{let{model:h,options:l}=a;Wr(h,l).then(w=>{postMessage({type:d,out:w})},w=>{postMessage({type:d,err:w})});break}case"release":kr(a),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:l,inputs:w,outputIndices:g,options:i}=a;Nr(h,l,w,g,new Array(g.length).fill(null),i).then(A=>{A.some(D=>D[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:A},$r(A))},A=>{postMessage({type:d,err:A})});break}case"end-profiling":Hr(a),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'}),xr,bt,Tn,Fo,$o,da,ha,Vr,Wr,gg,Lo,nd,od,id,ad,sd,ud,ld,ma=L(()=>{var oa;vt(),td(),zr(),xr=()=>!!Z.wasm.proxy&&typeof document<"u",Tn=!1,Fo=!1,$o=!1,ha=new Map,Vr=(ba,wa)=>{let xa=ha.get(ba);xa?xa.push(wa):ha.set(ba,[wa])},Wr=()=>{if(Tn||!Fo||$o||!bt)throw new Error("worker not ready")},gg=ba=>{switch(ba.data.type){case"init-wasm":Tn=!1,ba.data.err?($o=!0,da[1](ba.data.err)):(Fo=!0,da[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let wa=ha.get(ba.data.type);ba.data.err?wa.shift()[1](ba.data.err):wa.shift()[0](ba.data.out);break}}},Lo=typeof document<"u"?(oa=document==null?void 0:document.currentScript)==null?void 0:oa.src:void 0,nd=async()=>{if(!Fo){if(Tn)throw new Error("multiple calls to 'initWasm()' detected.");if($o)throw new Error("previous call to 'initWasm()' failed.");if(Tn=!0,xr())return Z.wasm.wasmPaths===void 0&&Lo&&Lo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Lo.substr(0,+Lo.lastIndexOf("/")+1)),new Promise((ba,wa)=>{bt==null||bt.terminate();let xa=URL.createObjectURL(new Blob([rd()],{type:"text/javascript"}));bt=new Worker(xa,{name:"ort-wasm-proxy-worker"}),bt.onerror=va=>wa(va),bt.onmessage=gg,URL.revokeObjectURL(xa),da=[ba,wa];let Sa={type:"init-wasm",in:Z};bt.postMessage(Sa)});try{await Rp(Z.wasm),await Yp(Z),Fo=!0}catch(ba){throw $o=!0,ba}finally{Tn=!1}}},od=async ba=>{if(xr())return Wr(),new Promise((wa,xa)=>{Vr("init-ep",[wa,xa]);let Sa={type:"init-ep",in:{epName:ba,env:Z}};bt.postMessage(Sa)});await Xp(Z,ba)},id=async ba=>xr()?(Wr(),new Promise((wa,xa)=>{Vr("copy-from",[wa,xa]);let Sa={type:"copy-from",in:{buffer:ba}};bt.postMessage(Sa,[ba.buffer])})):pa(ba),ad=async(ba,wa)=>{if(xr()){if(wa!=null&&wa.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((xa,Sa)=>{Vr("create",[xa,Sa]);let va={type:"create",in:{model:ba,options:wa}},Ea=[];ba instanceof Uint8Array&&Ea.push(ba.buffer),bt.postMessage(va,Ea)})}else return Kp(ba,wa)},sd=async ba=>{if(xr())return Wr(),new Promise((wa,xa)=>{Vr("release",[wa,xa]);let Sa={type:"release",in:ba};bt.postMessage(Sa)});Jp(ba)},ud=async(ba,wa,xa,Sa,va,Ea)=>{if(xr()){if(xa.some(La=>La[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(va.some(La=>La))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise((La,eu)=>{Vr("run",[La,eu]);let Ta=xa,Aa={type:"run",in:{sessionId:ba,inputIndices:wa,inputs:Ta,outputIndices:Sa,options:Ea}};bt.postMessage(Aa,ed(Ta))})}else return Zp(ba,wa,xa,Sa,va,Ea)},ld=async ba=>{if(xr())return Wr(),new Promise((wa,xa)=>{Vr("end-profiling",[wa,xa]);let Sa={type:"end-profiling",in:ba};bt.postMessage(Sa)});Qp(ba)}}),fd,yg,Co,cd=L(()=>{vt(),ma(),fa(),ca(),fd=(oa,ba)=>{switch(oa.location){case"cpu":return[oa.type,oa.dims,oa.data,"cpu"];case"gpu-buffer":return[oa.type,oa.dims,{gpuBuffer:oa.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${oa.location} for ${ba()}`)}},yg=oa=>{switch(oa[3]){case"cpu":return new Re(oa[0],oa[2],oa[1]);case"gpu-buffer":{let ba=oa[0];if(!Do(ba))throw new Error(`not supported data type: ${ba} for deserializing GPU tensor`);let{gpuBuffer:wa,download:xa,dispose:Sa}=oa[2];return Re.fromGpuBuffer(wa,{dataType:ba,dims:oa[1],download:xa,dispose:Sa})}default:throw new Error(`invalid data location: ${oa[3]}`)}},Co=class{async fetchModelAndCopyToWasmMemory(oa){return id(await gn(oa))}async loadModel(oa,ba){ar();let wa;typeof oa=="string"?typeof process<"u"&&process.versions&&process.versions.node?wa=await gn(oa):wa=await this.fetchModelAndCopyToWasmMemory(oa):wa=oa,[this.sessionId,this.inputNames,this.outputNames]=await ad(wa,ba),sr()}async dispose(){return sd(this.sessionId)}async run(oa,ba,wa){ar();let xa=[],Sa=[];Object.entries(oa).forEach(ka=>{let ru=ka[0],nu=ka[1],su=this.inputNames.indexOf(ru);if(su===-1)throw new Error(`invalid input '${ru}'`);xa.push(nu),Sa.push(su)});let va=[],Ea=[];Object.entries(ba).forEach(ka=>{let ru=ka[0],nu=ka[1],su=this.outputNames.indexOf(ru);if(su===-1)throw new Error(`invalid output '${ru}'`);va.push(nu),Ea.push(su)});let La=xa.map((ka,ru)=>fd(ka,()=>`input "${this.inputNames[Sa[ru]]}"`)),eu=va.map((ka,ru)=>ka?fd(ka,()=>`output "${this.outputNames[Ea[ru]]}"`):null),Ta=await ud(this.sessionId,Sa,La,Ea,eu,wa),Aa={};for(let ka=0;ka<Ta.length;ka++)Aa[this.outputNames[Ea[ka]]]=va[ka]??yg(Ta[ka]);return sr(),Aa}startProfiling(){}endProfiling(){ld(this.sessionId)}}}),Tg,ko,pd=L(()=>{vt(),ma(),cd(),Tg=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let oa=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((oa||1)/2))}},ko=class{async init(oa){Tg(),await nd(),await od(oa)}async createInferenceSessionHandler(oa,ba){let wa=new Co;return await wa.loadModel(oa,ba),Promise.resolve(wa)}}}),dd={};Pr(dd,{wasmBackend:()=>xg});var xg,hd=L(()=>{pd(),xg=new ko});vt(),vt(),vt();var ys="1.17.0";{let oa=(_p(),rr(wp)).onnxjsBackend;or("webgl",oa,-10)}{let oa=(hd(),rr(dd)).wasmBackend;or("cpu",oa,10),or("wasm",oa,10),or("webnn",oa,9)}Object.defineProperty(Z.versions,"web",{value:ys,enumerable:!0});/*! Bundled license information:

  long/index.js:
    (**
     * @license
     * Copyright 2009 The Closure Library Authors
     * Copyright 2020 Daniel Wirtz / The long.js Authors.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * SPDX-License-Identifier: Apache-2.0
     *)
  */const CONFIG={FACE:{MIN_DETECTION_CONFIDENCE:.5,MIN_TRACKING_CONFIDENCE:.5,YAW_THRESHOLD:.25,PITCH_THRESHOLD:.2,CONSECUTIVE_FRAMES:5,MIN_LANDMARKS_FOR_POSE:468,LEFT_IRIS:[468,469,470,471,472],RIGHT_IRIS:[473,474,475,476,477],LEFT_EYE:[33,7,163,144,145,153,154,155,133,173,157,158,159,160,161,246],RIGHT_EYE:[362,382,381,380,374,373,390,249,263,466,388,387,386,385,384,398],UPPER_LIP:[61,185,40,39,37,0,267,269,270,409,291],LOWER_LIP:[146,91,181,84,17,314,405,321,375,291],EYE_GAZE_THRESHOLD:.15,LIP_MOVEMENT_THRESHOLD:.02,BLINK_THRESHOLD:.2},YOLO:{MODEL_PATH:"/models/anticheat_yolo11s.onnx",INPUT_SIZE:640,CONFIDENCE_THRESHOLD:.6,IOU_THRESHOLD:.45,CLASSES:["person","phone","material","headphones"],ALERT_CLASSES:["phone","material","headphones"],MASK_COEFFICIENTS:32,MULTI_PERSON_ALERT:!1,MULTI_PERSON_THRESHOLD:.7},CASCADE:{YOLO_ACTIVATION_SECONDS:3},ADVANCED:{LIP_MOVEMENT_FRAMES:10,LIP_ALERT_THRESHOLD:5,BLINK_RATE_WINDOW:3e4,ABNORMAL_BLINK_RATE_LOW:5,ABNORMAL_BLINK_RATE_HIGH:40}};function sigmoid(oa){return 1/(1+Math.exp(-oa))}let faceLandmarker=null,yoloSession=null,suspiciousFrameCount=0,lastAlertTime=0,lastAlertTimePerClass={},lastYoloRunTime=0,isInitialized=!1;const YOLO_THROTTLE_MS=500;let maxScorePerClassPersistent=null,lipMovementHistory=[],speakingFrameCount=0,blinkHistory=[],lastEyeAspectRatio=0,multiPersonAlertTime=0,lastEyeGazeAlert=0;async function initializeAI(){self.postMessage({type:"STATUS",payload:"ang ti model AI...",code:"aiLoading"});const oa=(xa,Sa,va=null)=>{let Ea;const La=new Promise(eu=>{Ea=setTimeout(()=>eu(va),Sa)});return Promise.race([xa,La]).finally(()=>{clearTimeout(Ea)})},ba=(xa,Sa,va)=>{let Ea;const La=new Promise((eu,Ta)=>{Ea=setTimeout(()=>Ta(new Error(`${va} timeout after ${Sa}ms`)),Sa)});return Promise.race([xa,La]).finally(()=>{clearTimeout(Ea)})};let wa=!1;try{const xa="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.18/wasm",Sa="https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",va=await oa(Po$1.forVisionTasks(xa),15e3,null);if(!va){console.warn("MediaPipe WASM loading timed out - using basic mode"),self.postMessage({type:"STATUS",payload:"AI monitoring active (basic mode)",code:"basicMode"}),isInitialized=!0;return}let Ea=["GPU","CPU"],La=null;for(const eu of Ea)try{faceLandmarker=await ba(ac$1.createFromOptions(va,{baseOptions:{modelAssetPath:Sa,delegate:eu},runningMode:"IMAGE",numFaces:1,minFaceDetectionConfidence:CONFIG.FACE.MIN_DETECTION_CONFIDENCE,minTrackingConfidence:CONFIG.FACE.MIN_TRACKING_CONFIDENCE,outputFaceBlendshapes:!1,outputFacialTransformationMatrixes:!0}),2e4,`FaceLandmarker (${eu})`),console.log(`MediaPipe Face Landmarker loaded successfully with ${eu} delegate`),La=null,wa=!0;break}catch(Ta){console.warn(`Failed to load MediaPipe with ${eu} delegate:`,Ta.message),La=Ta}La&&!wa&&console.warn("MediaPipe failed to load - continuing with basic mode"),self.postMessage({type:"STATUS",payload:"ang ti YOLO...",code:"yoloLoading"});try{Z.wasm.wasmPaths="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.17.0/dist/",Z.wasm.numThreads=1,Z.wasm.simd=!1;const eu=CONFIG.YOLO.MODEL_PATH,Ta=self.location.origin||"",Aa=eu.startsWith("/")?Ta+eu:eu,ka=eu.split("/").pop();console.log("Attempting to load YOLO model from:",Aa),console.log("Worker origin:",self.location.origin);let ru=null;const nu=[Aa,eu,`./models/${ka}`],su=async uu=>ba(Sd.create(uu,{executionProviders:["wasm"],graphOptimizationLevel:"basic"}),3e4,`YOLO model from ${uu}`);for(const uu of nu)try{console.log("Trying to load from:",uu),yoloSession=await su(uu),console.log(" Successfully loaded from:",uu),ru=null;break}catch(cu){console.warn("Failed to load from",uu,":",cu.message),ru=cu}if(ru)throw ru;console.log(" YOLO model loaded successfully!"),console.log("Input names:",yoloSession.inputNames),console.log("Output names:",yoloSession.outputNames),yoloSession.inputNames&&yoloSession.inputNames.length>0&&(console.log("Model is ready for inference with custom trained classes:",CONFIG.YOLO.CLASSES),console.log("Confidence threshold:",CONFIG.YOLO.CONFIDENCE_THRESHOLD))}catch(eu){console.warn("YOLO model not available"),console.warn("Error details:",eu.message),console.warn("Stack:",eu.stack)}isInitialized=!0,wa&&yoloSession?self.postMessage({type:"STATUS",payload:"AI proctoring active (Face + YOLO)",code:"monitoring"}):wa?self.postMessage({type:"STATUS",payload:"Face monitoring active (YOLO unavailable)",code:"faceOnly"}):yoloSession?self.postMessage({type:"STATUS",payload:"Object detection active (Face detection unavailable)",code:"yoloOnly"}):self.postMessage({type:"STATUS",payload:"AI monitoring active (basic mode)",code:"basicMode"})}catch(xa){console.error("AI initialization error:",xa),self.postMessage({type:"STATUS",payload:"AI monitoring active (basic mode)",code:"basicMode"}),isInitialized=!0}}function extractHeadPose(oa,ba){if(!oa||oa.length<CONFIG.FACE.MIN_LANDMARKS_FOR_POSE)return{yaw:0,pitch:0,roll:0,isValid:!1};if(ba){const ru=ba.data,nu=Math.atan2(ru[8],ru[10]),su=Math.asin(-ru[9]),uu=Math.atan2(ru[1],ru[5]);return{yaw:nu,pitch:su,roll:uu,isValid:!0}}const wa=oa[1],xa=oa[33],Sa=oa[263],va=oa[152],Ea=oa[10],La={x:(xa.x+Sa.x)/2,y:(xa.y+Sa.y)/2},eu=(wa.x-La.x)*2,Ta=Math.abs(va.y-Ea.y),ka=((wa.y-Ea.y)/Ta-.5)*2;return{yaw:eu,pitch:ka,roll:0,isValid:!0}}function analyzeEyeGaze(oa){if(!oa||oa.length<478)return{isLookingAway:!1,direction:null};const ba=oa[468],wa=oa[473],xa=oa[133],Sa=oa[33],va=oa[362],Ea=oa[263],La=Math.abs(Sa.x-xa.x),eu=Math.abs(Ea.x-va.x),Ta=(xa.x+Sa.x)/2,Aa=(va.x+Ea.x)/2,ka=(ba.x-Ta)/La,ru=(wa.x-Aa)/eu,nu=(ka+ru)/2;let su=null,uu=!1;return nu>CONFIG.FACE.EYE_GAZE_THRESHOLD?(su="right",uu=!0):nu<-.15&&(su="left",uu=!0),{isLookingAway:uu,direction:su,gazeOffset:nu}}function analyzeLipMovement(oa){if(!oa||oa.length<400)return{isSpeaking:!1,lipDistance:0};const ba=oa[13],wa=oa[14],xa=Math.abs(ba.y-wa.y);if(lipMovementHistory.push(xa),lipMovementHistory.length>CONFIG.ADVANCED.LIP_MOVEMENT_FRAMES&&lipMovementHistory.shift(),lipMovementHistory.length>=3){const va=lipMovementHistory.reduce((La,eu)=>La+eu,0)/lipMovementHistory.length;lipMovementHistory.reduce((La,eu)=>La+Math.pow(eu-va,2),0)/lipMovementHistory.length>CONFIG.FACE.LIP_MOVEMENT_THRESHOLD?speakingFrameCount++:speakingFrameCount=Math.max(0,speakingFrameCount-1)}return{isSpeaking:speakingFrameCount>=CONFIG.ADVANCED.LIP_ALERT_THRESHOLD,lipDistance:xa,speakingFrameCount}}function analyzeBlinking(oa){if(!oa||oa.length<400)return{isBlink:!1,eyeAspectRatio:0};const ba=oa[33],wa=oa[160],xa=oa[158],Sa=oa[133],va=oa[153],Ea=oa[144],La=oa[362],eu=oa[385],Ta=oa[387],Aa=oa[263],ka=oa[373],ru=oa[380],nu=calculateEAR(ba,wa,xa,Sa,va,Ea),su=calculateEAR(La,eu,Ta,Aa,ka,ru),uu=(nu+su)/2,cu=uu<CONFIG.FACE.BLINK_THRESHOLD&&lastEyeAspectRatio>=CONFIG.FACE.BLINK_THRESHOLD,gu=Date.now();cu&&(blinkHistory.push(gu),blinkHistory=blinkHistory.filter(mu=>gu-mu<CONFIG.ADVANCED.BLINK_RATE_WINDOW)),lastEyeAspectRatio=uu;const hu=blinkHistory.length/CONFIG.ADVANCED.BLINK_RATE_WINDOW*6e4;return{isBlink:cu,eyeAspectRatio:uu,blinkRate:hu,isAbnormalBlinkRate:hu<CONFIG.ADVANCED.ABNORMAL_BLINK_RATE_LOW||hu>CONFIG.ADVANCED.ABNORMAL_BLINK_RATE_HIGH}}function calculateEAR(oa,ba,wa,xa,Sa,va){const Ea=Math.sqrt(Math.pow(ba.x-va.x,2)+Math.pow(ba.y-va.y,2)),La=Math.sqrt(Math.pow(wa.x-Sa.x,2)+Math.pow(wa.y-Sa.y,2)),eu=Math.sqrt(Math.pow(oa.x-xa.x,2)+Math.pow(oa.y-xa.y,2));return eu===0?0:(Ea+La)/(2*eu)}async function processFrame(oa){var Sa;if(!isInitialized){Math.random()<.02&&self.postMessage({type:"ALERT",payload:"LOOK_AT_SCREEN",code:"lookAtScreen"});return}const ba=Date.now();let wa=!1,xa="";if(faceLandmarker)try{const va=await createImageBitmap(oa),Ea=faceLandmarker.detect(va);if(va.close(),Ea.faceLandmarks.length===0)suspiciousFrameCount++,suspiciousFrameCount>=CONFIG.FACE.CONSECUTIVE_FRAMES&&(wa=!0,xa="NO_FACE");else{const La=Ea.faceLandmarks[0],eu=(Sa=Ea.facialTransformationMatrixes)==null?void 0:Sa[0],Ta=extractHeadPose(La,eu);Ta.isValid&&(Math.abs(Ta.yaw)>CONFIG.FACE.YAW_THRESHOLD?(suspiciousFrameCount++,suspiciousFrameCount>=CONFIG.FACE.CONSECUTIVE_FRAMES&&(wa=!0,xa=Ta.yaw>0?"LOOK_RIGHT":"LOOK_LEFT")):Math.abs(Ta.pitch)>CONFIG.FACE.PITCH_THRESHOLD?(suspiciousFrameCount++,suspiciousFrameCount>=CONFIG.FACE.CONSECUTIVE_FRAMES&&(wa=!0,xa=Ta.pitch>0?"LOOK_DOWN":"LOOK_UP")):suspiciousFrameCount=Math.max(0,suspiciousFrameCount-1));const Aa=analyzeEyeGaze(La);Aa.isLookingAway&&ba-lastEyeGazeAlert>8e3&&(self.postMessage({type:"GAZE_AWAY",payload:Aa.direction==="left"?"GAZE_LEFT":"GAZE_RIGHT",direction:Aa.direction}),lastEyeGazeAlert=ba),analyzeLipMovement(La).isSpeaking&&ba-lastAlertTime>1e4&&(self.postMessage({type:"ALERT",payload:"SPEAKING_DETECTED",code:"speakingDetected"}),lastAlertTime=ba);const ru=analyzeBlinking(La);ru.isAbnormalBlinkRate&&blinkHistory.length>10&&console.log("Abnormal blink rate detected:",ru.blinkRate,"bpm")}}catch(va){console.warn("Face detection error:",va)}if((!self.lastYoloStatusLog||ba-self.lastYoloStatusLog>5e3)&&(self.lastYoloStatusLog=ba,console.log(` YOLO Debug: session=${!!yoloSession}, timeSinceLastRun=${ba-lastYoloRunTime}ms, throttle=${YOLO_THROTTLE_MS}ms`)),yoloSession&&ba-lastYoloRunTime>=YOLO_THROTTLE_MS){lastYoloRunTime=ba;try{const va=await runYoloInference(oa);if((!self.lastDetectionLog||ba-self.lastDetectionLog>3e3)&&(self.lastDetectionLog=ba,console.log(` YOLO running: ${va.length} detections (threshold: ${CONFIG.YOLO.CONFIDENCE_THRESHOLD})`),maxScorePerClassPersistent)){const Ea=CONFIG.YOLO.CLASSES.map((La,eu)=>{const Ta=eu<maxScorePerClassPersistent.length?maxScorePerClassPersistent[eu]:0;return`${La}: ${(Ta*100).toFixed(1)}%`}).join(", ");console.log(` Max scores seen: ${Ea}`)}if(va.length>0){const Ea=va.filter(La=>CONFIG.YOLO.ALERT_CLASSES.includes(La.class));Ea.length>0&&console.log(" YOLO Alert Detections:",Ea.map(La=>`${La.class} (${(La.confidence*100).toFixed(1)}%)`))}CONFIG.YOLO.MULTI_PERSON_ALERT;for(const Ea of va)if(CONFIG.YOLO.ALERT_CLASSES.includes(Ea.class)){const La=lastAlertTimePerClass[Ea.class]||0;ba-La>8e3&&(lastAlertTimePerClass[Ea.class]=ba,self.postMessage({type:"ALERT",payload:Ea.class.toUpperCase()+"_DETECTED",code:Ea.class+"Detected",detectedClass:Ea.class,confidence:Ea.confidence}),lastAlertTime=ba,self.postMessage({type:"STATUS",payload:`DETECTION_${Ea.class.toUpperCase()}`,code:"detection",detectedClass:Ea.class,confidence:Ea.confidence}))}}catch(va){console.warn("YOLO inference error:",va)}}wa&&suspiciousFrameCount===CONFIG.FACE.CONSECUTIVE_FRAMES&&(self.postMessage({type:"GAZE_AWAY",payload:xa,code:xa}),suspiciousFrameCount>=CONFIG.FACE.CONSECUTIVE_FRAMES*2&&ba-lastAlertTime>5e3&&(self.postMessage({type:"ALERT",payload:xa,code:xa}),lastAlertTime=ba)),Math.random()<.01&&self.postMessage({type:"STATUS",payload:"MONITORING",code:"monitoring"})}async function runYoloInference(oa){if(!yoloSession)return[];try{const{width:ba,height:wa,data:xa}=oa,Sa=CONFIG.YOLO.INPUT_SIZE,va=new Float32Array(3*Sa*Sa),Ea=ba/Sa,La=wa/Sa;for(let uu=0;uu<Sa;uu++)for(let cu=0;cu<Sa;cu++){const gu=Math.min(Math.floor(cu*Ea),ba-1),mu=(Math.min(Math.floor(uu*La),wa-1)*ba+gu)*4,Ou=xa[mu]/255,uh=xa[mu+1]/255,bd=xa[mu+2]/255;va[0*Sa*Sa+uu*Sa+cu]=Ou,va[1*Sa*Sa+uu*Sa+cu]=uh,va[2*Sa*Sa+uu*Sa+cu]=bd}const eu=new Re("float32",va,[1,3,Sa,Sa]),Aa={[yoloSession.inputNames[0]||"images"]:eu},ka=await yoloSession.run(Aa),ru=yoloSession.outputNames[0]||"output0",nu=ka[ru];return nu?(self.loggedOutputInfo||(console.log("YOLO inference output:",{outputNames:yoloSession.outputNames,outputDims:nu.dims,numElements:nu.data.length}),self.loggedOutputInfo=!0),parseYoloOutput(nu.data,nu.dims,ba,wa)):(console.warn("No output tensor found"),[])}catch(ba){return console.error("YOLO inference error:",ba),[]}}function parseYoloOutput(oa,ba,wa,xa){const Sa=[],va=CONFIG.YOLO.CLASSES.length,Ea=CONFIG.YOLO.INPUT_SIZE,La=CONFIG.YOLO.MASK_COEFFICIENTS;if(self.loggedDims||(console.log(" YOLO Output dimensions:",ba),console.log("   Expected classes:",va,"("+CONFIG.YOLO.CLASSES.join(", ")+")"),console.log("   Expected detect channels:",4+va),console.log("   Expected seg channels:",4+va+La),self.loggedDims=!0),maxScorePerClassPersistent||(maxScorePerClassPersistent=new Array(va).fill(0)),ba.length===3){const eu=ba[1],Ta=ba[2],Aa=4+va,ka=4+va+La;self.loggedFormat||(console.log("   Actual dims: [1,",eu,",",Ta,"]"),console.log("   Determining format..."),self.loggedFormat=!0);let ru=!1,nu,su;if(eu===Aa||eu===ka)ru=!0,nu=eu,su=Ta,self.loggedFormatResult||(console.log("    Detected transposed format: [1, channels, numBoxes]"),console.log("   Channels:",nu,"NumBoxes:",su),self.loggedFormatResult=!0);else if(Ta===Aa||Ta===ka)ru=!1,nu=Ta,su=eu,self.loggedFormatResult||(console.log("    Detected standard format: [1, numBoxes, channels]"),self.loggedFormatResult=!0);else if(eu<Ta&&eu<=100)ru=!0,nu=eu,su=Ta,self.loggedFormatResult||(console.log("    Inferred transposed format from size ratio"),console.log("   Channels:",nu,"NumBoxes:",su),self.loggedFormatResult=!0);else if(Ta<eu&&Ta<=100)ru=!1,nu=Ta,su=eu,self.loggedFormatResult||(console.log("    Inferred standard format from size ratio"),self.loggedFormatResult=!0);else return console.warn(` Cannot determine YOLO format. Dims: [1, ${eu}, ${Ta}]`),console.warn(`   Expected detect channels: ${Aa}, seg channels: ${ka}`),[];let uu=!1;for(let cu=0;cu<su;cu++){let gu,hu,mu,Ou,uh=[];if(ru){gu=oa[0*su+cu],hu=oa[1*su+cu],mu=oa[2*su+cu],Ou=oa[3*su+cu];for(let _h=0;_h<va;_h++){const Lu=oa[(4+_h)*su+cu];uh.push(sigmoid(Lu))}}else{const _h=cu*nu;gu=oa[_h+0],hu=oa[_h+1],mu=oa[_h+2],Ou=oa[_h+3];for(let Lu=0;Lu<va;Lu++){const Td=oa[_h+4+Lu];uh.push(sigmoid(Td))}}!uu&&cu<5&&Math.max(...uh)>.001&&(console.log(`   Box[${cu}]: cx=${gu.toFixed(1)}, cy=${hu.toFixed(1)}, w=${mu.toFixed(1)}, h=${Ou.toFixed(1)}, scores=[${uh.map(Lu=>(Lu*100).toFixed(1)+"%").join(", ")}]`),uu=!0);let bd=0,Fd=0;for(let _h=0;_h<va;_h++)uh[_h]>bd&&(bd=uh[_h],Fd=_h),maxScorePerClassPersistent&&_h<maxScorePerClassPersistent.length&&uh[_h]>maxScorePerClassPersistent[_h]&&(maxScorePerClassPersistent[_h]=uh[_h]);if(bd>=CONFIG.YOLO.CONFIDENCE_THRESHOLD){const _h=wa/Ea,Lu=xa/Ea;Sa.push({class:CONFIG.YOLO.CLASSES[Fd],confidence:bd,box:{x:(gu-mu/2)*_h,y:(hu-Ou/2)*Lu,width:mu*_h,height:Ou*Lu}})}}if(maxScorePerClassPersistent&&(!self.lastMaxScoreLog||Date.now()-self.lastMaxScoreLog>1e4)){self.lastMaxScoreLog=Date.now();const cu=CONFIG.YOLO.CLASSES.map((gu,hu)=>{const mu=hu<maxScorePerClassPersistent.length?maxScorePerClassPersistent[hu]:0;return`${gu}: ${(mu*100).toFixed(2)}%`}).join(", ");console.log(" YOLO Max scores per class:",cu),Sa.length>0&&console.log("   Detections found:",Sa.length)}}else if(ba.length===2){const eu=ba[0],Ta=ba[1];for(let Aa=0;Aa<eu;Aa++){const ka=Aa*Ta,ru=oa[ka+0],nu=oa[ka+1],su=oa[ka+2],uu=oa[ka+3];let cu=[];for(let mu=0;mu<va;mu++){const Ou=oa[ka+4+mu];cu.push(sigmoid(Ou))}let gu=0,hu=0;for(let mu=0;mu<va;mu++)cu[mu]>gu&&(gu=cu[mu],hu=mu);if(gu>=CONFIG.YOLO.CONFIDENCE_THRESHOLD){const mu=wa/Ea,Ou=xa/Ea;Sa.push({class:CONFIG.YOLO.CLASSES[hu],confidence:gu,box:{x:(ru-su/2)*mu,y:(nu-uu/2)*Ou,width:su*mu,height:uu*Ou}})}}}else return console.warn(" Unexpected dims length:",ba.length,ba),[];return nonMaxSuppression(Sa,CONFIG.YOLO.IOU_THRESHOLD)}function nonMaxSuppression(oa,ba){if(oa.length===0)return[];oa.sort((Sa,va)=>va.confidence-Sa.confidence);const wa=[],xa=new Set;for(let Sa=0;Sa<oa.length;Sa++)if(!xa.has(Sa)){wa.push(oa[Sa]);for(let va=Sa+1;va<oa.length;va++){if(xa.has(va)||oa[Sa].class!==oa[va].class)continue;calculateIoU(oa[Sa].box,oa[va].box)>ba&&xa.add(va)}}return wa}function calculateIoU(oa,ba){const wa=Math.max(oa.x,ba.x),xa=Math.max(oa.y,ba.y),Sa=Math.min(oa.x+oa.width,ba.x+ba.width),va=Math.min(oa.y+oa.height,ba.y+ba.height),Ea=Math.max(0,Sa-wa)*Math.max(0,va-xa),La=oa.width*oa.height,eu=ba.width*ba.height,Ta=La+eu-Ea;return Ea/Ta}self.onmessage=async oa=>{const{type:ba,payload:wa}=oa.data;ba==="INIT"?await initializeAI():ba==="PROCESS_FRAME"&&await processFrame(wa)},initializeAI()})();
